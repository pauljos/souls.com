import{r as yg,a as xg,L as ji,b,u as ol,c as bg,B as vg,R as jg,d as ei,N as Sg}from"./react-vendor-Dqf2LXFM.js";import{_ as wg,C as Cg,r as Lm,a as Ag,g as Dg,b as Tg,c as nc,d as zg,i as th,p as Bg,u as kg,F as Rg,e as Eg,f as Mg,h as Ng,j as Me,k as Vt,l as Ce,q as ze,w as ce,m as Pe,n as ci,o as Pr,s as Ir,t as Ft,v as ti,x as Hg,y as Ug,z as Pm,A as Im,B as Og,D as Lg,E as Pg,G as fa,T as _r,H as ga,I as Jd,J as Ig}from"./firebase-p-DgfaJy.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function u(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(f){if(f.ep)return;f.ep=!0;const g=u(f);fetch(f.href,g)}})();var Yd={exports:{}},zo={};var _m;function _g(){if(_m)return zo;_m=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function u(c,f,g){var x=null;if(g!==void 0&&(x=""+g),f.key!==void 0&&(x=""+f.key),"key"in f){g={};for(var y in f)y!=="key"&&(g[y]=f[y])}else g=f;return f=g.ref,{$$typeof:r,type:c,key:x,ref:f!==void 0?f:null,props:g}}return zo.Fragment=s,zo.jsx=u,zo.jsxs=u,zo}var qm;function qg(){return qm||(qm=1,Yd.exports=_g()),Yd.exports}var t=qg(),Fd={exports:{}},Bo={},Vd={exports:{}},Qd={};var Gm;function Gg(){return Gm||(Gm=1,(function(r){function s(q,se){var xe=q.length;q.push(se);e:for(;0<xe;){var lt=xe-1>>>1,Y=q[lt];if(0<f(Y,se))q[lt]=se,q[xe]=Y,xe=lt;else break e}}function u(q){return q.length===0?null:q[0]}function c(q){if(q.length===0)return null;var se=q[0],xe=q.pop();if(xe!==se){q[0]=xe;e:for(var lt=0,Y=q.length,Ae=Y>>>1;lt<Ae;){var ge=2*(lt+1)-1,ae=q[ge],ke=ge+1,nt=q[ke];if(0>f(ae,xe))ke<Y&&0>f(nt,ae)?(q[lt]=nt,q[ke]=xe,lt=ke):(q[lt]=ae,q[ge]=xe,lt=ge);else if(ke<Y&&0>f(nt,xe))q[lt]=nt,q[ke]=xe,lt=ke;else break e}}return se}function f(q,se){var xe=q.sortIndex-se.sortIndex;return xe!==0?xe:q.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;r.unstable_now=function(){return g.now()}}else{var x=Date,y=x.now();r.unstable_now=function(){return x.now()-y}}var S=[],j=[],A=1,U=null,R=3,he=!1,I=!1,J=!1,W=!1,pe=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function re(q){for(var se=u(j);se!==null;){if(se.callback===null)c(j);else if(se.startTime<=q)c(j),se.sortIndex=se.expirationTime,s(S,se);else break;se=u(j)}}function z(q){if(J=!1,re(q),!I)if(u(S)!==null)I=!0,Xe||(Xe=!0,ye());else{var se=u(j);se!==null&&qe(z,se.startTime-q)}}var Xe=!1,ct=-1,X=5,ue=-1;function P(){return W?!0:!(r.unstable_now()-ue<X)}function tt(){if(W=!1,Xe){var q=r.unstable_now();ue=q;var se=!0;try{e:{I=!1,J&&(J=!1,E(ct),ct=-1),he=!0;var xe=R;try{t:{for(re(q),U=u(S);U!==null&&!(U.expirationTime>q&&P());){var lt=U.callback;if(typeof lt=="function"){U.callback=null,R=U.priorityLevel;var Y=lt(U.expirationTime<=q);if(q=r.unstable_now(),typeof Y=="function"){U.callback=Y,re(q),se=!0;break t}U===u(S)&&c(S),re(q)}else c(S);U=u(S)}if(U!==null)se=!0;else{var Ae=u(j);Ae!==null&&qe(z,Ae.startTime-q),se=!1}}break e}finally{U=null,R=xe,he=!1}se=void 0}}finally{se?ye():Xe=!1}}}var ye;if(typeof de=="function")ye=function(){de(tt)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,bt=at.port2;at.port1.onmessage=tt,ye=function(){bt.postMessage(null)}}else ye=function(){pe(tt,0)};function qe(q,se){ct=pe(function(){q(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(q){switch(R){case 1:case 2:case 3:var se=3;break;default:se=R}var xe=R;R=se;try{return q()}finally{R=xe}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(q,se){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var xe=R;R=q;try{return se()}finally{R=xe}},r.unstable_scheduleCallback=function(q,se,xe){var lt=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?lt+xe:lt):xe=lt,q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=xe+Y,q={id:A++,callback:se,priorityLevel:q,startTime:xe,expirationTime:Y,sortIndex:-1},xe>lt?(q.sortIndex=xe,s(j,q),u(S)===null&&q===u(j)&&(J?(E(ct),ct=-1):J=!0,qe(z,xe-lt))):(q.sortIndex=Y,s(S,q),I||he||(I=!0,Xe||(Xe=!0,ye()))),q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(q){var se=R;return function(){var xe=R;R=se;try{return q.apply(this,arguments)}finally{R=xe}}}})(Qd)),Qd}var Wm;function Wg(){return Wm||(Wm=1,Vd.exports=Gg()),Vd.exports}var Ym;function Yg(){if(Ym)return Bo;Ym=1;var r=Wg(),s=yg(),u=xg();function c(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function x(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(g(e)!==e)throw Error(c(188))}function j(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(c(188));return n!==e?null:e}for(var i=e,a=n;;){var l=i.return;if(l===null)break;var o=l.alternate;if(o===null){if(a=l.return,a!==null){i=a;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===i)return S(l),e;if(o===a)return S(l),n;o=o.sibling}throw Error(c(188))}if(i.return!==a.return)i=l,a=o;else{for(var d=!1,p=l.child;p;){if(p===i){d=!0,i=l,a=o;break}if(p===a){d=!0,a=l,i=o;break}p=p.sibling}if(!d){for(p=o.child;p;){if(p===i){d=!0,i=o,a=l;break}if(p===a){d=!0,a=o,i=l;break}p=p.sibling}if(!d)throw Error(c(189))}}if(i.alternate!==a)throw Error(c(190))}if(i.tag!==3)throw Error(c(188));return i.stateNode.current===i?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var U=Object.assign,R=Symbol.for("react.element"),he=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),de=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function ye(e){return e===null||typeof e!="object"?null:(e=tt&&e[tt]||e["@@iterator"],typeof e=="function"?e:null)}var at=Symbol.for("react.client.reference");function bt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===at?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case pe:return"Profiler";case W:return"StrictMode";case z:return"Suspense";case Xe:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case de:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case re:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ct:return n=e.displayName||null,n!==null?n:bt(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return bt(e(n))}catch{}}return null}var qe=Array.isArray,q=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},lt=[],Y=-1;function Ae(e){return{current:e}}function ge(e){0>Y||(e.current=lt[Y],lt[Y]=null,Y--)}function ae(e,n){Y++,lt[Y]=e.current,e.current=n}var ke=Ae(null),nt=Ae(null),Ye=Ae(null),ft=Ae(null);function pn(e,n){switch(ae(Ye,n),ae(nt,e),ae(ke,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?rm(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=rm(n),e=sm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ge(ke),ae(ke,e)}function kt(){ge(ke),ge(nt),ge(Ye)}function ln(e){e.memoizedState!==null&&ae(ft,e);var n=ke.current,i=sm(n,e.type);n!==i&&(ae(nt,e),ae(ke,i))}function Nt(e){nt.current===e&&(ge(ke),ge(nt)),ft.current===e&&(ge(ft),Co._currentValue=xe)}var yn,wt;function k(e){if(yn===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);yn=n&&n[1]||"",wt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yn+e+wt}var De=!1;function je(e,n){if(!e||De)return"";De=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(_){var L=_}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(_){L=_}e.call(ne.prototype)}}else{try{throw Error()}catch(_){L=_}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(_){if(_&&L&&typeof _.stack=="string")return[_.stack,L.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=a.DetermineComponentFrameRoot(),d=o[0],p=o[1];if(d&&p){var w=d.split(`
`),H=p.split(`
`);for(l=a=0;a<w.length&&!w[a].includes("DetermineComponentFrameRoot");)a++;for(;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;if(a===w.length||l===H.length)for(a=w.length-1,l=H.length-1;1<=a&&0<=l&&w[a]!==H[l];)l--;for(;1<=a&&0<=l;a--,l--)if(w[a]!==H[l]){if(a!==1||l!==1)do if(a--,l--,0>l||w[a]!==H[l]){var Q=`
`+w[a].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=a&&0<=l);break}}}finally{De=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?k(i):""}function Ge(e,n){switch(e.tag){case 26:case 27:case 5:return k(e.type);case 16:return k("Lazy");case 13:return e.child!==n&&n!==null?k("Suspense Fallback"):k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return je(e.type,!1);case 11:return je(e.type.render,!1);case 1:return je(e.type,!0);case 31:return k("Activity");default:return""}}function Fe(e){try{var n="",i=null;do n+=Ge(e,i),i=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var An=Object.prototype.hasOwnProperty,qn=r.unstable_scheduleCallback,fe=r.unstable_cancelCallback,xn=r.unstable_shouldYield,Ei=r.unstable_requestPaint,Ht=r.unstable_now,Qt=r.unstable_getCurrentPriorityLevel,Vn=r.unstable_ImmediatePriority,vt=r.unstable_UserBlockingPriority,Qn=r.unstable_NormalPriority,Ut=r.unstable_LowPriority,sn=r.unstable_IdlePriority,M=r.log,ee=r.unstable_setDisableYieldValue,Se=null,we=null;function be(e){if(typeof M=="function"&&ee(e),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Se,e)}catch{}}var Re=Math.clz32?Math.clz32:dn,Ct=Math.log,Nn=Math.LN2;function dn(e){return e>>>=0,e===0?32:31-(Ct(e)/Nn|0)|0}var Gn=256,Rt=262144,on=4194304;function bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bn(e,n,i){var a=e.pendingLanes;if(a===0)return 0;var l=0,o=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var p=a&134217727;return p!==0?(a=p&~o,a!==0?l=bn(a):(d&=p,d!==0?l=bn(d):i||(i=p&~e,i!==0&&(l=bn(i))))):(p=a&~o,p!==0?l=bn(p):d!==0?l=bn(d):i||(i=a&~e,i!==0&&(l=bn(i)))),l===0?0:n!==0&&n!==l&&(n&o)===0&&(o=l&-l,i=n&-n,o>=i||o===32&&(i&4194048)!==0)?n:l}function Ze(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ni(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var e=on;return on<<=1,(on&62914560)===0&&(on=4194304),e}function Xt(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Ot(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $e(e,n,i,a,l,o){var d=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,w=e.expirationTimes,H=e.hiddenUpdates;for(i=d&~i;0<i;){var Q=31-Re(i),ne=1<<Q;p[Q]=0,w[Q]=-1;var L=H[Q];if(L!==null)for(H[Q]=null,Q=0;Q<L.length;Q++){var _=L[Q];_!==null&&(_.lane&=-536870913)}i&=~ne}a!==0&&C(e,a,0),o!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=o&~(d&~n))}function C(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-Re(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|i&261930}function O(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var a=31-Re(i),l=1<<a;l&n|e[a]&n&&(e[a]|=n),i&=~l}}function G(e,n){var i=n&-n;return i=(i&42)!==0?1:ie(i),(i&(e.suspendedLanes|n))!==0?0:i}function ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function He(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Rm(e.type))}function At(e,n){var i=se.p;try{return se.p=e,n()}finally{se.p=i}}var Ve=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Ve,Kt="__reactProps$"+Ve,Si="__reactContainer$"+Ve,Je="__reactEvents$"+Ve,Wn="__reactListeners$"+Ve,St="__reactHandles$"+Ve,Xn="__reactResources$"+Ve,Kn="__reactMarker$"+Ve;function Mi(e){delete e[Oe],delete e[Kt],delete e[Je],delete e[Wn],delete e[St]}function qi(e){var n=e[Oe];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Si]||i[Oe]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=fm(e);e!==null;){if(i=e[Oe])return i;e=fm(e)}return n}e=i,i=e.parentNode}return null}function Gi(e){if(e=e[Oe]||e[Si]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Zi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(c(33))}function Ni(e){var n=e[Xn];return n||(n=e[Xn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rn(e){e[Kn]=!0}var qa=new Set,ya={};function Hi(e,n){Wi(e,n),Wi(e+"Capture",n)}function Wi(e,n){for(ya[e]=n,e=0;e<n.length;e++)qa.add(n[e])}var te=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),v={},le={};function We(e){return An.call(le,e)?!0:An.call(v,e)?!1:te.test(e)?le[e]=!0:(v[e]=!0,!1)}function Lt(e,n,i){if(We(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Zt(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function qt(e,n,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+a)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function V(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function h(e,n,i){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,o=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(d){i=""+d,o.call(this,d)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function D(e){if(!e._valueTracker){var n=V(e)?"checked":"value";e._valueTracker=h(e,n,""+e[n])}}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),e=a,e!==i?(n.setValue(e),!0):!1}function me(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oe=/[\n"\\]/g;function ve(e){return e.replace(oe,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ie(e,n,i,a,l,o,d,p){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),n!=null?d==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+zt(n)):e.value!==""+zt(n)&&(e.value=""+zt(n)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),n!=null?pt(e,d,zt(n)):i!=null?pt(e,d,zt(i)):a!=null&&e.removeAttribute("value"),l==null&&o!=null&&(e.defaultChecked=!!o),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+zt(p):e.removeAttribute("name")}function Qe(e,n,i,a,l,o,d,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),n!=null||i!=null){if(!(o!=="submit"&&o!=="reset"||n!=null)){D(e);return}i=i!=null?""+zt(i):"",n=n!=null?""+zt(n):i,p||n===e.value||(e.value=n),e.defaultValue=n}a=a??l,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=p?e.checked:!!a,e.defaultChecked=!!a,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),D(e)}function pt(e,n,i){n==="number"&&me(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ot(e,n,i,a){if(e=e.options,n){n={};for(var l=0;l<i.length;l++)n["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=n.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&a&&(e[i].defaultSelected=!0)}else{for(i=""+zt(i),n=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}n!==null||e[l].disabled||(n=e[l])}n!==null&&(n.selected=!0)}}function Le(e,n,i){if(n!=null&&(n=""+zt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+zt(i):""}function rt(e,n,i,a){if(n==null){if(a!=null){if(i!=null)throw Error(c(92));if(qe(a)){if(1<a.length)throw Error(c(93));a=a[0]}i=a}i==null&&(i=""),n=i}i=zt(n),e.defaultValue=i,a=e.textContent,a===i&&a!==""&&a!==null&&(e.value=a),D(e)}function ut(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var mn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jt(e,n,i){var a=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,i):typeof i!="number"||i===0||mn.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Dn(e,n,i){if(n!=null&&typeof n!="object")throw Error(c(62));if(e=e.style,i!=null){for(var a in i)!i.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var l in n)a=n[l],n.hasOwnProperty(l)&&i[l]!==a&&Jt(e,l,a)}else for(var o in n)n.hasOwnProperty(o)&&Jt(e,o,n[o])}function kn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fn(e){return Yn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Hn(){}var En=null;function ii(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Zn=null;function hn(e){var n=Gi(e);if(n&&(e=n.stateNode)){var i=e[Kt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ie(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ve(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var a=i[n];if(a!==e&&a.form===e.form){var l=a[Kt]||null;if(!l)throw Error(c(90));Ie(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(n=0;n<i.length;n++)a=i[n],a.form===e.form&&K(a)}break e;case"textarea":Le(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&ot(e,!!i.multiple,n,!1)}}}var mi=!1;function rl(e,n,i){if(mi)return e(n,i);mi=!0;try{var a=e(n);return a}finally{if(mi=!1,(pi!==null||Zn!==null)&&(gr(),pi&&(n=pi,e=Zn,Zn=pi=null,hn(n),e)))for(n=0;n<e.length;n++)hn(e[n])}}function Ui(e,n){var i=e.stateNode;if(i===null)return null;var a=i[Kt]||null;if(a===null)return null;i=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(c(231,n,typeof i));return i}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ji=!1;if(Jn)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Ji=!1}var Oi=null,sl=null,Ga=null;function Eo(){if(Ga)return Ga;var e,n=sl,i=n.length,a,l="value"in Oi?Oi.value:Oi.textContent,o=l.length;for(e=0;e<i&&n[e]===l[e];e++);var d=i-e;for(a=1;a<=d&&n[i-a]===l[o-a];a++);return Ga=l.slice(e,1<a?1-a:void 0)}function xa(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function dl(){return!0}function cl(){return!1}function Un(e){function n(i,a,l,o,d){this._reactName=i,this._targetInst=l,this.type=a,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dl:cl,this.isPropagationStopped=cl,this}return U(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),n}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ke=Un(Fi),vn=U({},Fi,{view:0,detail:0}),Mo=Un(vn),Vr,Qr,Gl,No=U({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(Vr=e.screenX-Gl.screenX,Qr=e.screenY-Gl.screenY):Qr=Vr=0,Gl=e),Vr)},movementY:function(e){return"movementY"in e?e.movementY:Qr}}),cc=Un(No),fh=U({},No,{dataTransfer:0}),gh=Un(fh),yh=U({},vn,{relatedTarget:0}),Xr=Un(yh),xh=U({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=Un(xh),vh=U({},Fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jh=Un(vh),Sh=U({},Fi,{data:0}),uc=Un(Sh),wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ah[e])?!!n[e]:!1}function Kr(){return Dh}var Th=U({},vn,{key:function(e){if(e.key){var n=wh[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ch[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(e){return e.type==="keypress"?xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zh=Un(Th),Bh=U({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=Un(Bh),kh=U({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),Rh=Un(kh),Eh=U({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mh=Un(Eh),Nh=U({},No,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hh=Un(Nh),Uh=U({},Fi,{newState:0,oldState:0}),Oh=Un(Uh),Lh=[9,13,27,32],Zr=Jn&&"CompositionEvent"in window,Wl=null;Jn&&"documentMode"in document&&(Wl=document.documentMode);var Ph=Jn&&"TextEvent"in window&&!Wl,mc=Jn&&(!Zr||Wl&&8<Wl&&11>=Wl),hc=" ",fc=!1;function gc(e,n){switch(e){case"keyup":return Lh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ul=!1;function Ih(e,n){switch(e){case"compositionend":return yc(n);case"keypress":return n.which!==32?null:(fc=!0,hc);case"textInput":return e=n.data,e===hc&&fc?null:e;default:return null}}function _h(e,n){if(ul)return e==="compositionend"||!Zr&&gc(e,n)?(e=Eo(),Ga=sl=Oi=null,ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return mc&&n.locale!=="ko"?null:n.data;default:return null}}var qh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!qh[e.type]:n==="textarea"}function bc(e,n,i,a){pi?Zn?Zn.push(a):Zn=[a]:pi=a,n=wr(n,"onChange"),0<n.length&&(i=new Ke("onChange","change",null,i,a),e.push({event:i,listeners:n}))}var Yl=null,Fl=null;function Gh(e){tm(e,0)}function Ho(e){var n=Zi(e);if(K(n))return e}function vc(e,n){if(e==="change")return n}var jc=!1;if(Jn){var Jr;if(Jn){var $r="oninput"in document;if(!$r){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),$r=typeof Sc.oninput=="function"}Jr=$r}else Jr=!1;jc=Jr&&(!document.documentMode||9<document.documentMode)}function wc(){Yl&&(Yl.detachEvent("onpropertychange",Cc),Fl=Yl=null)}function Cc(e){if(e.propertyName==="value"&&Ho(Fl)){var n=[];bc(n,Fl,e,ii(e)),rl(Gh,n)}}function Wh(e,n,i){e==="focusin"?(wc(),Yl=n,Fl=i,Yl.attachEvent("onpropertychange",Cc)):e==="focusout"&&wc()}function Yh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho(Fl)}function Fh(e,n){if(e==="click")return Ho(n)}function Vh(e,n){if(e==="input"||e==="change")return Ho(n)}function Qh(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var hi=typeof Object.is=="function"?Object.is:Qh;function Vl(e,n){if(hi(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),a=Object.keys(n);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var l=i[a];if(!An.call(n,l)||!hi(e[l],n[l]))return!1}return!0}function Ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dc(e,n){var i=Ac(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=n&&a>=n)return{node:i,offset:n-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ac(i)}}function Tc(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Tc(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function zc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=me(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=me(e.document)}return n}function es(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Xh=Jn&&"documentMode"in document&&11>=document.documentMode,pl=null,ts=null,Ql=null,ns=!1;function Bc(e,n,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ns||pl==null||pl!==me(a)||(a=pl,"selectionStart"in a&&es(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ql&&Vl(Ql,a)||(Ql=a,a=wr(ts,"onSelect"),0<a.length&&(n=new Ke("onSelect","select",null,n,i),e.push({event:n,listeners:a}),n.target=pl)))}function Wa(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var ml={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},is={},kc={};Jn&&(kc=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Ya(e){if(is[e])return is[e];if(!ml[e])return e;var n=ml[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in kc)return is[e]=n[i];return e}var Rc=Ya("animationend"),Ec=Ya("animationiteration"),Mc=Ya("animationstart"),Kh=Ya("transitionrun"),Zh=Ya("transitionstart"),Jh=Ya("transitioncancel"),Nc=Ya("transitionend"),Hc=new Map,as="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");as.push("scrollEnd");function Li(e,n){Hc.set(e,n),Hi(n,[e])}var Uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wi=[],hl=0,ls=0;function Oo(){for(var e=hl,n=ls=hl=0;n<e;){var i=wi[n];wi[n++]=null;var a=wi[n];wi[n++]=null;var l=wi[n];wi[n++]=null;var o=wi[n];if(wi[n++]=null,a!==null&&l!==null){var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}o!==0&&Uc(i,l,o)}}function Lo(e,n,i,a){wi[hl++]=e,wi[hl++]=n,wi[hl++]=i,wi[hl++]=a,ls|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function os(e,n,i,a){return Lo(e,n,i,a),Po(e)}function Fa(e,n){return Lo(e,null,null,n),Po(e)}function Uc(e,n,i){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i);for(var l=!1,o=e.return;o!==null;)o.childLanes|=i,a=o.alternate,a!==null&&(a.childLanes|=i),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(l=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,l&&n!==null&&(l=31-Re(i),e=o.hiddenUpdates,a=e[l],a===null?e[l]=[n]:a.push(n),n.lane=i|536870912),o):null}function Po(e){if(50<yo)throw yo=0,fd=null,Error(c(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var fl={};function $h(e,n,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(e,n,i,a){return new $h(e,n,i,a)}function rs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $i(e,n){var i=e.alternate;return i===null?(i=fi(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Oc(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Io(e,n,i,a,l,o){var d=0;if(a=e,typeof e=="function")rs(e)&&(d=1);else if(typeof e=="string")d=lg(e,i,ke.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=fi(31,i,n,l),e.elementType=ue,e.lanes=o,e;case J:return Va(i.children,l,o,n);case W:d=8,l|=24;break;case pe:return e=fi(12,i,n,l|2),e.elementType=pe,e.lanes=o,e;case z:return e=fi(13,i,n,l),e.elementType=z,e.lanes=o,e;case Xe:return e=fi(19,i,n,l),e.elementType=Xe,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:d=10;break e;case E:d=9;break e;case re:d=11;break e;case ct:d=14;break e;case X:d=16,a=null;break e}d=29,i=Error(c(130,e===null?"null":typeof e,"")),a=null}return n=fi(d,i,n,l),n.elementType=e,n.type=a,n.lanes=o,n}function Va(e,n,i,a){return e=fi(7,e,a,n),e.lanes=i,e}function ss(e,n,i){return e=fi(6,e,null,n),e.lanes=i,e}function Lc(e){var n=fi(18,null,null,0);return n.stateNode=e,n}function ds(e,n,i){return n=fi(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pc=new WeakMap;function Ci(e,n){if(typeof e=="object"&&e!==null){var i=Pc.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Fe(n)},Pc.set(e,n),n)}return{value:e,source:n,stack:Fe(n)}}var gl=[],yl=0,_o=null,Xl=0,Ai=[],Di=0,ba=null,Vi=1,Qi="";function ea(e,n){gl[yl++]=Xl,gl[yl++]=_o,_o=e,Xl=n}function Ic(e,n,i){Ai[Di++]=Vi,Ai[Di++]=Qi,Ai[Di++]=ba,ba=e;var a=Vi;e=Qi;var l=32-Re(a)-1;a&=~(1<<l),i+=1;var o=32-Re(n)+l;if(30<o){var d=l-l%5;o=(a&(1<<d)-1).toString(32),a>>=d,l-=d,Vi=1<<32-Re(n)+l|i<<l|a,Qi=o+e}else Vi=1<<o|i<<l|a,Qi=e}function cs(e){e.return!==null&&(ea(e,1),Ic(e,1,0))}function us(e){for(;e===_o;)_o=gl[--yl],gl[yl]=null,Xl=gl[--yl],gl[yl]=null;for(;e===ba;)ba=Ai[--Di],Ai[Di]=null,Qi=Ai[--Di],Ai[Di]=null,Vi=Ai[--Di],Ai[Di]=null}function _c(e,n){Ai[Di++]=Vi,Ai[Di++]=Qi,Ai[Di++]=ba,Vi=n.id,Qi=n.overflow,ba=e}var On=null,$t=null,xt=!1,va=null,Ti=!1,ps=Error(c(519));function ja(e){var n=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(Ci(n,e)),ps}function qc(e){var n=e.stateNode,i=e.type,a=e.memoizedProps;switch(n[Oe]=e,n[Kt]=a,i){case"dialog":ht("cancel",n),ht("close",n);break;case"iframe":case"object":case"embed":ht("load",n);break;case"video":case"audio":for(i=0;i<bo.length;i++)ht(bo[i],n);break;case"source":ht("error",n);break;case"img":case"image":case"link":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"input":ht("invalid",n),Qe(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ht("invalid",n);break;case"textarea":ht("invalid",n),rt(n,a.value,a.defaultValue,a.children)}i=a.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||a.suppressHydrationWarning===!0||lm(n.textContent,i)?(a.popover!=null&&(ht("beforetoggle",n),ht("toggle",n)),a.onScroll!=null&&ht("scroll",n),a.onScrollEnd!=null&&ht("scrollend",n),a.onClick!=null&&(n.onclick=Hn),n=!0):n=!1,n||ja(e,!0)}function Gc(e){for(On=e.return;On;)switch(On.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:On=On.return}}function xl(e){if(e!==On)return!1;if(!xt)return Gc(e),xt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||kd(e.type,e.memoizedProps)),i=!i),i&&$t&&ja(e),Gc(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));$t=hm(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));$t=hm(e)}else n===27?(n=$t,Ha(e.type)?(e=Hd,Hd=null,$t=e):$t=n):$t=On?Bi(e.stateNode.nextSibling):null;return!0}function Qa(){$t=On=null,xt=!1}function ms(){var e=va;return e!==null&&(ri===null?ri=e:ri.push.apply(ri,e),va=null),e}function Kl(e){va===null?va=[e]:va.push(e)}var hs=Ae(null),Xa=null,ta=null;function Sa(e,n,i){ae(hs,n._currentValue),n._currentValue=i}function na(e){e._currentValue=hs.current,ge(hs)}function fs(e,n,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===i)break;e=e.return}}function gs(e,n,i,a){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){var d=l.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=l;for(var w=0;w<n.length;w++)if(p.context===n[w]){o.lanes|=i,p=o.alternate,p!==null&&(p.lanes|=i),fs(o.return,i,e),a||(d=null);break e}o=p.next}}else if(l.tag===18){if(d=l.return,d===null)throw Error(c(341));d.lanes|=i,o=d.alternate,o!==null&&(o.lanes|=i),fs(d,i,e),d=null}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}}function bl(e,n,i,a){e=null;for(var l=n,o=!1;l!==null;){if(!o){if((l.flags&524288)!==0)o=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var d=l.alternate;if(d===null)throw Error(c(387));if(d=d.memoizedProps,d!==null){var p=l.type;hi(l.pendingProps.value,d.value)||(e!==null?e.push(p):e=[p])}}else if(l===ft.current){if(d=l.alternate,d===null)throw Error(c(387));d.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Co):e=[Co])}l=l.return}e!==null&&gs(n,e,i,a),n.flags|=262144}function qo(e){for(e=e.firstContext;e!==null;){if(!hi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ka(e){Xa=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Wc(Xa,e)}function Go(e,n){return Xa===null&&Ka(e),Wc(e,n)}function Wc(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ta===null){if(e===null)throw Error(c(308));ta=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ta=ta.next=n;return i}var ef=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},tf=r.unstable_scheduleCallback,nf=r.unstable_NormalPriority,jn={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ys(){return{controller:new ef,data:new Map,refCount:0}}function Zl(e){e.refCount--,e.refCount===0&&tf(nf,function(){e.controller.abort()})}var Jl=null,xs=0,vl=0,jl=null;function af(e,n){if(Jl===null){var i=Jl=[];xs=0,vl=jd(),jl={status:"pending",value:void 0,then:function(a){i.push(a)}}}return xs++,n.then(Yc,Yc),n}function Yc(){if(--xs===0&&Jl!==null){jl!==null&&(jl.status="fulfilled");var e=Jl;Jl=null,vl=0,jl=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function lf(e,n){var i=[],a={status:"pending",value:null,reason:null,then:function(l){i.push(l)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var l=0;l<i.length;l++)(0,i[l])(n)},function(l){for(a.status="rejected",a.reason=l,l=0;l<i.length;l++)(0,i[l])(void 0)}),a}var Fc=q.S;q.S=function(e,n){Bp=Ht(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&af(e,n),Fc!==null&&Fc(e,n)};var Za=Ae(null);function bs(){var e=Za.current;return e!==null?e:Gt.pooledCache}function Wo(e,n){n===null?ae(Za,Za.current):ae(Za,n.pool)}function Vc(){var e=bs();return e===null?null:{parent:jn._currentValue,pool:e}}var Sl=Error(c(460)),vs=Error(c(474)),Yo=Error(c(542)),Fo={then:function(){}};function Qc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xc(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Hn,Hn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Zc(e),e;default:if(typeof n.status=="string")n.then(Hn,Hn);else{if(e=Gt,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var l=n;l.status="fulfilled",l.value=a}},function(a){if(n.status==="pending"){var l=n;l.status="rejected",l.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Zc(e),e}throw $a=n,Sl}}function Ja(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?($a=i,Sl):i}}var $a=null;function Kc(){if($a===null)throw Error(c(459));var e=$a;return $a=null,e}function Zc(e){if(e===Sl||e===Yo)throw Error(c(483))}var wl=null,$l=0;function Vo(e){var n=$l;return $l+=1,wl===null&&(wl=[]),Xc(wl,e,n)}function eo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Qo(e,n){throw n.$$typeof===R?Error(c(525)):(e=Object.prototype.toString.call(n),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Jc(e){function n(B,T){if(e){var N=B.deletions;N===null?(B.deletions=[T],B.flags|=16):N.push(T)}}function i(B,T){if(!e)return null;for(;T!==null;)n(B,T),T=T.sibling;return null}function a(B){for(var T=new Map;B!==null;)B.key!==null?T.set(B.key,B):T.set(B.index,B),B=B.sibling;return T}function l(B,T){return B=$i(B,T),B.index=0,B.sibling=null,B}function o(B,T,N){return B.index=N,e?(N=B.alternate,N!==null?(N=N.index,N<T?(B.flags|=67108866,T):N):(B.flags|=67108866,T)):(B.flags|=1048576,T)}function d(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function p(B,T,N,$){return T===null||T.tag!==6?(T=ss(N,B.mode,$),T.return=B,T):(T=l(T,N),T.return=B,T)}function w(B,T,N,$){var Ue=N.type;return Ue===J?Q(B,T,N.props.children,$,N.key):T!==null&&(T.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===X&&Ja(Ue)===T.type)?(T=l(T,N.props),eo(T,N),T.return=B,T):(T=Io(N.type,N.key,N.props,null,B.mode,$),eo(T,N),T.return=B,T)}function H(B,T,N,$){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=ds(N,B.mode,$),T.return=B,T):(T=l(T,N.children||[]),T.return=B,T)}function Q(B,T,N,$,Ue){return T===null||T.tag!==7?(T=Va(N,B.mode,$,Ue),T.return=B,T):(T=l(T,N),T.return=B,T)}function ne(B,T,N){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=ss(""+T,B.mode,N),T.return=B,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case he:return N=Io(T.type,T.key,T.props,null,B.mode,N),eo(N,T),N.return=B,N;case I:return T=ds(T,B.mode,N),T.return=B,T;case X:return T=Ja(T),ne(B,T,N)}if(qe(T)||ye(T))return T=Va(T,B.mode,N,null),T.return=B,T;if(typeof T.then=="function")return ne(B,Vo(T),N);if(T.$$typeof===de)return ne(B,Go(B,T),N);Qo(B,T)}return null}function L(B,T,N,$){var Ue=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return Ue!==null?null:p(B,T,""+N,$);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case he:return N.key===Ue?w(B,T,N,$):null;case I:return N.key===Ue?H(B,T,N,$):null;case X:return N=Ja(N),L(B,T,N,$)}if(qe(N)||ye(N))return Ue!==null?null:Q(B,T,N,$,null);if(typeof N.then=="function")return L(B,T,Vo(N),$);if(N.$$typeof===de)return L(B,T,Go(B,N),$);Qo(B,N)}return null}function _(B,T,N,$,Ue){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return B=B.get(N)||null,p(T,B,""+$,Ue);if(typeof $=="object"&&$!==null){switch($.$$typeof){case he:return B=B.get($.key===null?N:$.key)||null,w(T,B,$,Ue);case I:return B=B.get($.key===null?N:$.key)||null,H(T,B,$,Ue);case X:return $=Ja($),_(B,T,N,$,Ue)}if(qe($)||ye($))return B=B.get(N)||null,Q(T,B,$,Ue,null);if(typeof $.then=="function")return _(B,T,N,Vo($),Ue);if($.$$typeof===de)return _(B,T,N,Go(T,$),Ue);Qo(T,$)}return null}function Te(B,T,N,$){for(var Ue=null,Dt=null,Ee=T,it=T=0,yt=null;Ee!==null&&it<N.length;it++){Ee.index>it?(yt=Ee,Ee=null):yt=Ee.sibling;var Tt=L(B,Ee,N[it],$);if(Tt===null){Ee===null&&(Ee=yt);break}e&&Ee&&Tt.alternate===null&&n(B,Ee),T=o(Tt,T,it),Dt===null?Ue=Tt:Dt.sibling=Tt,Dt=Tt,Ee=yt}if(it===N.length)return i(B,Ee),xt&&ea(B,it),Ue;if(Ee===null){for(;it<N.length;it++)Ee=ne(B,N[it],$),Ee!==null&&(T=o(Ee,T,it),Dt===null?Ue=Ee:Dt.sibling=Ee,Dt=Ee);return xt&&ea(B,it),Ue}for(Ee=a(Ee);it<N.length;it++)yt=_(Ee,B,it,N[it],$),yt!==null&&(e&&yt.alternate!==null&&Ee.delete(yt.key===null?it:yt.key),T=o(yt,T,it),Dt===null?Ue=yt:Dt.sibling=yt,Dt=yt);return e&&Ee.forEach(function(Ia){return n(B,Ia)}),xt&&ea(B,it),Ue}function _e(B,T,N,$){if(N==null)throw Error(c(151));for(var Ue=null,Dt=null,Ee=T,it=T=0,yt=null,Tt=N.next();Ee!==null&&!Tt.done;it++,Tt=N.next()){Ee.index>it?(yt=Ee,Ee=null):yt=Ee.sibling;var Ia=L(B,Ee,Tt.value,$);if(Ia===null){Ee===null&&(Ee=yt);break}e&&Ee&&Ia.alternate===null&&n(B,Ee),T=o(Ia,T,it),Dt===null?Ue=Ia:Dt.sibling=Ia,Dt=Ia,Ee=yt}if(Tt.done)return i(B,Ee),xt&&ea(B,it),Ue;if(Ee===null){for(;!Tt.done;it++,Tt=N.next())Tt=ne(B,Tt.value,$),Tt!==null&&(T=o(Tt,T,it),Dt===null?Ue=Tt:Dt.sibling=Tt,Dt=Tt);return xt&&ea(B,it),Ue}for(Ee=a(Ee);!Tt.done;it++,Tt=N.next())Tt=_(Ee,B,it,Tt.value,$),Tt!==null&&(e&&Tt.alternate!==null&&Ee.delete(Tt.key===null?it:Tt.key),T=o(Tt,T,it),Dt===null?Ue=Tt:Dt.sibling=Tt,Dt=Tt);return e&&Ee.forEach(function(gg){return n(B,gg)}),xt&&ea(B,it),Ue}function _t(B,T,N,$){if(typeof N=="object"&&N!==null&&N.type===J&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case he:e:{for(var Ue=N.key;T!==null;){if(T.key===Ue){if(Ue=N.type,Ue===J){if(T.tag===7){i(B,T.sibling),$=l(T,N.props.children),$.return=B,B=$;break e}}else if(T.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===X&&Ja(Ue)===T.type){i(B,T.sibling),$=l(T,N.props),eo($,N),$.return=B,B=$;break e}i(B,T);break}else n(B,T);T=T.sibling}N.type===J?($=Va(N.props.children,B.mode,$,N.key),$.return=B,B=$):($=Io(N.type,N.key,N.props,null,B.mode,$),eo($,N),$.return=B,B=$)}return d(B);case I:e:{for(Ue=N.key;T!==null;){if(T.key===Ue)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){i(B,T.sibling),$=l(T,N.children||[]),$.return=B,B=$;break e}else{i(B,T);break}else n(B,T);T=T.sibling}$=ds(N,B.mode,$),$.return=B,B=$}return d(B);case X:return N=Ja(N),_t(B,T,N,$)}if(qe(N))return Te(B,T,N,$);if(ye(N)){if(Ue=ye(N),typeof Ue!="function")throw Error(c(150));return N=Ue.call(N),_e(B,T,N,$)}if(typeof N.then=="function")return _t(B,T,Vo(N),$);if(N.$$typeof===de)return _t(B,T,Go(B,N),$);Qo(B,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,T!==null&&T.tag===6?(i(B,T.sibling),$=l(T,N),$.return=B,B=$):(i(B,T),$=ss(N,B.mode,$),$.return=B,B=$),d(B)):i(B,T)}return function(B,T,N,$){try{$l=0;var Ue=_t(B,T,N,$);return wl=null,Ue}catch(Ee){if(Ee===Sl||Ee===Yo)throw Ee;var Dt=fi(29,Ee,null,B.mode);return Dt.lanes=$,Dt.return=B,Dt}finally{}}}var el=Jc(!0),$c=Jc(!1),wa=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ss(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(e,n,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Bt&2)!==0){var l=a.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),a.pending=n,n=Po(e),Uc(e,null,i),n}return Lo(e,a,n,i),Po(e)}function to(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,O(e,i)}}function ws(e,n){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var l=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var d={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};o===null?l=o=d:o=o.next=d,i=i.next}while(i!==null);o===null?l=o=n:o=o.next=n}else l=o=n;i={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:a.shared,callbacks:a.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Cs=!1;function no(){if(Cs){var e=jl;if(e!==null)throw e}}function io(e,n,i,a){Cs=!1;var l=e.updateQueue;wa=!1;var o=l.firstBaseUpdate,d=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var w=p,H=w.next;w.next=null,d===null?o=H:d.next=H,d=w;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,p=Q.lastBaseUpdate,p!==d&&(p===null?Q.firstBaseUpdate=H:p.next=H,Q.lastBaseUpdate=w))}if(o!==null){var ne=l.baseState;d=0,Q=H=w=null,p=o;do{var L=p.lane&-536870913,_=L!==p.lane;if(_?(gt&L)===L:(a&L)===L){L!==0&&L===vl&&(Cs=!0),Q!==null&&(Q=Q.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var Te=e,_e=p;L=n;var _t=i;switch(_e.tag){case 1:if(Te=_e.payload,typeof Te=="function"){ne=Te.call(_t,ne,L);break e}ne=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=_e.payload,L=typeof Te=="function"?Te.call(_t,ne,L):Te,L==null)break e;ne=U({},ne,L);break e;case 2:wa=!0}}L=p.callback,L!==null&&(e.flags|=64,_&&(e.flags|=8192),_=l.callbacks,_===null?l.callbacks=[L]:_.push(L))}else _={lane:L,tag:p.tag,payload:p.payload,callback:p.callback,next:null},Q===null?(H=Q=_,w=ne):Q=Q.next=_,d|=L;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;_=p,p=_.next,_.next=null,l.lastBaseUpdate=_,l.shared.pending=null}}while(!0);Q===null&&(w=ne),l.baseState=w,l.firstBaseUpdate=H,l.lastBaseUpdate=Q,o===null&&(l.shared.lanes=0),ka|=d,e.lanes=d,e.memoizedState=ne}}function eu(e,n){if(typeof e!="function")throw Error(c(191,e));e.call(n)}function tu(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)eu(i[e],n)}var Cl=Ae(null),Xo=Ae(0);function nu(e,n){e=ua,ae(Xo,e),ae(Cl,n),ua=e|n.baseLanes}function As(){ae(Xo,ua),ae(Cl,Cl.current)}function Ds(){ua=Xo.current,ge(Cl),ge(Xo)}var gi=Ae(null),zi=null;function Da(e){var n=e.alternate;ae(fn,fn.current&1),ae(gi,e),zi===null&&(n===null||Cl.current!==null||n.memoizedState!==null)&&(zi=e)}function Ts(e){ae(fn,fn.current),ae(gi,e),zi===null&&(zi=e)}function iu(e){e.tag===22?(ae(fn,fn.current),ae(gi,e),zi===null&&(zi=e)):Ta()}function Ta(){ae(fn,fn.current),ae(gi,gi.current)}function yi(e){ge(gi),zi===e&&(zi=null),ge(fn)}var fn=Ae(0);function Ko(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Md(i)||Nd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ia=0,et=null,Pt=null,Sn=null,Zo=!1,Al=!1,tl=!1,Jo=0,ao=0,Dl=null,of=0;function cn(){throw Error(c(321))}function zs(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!hi(e[i],n[i]))return!1;return!0}function Bs(e,n,i,a,l,o){return ia=o,et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?Iu:Ws,tl=!1,o=i(a,l),tl=!1,Al&&(o=lu(n,i,a,l)),au(e),o}function au(e){q.H=ro;var n=Pt!==null&&Pt.next!==null;if(ia=0,Sn=Pt=et=null,Zo=!1,ao=0,Dl=null,n)throw Error(c(300));e===null||wn||(e=e.dependencies,e!==null&&qo(e)&&(wn=!0))}function lu(e,n,i,a){et=e;var l=0;do{if(Al&&(Dl=null),ao=0,Al=!1,25<=l)throw Error(c(301));if(l+=1,Sn=Pt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}q.H=_u,o=n(i,a)}while(Al);return o}function rf(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?lo(n):n,e=e.useState()[0],(Pt!==null?Pt.memoizedState:null)!==e&&(et.flags|=1024),n}function ks(){var e=Jo!==0;return Jo=0,e}function Rs(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Es(e){if(Zo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Zo=!1}ia=0,Sn=Pt=et=null,Al=!1,ao=Jo=0,Dl=null}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?et.memoizedState=Sn=e:Sn=Sn.next=e,Sn}function gn(){if(Pt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Pt.next;var n=Sn===null?et.memoizedState:Sn.next;if(n!==null)Sn=n,Pt=e;else{if(e===null)throw et.alternate===null?Error(c(467)):Error(c(310));Pt=e,e={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Sn===null?et.memoizedState=Sn=e:Sn=Sn.next=e}return Sn}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lo(e){var n=ao;return ao+=1,Dl===null&&(Dl=[]),e=Xc(Dl,e,n),n=et,(Sn===null?n.memoizedState:Sn.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?Iu:Ws),e}function er(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return lo(e);if(e.$$typeof===de)return Ln(e)}throw Error(c(438,String(e)))}function Ms(e){var n=null,i=et.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var a=et.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(l){return l.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=$o(),et.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),a=0;a<e;a++)i[a]=P;return n.index++,i}function aa(e,n){return typeof n=="function"?n(e):n}function tr(e){var n=gn();return Ns(n,Pt,e)}function Ns(e,n,i){var a=e.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=i;var l=e.baseQueue,o=a.pending;if(o!==null){if(l!==null){var d=l.next;l.next=o.next,o.next=d}n.baseQueue=l=o,a.pending=null}if(o=e.baseState,l===null)e.memoizedState=o;else{n=l.next;var p=d=null,w=null,H=n,Q=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(gt&ne)===ne:(ia&ne)===ne){var L=H.revertLane;if(L===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===vl&&(Q=!0);else if((ia&L)===L){H=H.next,L===vl&&(Q=!0);continue}else ne={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},w===null?(p=w=ne,d=o):w=w.next=ne,et.lanes|=L,ka|=L;ne=H.action,tl&&i(o,ne),o=H.hasEagerState?H.eagerState:i(o,ne)}else L={lane:ne,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},w===null?(p=w=L,d=o):w=w.next=L,et.lanes|=ne,ka|=ne;H=H.next}while(H!==null&&H!==n);if(w===null?d=o:w.next=p,!hi(o,e.memoizedState)&&(wn=!0,Q&&(i=jl,i!==null)))throw i;e.memoizedState=o,e.baseState=d,e.baseQueue=w,a.lastRenderedState=o}return l===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Hs(e){var n=gn(),i=n.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=e;var a=i.dispatch,l=i.pending,o=n.memoizedState;if(l!==null){i.pending=null;var d=l=l.next;do o=e(o,d.action),d=d.next;while(d!==l);hi(o,n.memoizedState)||(wn=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),i.lastRenderedState=o}return[o,a]}function ou(e,n,i){var a=et,l=gn(),o=xt;if(o){if(i===void 0)throw Error(c(407));i=i()}else i=n();var d=!hi((Pt||l).memoizedState,i);if(d&&(l.memoizedState=i,wn=!0),l=l.queue,Ls(du.bind(null,a,l,e),[e]),l.getSnapshot!==n||d||Sn!==null&&Sn.memoizedState.tag&1){if(a.flags|=2048,Tl(9,{destroy:void 0},su.bind(null,a,l,i,n),null),Gt===null)throw Error(c(349));o||(ia&127)!==0||ru(a,n,i)}return i}function ru(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=et.updateQueue,n===null?(n=$o(),et.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function su(e,n,i,a){n.value=i,n.getSnapshot=a,cu(n)&&uu(e)}function du(e,n,i){return i(function(){cu(n)&&uu(e)})}function cu(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!hi(e,i)}catch{return!0}}function uu(e){var n=Fa(e,2);n!==null&&si(n,e,2)}function Us(e){var n=$n();if(typeof e=="function"){var i=e;if(e=i(),tl){be(!0);try{i()}finally{be(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:e},n}function pu(e,n,i,a){return e.baseState=i,Ns(e,Pt,typeof a=="function"?a:aa)}function sf(e,n,i,a,l){if(ar(e))throw Error(c(485));if(e=n.action,e!==null){var o={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){o.listeners.push(d)}};q.T!==null?i(!0):o.isTransition=!1,a(o),i=n.pending,i===null?(o.next=n.pending=o,mu(n,o)):(o.next=i.next,n.pending=i.next=o)}}function mu(e,n){var i=n.action,a=n.payload,l=e.state;if(n.isTransition){var o=q.T,d={};q.T=d;try{var p=i(l,a),w=q.S;w!==null&&w(d,p),hu(e,n,p)}catch(H){Os(e,n,H)}finally{o!==null&&d.types!==null&&(o.types=d.types),q.T=o}}else try{o=i(l,a),hu(e,n,o)}catch(H){Os(e,n,H)}}function hu(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(a){fu(e,n,a)},function(a){return Os(e,n,a)}):fu(e,n,i)}function fu(e,n,i){n.status="fulfilled",n.value=i,gu(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,mu(e,i)))}function Os(e,n,i){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=i,gu(n),n=n.next;while(n!==a)}e.action=null}function gu(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function yu(e,n){return n}function xu(e,n){if(xt){var i=Gt.formState;if(i!==null){e:{var a=et;if(xt){if($t){t:{for(var l=$t,o=Ti;l.nodeType!==8;){if(!o){l=null;break t}if(l=Bi(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){$t=Bi(l.nextSibling),a=l.data==="F!";break e}}ja(a)}a=!1}a&&(n=i[0])}}return i=$n(),i.memoizedState=i.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:n},i.queue=a,i=Ou.bind(null,et,a),a.dispatch=i,a=Us(!1),o=Gs.bind(null,et,!1,a.queue),a=$n(),l={state:n,dispatch:null,action:e,pending:null},a.queue=l,i=sf.bind(null,et,l,o,i),l.dispatch=i,a.memoizedState=e,[n,i,!1]}function bu(e){var n=gn();return vu(n,Pt,e)}function vu(e,n,i){if(n=Ns(e,n,yu)[0],e=tr(aa)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=lo(n)}catch(d){throw d===Sl?Yo:d}else a=n;n=gn();var l=n.queue,o=l.dispatch;return i!==n.memoizedState&&(et.flags|=2048,Tl(9,{destroy:void 0},df.bind(null,l,i),null)),[a,o,e]}function df(e,n){e.action=n}function ju(e){var n=gn(),i=Pt;if(i!==null)return vu(n,i,e);gn(),n=n.memoizedState,i=gn();var a=i.queue.dispatch;return i.memoizedState=e,[n,a,!1]}function Tl(e,n,i,a){return e={tag:e,create:i,deps:a,inst:n,next:null},n=et.updateQueue,n===null&&(n=$o(),et.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,n.lastEffect=e),e}function Su(){return gn().memoizedState}function nr(e,n,i,a){var l=$n();et.flags|=e,l.memoizedState=Tl(1|n,{destroy:void 0},i,a===void 0?null:a)}function ir(e,n,i,a){var l=gn();a=a===void 0?null:a;var o=l.memoizedState.inst;Pt!==null&&a!==null&&zs(a,Pt.memoizedState.deps)?l.memoizedState=Tl(n,o,i,a):(et.flags|=e,l.memoizedState=Tl(1|n,o,i,a))}function wu(e,n){nr(8390656,8,e,n)}function Ls(e,n){ir(2048,8,e,n)}function cf(e){et.flags|=4;var n=et.updateQueue;if(n===null)n=$o(),et.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Cu(e){var n=gn().memoizedState;return cf({ref:n,nextImpl:e}),function(){if((Bt&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}function Au(e,n){return ir(4,2,e,n)}function Du(e,n){return ir(4,4,e,n)}function Tu(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function zu(e,n,i){i=i!=null?i.concat([e]):null,ir(4,4,Tu.bind(null,n,e),i)}function Ps(){}function Bu(e,n){var i=gn();n=n===void 0?null:n;var a=i.memoizedState;return n!==null&&zs(n,a[1])?a[0]:(i.memoizedState=[e,n],e)}function ku(e,n){var i=gn();n=n===void 0?null:n;var a=i.memoizedState;if(n!==null&&zs(n,a[1]))return a[0];if(a=e(),tl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[a,n],a}function Is(e,n,i){return i===void 0||(ia&1073741824)!==0&&(gt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Rp(),et.lanes|=e,ka|=e,i)}function Ru(e,n,i,a){return hi(i,n)?i:Cl.current!==null?(e=Is(e,i,a),hi(e,n)||(wn=!0),e):(ia&42)===0||(ia&1073741824)!==0&&(gt&261930)===0?(wn=!0,e.memoizedState=i):(e=Rp(),et.lanes|=e,ka|=e,n)}function Eu(e,n,i,a,l){var o=se.p;se.p=o!==0&&8>o?o:8;var d=q.T,p={};q.T=p,Gs(e,!1,n,i);try{var w=l(),H=q.S;if(H!==null&&H(p,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var Q=lf(w,a);oo(e,n,Q,vi(e))}else oo(e,n,a,vi(e))}catch(ne){oo(e,n,{then:function(){},status:"rejected",reason:ne},vi())}finally{se.p=o,d!==null&&p.types!==null&&(d.types=p.types),q.T=d}}function uf(){}function _s(e,n,i,a){if(e.tag!==5)throw Error(c(476));var l=Mu(e).queue;Eu(e,l,n,xe,i===null?uf:function(){return Nu(e),i(a)})}function Mu(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:xe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Nu(e){var n=Mu(e);n.next===null&&(n=e.alternate.memoizedState),oo(e,n.next.queue,{},vi())}function qs(){return Ln(Co)}function Hu(){return gn().memoizedState}function Uu(){return gn().memoizedState}function pf(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=vi();e=Ca(i);var a=Aa(n,e,i);a!==null&&(si(a,n,i),to(a,n,i)),n={cache:ys()},e.payload=n;return}n=n.return}}function mf(e,n,i){var a=vi();i={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ar(e)?Lu(n,i):(i=os(e,n,i,a),i!==null&&(si(i,e,a),Pu(i,n,a)))}function Ou(e,n,i){var a=vi();oo(e,n,i,a)}function oo(e,n,i,a){var l={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ar(e))Lu(n,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var d=n.lastRenderedState,p=o(d,i);if(l.hasEagerState=!0,l.eagerState=p,hi(p,d))return Lo(e,n,l,0),Gt===null&&Oo(),!1}catch{}finally{}if(i=os(e,n,l,a),i!==null)return si(i,e,a),Pu(i,n,a),!0}return!1}function Gs(e,n,i,a){if(a={lane:2,revertLane:jd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ar(e)){if(n)throw Error(c(479))}else n=os(e,i,a,2),n!==null&&si(n,e,2)}function ar(e){var n=e.alternate;return e===et||n!==null&&n===et}function Lu(e,n){Al=Zo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Pu(e,n,i){if((i&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,O(e,i)}}var ro={readContext:Ln,use:er,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};ro.useEffectEvent=cn;var Iu={readContext:Ln,use:er,useCallback:function(e,n){return $n().memoizedState=[e,n===void 0?null:n],e},useContext:Ln,useEffect:wu,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,nr(4194308,4,Tu.bind(null,n,e),i)},useLayoutEffect:function(e,n){return nr(4194308,4,e,n)},useInsertionEffect:function(e,n){nr(4,2,e,n)},useMemo:function(e,n){var i=$n();n=n===void 0?null:n;var a=e();if(tl){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[a,n],a},useReducer:function(e,n,i){var a=$n();if(i!==void 0){var l=i(n);if(tl){be(!0);try{i(n)}finally{be(!1)}}}else l=n;return a.memoizedState=a.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},a.queue=e,e=e.dispatch=mf.bind(null,et,e),[a.memoizedState,e]},useRef:function(e){var n=$n();return e={current:e},n.memoizedState=e},useState:function(e){e=Us(e);var n=e.queue,i=Ou.bind(null,et,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Ps,useDeferredValue:function(e,n){var i=$n();return Is(i,e,n)},useTransition:function(){var e=Us(!1);return e=Eu.bind(null,et,e.queue,!0,!1),$n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var a=et,l=$n();if(xt){if(i===void 0)throw Error(c(407));i=i()}else{if(i=n(),Gt===null)throw Error(c(349));(gt&127)!==0||ru(a,n,i)}l.memoizedState=i;var o={value:i,getSnapshot:n};return l.queue=o,wu(du.bind(null,a,o,e),[e]),a.flags|=2048,Tl(9,{destroy:void 0},su.bind(null,a,o,i,n),null),i},useId:function(){var e=$n(),n=Gt.identifierPrefix;if(xt){var i=Qi,a=Vi;i=(a&~(1<<32-Re(a)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Jo++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=of++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:qs,useFormState:xu,useActionState:xu,useOptimistic:function(e){var n=$n();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Gs.bind(null,et,!0,i),i.dispatch=n,[e,n]},useMemoCache:Ms,useCacheRefresh:function(){return $n().memoizedState=pf.bind(null,et)},useEffectEvent:function(e){var n=$n(),i={impl:e};return n.memoizedState=i,function(){if((Bt&2)!==0)throw Error(c(440));return i.impl.apply(void 0,arguments)}}},Ws={readContext:Ln,use:er,useCallback:Bu,useContext:Ln,useEffect:Ls,useImperativeHandle:zu,useInsertionEffect:Au,useLayoutEffect:Du,useMemo:ku,useReducer:tr,useRef:Su,useState:function(){return tr(aa)},useDebugValue:Ps,useDeferredValue:function(e,n){var i=gn();return Ru(i,Pt.memoizedState,e,n)},useTransition:function(){var e=tr(aa)[0],n=gn().memoizedState;return[typeof e=="boolean"?e:lo(e),n]},useSyncExternalStore:ou,useId:Hu,useHostTransitionStatus:qs,useFormState:bu,useActionState:bu,useOptimistic:function(e,n){var i=gn();return pu(i,Pt,e,n)},useMemoCache:Ms,useCacheRefresh:Uu};Ws.useEffectEvent=Cu;var _u={readContext:Ln,use:er,useCallback:Bu,useContext:Ln,useEffect:Ls,useImperativeHandle:zu,useInsertionEffect:Au,useLayoutEffect:Du,useMemo:ku,useReducer:Hs,useRef:Su,useState:function(){return Hs(aa)},useDebugValue:Ps,useDeferredValue:function(e,n){var i=gn();return Pt===null?Is(i,e,n):Ru(i,Pt.memoizedState,e,n)},useTransition:function(){var e=Hs(aa)[0],n=gn().memoizedState;return[typeof e=="boolean"?e:lo(e),n]},useSyncExternalStore:ou,useId:Hu,useHostTransitionStatus:qs,useFormState:ju,useActionState:ju,useOptimistic:function(e,n){var i=gn();return Pt!==null?pu(i,Pt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ms,useCacheRefresh:Uu};_u.useEffectEvent=Cu;function Ys(e,n,i,a){n=e.memoizedState,i=i(a,n),i=i==null?n:U({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Fs={enqueueSetState:function(e,n,i){e=e._reactInternals;var a=vi(),l=Ca(a);l.payload=n,i!=null&&(l.callback=i),n=Aa(e,l,a),n!==null&&(si(n,e,a),to(n,e,a))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var a=vi(),l=Ca(a);l.tag=1,l.payload=n,i!=null&&(l.callback=i),n=Aa(e,l,a),n!==null&&(si(n,e,a),to(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=vi(),a=Ca(i);a.tag=2,n!=null&&(a.callback=n),n=Aa(e,a,i),n!==null&&(si(n,e,i),to(n,e,i))}};function qu(e,n,i,a,l,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,d):n.prototype&&n.prototype.isPureReactComponent?!Vl(i,a)||!Vl(l,o):!0}function Gu(e,n,i,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,a),n.state!==e&&Fs.enqueueReplaceState(n,n.state,null)}function nl(e,n){var i=n;if("ref"in n){i={};for(var a in n)a!=="ref"&&(i[a]=n[a])}if(e=e.defaultProps){i===n&&(i=U({},i));for(var l in e)i[l]===void 0&&(i[l]=e[l])}return i}function Wu(e){Uo(e)}function Yu(e){console.error(e)}function Fu(e){Uo(e)}function lr(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function Vu(e,n,i){try{var a=e.onCaughtError;a(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Vs(e,n,i){return i=Ca(i),i.tag=3,i.payload={element:null},i.callback=function(){lr(e,n)},i}function Qu(e){return e=Ca(e),e.tag=3,e}function Xu(e,n,i,a){var l=i.type.getDerivedStateFromError;if(typeof l=="function"){var o=a.value;e.payload=function(){return l(o)},e.callback=function(){Vu(n,i,a)}}var d=i.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){Vu(n,i,a),typeof l!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var p=a.stack;this.componentDidCatch(a.value,{componentStack:p!==null?p:""})})}function hf(e,n,i,a,l){if(i.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=i.alternate,n!==null&&bl(n,i,l,!0),i=gi.current,i!==null){switch(i.tag){case 31:case 13:return zi===null?yr():i.alternate===null&&un===0&&(un=3),i.flags&=-257,i.flags|=65536,i.lanes=l,a===Fo?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([a]):n.add(a),xd(e,a,l)),!1;case 22:return i.flags|=65536,a===Fo?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([a]):i.add(a)),xd(e,a,l)),!1}throw Error(c(435,i.tag))}return xd(e,a,l),yr(),!1}if(xt)return n=gi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=l,a!==ps&&(e=Error(c(422),{cause:a}),Kl(Ci(e,i)))):(a!==ps&&(n=Error(c(423),{cause:a}),Kl(Ci(n,i))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,a=Ci(a,i),l=Vs(e.stateNode,a,l),ws(e,l),un!==4&&(un=2)),!1;var o=Error(c(520),{cause:a});if(o=Ci(o,i),go===null?go=[o]:go.push(o),un!==4&&(un=2),n===null)return!0;a=Ci(a,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=l&-l,i.lanes|=e,e=Vs(i.stateNode,a,e),ws(i,e),!1;case 1:if(n=i.type,o=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ra===null||!Ra.has(o))))return i.flags|=65536,l&=-l,i.lanes|=l,l=Qu(l),Xu(l,e,i,a),ws(i,l),!1}i=i.return}while(i!==null);return!1}var Qs=Error(c(461)),wn=!1;function Pn(e,n,i,a){n.child=e===null?$c(n,null,i,a):el(n,e.child,i,a)}function Ku(e,n,i,a,l){i=i.render;var o=n.ref;if("ref"in a){var d={};for(var p in a)p!=="ref"&&(d[p]=a[p])}else d=a;return Ka(n),a=Bs(e,n,i,d,o,l),p=ks(),e!==null&&!wn?(Rs(e,n,l),la(e,n,l)):(xt&&p&&cs(n),n.flags|=1,Pn(e,n,a,l),n.child)}function Zu(e,n,i,a,l){if(e===null){var o=i.type;return typeof o=="function"&&!rs(o)&&o.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=o,Ju(e,n,o,a,l)):(e=Io(i.type,null,a,n,n.mode,l),e.ref=n.ref,e.return=n,n.child=e)}if(o=e.child,!nd(e,l)){var d=o.memoizedProps;if(i=i.compare,i=i!==null?i:Vl,i(d,a)&&e.ref===n.ref)return la(e,n,l)}return n.flags|=1,e=$i(o,a),e.ref=n.ref,e.return=n,n.child=e}function Ju(e,n,i,a,l){if(e!==null){var o=e.memoizedProps;if(Vl(o,a)&&e.ref===n.ref)if(wn=!1,n.pendingProps=a=o,nd(e,l))(e.flags&131072)!==0&&(wn=!0);else return n.lanes=e.lanes,la(e,n,l)}return Xs(e,n,i,a,l)}function $u(e,n,i,a){var l=a.children,o=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(o=o!==null?o.baseLanes|i:i,e!==null){for(a=n.child=e.child,l=0;a!==null;)l=l|a.lanes|a.childLanes,a=a.sibling;a=l&~o}else a=0,n.child=null;return ep(e,n,o,i,a)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wo(n,o!==null?o.cachePool:null),o!==null?nu(n,o):As(),iu(n);else return a=n.lanes=536870912,ep(e,n,o!==null?o.baseLanes|i:i,i,a)}else o!==null?(Wo(n,o.cachePool),nu(n,o),Ta(),n.memoizedState=null):(e!==null&&Wo(n,null),As(),Ta());return Pn(e,n,l,i),n.child}function so(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ep(e,n,i,a,l){var o=bs();return o=o===null?null:{parent:jn._currentValue,pool:o},n.memoizedState={baseLanes:i,cachePool:o},e!==null&&Wo(n,null),As(),iu(n),e!==null&&bl(e,n,a,!0),n.childLanes=l,null}function or(e,n){return n=sr({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function tp(e,n,i){return el(n,e.child,null,i),e=or(n,n.pendingProps),e.flags|=2,yi(n),n.memoizedState=null,e}function ff(e,n,i){var a=n.pendingProps,l=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(xt){if(a.mode==="hidden")return e=or(n,a),n.lanes=536870912,so(null,e);if(Ts(n),(e=$t)?(e=mm(e,Ti),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Vi,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},i=Lc(e),i.return=n,n.child=i,On=n,$t=null)):e=null,e===null)throw ja(n);return n.lanes=536870912,null}return or(n,a)}var o=e.memoizedState;if(o!==null){var d=o.dehydrated;if(Ts(n),l)if(n.flags&256)n.flags&=-257,n=tp(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(c(558));else if(wn||bl(e,n,i,!1),l=(i&e.childLanes)!==0,wn||l){if(a=Gt,a!==null&&(d=G(a,i),d!==0&&d!==o.retryLane))throw o.retryLane=d,Fa(e,d),si(a,e,d),Qs;yr(),n=tp(e,n,i)}else e=o.treeContext,$t=Bi(d.nextSibling),On=n,xt=!0,va=null,Ti=!1,e!==null&&_c(n,e),n=or(n,a),n.flags|=4096;return n}return e=$i(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function rr(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(c(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Xs(e,n,i,a,l){return Ka(n),i=Bs(e,n,i,a,void 0,l),a=ks(),e!==null&&!wn?(Rs(e,n,l),la(e,n,l)):(xt&&a&&cs(n),n.flags|=1,Pn(e,n,i,l),n.child)}function np(e,n,i,a,l,o){return Ka(n),n.updateQueue=null,i=lu(n,a,i,l),au(e),a=ks(),e!==null&&!wn?(Rs(e,n,o),la(e,n,o)):(xt&&a&&cs(n),n.flags|=1,Pn(e,n,i,o),n.child)}function ip(e,n,i,a,l){if(Ka(n),n.stateNode===null){var o=fl,d=i.contextType;typeof d=="object"&&d!==null&&(o=Ln(d)),o=new i(a,o),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fs,n.stateNode=o,o._reactInternals=n,o=n.stateNode,o.props=a,o.state=n.memoizedState,o.refs={},js(n),d=i.contextType,o.context=typeof d=="object"&&d!==null?Ln(d):fl,o.state=n.memoizedState,d=i.getDerivedStateFromProps,typeof d=="function"&&(Ys(n,i,d,a),o.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(d=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),d!==o.state&&Fs.enqueueReplaceState(o,o.state,null),io(n,a,o,l),no(),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){o=n.stateNode;var p=n.memoizedProps,w=nl(i,p);o.props=w;var H=o.context,Q=i.contextType;d=fl,typeof Q=="object"&&Q!==null&&(d=Ln(Q));var ne=i.getDerivedStateFromProps;Q=typeof ne=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=n.pendingProps!==p,Q||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||H!==d)&&Gu(n,o,a,d),wa=!1;var L=n.memoizedState;o.state=L,io(n,a,o,l),no(),H=n.memoizedState,p||L!==H||wa?(typeof ne=="function"&&(Ys(n,i,ne,a),H=n.memoizedState),(w=wa||qu(n,i,w,a,L,H,d))?(Q||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=H),o.props=a,o.state=H,o.context=d,a=w):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{o=n.stateNode,Ss(e,n),d=n.memoizedProps,Q=nl(i,d),o.props=Q,ne=n.pendingProps,L=o.context,H=i.contextType,w=fl,typeof H=="object"&&H!==null&&(w=Ln(H)),p=i.getDerivedStateFromProps,(H=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==ne||L!==w)&&Gu(n,o,a,w),wa=!1,L=n.memoizedState,o.state=L,io(n,a,o,l),no();var _=n.memoizedState;d!==ne||L!==_||wa||e!==null&&e.dependencies!==null&&qo(e.dependencies)?(typeof p=="function"&&(Ys(n,i,p,a),_=n.memoizedState),(Q=wa||qu(n,i,Q,a,L,_,w)||e!==null&&e.dependencies!==null&&qo(e.dependencies))?(H||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,_,w),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,_,w)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=_),o.props=a,o.state=_,o.context=w,a=Q):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),a=!1)}return o=a,rr(e,n),a=(n.flags&128)!==0,o||a?(o=n.stateNode,i=a&&typeof i.getDerivedStateFromError!="function"?null:o.render(),n.flags|=1,e!==null&&a?(n.child=el(n,e.child,null,l),n.child=el(n,null,i,l)):Pn(e,n,i,l),n.memoizedState=o.state,e=n.child):e=la(e,n,l),e}function ap(e,n,i,a){return Qa(),n.flags|=256,Pn(e,n,i,a),n.child}var Ks={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zs(e){return{baseLanes:e,cachePool:Vc()}}function Js(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=bi),e}function lp(e,n,i){var a=n.pendingProps,l=!1,o=(n.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),d&&(l=!0,n.flags&=-129),d=(n.flags&32)!==0,n.flags&=-33,e===null){if(xt){if(l?Da(n):Ta(),(e=$t)?(e=mm(e,Ti),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Vi,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},i=Lc(e),i.return=n,n.child=i,On=n,$t=null)):e=null,e===null)throw ja(n);return Nd(e)?n.lanes=32:n.lanes=536870912,null}var p=a.children;return a=a.fallback,l?(Ta(),l=n.mode,p=sr({mode:"hidden",children:p},l),a=Va(a,l,i,null),p.return=n,a.return=n,p.sibling=a,n.child=p,a=n.child,a.memoizedState=Zs(i),a.childLanes=Js(e,d,i),n.memoizedState=Ks,so(null,a)):(Da(n),$s(n,p))}var w=e.memoizedState;if(w!==null&&(p=w.dehydrated,p!==null)){if(o)n.flags&256?(Da(n),n.flags&=-257,n=ed(e,n,i)):n.memoizedState!==null?(Ta(),n.child=e.child,n.flags|=128,n=null):(Ta(),p=a.fallback,l=n.mode,a=sr({mode:"visible",children:a.children},l),p=Va(p,l,i,null),p.flags|=2,a.return=n,p.return=n,a.sibling=p,n.child=a,el(n,e.child,null,i),a=n.child,a.memoizedState=Zs(i),a.childLanes=Js(e,d,i),n.memoizedState=Ks,n=so(null,a));else if(Da(n),Nd(p)){if(d=p.nextSibling&&p.nextSibling.dataset,d)var H=d.dgst;d=H,a=Error(c(419)),a.stack="",a.digest=d,Kl({value:a,source:null,stack:null}),n=ed(e,n,i)}else if(wn||bl(e,n,i,!1),d=(i&e.childLanes)!==0,wn||d){if(d=Gt,d!==null&&(a=G(d,i),a!==0&&a!==w.retryLane))throw w.retryLane=a,Fa(e,a),si(d,e,a),Qs;Md(p)||yr(),n=ed(e,n,i)}else Md(p)?(n.flags|=192,n.child=e.child,n=null):(e=w.treeContext,$t=Bi(p.nextSibling),On=n,xt=!0,va=null,Ti=!1,e!==null&&_c(n,e),n=$s(n,a.children),n.flags|=4096);return n}return l?(Ta(),p=a.fallback,l=n.mode,w=e.child,H=w.sibling,a=$i(w,{mode:"hidden",children:a.children}),a.subtreeFlags=w.subtreeFlags&65011712,H!==null?p=$i(H,p):(p=Va(p,l,i,null),p.flags|=2),p.return=n,a.return=n,a.sibling=p,n.child=a,so(null,a),a=n.child,p=e.child.memoizedState,p===null?p=Zs(i):(l=p.cachePool,l!==null?(w=jn._currentValue,l=l.parent!==w?{parent:w,pool:w}:l):l=Vc(),p={baseLanes:p.baseLanes|i,cachePool:l}),a.memoizedState=p,a.childLanes=Js(e,d,i),n.memoizedState=Ks,so(e.child,a)):(Da(n),i=e.child,e=i.sibling,i=$i(i,{mode:"visible",children:a.children}),i.return=n,i.sibling=null,e!==null&&(d=n.deletions,d===null?(n.deletions=[e],n.flags|=16):d.push(e)),n.child=i,n.memoizedState=null,i)}function $s(e,n){return n=sr({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function sr(e,n){return e=fi(22,e,null,n),e.lanes=0,e}function ed(e,n,i){return el(n,e.child,null,i),e=$s(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function op(e,n,i){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),fs(e.return,n,i)}function td(e,n,i,a,l,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:l,treeForkCount:o}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=l,d.treeForkCount=o)}function rp(e,n,i){var a=n.pendingProps,l=a.revealOrder,o=a.tail;a=a.children;var d=fn.current,p=(d&2)!==0;if(p?(d=d&1|2,n.flags|=128):d&=1,ae(fn,d),Pn(e,n,a,i),a=xt?Xl:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&op(e,i,n);else if(e.tag===19)op(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(i=n.child,l=null;i!==null;)e=i.alternate,e!==null&&Ko(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=n.child,n.child=null):(l=i.sibling,i.sibling=null),td(n,!1,l,i,o,a);break;case"backwards":case"unstable_legacy-backwards":for(i=null,l=n.child,n.child=null;l!==null;){if(e=l.alternate,e!==null&&Ko(e)===null){n.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}td(n,!0,i,null,o,a);break;case"together":td(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function la(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),ka|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(bl(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(c(153));if(n.child!==null){for(e=n.child,i=$i(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=$i(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function nd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&qo(e)))}function gf(e,n,i){switch(n.tag){case 3:pn(n,n.stateNode.containerInfo),Sa(n,jn,e.memoizedState.cache),Qa();break;case 27:case 5:ln(n);break;case 4:pn(n,n.stateNode.containerInfo);break;case 10:Sa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ts(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(Da(n),n.flags|=128,null):(i&n.child.childLanes)!==0?lp(e,n,i):(Da(n),e=la(e,n,i),e!==null?e.sibling:null);Da(n);break;case 19:var l=(e.flags&128)!==0;if(a=(i&n.childLanes)!==0,a||(bl(e,n,i,!1),a=(i&n.childLanes)!==0),l){if(a)return rp(e,n,i);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ae(fn,fn.current),a)break;return null;case 22:return n.lanes=0,$u(e,n,i,n.pendingProps);case 24:Sa(n,jn,e.memoizedState.cache)}return la(e,n,i)}function sp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)wn=!0;else{if(!nd(e,i)&&(n.flags&128)===0)return wn=!1,gf(e,n,i);wn=(e.flags&131072)!==0}else wn=!1,xt&&(n.flags&1048576)!==0&&Ic(n,Xl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=Ja(n.elementType),n.type=e,typeof e=="function")rs(e)?(a=nl(e,a),n.tag=1,n=ip(null,n,e,a,i)):(n.tag=0,n=Xs(null,n,e,a,i));else{if(e!=null){var l=e.$$typeof;if(l===re){n.tag=11,n=Ku(null,n,e,a,i);break e}else if(l===ct){n.tag=14,n=Zu(null,n,e,a,i);break e}}throw n=bt(e)||e,Error(c(306,n,""))}}return n;case 0:return Xs(e,n,n.type,n.pendingProps,i);case 1:return a=n.type,l=nl(a,n.pendingProps),ip(e,n,a,l,i);case 3:e:{if(pn(n,n.stateNode.containerInfo),e===null)throw Error(c(387));a=n.pendingProps;var o=n.memoizedState;l=o.element,Ss(e,n),io(n,a,null,i);var d=n.memoizedState;if(a=d.cache,Sa(n,jn,a),a!==o.cache&&gs(n,[jn],i,!0),no(),a=d.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:d.cache},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){n=ap(e,n,a,i);break e}else if(a!==l){l=Ci(Error(c(424)),n),Kl(l),n=ap(e,n,a,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=Bi(e.firstChild),On=n,xt=!0,va=null,Ti=!0,i=$c(n,null,a,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Qa(),a===l){n=la(e,n,i);break e}Pn(e,n,a,i)}n=n.child}return n;case 26:return rr(e,n),e===null?(i=bm(n.type,null,n.pendingProps,null))?n.memoizedState=i:xt||(i=n.type,e=n.pendingProps,a=Cr(Ye.current).createElement(i),a[Oe]=n,a[Kt]=e,In(a,i,e),rn(a),n.stateNode=a):n.memoizedState=bm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ln(n),e===null&&xt&&(a=n.stateNode=gm(n.type,n.pendingProps,Ye.current),On=n,Ti=!0,l=$t,Ha(n.type)?(Hd=l,$t=Bi(a.firstChild)):$t=l),Pn(e,n,n.pendingProps.children,i),rr(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&xt&&((l=a=$t)&&(a=Ff(a,n.type,n.pendingProps,Ti),a!==null?(n.stateNode=a,On=n,$t=Bi(a.firstChild),Ti=!1,l=!0):l=!1),l||ja(n)),ln(n),l=n.type,o=n.pendingProps,d=e!==null?e.memoizedProps:null,a=o.children,kd(l,o)?a=null:d!==null&&kd(l,d)&&(n.flags|=32),n.memoizedState!==null&&(l=Bs(e,n,rf,null,null,i),Co._currentValue=l),rr(e,n),Pn(e,n,a,i),n.child;case 6:return e===null&&xt&&((e=i=$t)&&(i=Vf(i,n.pendingProps,Ti),i!==null?(n.stateNode=i,On=n,$t=null,e=!0):e=!1),e||ja(n)),null;case 13:return lp(e,n,i);case 4:return pn(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=el(n,null,a,i):Pn(e,n,a,i),n.child;case 11:return Ku(e,n,n.type,n.pendingProps,i);case 7:return Pn(e,n,n.pendingProps,i),n.child;case 8:return Pn(e,n,n.pendingProps.children,i),n.child;case 12:return Pn(e,n,n.pendingProps.children,i),n.child;case 10:return a=n.pendingProps,Sa(n,n.type,a.value),Pn(e,n,a.children,i),n.child;case 9:return l=n.type._context,a=n.pendingProps.children,Ka(n),l=Ln(l),a=a(l),n.flags|=1,Pn(e,n,a,i),n.child;case 14:return Zu(e,n,n.type,n.pendingProps,i);case 15:return Ju(e,n,n.type,n.pendingProps,i);case 19:return rp(e,n,i);case 31:return ff(e,n,i);case 22:return $u(e,n,i,n.pendingProps);case 24:return Ka(n),a=Ln(jn),e===null?(l=bs(),l===null&&(l=Gt,o=ys(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=i),l=o),n.memoizedState={parent:a,cache:l},js(n),Sa(n,jn,l)):((e.lanes&i)!==0&&(Ss(e,n),io(n,null,null,i),no()),l=e.memoizedState,o=n.memoizedState,l.parent!==a?(l={parent:a,cache:a},n.memoizedState=l,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=l),Sa(n,jn,a)):(a=o.cache,Sa(n,jn,a),a!==l.cache&&gs(n,[jn],i,!0))),Pn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(c(156,n.tag))}function oa(e){e.flags|=4}function id(e,n,i,a,l){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Hp())e.flags|=8192;else throw $a=Fo,vs}else e.flags&=-16777217}function dp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Cm(n))if(Hp())e.flags|=8192;else throw $a=Fo,vs}function dr(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?jt():536870912,e.lanes|=n,Rl|=n)}function co(e,n){if(!xt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function en(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(n)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags&65011712,a|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=i,n}function yf(e,n,i){var a=n.pendingProps;switch(us(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(n),null;case 1:return en(n),null;case 3:return i=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),na(jn),kt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(xl(n)?oa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ms())),en(n),null;case 26:var l=n.type,o=n.memoizedState;return e===null?(oa(n),o!==null?(en(n),dp(n,o)):(en(n),id(n,l,null,a,i))):o?o!==e.memoizedState?(oa(n),en(n),dp(n,o)):(en(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&oa(n),en(n),id(n,l,e,a,i)),null;case 27:if(Nt(n),i=Ye.current,l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&oa(n);else{if(!a){if(n.stateNode===null)throw Error(c(166));return en(n),null}e=ke.current,xl(n)?qc(n):(e=gm(l,a,i),n.stateNode=e,oa(n))}return en(n),null;case 5:if(Nt(n),l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&oa(n);else{if(!a){if(n.stateNode===null)throw Error(c(166));return en(n),null}if(o=ke.current,xl(n))qc(n);else{var d=Cr(Ye.current);switch(o){case 1:o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof a.is=="string"?d.createElement("select",{is:a.is}):d.createElement("select"),a.multiple?o.multiple=!0:a.size&&(o.size=a.size);break;default:o=typeof a.is=="string"?d.createElement(l,{is:a.is}):d.createElement(l)}}o[Oe]=n,o[Kt]=a;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=o;e:switch(In(o,l,a),l){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&oa(n)}}return en(n),id(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&oa(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(c(166));if(e=Ye.current,xl(n)){if(e=n.stateNode,i=n.memoizedProps,a=null,l=On,l!==null)switch(l.tag){case 27:case 5:a=l.memoizedProps}e[Oe]=n,e=!!(e.nodeValue===i||a!==null&&a.suppressHydrationWarning===!0||lm(e.nodeValue,i)),e||ja(n,!0)}else e=Cr(e).createTextNode(a),e[Oe]=n,n.stateNode=e}return en(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(a=xl(n),i!==null){if(e===null){if(!a)throw Error(c(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[Oe]=n}else Qa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;en(n),e=!1}else i=ms(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(yi(n),n):(yi(n),null);if((n.flags&128)!==0)throw Error(c(558))}return en(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=xl(n),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=n.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[Oe]=n}else Qa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;en(n),l=!1}else l=ms(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return n.flags&256?(yi(n),n):(yi(n),null)}return yi(n),(n.flags&128)!==0?(n.lanes=i,n):(i=a!==null,e=e!==null&&e.memoizedState!==null,i&&(a=n.child,l=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(l=a.alternate.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),dr(n,n.updateQueue),en(n),null);case 4:return kt(),e===null&&Ad(n.stateNode.containerInfo),en(n),null;case 10:return na(n.type),en(n),null;case 19:if(ge(fn),a=n.memoizedState,a===null)return en(n),null;if(l=(n.flags&128)!==0,o=a.rendering,o===null)if(l)co(a,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(o=Ko(e),o!==null){for(n.flags|=128,co(a,!1),e=o.updateQueue,n.updateQueue=e,dr(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Oc(i,e),i=i.sibling;return ae(fn,fn.current&1|2),xt&&ea(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&Ht()>hr&&(n.flags|=128,l=!0,co(a,!1),n.lanes=4194304)}else{if(!l)if(e=Ko(o),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,dr(n,e),co(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!xt)return en(n),null}else 2*Ht()-a.renderingStartTime>hr&&i!==536870912&&(n.flags|=128,l=!0,co(a,!1),n.lanes=4194304);a.isBackwards?(o.sibling=n.child,n.child=o):(e=a.last,e!==null?e.sibling=o:n.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ht(),e.sibling=null,i=fn.current,ae(fn,l?i&1|2:i&1),xt&&ea(n,a.treeForkCount),e):(en(n),null);case 22:case 23:return yi(n),Ds(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(i&536870912)!==0&&(n.flags&128)===0&&(en(n),n.subtreeFlags&6&&(n.flags|=8192)):en(n),i=n.updateQueue,i!==null&&dr(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048),e!==null&&ge(Za),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),na(jn),en(n),null;case 25:return null;case 30:return null}throw Error(c(156,n.tag))}function xf(e,n){switch(us(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return na(jn),kt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Nt(n),null;case 31:if(n.memoizedState!==null){if(yi(n),n.alternate===null)throw Error(c(340));Qa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(yi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(c(340));Qa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ge(fn),null;case 4:return kt(),null;case 10:return na(n.type),null;case 22:case 23:return yi(n),Ds(),e!==null&&ge(Za),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return na(jn),null;case 25:return null;default:return null}}function cp(e,n){switch(us(n),n.tag){case 3:na(jn),kt();break;case 26:case 27:case 5:Nt(n);break;case 4:kt();break;case 31:n.memoizedState!==null&&yi(n);break;case 13:yi(n);break;case 19:ge(fn);break;case 10:na(n.type);break;case 22:case 23:yi(n),Ds(),e!==null&&ge(Za);break;case 24:na(jn)}}function uo(e,n){try{var i=n.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var l=a.next;i=l;do{if((i.tag&e)===e){a=void 0;var o=i.create,d=i.inst;a=o(),d.destroy=a}i=i.next}while(i!==l)}}catch(p){Mt(n,n.return,p)}}function za(e,n,i){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){var d=a.inst,p=d.destroy;if(p!==void 0){d.destroy=void 0,l=n;var w=i,H=p;try{H()}catch(Q){Mt(l,w,Q)}}}a=a.next}while(a!==o)}}catch(Q){Mt(n,n.return,Q)}}function up(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{tu(n,i)}catch(a){Mt(e,e.return,a)}}}function pp(e,n,i){i.props=nl(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(a){Mt(e,n,a)}}function po(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof i=="function"?e.refCleanup=i(a):i.current=a}}catch(l){Mt(e,n,l)}}function Xi(e,n){var i=e.ref,a=e.refCleanup;if(i!==null)if(typeof a=="function")try{a()}catch(l){Mt(e,n,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(l){Mt(e,n,l)}else i.current=null}function mp(e){var n=e.type,i=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&a.focus();break e;case"img":i.src?a.src=i.src:i.srcSet&&(a.srcset=i.srcSet)}}catch(l){Mt(e,e.return,l)}}function ad(e,n,i){try{var a=e.stateNode;If(a,e.type,i,n),a[Kt]=n}catch(l){Mt(e,e.return,l)}}function hp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ha(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ha(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Hn));else if(a!==4&&(a===27&&Ha(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(od(e,n,i),e=e.sibling;e!==null;)od(e,n,i),e=e.sibling}function cr(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(a!==4&&(a===27&&Ha(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(cr(e,n,i),e=e.sibling;e!==null;)cr(e,n,i),e=e.sibling}function fp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var a=e.type,l=n.attributes;l.length;)n.removeAttributeNode(l[0]);In(n,a,i),n[Oe]=e,n[Kt]=i}catch(o){Mt(e,e.return,o)}}var ra=!1,Cn=!1,rd=!1,gp=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function bf(e,n){if(e=e.containerInfo,zd=Rr,e=zc(e),es(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var l=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var d=0,p=-1,w=-1,H=0,Q=0,ne=e,L=null;t:for(;;){for(var _;ne!==i||l!==0&&ne.nodeType!==3||(p=d+l),ne!==o||a!==0&&ne.nodeType!==3||(w=d+a),ne.nodeType===3&&(d+=ne.nodeValue.length),(_=ne.firstChild)!==null;)L=ne,ne=_;for(;;){if(ne===e)break t;if(L===i&&++H===l&&(p=d),L===o&&++Q===a&&(w=d),(_=ne.nextSibling)!==null)break;ne=L,L=ne.parentNode}ne=_}i=p===-1||w===-1?null:{start:p,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(Bd={focusedElem:e,selectionRange:i},Rr=!1,Mn=n;Mn!==null;)if(n=Mn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Mn=e;else for(;Mn!==null;){switch(n=Mn,o=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)l=e[i],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,i=n,l=o.memoizedProps,o=o.memoizedState,a=i.stateNode;try{var Te=nl(i.type,l);e=a.getSnapshotBeforeUpdate(Te,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Mt(i,i.return,_e)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Ed(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=n.sibling,e!==null){e.return=n.return,Mn=e;break}Mn=n.return}}function yp(e,n,i){var a=i.flags;switch(i.tag){case 0:case 11:case 15:da(e,i),a&4&&uo(5,i);break;case 1:if(da(e,i),a&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(d){Mt(i,i.return,d)}else{var l=nl(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(l,n,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Mt(i,i.return,d)}}a&64&&up(i),a&512&&po(i,i.return);break;case 3:if(da(e,i),a&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{tu(e,n)}catch(d){Mt(i,i.return,d)}}break;case 27:n===null&&a&4&&fp(i);case 26:case 5:da(e,i),n===null&&a&4&&mp(i),a&512&&po(i,i.return);break;case 12:da(e,i);break;case 31:da(e,i),a&4&&vp(e,i);break;case 13:da(e,i),a&4&&jp(e,i),a&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=zf.bind(null,i),Qf(e,i))));break;case 22:if(a=i.memoizedState!==null||ra,!a){n=n!==null&&n.memoizedState!==null||Cn,l=ra;var o=Cn;ra=a,(Cn=n)&&!o?ca(e,i,(i.subtreeFlags&8772)!==0):da(e,i),ra=l,Cn=o}break;case 30:break;default:da(e,i)}}function xp(e){var n=e.alternate;n!==null&&(e.alternate=null,xp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Mi(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nn=null,ai=!1;function sa(e,n,i){for(i=i.child;i!==null;)bp(e,n,i),i=i.sibling}function bp(e,n,i){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Se,i)}catch{}switch(i.tag){case 26:Cn||Xi(i,n),sa(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Cn||Xi(i,n);var a=nn,l=ai;Ha(i.type)&&(nn=i.stateNode,ai=!1),sa(e,n,i),jo(i.stateNode),nn=a,ai=l;break;case 5:Cn||Xi(i,n);case 6:if(a=nn,l=ai,nn=null,sa(e,n,i),nn=a,ai=l,nn!==null)if(ai)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(i.stateNode)}catch(o){Mt(i,n,o)}else try{nn.removeChild(i.stateNode)}catch(o){Mt(i,n,o)}break;case 18:nn!==null&&(ai?(e=nn,um(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Pl(e)):um(nn,i.stateNode));break;case 4:a=nn,l=ai,nn=i.stateNode.containerInfo,ai=!0,sa(e,n,i),nn=a,ai=l;break;case 0:case 11:case 14:case 15:za(2,i,n),Cn||za(4,i,n),sa(e,n,i);break;case 1:Cn||(Xi(i,n),a=i.stateNode,typeof a.componentWillUnmount=="function"&&pp(i,n,a)),sa(e,n,i);break;case 21:sa(e,n,i);break;case 22:Cn=(a=Cn)||i.memoizedState!==null,sa(e,n,i),Cn=a;break;default:sa(e,n,i)}}function vp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pl(e)}catch(i){Mt(n,n.return,i)}}}function jp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pl(e)}catch(i){Mt(n,n.return,i)}}function vf(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new gp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new gp),n;default:throw Error(c(435,e.tag))}}function ur(e,n){var i=vf(e);n.forEach(function(a){if(!i.has(a)){i.add(a);var l=Bf.bind(null,e,a);a.then(l,l)}})}function li(e,n){var i=n.deletions;if(i!==null)for(var a=0;a<i.length;a++){var l=i[a],o=e,d=n,p=d;e:for(;p!==null;){switch(p.tag){case 27:if(Ha(p.type)){nn=p.stateNode,ai=!1;break e}break;case 5:nn=p.stateNode,ai=!1;break e;case 3:case 4:nn=p.stateNode.containerInfo,ai=!0;break e}p=p.return}if(nn===null)throw Error(c(160));bp(o,d,l),nn=null,ai=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Sp(n,e),n=n.sibling}var Pi=null;function Sp(e,n){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:li(n,e),oi(e),a&4&&(za(3,e,e.return),uo(3,e),za(5,e,e.return));break;case 1:li(n,e),oi(e),a&512&&(Cn||i===null||Xi(i,i.return)),a&64&&ra&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?a:i.concat(a))));break;case 26:var l=Pi;if(li(n,e),oi(e),a&512&&(Cn||i===null||Xi(i,i.return)),a&4){var o=i!==null?i.memoizedState:null;if(a=e.memoizedState,i===null)if(a===null)if(e.stateNode===null){e:{a=e.type,i=e.memoizedProps,l=l.ownerDocument||l;t:switch(a){case"title":o=l.getElementsByTagName("title")[0],(!o||o[Kn]||o[Oe]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(a),l.head.insertBefore(o,l.querySelector("head > title"))),In(o,a,i),o[Oe]=e,rn(o),a=o;break e;case"link":var d=Sm("link","href",l).get(a+(i.href||""));if(d){for(var p=0;p<d.length;p++)if(o=d[p],o.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&o.getAttribute("rel")===(i.rel==null?null:i.rel)&&o.getAttribute("title")===(i.title==null?null:i.title)&&o.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){d.splice(p,1);break t}}o=l.createElement(a),In(o,a,i),l.head.appendChild(o);break;case"meta":if(d=Sm("meta","content",l).get(a+(i.content||""))){for(p=0;p<d.length;p++)if(o=d[p],o.getAttribute("content")===(i.content==null?null:""+i.content)&&o.getAttribute("name")===(i.name==null?null:i.name)&&o.getAttribute("property")===(i.property==null?null:i.property)&&o.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&o.getAttribute("charset")===(i.charSet==null?null:i.charSet)){d.splice(p,1);break t}}o=l.createElement(a),In(o,a,i),l.head.appendChild(o);break;default:throw Error(c(468,a))}o[Oe]=e,rn(o),a=o}e.stateNode=a}else wm(l,e.type,e.stateNode);else e.stateNode=jm(l,a,e.memoizedProps);else o!==a?(o===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):o.count--,a===null?wm(l,e.type,e.stateNode):jm(l,a,e.memoizedProps)):a===null&&e.stateNode!==null&&ad(e,e.memoizedProps,i.memoizedProps)}break;case 27:li(n,e),oi(e),a&512&&(Cn||i===null||Xi(i,i.return)),i!==null&&a&4&&ad(e,e.memoizedProps,i.memoizedProps);break;case 5:if(li(n,e),oi(e),a&512&&(Cn||i===null||Xi(i,i.return)),e.flags&32){l=e.stateNode;try{ut(l,"")}catch(Te){Mt(e,e.return,Te)}}a&4&&e.stateNode!=null&&(l=e.memoizedProps,ad(e,l,i!==null?i.memoizedProps:l)),a&1024&&(rd=!0);break;case 6:if(li(n,e),oi(e),a&4){if(e.stateNode===null)throw Error(c(162));a=e.memoizedProps,i=e.stateNode;try{i.nodeValue=a}catch(Te){Mt(e,e.return,Te)}}break;case 3:if(Tr=null,l=Pi,Pi=Ar(n.containerInfo),li(n,e),Pi=l,oi(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Pl(n.containerInfo)}catch(Te){Mt(e,e.return,Te)}rd&&(rd=!1,wp(e));break;case 4:a=Pi,Pi=Ar(e.stateNode.containerInfo),li(n,e),oi(e),Pi=a;break;case 12:li(n,e),oi(e);break;case 31:li(n,e),oi(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 13:li(n,e),oi(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(mr=Ht()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 22:l=e.memoizedState!==null;var w=i!==null&&i.memoizedState!==null,H=ra,Q=Cn;if(ra=H||l,Cn=Q||w,li(n,e),Cn=Q,ra=H,oi(e),a&8192)e:for(n=e.stateNode,n._visibility=l?n._visibility&-2:n._visibility|1,l&&(i===null||w||ra||Cn||il(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){w=i=n;try{if(o=w.stateNode,l)d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{p=w.stateNode;var ne=w.memoizedProps.style,L=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;p.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(Te){Mt(w,w.return,Te)}}}else if(n.tag===6){if(i===null){w=n;try{w.stateNode.nodeValue=l?"":w.memoizedProps}catch(Te){Mt(w,w.return,Te)}}}else if(n.tag===18){if(i===null){w=n;try{var _=w.stateNode;l?pm(_,!0):pm(w.stateNode,!1)}catch(Te){Mt(w,w.return,Te)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(i=a.retryQueue,i!==null&&(a.retryQueue=null,ur(e,i))));break;case 19:li(n,e),oi(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 30:break;case 21:break;default:li(n,e),oi(e)}}function oi(e){var n=e.flags;if(n&2){try{for(var i,a=e.return;a!==null;){if(hp(a)){i=a;break}a=a.return}if(i==null)throw Error(c(160));switch(i.tag){case 27:var l=i.stateNode,o=ld(e);cr(e,o,l);break;case 5:var d=i.stateNode;i.flags&32&&(ut(d,""),i.flags&=-33);var p=ld(e);cr(e,p,d);break;case 3:case 4:var w=i.stateNode.containerInfo,H=ld(e);od(e,H,w);break;default:throw Error(c(161))}}catch(Q){Mt(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function wp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;wp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function da(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)yp(e,n.alternate,n),n=n.sibling}function il(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:za(4,n,n.return),il(n);break;case 1:Xi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&pp(n,n.return,i),il(n);break;case 27:jo(n.stateNode);case 26:case 5:Xi(n,n.return),il(n);break;case 22:n.memoizedState===null&&il(n);break;case 30:il(n);break;default:il(n)}e=e.sibling}}function ca(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,l=e,o=n,d=o.flags;switch(o.tag){case 0:case 11:case 15:ca(l,o,i),uo(4,o);break;case 1:if(ca(l,o,i),a=o,l=a.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(H){Mt(a,a.return,H)}if(a=o,l=a.updateQueue,l!==null){var p=a.stateNode;try{var w=l.shared.hiddenCallbacks;if(w!==null)for(l.shared.hiddenCallbacks=null,l=0;l<w.length;l++)eu(w[l],p)}catch(H){Mt(a,a.return,H)}}i&&d&64&&up(o),po(o,o.return);break;case 27:fp(o);case 26:case 5:ca(l,o,i),i&&a===null&&d&4&&mp(o),po(o,o.return);break;case 12:ca(l,o,i);break;case 31:ca(l,o,i),i&&d&4&&vp(l,o);break;case 13:ca(l,o,i),i&&d&4&&jp(l,o);break;case 22:o.memoizedState===null&&ca(l,o,i),po(o,o.return);break;case 30:break;default:ca(l,o,i)}n=n.sibling}}function sd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Zl(i))}function dd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zl(e))}function Ii(e,n,i,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cp(e,n,i,a),n=n.sibling}function Cp(e,n,i,a){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ii(e,n,i,a),l&2048&&uo(9,n);break;case 1:Ii(e,n,i,a);break;case 3:Ii(e,n,i,a),l&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zl(e)));break;case 12:if(l&2048){Ii(e,n,i,a),e=n.stateNode;try{var o=n.memoizedProps,d=o.id,p=o.onPostCommit;typeof p=="function"&&p(d,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Mt(n,n.return,w)}}else Ii(e,n,i,a);break;case 31:Ii(e,n,i,a);break;case 13:Ii(e,n,i,a);break;case 23:break;case 22:o=n.stateNode,d=n.alternate,n.memoizedState!==null?o._visibility&2?Ii(e,n,i,a):mo(e,n):o._visibility&2?Ii(e,n,i,a):(o._visibility|=2,zl(e,n,i,a,(n.subtreeFlags&10256)!==0||!1)),l&2048&&sd(d,n);break;case 24:Ii(e,n,i,a),l&2048&&dd(n.alternate,n);break;default:Ii(e,n,i,a)}}function zl(e,n,i,a,l){for(l=l&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var o=e,d=n,p=i,w=a,H=d.flags;switch(d.tag){case 0:case 11:case 15:zl(o,d,p,w,l),uo(8,d);break;case 23:break;case 22:var Q=d.stateNode;d.memoizedState!==null?Q._visibility&2?zl(o,d,p,w,l):mo(o,d):(Q._visibility|=2,zl(o,d,p,w,l)),l&&H&2048&&sd(d.alternate,d);break;case 24:zl(o,d,p,w,l),l&&H&2048&&dd(d.alternate,d);break;default:zl(o,d,p,w,l)}n=n.sibling}}function mo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,a=n,l=a.flags;switch(a.tag){case 22:mo(i,a),l&2048&&sd(a.alternate,a);break;case 24:mo(i,a),l&2048&&dd(a.alternate,a);break;default:mo(i,a)}n=n.sibling}}var ho=8192;function Bl(e,n,i){if(e.subtreeFlags&ho)for(e=e.child;e!==null;)Ap(e,n,i),e=e.sibling}function Ap(e,n,i){switch(e.tag){case 26:Bl(e,n,i),e.flags&ho&&e.memoizedState!==null&&og(i,Pi,e.memoizedState,e.memoizedProps);break;case 5:Bl(e,n,i);break;case 3:case 4:var a=Pi;Pi=Ar(e.stateNode.containerInfo),Bl(e,n,i),Pi=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ho,ho=16777216,Bl(e,n,i),ho=a):Bl(e,n,i));break;default:Bl(e,n,i)}}function Dp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];Mn=a,zp(a,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Tp(e),e=e.sibling}function Tp(e){switch(e.tag){case 0:case 11:case 15:fo(e),e.flags&2048&&za(9,e,e.return);break;case 3:fo(e);break;case 12:fo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,pr(e)):fo(e);break;default:fo(e)}}function pr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];Mn=a,zp(a,e)}Dp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:za(8,n,n.return),pr(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,pr(n));break;default:pr(n)}e=e.sibling}}function zp(e,n){for(;Mn!==null;){var i=Mn;switch(i.tag){case 0:case 11:case 15:za(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var a=i.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Zl(i.memoizedState.cache)}if(a=i.child,a!==null)a.return=i,Mn=a;else e:for(i=e;Mn!==null;){a=Mn;var l=a.sibling,o=a.return;if(xp(a),a===i){Mn=null;break e}if(l!==null){l.return=o,Mn=l;break e}Mn=o}}}var jf={getCacheForType:function(e){var n=Ln(jn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Ln(jn).controller.signal}},Sf=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Gt=null,mt=null,gt=0,Et=0,xi=null,Ba=!1,kl=!1,cd=!1,ua=0,un=0,ka=0,al=0,ud=0,bi=0,Rl=0,go=null,ri=null,pd=!1,mr=0,Bp=0,hr=1/0,fr=null,Ra=null,Tn=0,Ea=null,El=null,pa=0,md=0,hd=null,kp=null,yo=0,fd=null;function vi(){return(Bt&2)!==0&&gt!==0?gt&-gt:q.T!==null?jd():He()}function Rp(){if(bi===0)if((gt&536870912)===0||xt){var e=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),bi=e}else bi=536870912;return e=gi.current,e!==null&&(e.flags|=32),bi}function si(e,n,i){(e===Gt&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(Ml(e,0),Ma(e,gt,bi,!1)),Ot(e,i),((Bt&2)===0||e!==Gt)&&(e===Gt&&((Bt&2)===0&&(al|=i),un===4&&Ma(e,gt,bi,!1)),Ki(e))}function Ep(e,n,i){if((Bt&6)!==0)throw Error(c(327));var a=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Ze(e,n),l=a?Af(e,n):yd(e,n,!0),o=a;do{if(l===0){kl&&!a&&Ma(e,n,0,!1);break}else{if(i=e.current.alternate,o&&!wf(i)){l=yd(e,n,!1),o=!1;continue}if(l===2){if(o=n,e.errorRecoveryDisabledLanes&o)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){n=d;e:{var p=e;l=go;var w=p.current.memoizedState.isDehydrated;if(w&&(Ml(p,d).flags|=256),d=yd(p,d,!1),d!==2){if(cd&&!w){p.errorRecoveryDisabledLanes|=o,al|=o,l=4;break e}o=ri,ri=l,o!==null&&(ri===null?ri=o:ri.push.apply(ri,o))}l=d}if(o=!1,l!==2)continue}}if(l===1){Ml(e,0),Ma(e,n,0,!0);break}e:{switch(a=e,o=l,o){case 0:case 1:throw Error(c(345));case 4:if((n&4194048)!==n)break;case 6:Ma(a,n,bi,!Ba);break e;case 2:ri=null;break;case 3:case 5:break;default:throw Error(c(329))}if((n&62914560)===n&&(l=mr+300-Ht(),10<l)){if(Ma(a,n,bi,!Ba),Bn(a,0,!0)!==0)break e;pa=n,a.timeoutHandle=dm(Mp.bind(null,a,i,ri,fr,pd,n,bi,al,Rl,Ba,o,"Throttled",-0,0),l);break e}Mp(a,i,ri,fr,pd,n,bi,al,Rl,Ba,o,null,-0,0)}}break}while(!0);Ki(e)}function Mp(e,n,i,a,l,o,d,p,w,H,Q,ne,L,_){if(e.timeoutHandle=-1,ne=n.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},Ap(n,o,ne);var Te=(o&62914560)===o?mr-Ht():(o&4194048)===o?Bp-Ht():0;if(Te=rg(ne,Te),Te!==null){pa=o,e.cancelPendingCommit=Te(_p.bind(null,e,n,o,i,a,l,d,p,w,Q,ne,null,L,_)),Ma(e,o,d,!H);return}}_p(e,n,o,i,a,l,d,p,w)}function wf(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var a=0;a<i.length;a++){var l=i[a],o=l.getSnapshot;l=l.value;try{if(!hi(o(),l))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ma(e,n,i,a){n&=~ud,n&=~al,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var l=n;0<l;){var o=31-Re(l),d=1<<o;a[o]=-1,l&=~d}i!==0&&C(e,i,n)}function gr(){return(Bt&6)===0?(xo(0),!1):!0}function gd(){if(mt!==null){if(Et===0)var e=mt.return;else e=mt,ta=Xa=null,Es(e),wl=null,$l=0,e=mt;for(;e!==null;)cp(e.alternate,e),e=e.return;mt=null}}function Ml(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Gf(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),pa=0,gd(),Gt=e,mt=i=$i(e.current,null),gt=n,Et=0,xi=null,Ba=!1,kl=Ze(e,n),cd=!1,Rl=bi=ud=al=ka=un=0,ri=go=null,pd=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var l=31-Re(a),o=1<<l;n|=e[l],a&=~o}return ua=n,Oo(),i}function Np(e,n){et=null,q.H=ro,n===Sl||n===Yo?(n=Kc(),Et=3):n===vs?(n=Kc(),Et=4):Et=n===Qs?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,xi=n,mt===null&&(un=1,lr(e,Ci(n,e.current)))}function Hp(){var e=gi.current;return e===null?!0:(gt&4194048)===gt?zi===null:(gt&62914560)===gt||(gt&536870912)!==0?e===zi:!1}function Up(){var e=q.H;return q.H=ro,e===null?ro:e}function Op(){var e=q.A;return q.A=jf,e}function yr(){un=4,Ba||(gt&4194048)!==gt&&gi.current!==null||(kl=!0),(ka&134217727)===0&&(al&134217727)===0||Gt===null||Ma(Gt,gt,bi,!1)}function yd(e,n,i){var a=Bt;Bt|=2;var l=Up(),o=Op();(Gt!==e||gt!==n)&&(fr=null,Ml(e,n)),n=!1;var d=un;e:do try{if(Et!==0&&mt!==null){var p=mt,w=xi;switch(Et){case 8:gd(),d=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(n=!0);var H=Et;if(Et=0,xi=null,Nl(e,p,w,H),i&&kl){d=0;break e}break;default:H=Et,Et=0,xi=null,Nl(e,p,w,H)}}Cf(),d=un;break}catch(Q){Np(e,Q)}while(!0);return n&&e.shellSuspendCounter++,ta=Xa=null,Bt=a,q.H=l,q.A=o,mt===null&&(Gt=null,gt=0,Oo()),d}function Cf(){for(;mt!==null;)Lp(mt)}function Af(e,n){var i=Bt;Bt|=2;var a=Up(),l=Op();Gt!==e||gt!==n?(fr=null,hr=Ht()+500,Ml(e,n)):kl=Ze(e,n);e:do try{if(Et!==0&&mt!==null){n=mt;var o=xi;t:switch(Et){case 1:Et=0,xi=null,Nl(e,n,o,1);break;case 2:case 9:if(Qc(o)){Et=0,xi=null,Pp(n);break}n=function(){Et!==2&&Et!==9||Gt!==e||(Et=7),Ki(e)},o.then(n,n);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:Qc(o)?(Et=0,xi=null,Pp(n)):(Et=0,xi=null,Nl(e,n,o,7));break;case 5:var d=null;switch(mt.tag){case 26:d=mt.memoizedState;case 5:case 27:var p=mt;if(d?Cm(d):p.stateNode.complete){Et=0,xi=null;var w=p.sibling;if(w!==null)mt=w;else{var H=p.return;H!==null?(mt=H,xr(H)):mt=null}break t}}Et=0,xi=null,Nl(e,n,o,5);break;case 6:Et=0,xi=null,Nl(e,n,o,6);break;case 8:gd(),un=6;break e;default:throw Error(c(462))}}Df();break}catch(Q){Np(e,Q)}while(!0);return ta=Xa=null,q.H=a,q.A=l,Bt=i,mt!==null?0:(Gt=null,gt=0,Oo(),un)}function Df(){for(;mt!==null&&!xn();)Lp(mt)}function Lp(e){var n=sp(e.alternate,e,ua);e.memoizedProps=e.pendingProps,n===null?xr(e):mt=n}function Pp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=np(i,n,n.pendingProps,n.type,void 0,gt);break;case 11:n=np(i,n,n.pendingProps,n.type.render,n.ref,gt);break;case 5:Es(n);default:cp(i,n),n=mt=Oc(n,ua),n=sp(i,n,ua)}e.memoizedProps=e.pendingProps,n===null?xr(e):mt=n}function Nl(e,n,i,a){ta=Xa=null,Es(n),wl=null,$l=0;var l=n.return;try{if(hf(e,l,n,i,gt)){un=1,lr(e,Ci(i,e.current)),mt=null;return}}catch(o){if(l!==null)throw mt=l,o;un=1,lr(e,Ci(i,e.current)),mt=null;return}n.flags&32768?(xt||a===1?e=!0:kl||(gt&536870912)!==0?e=!1:(Ba=e=!0,(a===2||a===9||a===3||a===6)&&(a=gi.current,a!==null&&a.tag===13&&(a.flags|=16384))),Ip(n,e)):xr(n)}function xr(e){var n=e;do{if((n.flags&32768)!==0){Ip(n,Ba);return}e=n.return;var i=yf(n.alternate,n,ua);if(i!==null){mt=i;return}if(n=n.sibling,n!==null){mt=n;return}mt=n=e}while(n!==null);un===0&&(un=5)}function Ip(e,n){do{var i=xf(e.alternate,e);if(i!==null){i.flags&=32767,mt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){mt=e;return}mt=e=i}while(e!==null);un=6,mt=null}function _p(e,n,i,a,l,o,d,p,w){e.cancelPendingCommit=null;do br();while(Tn!==0);if((Bt&6)!==0)throw Error(c(327));if(n!==null){if(n===e.current)throw Error(c(177));if(o=n.lanes|n.childLanes,o|=ls,$e(e,i,o,d,p,w),e===Gt&&(mt=Gt=null,gt=0),El=n,Ea=e,pa=i,md=o,hd=l,kp=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,kf(Qn,function(){return Fp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null,l=se.p,se.p=2,d=Bt,Bt|=4;try{bf(e,n,i)}finally{Bt=d,se.p=l,q.T=a}}Tn=1,qp(),Gp(),Wp()}}function qp(){if(Tn===1){Tn=0;var e=Ea,n=El,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=q.T,q.T=null;var a=se.p;se.p=2;var l=Bt;Bt|=4;try{Sp(n,e);var o=Bd,d=zc(e.containerInfo),p=o.focusedElem,w=o.selectionRange;if(d!==p&&p&&p.ownerDocument&&Tc(p.ownerDocument.documentElement,p)){if(w!==null&&es(p)){var H=w.start,Q=w.end;if(Q===void 0&&(Q=H),"selectionStart"in p)p.selectionStart=H,p.selectionEnd=Math.min(Q,p.value.length);else{var ne=p.ownerDocument||document,L=ne&&ne.defaultView||window;if(L.getSelection){var _=L.getSelection(),Te=p.textContent.length,_e=Math.min(w.start,Te),_t=w.end===void 0?_e:Math.min(w.end,Te);!_.extend&&_e>_t&&(d=_t,_t=_e,_e=d);var B=Dc(p,_e),T=Dc(p,_t);if(B&&T&&(_.rangeCount!==1||_.anchorNode!==B.node||_.anchorOffset!==B.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var N=ne.createRange();N.setStart(B.node,B.offset),_.removeAllRanges(),_e>_t?(_.addRange(N),_.extend(T.node,T.offset)):(N.setEnd(T.node,T.offset),_.addRange(N))}}}}for(ne=[],_=p;_=_.parentNode;)_.nodeType===1&&ne.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<ne.length;p++){var $=ne[p];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Rr=!!zd,Bd=zd=null}finally{Bt=l,se.p=a,q.T=i}}e.current=n,Tn=2}}function Gp(){if(Tn===2){Tn=0;var e=Ea,n=El,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=q.T,q.T=null;var a=se.p;se.p=2;var l=Bt;Bt|=4;try{yp(e,n.alternate,n)}finally{Bt=l,se.p=a,q.T=i}}Tn=3}}function Wp(){if(Tn===4||Tn===3){Tn=0,Ei();var e=Ea,n=El,i=pa,a=kp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Tn=5:(Tn=0,El=Ea=null,Yp(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ra=null),Ne(i),n=n.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Se,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=q.T,l=se.p,se.p=2,q.T=null;try{for(var o=e.onRecoverableError,d=0;d<a.length;d++){var p=a[d];o(p.value,{componentStack:p.stack})}}finally{q.T=n,se.p=l}}(pa&3)!==0&&br(),Ki(e),l=e.pendingLanes,(i&261930)!==0&&(l&42)!==0?e===fd?yo++:(yo=0,fd=e):yo=0,xo(0)}}function Yp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Zl(n)))}function br(){return qp(),Gp(),Wp(),Fp()}function Fp(){if(Tn!==5)return!1;var e=Ea,n=md;md=0;var i=Ne(pa),a=q.T,l=se.p;try{se.p=32>i?32:i,q.T=null,i=hd,hd=null;var o=Ea,d=pa;if(Tn=0,El=Ea=null,pa=0,(Bt&6)!==0)throw Error(c(331));var p=Bt;if(Bt|=4,Tp(o.current),Cp(o,o.current,d,i),Bt=p,xo(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Se,o)}catch{}return!0}finally{se.p=l,q.T=a,Yp(e,n)}}function Vp(e,n,i){n=Ci(i,n),n=Vs(e.stateNode,n,2),e=Aa(e,n,2),e!==null&&(Ot(e,2),Ki(e))}function Mt(e,n,i){if(e.tag===3)Vp(e,e,i);else for(;n!==null;){if(n.tag===3){Vp(n,e,i);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ra===null||!Ra.has(a))){e=Ci(i,e),i=Qu(2),a=Aa(n,i,2),a!==null&&(Xu(i,a,n,e),Ot(a,2),Ki(a));break}}n=n.return}}function xd(e,n,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Sf;var l=new Set;a.set(n,l)}else l=a.get(n),l===void 0&&(l=new Set,a.set(n,l));l.has(i)||(cd=!0,l.add(i),e=Tf.bind(null,e,n,i),n.then(e,e))}function Tf(e,n,i){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Gt===e&&(gt&i)===i&&(un===4||un===3&&(gt&62914560)===gt&&300>Ht()-mr?(Bt&2)===0&&Ml(e,0):ud|=i,Rl===gt&&(Rl=0)),Ki(e)}function Qp(e,n){n===0&&(n=jt()),e=Fa(e,n),e!==null&&(Ot(e,n),Ki(e))}function zf(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Qp(e,i)}function Bf(e,n){var i=0;switch(e.tag){case 31:case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(c(314))}a!==null&&a.delete(n),Qp(e,i)}function kf(e,n){return qn(e,n)}var vr=null,Hl=null,bd=!1,jr=!1,vd=!1,Na=0;function Ki(e){e!==Hl&&e.next===null&&(Hl===null?vr=Hl=e:Hl=Hl.next=e),jr=!0,bd||(bd=!0,Ef())}function xo(e,n){if(!vd&&jr){vd=!0;do for(var i=!1,a=vr;a!==null;){if(e!==0){var l=a.pendingLanes;if(l===0)var o=0;else{var d=a.suspendedLanes,p=a.pingedLanes;o=(1<<31-Re(42|e)+1)-1,o&=l&~(d&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(i=!0,Jp(a,o))}else o=gt,o=Bn(a,a===Gt?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(o&3)===0||Ze(a,o)||(i=!0,Jp(a,o));a=a.next}while(i);vd=!1}}function Rf(){Xp()}function Xp(){jr=bd=!1;var e=0;Na!==0&&qf()&&(e=Na);for(var n=Ht(),i=null,a=vr;a!==null;){var l=a.next,o=Kp(a,n);o===0?(a.next=null,i===null?vr=l:i.next=l,l===null&&(Hl=i)):(i=a,(e!==0||(o&3)!==0)&&(jr=!0)),a=l}Tn!==0&&Tn!==5||xo(e),Na!==0&&(Na=0)}function Kp(e,n){for(var i=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var d=31-Re(o),p=1<<d,w=l[d];w===-1?((p&i)===0||(p&a)!==0)&&(l[d]=ni(p,n)):w<=n&&(e.expiredLanes|=p),o&=~p}if(n=Gt,i=gt,i=Bn(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,i===0||e===n&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&fe(a),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ze(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(a!==null&&fe(a),Ne(i)){case 2:case 8:i=vt;break;case 32:i=Qn;break;case 268435456:i=sn;break;default:i=Qn}return a=Zp.bind(null,e),i=qn(i,a),e.callbackPriority=n,e.callbackNode=i,n}return a!==null&&a!==null&&fe(a),e.callbackPriority=2,e.callbackNode=null,2}function Zp(e,n){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(br()&&e.callbackNode!==i)return null;var a=gt;return a=Bn(e,e===Gt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ep(e,a,n),Kp(e,Ht()),e.callbackNode!=null&&e.callbackNode===i?Zp.bind(null,e):null)}function Jp(e,n){if(br())return null;Ep(e,n,!0)}function Ef(){Wf(function(){(Bt&6)!==0?qn(Vn,Rf):Xp()})}function jd(){if(Na===0){var e=vl;e===0&&(e=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Na=e}return Na}function $p(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fn(""+e)}function em(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function Mf(e,n,i,a,l){if(n==="submit"&&i&&i.stateNode===l){var o=$p((l[Kt]||null).action),d=a.submitter;d&&(n=(n=d[Kt]||null)?$p(n.formAction):d.getAttribute("formAction"),n!==null&&(o=n,d=null));var p=new Ke("action","action",null,a,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Na!==0){var w=d?em(l,d):new FormData(l);_s(i,{pending:!0,data:w,method:l.method,action:o},null,w)}}else typeof o=="function"&&(p.preventDefault(),w=d?em(l,d):new FormData(l),_s(i,{pending:!0,data:w,method:l.method,action:o},o,w))},currentTarget:l}]})}}for(var Sd=0;Sd<as.length;Sd++){var wd=as[Sd],Nf=wd.toLowerCase(),Hf=wd[0].toUpperCase()+wd.slice(1);Li(Nf,"on"+Hf)}Li(Rc,"onAnimationEnd"),Li(Ec,"onAnimationIteration"),Li(Mc,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Kh,"onTransitionRun"),Li(Zh,"onTransitionStart"),Li(Jh,"onTransitionCancel"),Li(Nc,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bo));function tm(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],l=a.event;a=a.listeners;e:{var o=void 0;if(n)for(var d=a.length-1;0<=d;d--){var p=a[d],w=p.instance,H=p.currentTarget;if(p=p.listener,w!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=H;try{o(l)}catch(Q){Uo(Q)}l.currentTarget=null,o=w}else for(d=0;d<a.length;d++){if(p=a[d],w=p.instance,H=p.currentTarget,p=p.listener,w!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=H;try{o(l)}catch(Q){Uo(Q)}l.currentTarget=null,o=w}}}}function ht(e,n){var i=n[Je];i===void 0&&(i=n[Je]=new Set);var a=e+"__bubble";i.has(a)||(nm(n,e,2,!1),i.add(a))}function Cd(e,n,i){var a=0;n&&(a|=4),nm(i,e,a,n)}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Ad(e){if(!e[Sr]){e[Sr]=!0,qa.forEach(function(i){i!=="selectionchange"&&(Uf.has(i)||Cd(i,!1,e),Cd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Sr]||(n[Sr]=!0,Cd("selectionchange",!1,n))}}function nm(e,n,i,a){switch(Rm(n)){case 2:var l=cg;break;case 8:l=ug;break;default:l=Id}i=l.bind(null,n,i,e),l=void 0,!Ji||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(n,i,{capture:!0,passive:l}):e.addEventListener(n,i,!0):l!==void 0?e.addEventListener(n,i,{passive:l}):e.addEventListener(n,i,!1)}function Dd(e,n,i,a,l){var o=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var p=a.stateNode.containerInfo;if(p===l)break;if(d===4)for(d=a.return;d!==null;){var w=d.tag;if((w===3||w===4)&&d.stateNode.containerInfo===l)return;d=d.return}for(;p!==null;){if(d=qi(p),d===null)return;if(w=d.tag,w===5||w===6||w===26||w===27){a=o=d;continue e}p=p.parentNode}}a=a.return}rl(function(){var H=o,Q=ii(i),ne=[];e:{var L=Hc.get(e);if(L!==void 0){var _=Ke,Te=e;switch(e){case"keypress":if(xa(i)===0)break e;case"keydown":case"keyup":_=zh;break;case"focusin":Te="focus",_=Xr;break;case"focusout":Te="blur",_=Xr;break;case"beforeblur":case"afterblur":_=Xr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Rh;break;case Rc:case Ec:case Mc:_=bh;break;case Nc:_=Mh;break;case"scroll":case"scrollend":_=Mo;break;case"wheel":_=Hh;break;case"copy":case"cut":case"paste":_=jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=pc;break;case"toggle":case"beforetoggle":_=Oh}var _e=(n&4)!==0,_t=!_e&&(e==="scroll"||e==="scrollend"),B=_e?L!==null?L+"Capture":null:L;_e=[];for(var T=H,N;T!==null;){var $=T;if(N=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||N===null||B===null||($=Ui(T,B),$!=null&&_e.push(vo(T,$,N))),_t)break;T=T.return}0<_e.length&&(L=new _(L,Te,null,i,Q),ne.push({event:L,listeners:_e}))}}if((n&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",L&&i!==En&&(Te=i.relatedTarget||i.fromElement)&&(qi(Te)||Te[Si]))break e;if((_||L)&&(L=Q.window===Q?Q:(L=Q.ownerDocument)?L.defaultView||L.parentWindow:window,_?(Te=i.relatedTarget||i.toElement,_=H,Te=Te?qi(Te):null,Te!==null&&(_t=g(Te),_e=Te.tag,Te!==_t||_e!==5&&_e!==27&&_e!==6)&&(Te=null)):(_=null,Te=H),_!==Te)){if(_e=cc,$="onMouseLeave",B="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(_e=pc,$="onPointerLeave",B="onPointerEnter",T="pointer"),_t=_==null?L:Zi(_),N=Te==null?L:Zi(Te),L=new _e($,T+"leave",_,i,Q),L.target=_t,L.relatedTarget=N,$=null,qi(Q)===H&&(_e=new _e(B,T+"enter",Te,i,Q),_e.target=N,_e.relatedTarget=_t,$=_e),_t=$,_&&Te)t:{for(_e=Of,B=_,T=Te,N=0,$=B;$;$=_e($))N++;$=0;for(var Ue=T;Ue;Ue=_e(Ue))$++;for(;0<N-$;)B=_e(B),N--;for(;0<$-N;)T=_e(T),$--;for(;N--;){if(B===T||T!==null&&B===T.alternate){_e=B;break t}B=_e(B),T=_e(T)}_e=null}else _e=null;_!==null&&im(ne,L,_,_e,!1),Te!==null&&_t!==null&&im(ne,_t,Te,_e,!0)}}e:{if(L=H?Zi(H):window,_=L.nodeName&&L.nodeName.toLowerCase(),_==="select"||_==="input"&&L.type==="file")var Dt=vc;else if(xc(L))if(jc)Dt=Vh;else{Dt=Yh;var Ee=Wh}else _=L.nodeName,!_||_.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?H&&kn(H.elementType)&&(Dt=vc):Dt=Fh;if(Dt&&(Dt=Dt(e,H))){bc(ne,Dt,i,Q);break e}Ee&&Ee(e,L,H),e==="focusout"&&H&&L.type==="number"&&H.memoizedProps.value!=null&&pt(L,"number",L.value)}switch(Ee=H?Zi(H):window,e){case"focusin":(xc(Ee)||Ee.contentEditable==="true")&&(pl=Ee,ts=H,Ql=null);break;case"focusout":Ql=ts=pl=null;break;case"mousedown":ns=!0;break;case"contextmenu":case"mouseup":case"dragend":ns=!1,Bc(ne,i,Q);break;case"selectionchange":if(Xh)break;case"keydown":case"keyup":Bc(ne,i,Q)}var it;if(Zr)e:{switch(e){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ul?gc(e,i)&&(yt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(yt="onCompositionStart");yt&&(mc&&i.locale!=="ko"&&(ul||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ul&&(it=Eo()):(Oi=Q,sl="value"in Oi?Oi.value:Oi.textContent,ul=!0)),Ee=wr(H,yt),0<Ee.length&&(yt=new uc(yt,e,null,i,Q),ne.push({event:yt,listeners:Ee}),it?yt.data=it:(it=yc(i),it!==null&&(yt.data=it)))),(it=Ph?Ih(e,i):_h(e,i))&&(yt=wr(H,"onBeforeInput"),0<yt.length&&(Ee=new uc("onBeforeInput","beforeinput",null,i,Q),ne.push({event:Ee,listeners:yt}),Ee.data=it)),Mf(ne,e,H,i,Q)}tm(ne,n)})}function vo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function wr(e,n){for(var i=n+"Capture",a=[];e!==null;){var l=e,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=Ui(e,i),l!=null&&a.unshift(vo(e,l,o)),l=Ui(e,n),l!=null&&a.push(vo(e,l,o))),e.tag===3)return a;e=e.return}return[]}function Of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function im(e,n,i,a,l){for(var o=n._reactName,d=[];i!==null&&i!==a;){var p=i,w=p.alternate,H=p.stateNode;if(p=p.tag,w!==null&&w===a)break;p!==5&&p!==26&&p!==27||H===null||(w=H,l?(H=Ui(i,o),H!=null&&d.unshift(vo(i,H,w))):l||(H=Ui(i,o),H!=null&&d.push(vo(i,H,w)))),i=i.return}d.length!==0&&e.push({event:n,listeners:d})}var Lf=/\r\n?/g,Pf=/\u0000|\uFFFD/g;function am(e){return(typeof e=="string"?e:""+e).replace(Lf,`
`).replace(Pf,"")}function lm(e,n){return n=am(n),am(e)===n}function It(e,n,i,a,l,o){switch(i){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||ut(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&ut(e,""+a);break;case"className":Zt(e,"class",a);break;case"tabIndex":Zt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(e,i,a);break;case"style":Dn(e,a,o);break;case"data":if(n!=="object"){Zt(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=Fn(""+a),e.setAttribute(i,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(i==="formAction"?(n!=="input"&&It(e,n,"name",l.name,l,null),It(e,n,"formEncType",l.formEncType,l,null),It(e,n,"formMethod",l.formMethod,l,null),It(e,n,"formTarget",l.formTarget,l,null)):(It(e,n,"encType",l.encType,l,null),It(e,n,"method",l.method,l,null),It(e,n,"target",l.target,l,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=Fn(""+a),e.setAttribute(i,a);break;case"onClick":a!=null&&(e.onclick=Hn);break;case"onScroll":a!=null&&ht("scroll",e);break;case"onScrollEnd":a!=null&&ht("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=i}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}i=Fn(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""+a):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":a===!0?e.setAttribute(i,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,a):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(i,a):e.removeAttribute(i);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(i):e.setAttribute(i,a);break;case"popover":ht("beforetoggle",e),ht("toggle",e),Lt(e,"popover",a);break;case"xlinkActuate":qt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":qt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":qt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":qt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":qt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":qt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":qt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":qt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":qt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Lt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Rn.get(i)||i,Lt(e,i,a))}}function Td(e,n,i,a,l,o){switch(i){case"style":Dn(e,a,o);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=i}}break;case"children":typeof a=="string"?ut(e,a):(typeof a=="number"||typeof a=="bigint")&&ut(e,""+a);break;case"onScroll":a!=null&&ht("scroll",e);break;case"onScrollEnd":a!=null&&ht("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(l=i.endsWith("Capture"),n=i.slice(2,l?i.length-7:void 0),o=e[Kt]||null,o=o!=null?o[i]:null,typeof o=="function"&&e.removeEventListener(n,o,l),typeof a=="function")){typeof o!="function"&&o!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,a,l);break e}i in e?e[i]=a:a===!0?e.setAttribute(i,""):Lt(e,i,a)}}}function In(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",e),ht("load",e);var a=!1,l=!1,o;for(o in i)if(i.hasOwnProperty(o)){var d=i[o];if(d!=null)switch(o){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:It(e,n,o,d,i,null)}}l&&It(e,n,"srcSet",i.srcSet,i,null),a&&It(e,n,"src",i.src,i,null);return;case"input":ht("invalid",e);var p=o=d=l=null,w=null,H=null;for(a in i)if(i.hasOwnProperty(a)){var Q=i[a];if(Q!=null)switch(a){case"name":l=Q;break;case"type":d=Q;break;case"checked":w=Q;break;case"defaultChecked":H=Q;break;case"value":o=Q;break;case"defaultValue":p=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(c(137,n));break;default:It(e,n,a,Q,i,null)}}Qe(e,o,p,w,H,d,l,!1);return;case"select":ht("invalid",e),a=d=o=null;for(l in i)if(i.hasOwnProperty(l)&&(p=i[l],p!=null))switch(l){case"value":o=p;break;case"defaultValue":d=p;break;case"multiple":a=p;default:It(e,n,l,p,i,null)}n=o,i=d,e.multiple=!!a,n!=null?ot(e,!!a,n,!1):i!=null&&ot(e,!!a,i,!0);return;case"textarea":ht("invalid",e),o=l=a=null;for(d in i)if(i.hasOwnProperty(d)&&(p=i[d],p!=null))switch(d){case"value":a=p;break;case"defaultValue":l=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(c(91));break;default:It(e,n,d,p,i,null)}rt(e,a,l,o);return;case"option":for(w in i)if(i.hasOwnProperty(w)&&(a=i[w],a!=null))switch(w){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:It(e,n,w,a,i,null)}return;case"dialog":ht("beforetoggle",e),ht("toggle",e),ht("cancel",e),ht("close",e);break;case"iframe":case"object":ht("load",e);break;case"video":case"audio":for(a=0;a<bo.length;a++)ht(bo[a],e);break;case"image":ht("error",e),ht("load",e);break;case"details":ht("toggle",e);break;case"embed":case"source":case"link":ht("error",e),ht("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(a=i[H],a!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:It(e,n,H,a,i,null)}return;default:if(kn(n)){for(Q in i)i.hasOwnProperty(Q)&&(a=i[Q],a!==void 0&&Td(e,n,Q,a,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(a=i[p],a!=null&&It(e,n,p,a,i,null))}function If(e,n,i,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,d=null,p=null,w=null,H=null,Q=null;for(_ in i){var ne=i[_];if(i.hasOwnProperty(_)&&ne!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":w=ne;default:a.hasOwnProperty(_)||It(e,n,_,null,a,ne)}}for(var L in a){var _=a[L];if(ne=i[L],a.hasOwnProperty(L)&&(_!=null||ne!=null))switch(L){case"type":o=_;break;case"name":l=_;break;case"checked":H=_;break;case"defaultChecked":Q=_;break;case"value":d=_;break;case"defaultValue":p=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(c(137,n));break;default:_!==ne&&It(e,n,L,_,a,ne)}}Ie(e,d,p,w,H,Q,o,l);return;case"select":_=d=p=L=null;for(o in i)if(w=i[o],i.hasOwnProperty(o)&&w!=null)switch(o){case"value":break;case"multiple":_=w;default:a.hasOwnProperty(o)||It(e,n,o,null,a,w)}for(l in a)if(o=a[l],w=i[l],a.hasOwnProperty(l)&&(o!=null||w!=null))switch(l){case"value":L=o;break;case"defaultValue":p=o;break;case"multiple":d=o;default:o!==w&&It(e,n,l,o,a,w)}n=p,i=d,a=_,L!=null?ot(e,!!i,L,!1):!!a!=!!i&&(n!=null?ot(e,!!i,n,!0):ot(e,!!i,i?[]:"",!1));return;case"textarea":_=L=null;for(p in i)if(l=i[p],i.hasOwnProperty(p)&&l!=null&&!a.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:It(e,n,p,null,a,l)}for(d in a)if(l=a[d],o=i[d],a.hasOwnProperty(d)&&(l!=null||o!=null))switch(d){case"value":L=l;break;case"defaultValue":_=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(c(91));break;default:l!==o&&It(e,n,d,l,a,o)}Le(e,L,_);return;case"option":for(var Te in i)if(L=i[Te],i.hasOwnProperty(Te)&&L!=null&&!a.hasOwnProperty(Te))switch(Te){case"selected":e.selected=!1;break;default:It(e,n,Te,null,a,L)}for(w in a)if(L=a[w],_=i[w],a.hasOwnProperty(w)&&L!==_&&(L!=null||_!=null))switch(w){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:It(e,n,w,L,a,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in i)L=i[_e],i.hasOwnProperty(_e)&&L!=null&&!a.hasOwnProperty(_e)&&It(e,n,_e,null,a,L);for(H in a)if(L=a[H],_=i[H],a.hasOwnProperty(H)&&L!==_&&(L!=null||_!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(c(137,n));break;default:It(e,n,H,L,a,_)}return;default:if(kn(n)){for(var _t in i)L=i[_t],i.hasOwnProperty(_t)&&L!==void 0&&!a.hasOwnProperty(_t)&&Td(e,n,_t,void 0,a,L);for(Q in a)L=a[Q],_=i[Q],!a.hasOwnProperty(Q)||L===_||L===void 0&&_===void 0||Td(e,n,Q,L,a,_);return}}for(var B in i)L=i[B],i.hasOwnProperty(B)&&L!=null&&!a.hasOwnProperty(B)&&It(e,n,B,null,a,L);for(ne in a)L=a[ne],_=i[ne],!a.hasOwnProperty(ne)||L===_||L==null&&_==null||It(e,n,ne,L,a,_)}function om(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _f(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),a=0;a<i.length;a++){var l=i[a],o=l.transferSize,d=l.initiatorType,p=l.duration;if(o&&p&&om(d)){for(d=0,p=l.responseEnd,a+=1;a<i.length;a++){var w=i[a],H=w.startTime;if(H>p)break;var Q=w.transferSize,ne=w.initiatorType;Q&&om(ne)&&(w=w.responseEnd,d+=Q*(w<p?1:(p-H)/(w-H)))}if(--a,n+=8*(o+d)/(l.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zd=null,Bd=null;function Cr(e){return e.nodeType===9?e:e.ownerDocument}function rm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function kd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rd=null;function qf(){var e=window.event;return e&&e.type==="popstate"?e===Rd?!1:(Rd=e,!0):(Rd=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,cm=typeof Promise=="function"?Promise:void 0,Wf=typeof queueMicrotask=="function"?queueMicrotask:typeof cm<"u"?function(e){return cm.resolve(null).then(e).catch(Yf)}:dm;function Yf(e){setTimeout(function(){throw e})}function Ha(e){return e==="head"}function um(e,n){var i=n,a=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"||i==="/&"){if(a===0){e.removeChild(l),Pl(n);return}a--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")a++;else if(i==="html")jo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,jo(i);for(var o=i.firstChild;o;){var d=o.nextSibling,p=o.nodeName;o[Kn]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&o.rel.toLowerCase()==="stylesheet"||i.removeChild(o),o=d}}else i==="body"&&jo(e.ownerDocument.body);i=l}while(i);Pl(n)}function pm(e,n){var i=e;e=0;do{var a=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=a}while(i)}function Ed(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ed(i),Mi(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ff(e,n,i,a){for(;e.nodeType===1;){var l=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Kn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Bi(e.nextSibling),e===null)break}return null}function Vf(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Bi(e.nextSibling),e===null))return null;return e}function mm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bi(e.nextSibling),e===null))return null;return e}function Md(e){return e.data==="$?"||e.data==="$~"}function Nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qf(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var a=function(){n(),i.removeEventListener("DOMContentLoaded",a)};i.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Bi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Hd=null;function hm(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Bi(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function fm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function gm(e,n,i){switch(n=Cr(i),e){case"html":if(e=n.documentElement,!e)throw Error(c(452));return e;case"head":if(e=n.head,!e)throw Error(c(453));return e;case"body":if(e=n.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function jo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Mi(e)}var ki=new Map,ym=new Set;function Ar(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ma=se.d;se.d={f:Xf,r:Kf,D:Zf,C:Jf,L:$f,m:eg,X:ng,S:tg,M:ig};function Xf(){var e=ma.f(),n=gr();return e||n}function Kf(e){var n=Gi(e);n!==null&&n.tag===5&&n.type==="form"?Nu(n):ma.r(e)}var Ul=typeof document>"u"?null:document;function xm(e,n,i){var a=Ul;if(a&&typeof n=="string"&&n){var l=ve(n);l='link[rel="'+e+'"][href="'+l+'"]',typeof i=="string"&&(l+='[crossorigin="'+i+'"]'),ym.has(l)||(ym.add(l),e={rel:e,crossOrigin:i,href:n},a.querySelector(l)===null&&(n=a.createElement("link"),In(n,"link",e),rn(n),a.head.appendChild(n)))}}function Zf(e){ma.D(e),xm("dns-prefetch",e,null)}function Jf(e,n){ma.C(e,n),xm("preconnect",e,n)}function $f(e,n,i){ma.L(e,n,i);var a=Ul;if(a&&e&&n){var l='link[rel="preload"][as="'+ve(n)+'"]';n==="image"&&i&&i.imageSrcSet?(l+='[imagesrcset="'+ve(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(l+='[imagesizes="'+ve(i.imageSizes)+'"]')):l+='[href="'+ve(e)+'"]';var o=l;switch(n){case"style":o=Ol(e);break;case"script":o=Ll(e)}ki.has(o)||(e=U({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ki.set(o,e),a.querySelector(l)!==null||n==="style"&&a.querySelector(So(o))||n==="script"&&a.querySelector(wo(o))||(n=a.createElement("link"),In(n,"link",e),rn(n),a.head.appendChild(n)))}}function eg(e,n){ma.m(e,n);var i=Ul;if(i&&e){var a=n&&typeof n.as=="string"?n.as:"script",l='link[rel="modulepreload"][as="'+ve(a)+'"][href="'+ve(e)+'"]',o=l;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ll(e)}if(!ki.has(o)&&(e=U({rel:"modulepreload",href:e},n),ki.set(o,e),i.querySelector(l)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(wo(o)))return}a=i.createElement("link"),In(a,"link",e),rn(a),i.head.appendChild(a)}}}function tg(e,n,i){ma.S(e,n,i);var a=Ul;if(a&&e){var l=Ni(a).hoistableStyles,o=Ol(e);n=n||"default";var d=l.get(o);if(!d){var p={loading:0,preload:null};if(d=a.querySelector(So(o)))p.loading=5;else{e=U({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ki.get(o))&&Ud(e,i);var w=d=a.createElement("link");rn(w),In(w,"link",e),w._p=new Promise(function(H,Q){w.onload=H,w.onerror=Q}),w.addEventListener("load",function(){p.loading|=1}),w.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Dr(d,n,a)}d={type:"stylesheet",instance:d,count:1,state:p},l.set(o,d)}}}function ng(e,n){ma.X(e,n);var i=Ul;if(i&&e){var a=Ni(i).hoistableScripts,l=Ll(e),o=a.get(l);o||(o=i.querySelector(wo(l)),o||(e=U({src:e,async:!0},n),(n=ki.get(l))&&Od(e,n),o=i.createElement("script"),rn(o),In(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function ig(e,n){ma.M(e,n);var i=Ul;if(i&&e){var a=Ni(i).hoistableScripts,l=Ll(e),o=a.get(l);o||(o=i.querySelector(wo(l)),o||(e=U({src:e,async:!0,type:"module"},n),(n=ki.get(l))&&Od(e,n),o=i.createElement("script"),rn(o),In(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function bm(e,n,i,a){var l=(l=Ye.current)?Ar(l):null;if(!l)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ol(i.href),i=Ni(l).hoistableStyles,a=i.get(n),a||(a={type:"style",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ol(i.href);var o=Ni(l).hoistableStyles,d=o.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,d),(o=l.querySelector(So(e)))&&!o._p&&(d.instance=o,d.state.loading=5),ki.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ki.set(e,i),o||ag(l,e,i,d.state))),n&&a===null)throw Error(c(528,""));return d}if(n&&a!==null)throw Error(c(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ll(i),i=Ni(l).hoistableScripts,a=i.get(n),a||(a={type:"script",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Ol(e){return'href="'+ve(e)+'"'}function So(e){return'link[rel="stylesheet"]['+e+"]"}function vm(e){return U({},e,{"data-precedence":e.precedence,precedence:null})}function ag(e,n,i,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),In(n,"link",i),rn(n),e.head.appendChild(n))}function Ll(e){return'[src="'+ve(e)+'"]'}function wo(e){return"script[async]"+e}function jm(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+ve(i.href)+'"]');if(a)return n.instance=a,rn(a),a;var l=U({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),rn(a),In(a,"style",l),Dr(a,i.precedence,e),n.instance=a;case"stylesheet":l=Ol(i.href);var o=e.querySelector(So(l));if(o)return n.state.loading|=4,n.instance=o,rn(o),o;a=vm(i),(l=ki.get(l))&&Ud(a,l),o=(e.ownerDocument||e).createElement("link"),rn(o);var d=o;return d._p=new Promise(function(p,w){d.onload=p,d.onerror=w}),In(o,"link",a),n.state.loading|=4,Dr(o,i.precedence,e),n.instance=o;case"script":return o=Ll(i.src),(l=e.querySelector(wo(o)))?(n.instance=l,rn(l),l):(a=i,(l=ki.get(o))&&(a=U({},i),Od(a,l)),e=e.ownerDocument||e,l=e.createElement("script"),rn(l),In(l,"link",a),e.head.appendChild(l),n.instance=l);case"void":return null;default:throw Error(c(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,Dr(a,i.precedence,e));return n.instance}function Dr(e,n,i){for(var a=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=a.length?a[a.length-1]:null,o=l,d=0;d<a.length;d++){var p=a[d];if(p.dataset.precedence===n)o=p;else if(o!==l)break}o?o.parentNode.insertBefore(e,o.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Od(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Tr=null;function Sm(e,n,i){if(Tr===null){var a=new Map,l=Tr=new Map;l.set(i,a)}else l=Tr,a=l.get(i),a||(a=new Map,l.set(i,a));if(a.has(e))return a;for(a.set(e,null),i=i.getElementsByTagName(e),l=0;l<i.length;l++){var o=i[l];if(!(o[Kn]||o[Oe]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var d=o.getAttribute(n)||"";d=e+d;var p=a.get(d);p?p.push(o):a.set(d,[o])}}return a}function wm(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function lg(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Cm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function og(e,n,i,a){if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var l=Ol(a.href),o=n.querySelector(So(l));if(o){n=o._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=zr.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=o,rn(o);return}o=n.ownerDocument||n,a=vm(a),(l=ki.get(l))&&Ud(a,l),o=o.createElement("link"),rn(o);var d=o;d._p=new Promise(function(p,w){d.onload=p,d.onerror=w}),In(o,"link",a),i.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=zr.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ld=0;function rg(e,n){return e.stylesheets&&e.count===0&&kr(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var a=setTimeout(function(){if(e.stylesheets&&kr(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+n);0<e.imgBytes&&Ld===0&&(Ld=62500*_f());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kr(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Ld?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(l)}}:null}function zr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Br=null;function kr(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Br=new Map,n.forEach(sg,e),Br=null,zr.call(e))}function sg(e,n){if(!(n.state.loading&4)){var i=Br.get(e);if(i)var a=i.get(null);else{i=new Map,Br.set(e,i);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var d=l[o];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(i.set(d.dataset.precedence,d),a=d)}a&&i.set(null,a)}l=n.instance,d=l.getAttribute("data-precedence"),o=i.get(d)||a,o===a&&i.set(null,l),i.set(d,l),this.count++,a=zr.bind(this),l.addEventListener("load",a),l.addEventListener("error",a),o?o.parentNode.insertBefore(l,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),n.state.loading|=4}}var Co={$$typeof:de,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function dg(e,n,i,a,l,o,d,p,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=a,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Am(e,n,i,a,l,o,d,p,w,H,Q,ne){return e=new dg(e,n,i,d,w,H,Q,ne,p),n=1,o===!0&&(n|=24),o=fi(3,null,null,n),e.current=o,o.stateNode=e,n=ys(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:a,isDehydrated:i,cache:n},js(o),e}function Dm(e){return e?(e=fl,e):fl}function Tm(e,n,i,a,l,o){l=Dm(l),a.context===null?a.context=l:a.pendingContext=l,a=Ca(n),a.payload={element:i},o=o===void 0?null:o,o!==null&&(a.callback=o),i=Aa(e,a,n),i!==null&&(si(i,e,n),to(i,e,n))}function zm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Pd(e,n){zm(e,n),(e=e.alternate)&&zm(e,n)}function Bm(e){if(e.tag===13||e.tag===31){var n=Fa(e,67108864);n!==null&&si(n,e,67108864),Pd(e,67108864)}}function km(e){if(e.tag===13||e.tag===31){var n=vi();n=ie(n);var i=Fa(e,n);i!==null&&si(i,e,n),Pd(e,n)}}var Rr=!0;function cg(e,n,i,a){var l=q.T;q.T=null;var o=se.p;try{se.p=2,Id(e,n,i,a)}finally{se.p=o,q.T=l}}function ug(e,n,i,a){var l=q.T;q.T=null;var o=se.p;try{se.p=8,Id(e,n,i,a)}finally{se.p=o,q.T=l}}function Id(e,n,i,a){if(Rr){var l=_d(a);if(l===null)Dd(e,n,a,Er,i),Em(e,a);else if(mg(l,e,n,i,a))a.stopPropagation();else if(Em(e,a),n&4&&-1<pg.indexOf(e)){for(;l!==null;){var o=Gi(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var d=bn(o.pendingLanes);if(d!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;d;){var w=1<<31-Re(d);p.entanglements[1]|=w,d&=~w}Ki(o),(Bt&6)===0&&(hr=Ht()+500,xo(0))}}break;case 31:case 13:p=Fa(o,2),p!==null&&si(p,o,2),gr(),Pd(o,2)}if(o=_d(a),o===null&&Dd(e,n,a,Er,i),o===l)break;l=o}l!==null&&a.stopPropagation()}else Dd(e,n,a,null,i)}}function _d(e){return e=ii(e),qd(e)}var Er=null;function qd(e){if(Er=null,e=qi(e),e!==null){var n=g(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=x(n),e!==null)return e;e=null}else if(i===31){if(e=y(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Er=e,null}function Rm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case Vn:return 2;case vt:return 8;case Qn:case Ut:return 32;case sn:return 268435456;default:return 32}default:return 32}}var Gd=!1,Ua=null,Oa=null,La=null,Ao=new Map,Do=new Map,Pa=[],pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Em(e,n){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Ao.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(n.pointerId)}}function To(e,n,i,a,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:n,domEventName:i,eventSystemFlags:a,nativeEvent:o,targetContainers:[l]},n!==null&&(n=Gi(n),n!==null&&Bm(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),e)}function mg(e,n,i,a,l){switch(n){case"focusin":return Ua=To(Ua,e,n,i,a,l),!0;case"dragenter":return Oa=To(Oa,e,n,i,a,l),!0;case"mouseover":return La=To(La,e,n,i,a,l),!0;case"pointerover":var o=l.pointerId;return Ao.set(o,To(Ao.get(o)||null,e,n,i,a,l)),!0;case"gotpointercapture":return o=l.pointerId,Do.set(o,To(Do.get(o)||null,e,n,i,a,l)),!0}return!1}function Mm(e){var n=qi(e.target);if(n!==null){var i=g(n);if(i!==null){if(n=i.tag,n===13){if(n=x(i),n!==null){e.blockedOn=n,At(e.priority,function(){km(i)});return}}else if(n===31){if(n=y(i),n!==null){e.blockedOn=n,At(e.priority,function(){km(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mr(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=_d(e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);En=a,i.target.dispatchEvent(a),En=null}else return n=Gi(i),n!==null&&Bm(n),e.blockedOn=i,!1;n.shift()}return!0}function Nm(e,n,i){Mr(e)&&i.delete(n)}function hg(){Gd=!1,Ua!==null&&Mr(Ua)&&(Ua=null),Oa!==null&&Mr(Oa)&&(Oa=null),La!==null&&Mr(La)&&(La=null),Ao.forEach(Nm),Do.forEach(Nm)}function Nr(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,hg)))}var Hr=null;function Hm(e){Hr!==e&&(Hr=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hr===e&&(Hr=null);for(var n=0;n<e.length;n+=3){var i=e[n],a=e[n+1],l=e[n+2];if(typeof a!="function"){if(qd(a||i)===null)continue;break}var o=Gi(i);o!==null&&(e.splice(n,3),n-=3,_s(o,{pending:!0,data:l,method:i.method,action:a},a,l))}}))}function Pl(e){function n(w){return Nr(w,e)}Ua!==null&&Nr(Ua,e),Oa!==null&&Nr(Oa,e),La!==null&&Nr(La,e),Ao.forEach(n),Do.forEach(n);for(var i=0;i<Pa.length;i++){var a=Pa[i];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Pa.length&&(i=Pa[0],i.blockedOn===null);)Mm(i),i.blockedOn===null&&Pa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(a=0;a<i.length;a+=3){var l=i[a],o=i[a+1],d=l[Kt]||null;if(typeof o=="function")d||Hm(i);else if(d){var p=null;if(o&&o.hasAttribute("formAction")){if(l=o,d=o[Kt]||null)p=d.formAction;else if(qd(l)!==null)continue}else p=d.action;typeof p=="function"?i[a+1]=p:(i.splice(a,3),a-=3),Hm(i)}}}function Um(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(d){return l=d})},focusReset:"manual",scroll:"manual"})}function n(){l!==null&&(l(),l=null),a||setTimeout(i,20)}function i(){if(!a&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),l!==null&&(l(),l=null)}}}function Wd(e){this._internalRoot=e}Ur.prototype.render=Wd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(c(409));var i=n.current,a=vi();Tm(i,a,e,n,null,null)},Ur.prototype.unmount=Wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Tm(e.current,2,null,e,null,null),gr(),n[Si]=null}};function Ur(e){this._internalRoot=e}Ur.prototype.unstable_scheduleHydration=function(e){if(e){var n=He();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Pa.length&&n!==0&&n<Pa[i].priority;i++);Pa.splice(i,0,e),i===0&&Mm(e)}};var Om=s.version;if(Om!=="19.2.1")throw Error(c(527,Om,"19.2.1"));se.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=j(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var fg={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Or=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Or.isDisabled&&Or.supportsFiber)try{Se=Or.inject(fg),we=Or}catch{}}return Bo.createRoot=function(e,n){if(!f(e))throw Error(c(299));var i=!1,a="",l=Wu,o=Yu,d=Fu;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=Am(e,1,!1,null,null,i,a,null,l,o,d,Um),e[Si]=n.current,Ad(e),new Wd(n)},Bo.hydrateRoot=function(e,n,i){if(!f(e))throw Error(c(299));var a=!1,l="",o=Wu,d=Yu,p=Fu,w=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(o=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(w=i.formState)),n=Am(e,1,!0,n,i??null,a,l,w,o,d,p,Um),n.context=Dm(null),i=n.current,a=vi(),a=ie(a),l=Ca(a),l.callback=null,Aa(i,l,a),i=a,n.current.lanes=i,Ot(n,i),Ki(n),e[Si]=n.current,Ad(e),new Ur(n)},Bo.version="19.2.1",Bo}var Fm;function Fg(){if(Fm)return Fd.exports;Fm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),Fd.exports=Yg(),Fd.exports}var Vg=Fg();const Qg=()=>t.jsxs("div",{style:Be.container,children:[t.jsx("div",{style:Be.hero,children:t.jsxs("div",{style:Be.heroContent,children:[t.jsxs("h1",{style:Be.heroTitle,children:[t.jsx("span",{style:Be.gradientText,children:"Healthcare"})," at Your Fingertips"]}),t.jsx("p",{style:Be.heroSubtitle,children:"Book appointments with top doctors and hospitals instantly. No registration required!"}),t.jsxs("div",{style:Be.ctaButtons,children:[t.jsxs(ji,{to:"/book",style:Be.primaryCta,children:[t.jsx("span",{style:{display:"inline-flex",marginRight:"10px",lineHeight:0},"aria-hidden":"true",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[t.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),t.jsx("path",{d:"M16 3v4M8 3v4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M7 11h10M7 15h10",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})}),"Book Appointment Now"]}),t.jsx("a",{href:"#features",style:Be.secondaryCta,children:"Learn More "})]}),t.jsxs("div",{style:Be.statsBar,children:[t.jsxs("div",{style:Be.statItem,children:[t.jsx("div",{style:Be.statNumber,children:"1000+"}),t.jsx("div",{style:Be.statLabel,children:"Doctors"})]}),t.jsx("div",{style:Be.statDivider}),t.jsxs("div",{style:Be.statItem,children:[t.jsx("div",{style:Be.statNumber,children:"50+"}),t.jsx("div",{style:Be.statLabel,children:"Hospitals"})]}),t.jsx("div",{style:Be.statDivider}),t.jsxs("div",{style:Be.statItem,children:[t.jsx("div",{style:Be.statNumber,children:"10k+"}),t.jsx("div",{style:Be.statLabel,children:"Happy Patients"})]})]})]})}),t.jsxs("div",{id:"features",style:Be.featuresSection,children:[t.jsx("h2",{style:Be.sectionTitle,children:"Why Choose Us?"}),t.jsxs("div",{style:Be.featuresGrid,children:[t.jsxs("div",{style:Be.featureCard,children:[t.jsx("div",{style:{...Be.iconCircle,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:""}),t.jsx("h3",{style:Be.featureTitle,children:"Wide Network"}),t.jsx("p",{style:Be.featureText,children:"Access to 1000+ verified doctors and 50+ hospitals across multiple cities"})]}),t.jsxs("div",{style:Be.featureCard,children:[t.jsx("div",{style:{...Be.iconCircle,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:""}),t.jsx("h3",{style:Be.featureTitle,children:"Instant Booking"}),t.jsx("p",{style:Be.featureText,children:"Book appointments in seconds without any registration hassle"})]}),t.jsxs("div",{style:Be.featureCard,children:[t.jsx("div",{style:{...Be.iconCircle,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:""}),t.jsx("h3",{style:Be.featureTitle,children:"Secure Payments"}),t.jsx("p",{style:Be.featureText,children:"Safe and secure online payment with multiple payment options"})]}),t.jsxs("div",{style:Be.featureCard,children:[t.jsx("div",{style:{...Be.iconCircle,background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:""}),t.jsx("h3",{style:Be.featureTitle,children:"Easy Rescheduling"}),t.jsx("p",{style:Be.featureText,children:"Reschedule or cancel appointments easily with just a few clicks"})]})]})]}),t.jsxs("div",{style:Be.providerSection,children:[t.jsxs("div",{style:Be.providerCard,children:[t.jsx("div",{style:Be.providerIcon,children:""}),t.jsx("h3",{style:Be.providerTitle,children:"Are you a Doctor?"}),t.jsx("p",{style:Be.providerText,children:"Join our platform and manage your appointments efficiently"}),t.jsxs("div",{style:Be.providerButtons,children:[t.jsx(ji,{to:"/login",style:Be.loginButton,children:"Login"}),t.jsx(ji,{to:"/register",style:Be.registerButton,children:"Register"})]})]}),t.jsxs("div",{style:Be.providerCard,children:[t.jsx("div",{style:Be.providerIcon,children:""}),t.jsx("h3",{style:Be.providerTitle,children:"Hospital?"}),t.jsx("p",{style:Be.providerText,children:"Digitize your hospital operations and reach more patients"}),t.jsxs("div",{style:Be.providerButtons,children:[t.jsx(ji,{to:"/login",style:Be.loginButton,children:"Login"}),t.jsx(ji,{to:"/register",style:Be.registerButton,children:"Register"})]})]})]}),!1,t.jsxs("div",{style:Be.footer,children:[t.jsx("p",{style:Be.footerText,children:" 2025 Souldoc. All rights reserved."}),t.jsxs("div",{style:Be.footerLinks,children:[t.jsx("a",{href:"/privacy",style:Be.footerLink,children:"Privacy Policy"}),t.jsx("span",{style:Be.footerDivider,children:""}),t.jsx("a",{href:"/terms",style:Be.footerLink,children:"Terms of Service"}),t.jsx("span",{style:Be.footerDivider,children:""}),t.jsx("a",{href:"mailto:pauljos@gmail.com",style:Be.footerLink,children:"Contact Us"})]})]}),t.jsx("style",{children:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0px);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                
                @keyframes pulse {
                    0%, 100% {
                        transform: scale(1);
                    }
                    50% {
                        transform: scale(1.05);
                    }
                }
            `})]}),Be={container:{minHeight:"100vh",background:"linear-gradient(to bottom, #f8f9fa, #ffffff)"},hero:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"80px 20px",textAlign:"center",position:"relative",overflow:"hidden"},heroContent:{maxWidth:"1200px",margin:"0 auto",position:"relative",zIndex:1,animation:"fadeInUp 0.8s ease-out"},heroTitle:{fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:"800",color:"white",marginBottom:"20px",lineHeight:"1.2"},gradientText:{background:"linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},heroSubtitle:{fontSize:"clamp(1rem, 2vw, 1.3rem)",color:"rgba(255, 255, 255, 0.9)",marginBottom:"40px",maxWidth:"700px",margin:"0 auto 40px",lineHeight:"1.6"},ctaButtons:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap",marginBottom:"60px"},primaryCta:{padding:"18px 40px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center"},secondaryCta:{padding:"18px 40px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},statsBar:{display:"flex",justifyContent:"center",alignItems:"center",gap:"40px",flexWrap:"wrap",padding:"30px",background:"rgba(255, 255, 255, 0.15)",borderRadius:"20px",backdropFilter:"blur(10px)",maxWidth:"800px",margin:"0 auto"},statItem:{textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"800",color:"white",marginBottom:"5px"},statLabel:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},statDivider:{width:"2px",height:"60px",background:"rgba(255, 255, 255, 0.3)"},featuresSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto"},sectionTitle:{fontSize:"clamp(2rem, 4vw, 2.5rem)",fontWeight:"700",textAlign:"center",marginBottom:"60px",color:"#333"},featuresGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"30px"},featureCard:{background:"white",padding:"40px 30px",borderRadius:"20px",textAlign:"center",boxShadow:"0 5px 20px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease",cursor:"pointer",minWidth:"0"},iconCircle:{width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",margin:"0 auto 20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.15)"},featureTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"15px",color:"#333"},featureText:{color:"#666",lineHeight:"1.6",fontSize:"0.95rem"},providerSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"40px"},providerCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"50px 40px",borderRadius:"25px",textAlign:"center",color:"white",boxShadow:"0 10px 40px rgba(102, 126, 234, 0.3)"},providerIcon:{fontSize:"4rem",marginBottom:"20px",animation:"float 3s ease-in-out infinite"},providerTitle:{fontSize:"1.8rem",fontWeight:"700",marginBottom:"15px"},providerText:{fontSize:"1rem",opacity:.9,marginBottom:"30px",lineHeight:"1.6"},providerButtons:{display:"flex",gap:"15px",justifyContent:"center"},loginButton:{padding:"12px 30px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontWeight:"600",transition:"all 0.3s ease"},registerButton:{padding:"12px 30px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},footer:{background:"#2d3436",color:"white",padding:"40px 20px",textAlign:"center"},footerText:{margin:"0 0 15px 0",opacity:.8},footerLinks:{display:"flex",justifyContent:"center",gap:"15px",flexWrap:"wrap",alignItems:"center"},footerLink:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s"},footerDivider:{opacity:.5}};const Xg="type.googleapis.com/google.protobuf.Int64Value",Kg="type.googleapis.com/google.protobuf.UInt64Value";function nh(r,s){const u={};for(const c in r)r.hasOwnProperty(c)&&(u[c]=s(r[c]));return u}function qr(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(s=>qr(s));if(typeof r=="function"||typeof r=="object")return nh(r,s=>qr(s));throw new Error("Data cannot be encoded in JSON: "+r)}function Il(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case Xg:case Kg:{const s=Number(r.value);if(isNaN(s))throw new Error("Data cannot be decoded from JSON: "+r);return s}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(s=>Il(s)):typeof r=="function"||typeof r=="object"?nh(r,s=>Il(s)):r}const ic="functions";const Vm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ui extends Rg{constructor(s,u,c){super(`${ic}/${s}`,u||""),this.details=c,Object.setPrototypeOf(this,ui.prototype)}}function Zg(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Gr(r,s){let u=Zg(r),c=u,f;try{const g=s&&s.error;if(g){const x=g.status;if(typeof x=="string"){if(!Vm[x])return new ui("internal","internal");u=Vm[x],c=x}const y=g.message;typeof y=="string"&&(c=y),f=g.details,f!==void 0&&(f=Il(f))}}catch{}return u==="ok"?null:new ui(u,c,f)}class Jg{constructor(s,u,c,f){this.app=s,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ag(s)&&s.settings.appCheckToken&&(this.serverAppAppCheckToken=s.settings.appCheckToken),this.auth=u.getImmediate({optional:!0}),this.messaging=c.getImmediate({optional:!0}),this.auth||u.get().then(g=>this.auth=g,()=>{}),this.messaging||c.get().then(g=>this.messaging=g,()=>{}),this.appCheck||f?.get().then(g=>this.appCheck=g,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(s){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const u=s?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return u.error?null:u.token}return null}async getContext(s){const u=await this.getAuthToken(),c=await this.getMessagingToken(),f=await this.getAppCheckToken(s);return{authToken:u,messagingToken:c,appCheckToken:f}}}const $d="us-central1",$g=/^data: (.*?)(?:\n|$)/;function ey(r){let s=null;return{promise:new Promise((u,c)=>{s=setTimeout(()=>{c(new ui("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{s&&clearTimeout(s)}}}class ty{constructor(s,u,c,f,g=$d,x=(...y)=>fetch(...y)){this.app=s,this.fetchImpl=x,this.emulatorOrigin=null,this.contextProvider=new Jg(s,u,c,f),this.cancelAllRequests=new Promise(y=>{this.deleteService=()=>Promise.resolve(y())});try{const y=new URL(g);this.customDomain=y.origin+(y.pathname==="/"?"":y.pathname),this.region=$d}catch{this.customDomain=null,this.region=g}}_delete(){return this.deleteService()}_url(s){const u=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${u}/${this.region}/${s}`:this.customDomain!==null?`${this.customDomain}/${s}`:`https://${this.region}-${u}.cloudfunctions.net/${s}`}}function ny(r,s,u){const c=th(s);r.emulatorOrigin=`http${c?"s":""}://${s}:${u}`,c&&(Bg(r.emulatorOrigin+"/backends"),kg("Functions",!0))}function iy(r,s,u){const c=f=>ly(r,s,f,{});return c.stream=(f,g)=>ry(r,s,f,g),c}function ih(r){return r.emulatorOrigin&&th(r.emulatorOrigin)?"include":void 0}async function ay(r,s,u,c,f){u["Content-Type"]="application/json";let g;try{g=await c(r,{method:"POST",body:JSON.stringify(s),headers:u,credentials:ih(f)})}catch{return{status:0,json:null}}let x=null;try{x=await g.json()}catch{}return{status:g.status,json:x}}async function ah(r,s){const u={},c=await r.contextProvider.getContext(s.limitedUseAppCheckTokens);return c.authToken&&(u.Authorization="Bearer "+c.authToken),c.messagingToken&&(u["Firebase-Instance-ID-Token"]=c.messagingToken),c.appCheckToken!==null&&(u["X-Firebase-AppCheck"]=c.appCheckToken),u}function ly(r,s,u,c){const f=r._url(s);return oy(r,f,u,c)}async function oy(r,s,u,c){u=qr(u);const f={data:u},g=await ah(r,c),x=c.timeout||7e4,y=ey(x),S=await Promise.race([ay(s,f,g,r.fetchImpl,r),y.promise,r.cancelAllRequests]);if(y.cancel(),!S)throw new ui("cancelled","Firebase Functions instance was deleted.");const j=Gr(S.status,S.json);if(j)throw j;if(!S.json)throw new ui("internal","Response is not valid JSON object.");let A=S.json.data;if(typeof A>"u"&&(A=S.json.result),typeof A>"u")throw new ui("internal","Response is missing data field.");return{data:Il(A)}}function ry(r,s,u,c){const f=r._url(s);return sy(r,f,u,c||{})}async function sy(r,s,u,c){u=qr(u);const f={data:u},g=await ah(r,c);g["Content-Type"]="application/json",g.Accept="text/event-stream";let x;try{x=await r.fetchImpl(s,{method:"POST",body:JSON.stringify(f),headers:g,signal:c?.signal,credentials:ih(r)})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const I=new ui("cancelled","Request was cancelled.");return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}const he=Gr(0,null);return{data:Promise.reject(he),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(he)}}}}}}let y,S;const j=new Promise((R,he)=>{y=R,S=he});c?.signal?.addEventListener("abort",()=>{const R=new ui("cancelled","Request was cancelled.");S(R)});const A=x.body.getReader(),U=dy(A,y,S,c?.signal);return{stream:{[Symbol.asyncIterator](){const R=U.getReader();return{async next(){const{value:he,done:I}=await R.read();return{value:he,done:I}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:j}}function dy(r,s,u,c){const f=(x,y)=>{const S=x.match($g);if(!S)return;const j=S[1];try{const A=JSON.parse(j);if("result"in A){s(Il(A.result));return}if("message"in A){y.enqueue(Il(A.message));return}if("error"in A){const U=Gr(0,A);y.error(U),u(U);return}}catch(A){if(A instanceof ui){y.error(A),u(A);return}}},g=new TextDecoder;return new ReadableStream({start(x){let y="";return S();async function S(){if(c?.aborted){const j=new ui("cancelled","Request was cancelled");return x.error(j),u(j),Promise.resolve()}try{const{value:j,done:A}=await r.read();if(A){y.trim()&&f(y.trim(),x),x.close();return}if(c?.aborted){const R=new ui("cancelled","Request was cancelled");x.error(R),u(R),await r.cancel();return}y+=g.decode(j,{stream:!0});const U=y.split(`
`);y=U.pop()||"";for(const R of U)R.trim()&&f(R.trim(),x);return S()}catch(j){const A=j instanceof ui?j:Gr(0,null);x.error(A),u(A)}}},cancel(){return r.cancel()}})}const Qm="@firebase/functions",Xm="0.13.1";const cy="auth-internal",uy="app-check-internal",py="messaging-internal";function my(r){const s=(u,{instanceIdentifier:c})=>{const f=u.getProvider("app").getImmediate(),g=u.getProvider(cy),x=u.getProvider(py),y=u.getProvider(uy);return new ty(f,g,x,y,c)};wg(new Cg(ic,s,"PUBLIC").setMultipleInstances(!0)),Lm(Qm,Xm,r),Lm(Qm,Xm,"esm2020")}function lh(r=Dg(),s=$d){const c=Tg(nc(r),ic).getImmediate({identifier:s}),f=zg("functions");return f&&hy(c,...f),c}function hy(r,s,u){ny(nc(r),s,u)}function ac(r,s,u){return iy(nc(r),s)}my();const fy={apiKey:"AIzaSyD8M529DHrG1QBN9UKYexF0trTHrIzo5oM",authDomain:"docsapp-b7430.firebaseapp.com",projectId:"docsapp-b7430",storageBucket:"docsapp-b7430.firebasestorage.app",messagingSenderId:"1011149482238",appId:"1:1011149482238:web:89189afe319f87a6b6ddaf",measurementId:"G-CN15LYGF6F"},lc=Eg(fy),_i=Mg(lc),F=Ng(lc),oc=lh(lc),gy=Object.freeze(Object.defineProperty({__proto__:null,auth:_i,db:F,functions:oc},Symbol.toStringTag,{value:"Module"})),yy=async(r,s)=>{const u=Me(F,"invitations",r),c=await Vt(u);if(!c.exists())throw new Error("Invalid invitation code");const f=c.data();if(f.used)throw new Error("Invitation code already used");if(new Date(f.expiresAt)<new Date)throw new Error("Invitation code expired");await Ft(u,{used:!0,usedBy:s,usedAt:new Date().toISOString()});const g=Me(F,"users",s);await Ft(g,{hospitalId:f.hospitalId,hospitalName:f.hospitalName});const y=(await Vt(g)).data(),S=Me(F,"doctors",s);return await ti(S,{userId:s,hospitalId:f.hospitalId,name:y.displayName,email:y.email,specialization:y.specialization||"",createdAt:new Date().toISOString()}),f.hospitalId},xy=async r=>{console.log("getHospitalDoctors called with hospitalId:",r);try{const s=[];try{const u=Ce(F,"users"),c=ze(u,ce("hospitalId","==",r)),g=(await Pe(c)).docs.map(x=>({uid:x.id,id:x.id,...x.data()})).filter(x=>x.role==="doctor");s.push(...g)}catch(u){console.warn("Failed to fetch doctors from users collection:",u)}try{const u=Ce(F,"doctors"),c=ze(u,ce("hospitalId","==",r)),g=(await Pe(c)).docs.map(S=>({id:S.id,uid:S.id,...S.data()})),x=new Map;s.forEach(S=>{const j=S.id||S.uid||S.email||`${S.displayName||S.name}`;x.set(j,S)}),g.forEach(S=>{const j=S.id||S.uid||S.email||`${S.displayName||S.name}`;x.has(j)||x.set(j,S)});const y=Array.from(x.values());return console.log("Found doctors (merged):",y.length),y}catch(u){return console.warn("Failed to fetch doctors from doctors collection:",u),console.log("Found doctors (users only):",s.length),s}}catch(s){return console.error("Error fetching hospital doctors:",s),[]}},by=async r=>{const s=Ce(F,"appointments"),u=ze(s,ce("hospitalId","==",r));return(await Pe(u)).docs.map(f=>({id:f.id,...f.data()}))},vy=async r=>{const s=Ce(F,"appointments"),u=ze(s,ce("doctorId","==",r));return(await Pe(u)).docs.map(f=>({id:f.id,...f.data()}))},jy=async(r,s)=>{const u=Me(F,"users",r);await Ft(u,{isActive:s,updatedAt:new Date().toISOString()})},oh=async(r,s)=>{const u=Me(F,"users",r);await Ft(u,{...s,updatedAt:new Date().toISOString()})},Sy=async(r,s)=>{const u=Me(F,"users",r);await Ft(u,{hospitalId:null,isActive:!1,updatedAt:new Date().toISOString()})},Xd=async(r,s)=>{const u=Me(F,"doctorAvailability",r);await ti(u,{doctorId:r,...s,updatedAt:new Date().toISOString()},{merge:!0})},rc=async r=>{const s=Me(F,"doctorAvailability",r),u=await Vt(s);return u.exists()?u.data():{workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[]}},wy=async(r,s)=>{const u=Me(F,"doctorAvailability",r),c=await Vt(u);let f=[];c.exists()&&(f=c.data().blockedTimeSlots||[]),f.push({...s,id:`block_${Date.now()}`,createdAt:new Date().toISOString()}),await ti(u,{doctorId:r,blockedTimeSlots:f,updatedAt:new Date().toISOString()},{merge:!0})},Cy=async(r,s)=>{const u=Me(F,"doctorAvailability",r),c=await Vt(u);if(c.exists()){const g=(c.data().blockedTimeSlots||[]).filter(x=>x.id!==s);await Ft(u,{blockedTimeSlots:g,updatedAt:new Date().toISOString()})}},Km=async r=>{const s=ze(Ce(F,"users"),ce("hospitalId","==",r),ce("role","==","doctor"));ze(Ce(F,"users"),ce("hospitalId","==",r),ce("role","==","doctor"));const u=Ce(F,"appointments"),c=ze(u,ce("hospitalId","==",r)),f=ze(u,ce("hospitalId","==",r),ce("status","==","completed")),g=new Date().toISOString().split("T")[0],x=ze(u,ce("hospitalId","==",r),ce("date","==",g));let y=0;try{y=(await Pr(f,{totalRevenue:Ir("fee")})).data().totalRevenue||0}catch(he){console.warn("Revenue aggregation failed (likely missing index):",he)}let S=0,j=0;try{S=(await ci(s)).data().count,j=(await ci(activeDoctorsQuery)).data().count}catch(he){console.warn("Doctor stats counting failed (likely missing index or collection mismatch):",he)}const[A,U,R]=await Promise.all([ci(c),ci(f),ci(x)]);return{totalDoctors:S,activeDoctors:j,totalAppointments:A.data().count,todayAppointments:R.data().count,completedAppointments:U.data().count,totalRevenue:y}},Ay=async r=>{const s=Ce(F,"appointments"),u=ze(s,ce("doctorId","==",r)),c=ze(s,ce("doctorId","==",r),ce("status","==","completed")),f=new Date().toISOString().split("T")[0],g=ze(s,ce("doctorId","==",r),ce("date","==",f)),[x,y,S]=await Promise.all([ci(u),ci(c),ci(g)]);return{totalAppointments:x.data().count,todayAppointments:S.data().count,completedAppointments:y.data().count}},Dy=async(r,s,u)=>{try{console.log("addNewDoctorToHospital called with:",{hospitalId:r,hospitalName:s,doctorData:u});const c=`doctor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,f=Me(F,"users",c),g={uid:c,displayName:u.displayName,email:u.email,phone:u.phone,specialization:u.specialization,consultationFee:u.consultationFee,role:"doctor",hospitalId:r,hospitalName:s,isActive:!0,createdAt:new Date().toISOString(),country:u.country||"",state:u.state||"",city:u.city||""};console.log("Creating doctor document with data:",g),await ti(f,g),console.log("Doctor document created successfully with ID:",c);const x=Me(F,"doctorAvailability",c);return await ti(x,{doctorId:c,workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[],updatedAt:new Date().toISOString()}),console.log("Doctor availability created successfully"),c}catch(c){throw console.error("Error in addNewDoctorToHospital:",c),c}},Ty=async(r,s,u)=>{const c=`VISIT_${Date.now()}`,f=Me(F,"users",r,"visits",c);return await ti(f,{...u,doctorId:s,date:new Date().toISOString(),createdAt:new Date().toISOString()}),c},zy=async(r,s,u)=>{const c=`RX_${Date.now()}`,f=Me(F,"users",r,"prescriptions",c);return await ti(f,{...u,doctorId:s,patientId:r,date:new Date().toISOString(),createdAt:new Date().toISOString()}),c},rh=async(r,s,u,c=null,f={})=>{if(console.log("=== registerUser CALLED ==="),console.log("Email:",r,"Role:",c,"Name:",u),!s||!u)throw new Error("Name and password are required");if(c==="patient"){const x=f.phone;if(!x)throw new Error("Phone number is required for patient registration");const y=`patient_${x.replace(/\D/g,"")}@docsapp.local`;console.log("Patient registration with phone:",x),console.log("Generated email for Firebase:",y);try{const j=(await Pm(_i,y,s)).user;await Im(j,{displayName:u});const A=Me(F,"users",j.uid),U={uid:j.uid,phone:x,displayName:u,role:"patient",createdAt:new Date().toISOString(),...f};return await ti(A,U),U}catch(S){throw console.error("Patient Registration Error:",S),S}}if(!r)throw new Error("Email is required for doctor/hospital registration");const g=String(r).trim().toLowerCase();if(console.log("Original email:",r),console.log("Cleaned email:",g),console.log("Email length:",g.length),!g.includes("@")||g.length<3)throw new Error("Please enter a valid email address");try{console.log("auth.js: Creating user with email and password...");const y=(await Pm(_i,g,s)).user;console.log("auth.js: User created, UID:",y.uid),console.log("auth.js: Updating user profile..."),await Im(y,{displayName:u}),console.log("auth.js: Profile updated");let S=null;if(c==="hospital"){console.log("auth.js: Creating hospital document..."),S=`hospital_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const R=Me(F,"hospitals",S),he={id:S,name:u,email:g,ownerId:y.uid,enabled:!0,createdAt:new Date().toISOString(),...f};console.log("auth.js: Hospital data to save:",he);try{await ti(R,he),console.log(" auth.js: Hospital document created successfully with ID:",S)}catch(I){throw console.error(" auth.js: FAILED to create hospital document:",I),console.error("Error code:",I.code),console.error("Error message:",I.message),new Error(`Failed to create hospital: ${I.message}`)}}console.log("auth.js: Creating user document in Firestore...");const j=Me(F,"users",y.uid),A={uid:y.uid,email:g,displayName:u,createdAt:new Date().toISOString(),...S&&{hospitalId:S},...c&&{role:c},...f};console.log("auth.js: User data to save:",A);try{await ti(j,A),console.log(" auth.js: User document created successfully")}catch(R){throw console.error(" auth.js: FAILED to create user document:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),new Error(`Failed to create user profile: ${R.message}`)}await new Promise(R=>setTimeout(R,500));const U=await Vt(j);if(U.exists()?console.log("auth.js: Verified user document exists:",U.data()):console.error("auth.js: WARNING - User document not found after creation!"),c==="doctor"&&f.invitationCode){console.log("auth.js: Processing invitation code...");try{await yy(f.invitationCode,y.uid),console.log("auth.js: Doctor linked to hospital via invitation code")}catch(R){console.error("auth.js: Error using invitation code:",R)}}return console.log("auth.js: Registration complete, returning userData"),A}catch(x){throw console.error("Registration Error:",x),x}},By=async(r,s)=>{if(!r||!s)throw new Error("Email/Phone and password are required");const u=String(r).trim().toLowerCase(),c=/^[\d\s\-\+\(\)]+$/.test(u.replace(/\s/g,""));let f=u;if(c)f=`patient_${u.replace(/\D/g,"")}@docsapp.local`,console.log("Phone login detected, using email:",f);else if(!u.includes("@")||u.length<3)throw new Error("Please enter a valid email address or phone number");try{return(await Hg(_i,f,s)).user}catch(g){throw console.error("Login Error:",g),g}},ky=async()=>Og(_i),Ry=async r=>{try{const s={url:window.location.origin+"/login",handleCodeInApp:!1};return console.log("========================================"),console.log("PASSWORD RESET DIAGNOSTIC INFO:"),console.log("Email to reset:",r),console.log("Firebase Auth Domain:",_i.config.authDomain),console.log("Firebase Project ID:",_i.config.apiKey.includes("mock")?"MOCK PROJECT":"Real Project"),console.log("Redirect URL:",s.url),console.log("Current User:",_i.currentUser?.email||"Not logged in"),console.log("========================================"),console.log("Attempting to send password reset email to:",r),await Ug(_i,r,s),console.log("========================================"),console.log(" SUCCESS: Password reset email sent"),console.log("From: noreply@"+_i.config.authDomain),console.log("To:",r),console.log("Action: Check spam folder and wait 2-5 minutes"),console.log("========================================"),{success:!0,message:"Password reset email sent successfully"}}catch(s){console.error("========================================"),console.error(" ERROR: Password reset failed"),console.error("Error code:",s.code),console.error("Error message:",s.message),console.error("Full error:",s),console.error("========================================");let u="Failed to send password reset email.";throw s.code==="auth/user-not-found"?u="No account found with this email address.":s.code==="auth/invalid-email"?u="Invalid email address format.":s.code==="auth/too-many-requests"?u="Too many attempts. Please try again later.":(s.code==="auth/missing-android-pkg-name"||s.code==="auth/missing-continue-uri"||s.code==="auth/missing-ios-bundle-id"||s.code==="auth/invalid-continue-uri"||s.code==="auth/unauthorized-continue-uri")&&(u="Configuration error. Please contact support."),new Error(u)}},Ey=()=>{const[r,s]=b.useState(""),[u,c]=b.useState(""),[f,g]=b.useState(""),[x,y]=b.useState(""),[S,j]=b.useState(!1),[A,U]=b.useState(""),[R,he]=b.useState(!1),[I,J]=b.useState(""),[W,pe]=b.useState(!1),[E,de]=b.useState(!1),re=ol(),z=bg();b.useEffect(()=>{z.state?.message&&(y(z.state.message),window.history.replaceState({},document.title))},[z]);const Xe=async ue=>{ue.preventDefault(),de(!0),g("");try{await By(r.trim(),u),re("/dashboard")}catch{g("Failed to login. Please check your credentials.")}finally{de(!1)}},ct=async ue=>{ue.preventDefault(),he(!0),J(""),g("");try{console.log("Requesting password reset for:",A.trim()),await Ry(A.trim()),J("Password reset email sent! Check your inbox and spam folder."),U(""),setTimeout(()=>{j(!1),J("")},5e3)}catch(P){console.error("Password reset error:",P),g(P.message||"Failed to send reset email.")}finally{he(!1)}},X={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},card:{background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxWidth:"440px",width:"100%",overflow:"hidden",animation:"slideUp 0.5s ease-out"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2.5rem) clamp(1.25rem, 4vw, 2rem)",textAlign:"center",color:"white"},title:{margin:0,fontSize:"clamp(1.5rem, 5vw, 2rem)",fontWeight:"700",marginBottom:"0.5rem",letterSpacing:"-0.5px"},subtitle:{margin:0,fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",opacity:.95,fontWeight:"400"},body:{padding:"clamp(1.25rem, 4vw, 2rem)"},alert:{padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",animation:"fadeIn 0.3s ease-out",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},successAlert:{background:"#d1f4e0",color:"#0d6832",border:"1px solid #a7e9c3"},errorAlert:{background:"#fee",color:"#c81e1e",border:"1px solid #fcc"},infoBox:{background:"#f0f4ff",padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",color:"#4a5568",textAlign:"center",border:"1px solid #d6e0ff",lineHeight:"1.5"},form:{display:"flex",flexDirection:"column",gap:"clamp(1rem, 3vw, 1.25rem)"},inputGroup:{position:"relative"},label:{display:"block",marginBottom:"0.5rem",fontSize:"clamp(0.85rem, 2.5vw, 0.9rem)",fontWeight:"600",color:"#374151"},input:{width:"100%",padding:"clamp(0.7rem, 2vw, 0.875rem) clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",border:"2px solid #e5e7eb",borderRadius:"12px",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},passwordWrapper:{position:"relative"},eyeButton:{position:"absolute",right:"clamp(0.75rem, 2vw, 1rem)",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"clamp(1.1rem, 3vw, 1.25rem)",color:"#6b7280",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},forgotLink:{textAlign:"right",marginTop:"-0.5rem"},linkButton:{background:"none",border:"none",color:"#667eea",cursor:"pointer",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",fontWeight:"600",textDecoration:"none",padding:0},submitButton:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.95rem, 3vw, 1rem)",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",marginTop:"0.5rem"},submitButtonDisabled:{opacity:.6,cursor:"not-allowed",transform:"none"},divider:{display:"flex",alignItems:"center",textAlign:"center",margin:"clamp(1rem, 3vw, 1.5rem) 0",color:"#9ca3af",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)"},dividerLine:{flex:1,height:"1px",background:"#e5e7eb"},dividerText:{padding:"0 clamp(0.75rem, 2vw, 1rem)"},registerLink:{textAlign:"center",color:"#6b7280",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},link:{color:"#667eea",fontWeight:"600",textDecoration:"none"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"fadeIn 0.3s ease-out",backdropFilter:"blur(4px)"},modal:{background:"white",padding:"2rem",borderRadius:"20px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.4)",maxWidth:"440px",width:"90%",animation:"slideUp 0.3s ease-out"},modalTitle:{marginTop:0,fontSize:"1.75rem",fontWeight:"700",color:"#1f2937",marginBottom:"0.5rem"},modalText:{color:"#6b7280",fontSize:"0.95rem",marginBottom:"1.5rem",lineHeight:"1.6"},buttonGroup:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},primaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"},secondaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"#4b5563",background:"#f3f4f6",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"}};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
                    @keyframes slideUp {
                        from {
                            opacity: 0;
                            transform: translateY(30px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    input:focus {
                        border-color: #667eea !important;
                        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
                    }
                    button:hover:not(:disabled) {
                        transform: translateY(-2px);
                    }
                    button:active:not(:disabled) {
                        transform: translateY(0);
                    }
                    a:hover {
                        text-decoration: underline;
                    }
                `}),t.jsxs("div",{style:X.container,children:[t.jsxs("div",{style:X.card,children:[t.jsxs("div",{style:X.header,children:[t.jsx("h1",{style:X.title,children:"Welcome Back"}),t.jsx("p",{style:X.subtitle,children:"Sign in to your account"})]}),t.jsxs("div",{style:X.body,children:[x&&t.jsxs("div",{style:{...X.alert,...X.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:x})]}),f&&t.jsxs("div",{style:{...X.alert,...X.errorAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:f})]}),t.jsxs("div",{style:X.infoBox,children:[t.jsx("strong",{children:"For Doctors & Hospitals"}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:["Patients don't need to login. ",t.jsx(ji,{to:"/book",style:X.link,children:"Book appointment "})]})]}),t.jsxs("form",{onSubmit:Xe,style:X.form,children:[t.jsxs("div",{style:X.inputGroup,children:[t.jsx("label",{style:X.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:r,onChange:ue=>s(ue.target.value),required:!0,style:X.input})]}),t.jsxs("div",{style:X.inputGroup,children:[t.jsx("label",{style:X.label,children:"Password"}),t.jsxs("div",{style:X.passwordWrapper,children:[t.jsx("input",{type:W?"text":"password",placeholder:"Enter your password",value:u,onChange:ue=>c(ue.target.value),required:!0,style:X.input}),t.jsx("button",{type:"button",onClick:()=>pe(!W),style:X.eyeButton,"aria-label":W?"Hide password":"Show password",children:W?"":""})]})]}),t.jsx("div",{style:X.forgotLink,children:t.jsx("button",{type:"button",onClick:()=>j(!0),style:X.linkButton,children:"Forgot Password?"})}),t.jsx("button",{type:"submit",style:{...X.submitButton,...E?X.submitButtonDisabled:{}},disabled:E,children:E?" Signing in...":"Sign In"})]}),t.jsxs("div",{style:X.divider,children:[t.jsx("div",{style:X.dividerLine}),t.jsx("span",{style:X.dividerText,children:"or"}),t.jsx("div",{style:X.dividerLine})]}),t.jsxs("div",{style:X.registerLink,children:["Don't have an account? ",t.jsx(ji,{to:"/register",style:X.link,children:"Create Account"})]})]})]}),S&&t.jsx("div",{style:X.modalOverlay,onClick:()=>j(!1),children:t.jsxs("div",{style:X.modal,onClick:ue=>ue.stopPropagation(),children:[t.jsx("h3",{style:X.modalTitle,children:"Reset Password"}),t.jsx("p",{style:X.modalText,children:"Enter your email address and we'll send you a link to reset your password."}),I&&t.jsxs("div",{style:{...X.alert,...X.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"600"},children:"Email sent successfully!"}),t.jsx("small",{style:{display:"block",fontSize:"0.85rem",opacity:.9},children:" Check your spam folder if you don't see it within a few minutes"})]})]}),t.jsxs("form",{onSubmit:ct,style:X.form,children:[t.jsxs("div",{style:X.inputGroup,children:[t.jsx("label",{style:X.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:A,onChange:ue=>U(ue.target.value),required:!0,style:X.input})]}),t.jsxs("div",{style:X.buttonGroup,children:[t.jsx("button",{type:"submit",disabled:R,style:{...X.primaryButton,...R?X.submitButtonDisabled:{}},children:R?" Sending...":"Send Reset Link"}),t.jsx("button",{type:"button",onClick:()=>{j(!1),U(""),J(""),g("")},style:X.secondaryButton,children:"Cancel"})]})]})]})})]})]})},sh=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo (Congo-Brazzaville)","Costa Rica","Croatia","Cuba","Cyprus","Czechia (Czech Republic)","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (fmr. 'Swaziland')","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],My={India:["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Puducherry","Jammu and Kashmir","Ladakh"],"United States of America":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],"United Kingdom":["England","Scotland","Wales","Northern Ireland"]},dh={India:{Maharashtra:["Mumbai","Pune","Nagpur","Nashik","Thane"],Karnataka:["Bengaluru","Mysore","Mangalore","Hubli"],Delhi:["New Delhi","Central Delhi","South Delhi","North Delhi"],"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli"]},"United States of America":{California:["Los Angeles","San Francisco","San Diego","Sacramento"],Texas:["Houston","Dallas","Austin","San Antonio"],"New York":["New York City","Buffalo","Rochester","Albany"]},"United Kingdom":{England:["London","Manchester","Birmingham","Leeds"],Scotland:["Edinburgh","Glasgow","Aberdeen"],Wales:["Cardiff","Swansea","Newport"],"Northern Ireland":["Belfast","Londonderry","Lisburn"]}};dh["United Arab Emirates"]={Dubai:["Dubai","Jumeirah","Deira","Al Quoz"],"Abu Dhabi":["Abu Dhabi","Al Ain","Mussafah"],Sharjah:["Sharjah","Khor Fakkan","Al Dhaid"],RasAlKhaimah:["Ras Al Khaimah","Digdaga"],Ajman:["Ajman"],Fujairah:["Fujairah"]};const Ny=(r,s)=>{if(!r||!s)return null;const u=Ri[r.trim()]||r.trim(),c=dh[u];return c&&(c[s]||c[s.trim()])||null},ll={India:{Maharashtra:{Mumbai:["Mumbai City","Mumbai Suburban","Bandra","Andheri"],Pune:["Pune City","Pune Rural","Haveli","Shivajinagar"]},Karnataka:{Bengaluru:["Bengaluru Urban","Bengaluru Rural"]},Delhi:{"New Delhi":["Central Delhi","South Delhi","North Delhi"]}},"United States of America":{California:{"Los Angeles":["Los Angeles County"],"San Francisco":["San Francisco County"]},Texas:{Houston:["Harris County"],Dallas:["Dallas County"]}},"United Kingdom":{England:{London:["Greater London"],Manchester:["Greater Manchester"],Birmingham:["West Midlands"]}},"United Arab Emirates":{Dubai:{Dubai:["Deira","Bur Dubai","Jumeirah","Al Rigga"]},"Abu Dhabi":{"Abu Dhabi":["Al Zahiya","Mussafah","Khalifa City"]}}},Hy=r=>{if(!r)return"District / County";switch(Ri[r.trim()]||r.trim()){case"India":return"District";case"United States of America":return"County";case"United Kingdom":return"County";case"United Arab Emirates":return"Area";default:return"District / County"}},Ri={USA:"United States of America",US:"United States of America","United States":"United States of America","United Kingdom":"United Kingdom",UK:"United Kingdom","Great Britain":"United Kingdom",Britain:"United Kingdom",India:"India",IN:"India"};Ri.UAE="United Arab Emirates";Ri["United Arab Emirates"]="United Arab Emirates";const Uy=r=>{if(!r)return null;const u=Ri[r.trim()]||r.trim();return My[u]||null},Zm=(r,s,u)=>{if(!r||!s||!u)return null;const c=Ri[r.trim()]||r.trim(),f=ll[c];if(!f)return null;const g=f[s]||f[s.trim()];return g&&(g[u]||g[u.trim()])||null},ch=b.createContext(),_a=()=>b.useContext(ch),Oy=({children:r})=>{const[s,u]=b.useState(null),[c,f]=b.useState(null),[g,x]=b.useState(!0);b.useEffect(()=>{let A=null;const U=Lg(_i,R=>{if(console.log("AuthContext: onAuthStateChanged fired, user:",R?.uid),u(R),A&&(A(),A=null),R){console.log("AuthContext: Setting up profile listener for:",R.uid);const he=ze(Ce(F,"users"),ce("uid","==",R.uid));A=Pg(he,I=>{if(I.empty)console.log("AuthContext: No profile document found yet (might be creating...)"),f(null);else{const J=I.docs[0].data();console.log("AuthContext: Profile updated via snapshot:",J),f(J)}x(!1)},I=>{console.error("AuthContext: Profile snapshot error:",I),x(!1)})}else f(null),x(!1)});return()=>{U(),A&&A()}},[]);const j={...{currentUser:s,userProfile:c,isAuthenticated:!!s,loading:g},refresh:async()=>{if(s)try{const A=ze(Ce(F,"users"),ce("uid","==",s.uid)),U=await Pe(A);U.empty||f(U.docs[0].data())}catch(A){console.error("AuthContext.refresh error:",A)}}};return t.jsx(ch.Provider,{value:j,children:g?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.5rem",background:"var(--bg-main, #f8fafc)",color:"var(--text-secondary, #64748b)"},children:"Loading..."}):r})},tn={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)",display:"flex",alignItems:"center",justifyContent:"center"},card:{maxWidth:"500px",width:"100%",background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",overflow:"hidden"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1.25rem, 4vw, 2rem)"},input:{width:"100%",padding:"clamp(0.6rem, 2vw, 0.75rem)",border:"2px solid #e0e0e0",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",transition:"all 0.3s ease",boxSizing:"border-box"},button:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"none",borderRadius:"10px",fontSize:"clamp(0.95rem, 3vw, 1.1rem)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},infoBox:{padding:"clamp(0.75rem, 2.5vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",fontSize:"clamp(0.8rem, 2.5vw, 0.95rem)",lineHeight:"1.5"},roleCard:{padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"2px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"clamp(0.75rem, 2vw, 1rem)",marginBottom:"0.75rem"}},Ly=()=>{const[r,s]=b.useState({email:"",password:"",confirmPassword:"",name:"",role:"doctor",phone:"",specialization:""}),[u,c]=b.useState(""),[f,g]=b.useState(!1),[x,y]=b.useState(-1),S=sh.filter(Y=>Y.toLowerCase().includes((u||r.country||"").toLowerCase())).slice(0,50);b.useEffect(()=>{y(-1)},[u]);const[j,A]=b.useState(""),[U,R]=b.useState(!1),[he,I]=b.useState(-1),[J,W]=b.useState(""),[pe,E]=b.useState(!1),[de,re]=b.useState(-1),Xe=(()=>{const Y=r.country,Ae=r.state,ge=r.city;if(!Y||!Ae)return[];let ae=Zm(Y,Ae,ge);if(!ae||!ae.length){const nt=Ri&&Ri[Y.trim()]?Ri[Y.trim()]:Y.trim();try{const Ye=ll&&ll[nt]?ll[nt][Ae]:null;Ye&&(ae=Object.values(Ye).flat())}catch{ae=[]}}if(!ae)return[];const ke=(j||r.district||"").toLowerCase();return ae.filter(nt=>nt.toLowerCase().includes(ke)).slice(0,50)})();b.useEffect(()=>{I(-1)},[j,r.country,r.state,r.city]);const[ct,X]=b.useState(""),[ue,P]=b.useState(!1),[tt,ye]=b.useState(!1),at=ol(),{isAuthenticated:bt}=_a(),[qe,q]=b.useState(!1);b.useEffect(()=>{const Y=window.matchMedia("(max-width: 768px)"),Ae=ge=>q(ge.matches);return q(Y.matches),Y.addEventListener?Y.addEventListener("change",Ae):Y.addListener(Ae),()=>{Y.removeEventListener?Y.removeEventListener("change",Ae):Y.removeListener(Ae)}},[]),b.useEffect(()=>{try{window.scrollTo({top:0,behavior:"auto"})}catch{}},[]),b.useEffect(()=>{const Y=Ae=>{const ge=Ae.target;qe&&setTimeout(()=>{if(ge&&typeof ge.scrollIntoView=="function")try{ge.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},120)};return document.addEventListener("focusin",Y),()=>document.removeEventListener("focusin",Y)},[qe]),b.useEffect(()=>{bt&&at("/dashboard",{replace:!0})},[bt,at]);const se=Y=>{s({...r,[Y.target.name]:Y.target.value})},xe=async Y=>{Y.preventDefault(),P(!0),X("");const{email:Ae,password:ge,confirmPassword:ae,name:ke,role:nt}=r;if(!Ae||!ge||!ae||!ke||!nt||!r.phone){X("All fields are required (phone is mandatory)"),P(!1);return}if(ge!==ae){X("Passwords do not match"),P(!1);return}if(nt==="doctor"&&!r.specialization){X("Please provide your specialization"),P(!1);return}try{console.log("Register.jsx: Starting registration...");const Ye={};(nt==="doctor"||nt==="hospital")&&(Ye.country=r.country||"",Ye.state=r.state||"",Ye.city=r.city||"",Ye.district=r.district||"",Ye.address=r.address||""),Ye.phone=r.phone||"",nt==="doctor"&&(Ye.specialization=r.specialization||"");const ft=await rh(Ae.trim(),ge,ke,nt,Ye);console.log("Register.jsx: Registration completed successfully!",ft),console.log("Register.jsx: Navigating to dashboard...");try{at("/dashboard",{replace:!0})}catch(pn){console.warn("Register.jsx: navigate failed, falling back to hard redirect.",pn),window.location.replace("/dashboard")}ye(!0)}catch(Ye){console.error("Register.jsx: Registration error:",Ye);let ft="Failed to register.";Ye.code==="auth/email-already-in-use"?ft="This email is already registered. Please login instead or use a different email.":Ye.code==="auth/weak-password"?ft="Password should be at least 6 characters.":Ye.code==="auth/invalid-email"?ft="Invalid email address format.":Ye.message&&(ft=Ye.message),X(ft)}finally{P(!1)}},lt={...tn.container,alignItems:qe?"flex-start":tn.container.alignItems,justifyContent:qe?"flex-start":tn.container.justifyContent,paddingTop:qe?"1.25rem":tn.container.padding};return t.jsx("div",{style:lt,children:t.jsxs("div",{style:tn.card,children:[t.jsxs("div",{style:tn.header,children:[t.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700"},children:" Provider Registration"}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"Join our healthcare network"})]}),t.jsxs("div",{style:tn.content,children:[t.jsxs("div",{style:{...tn.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[t.jsx("strong",{children:"For Healthcare Providers Only"}),t.jsx("br",{}),"Patients don't need to register.",t.jsx(ji,{to:"/book",style:{color:"#1565c0",fontWeight:"600",marginLeft:"0.25rem"},children:"Book appointment directly "})]})]}),ct&&t.jsxs("div",{style:{...tn.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24",border:"2px solid #f5c6cb"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[ct,ct.includes("already registered")&&t.jsx("div",{style:{marginTop:"0.5rem"},children:t.jsx(ji,{to:"/login",style:{color:"#721c24",fontWeight:"600",textDecoration:"underline"},children:"Go to Login "})})]})]}),tt&&t.jsxs("div",{style:{...tn.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:["Registration successful! Redirecting...",t.jsx(ji,{to:"/dashboard",style:{color:"#155724",fontWeight:"600",marginLeft:"0.5rem"},children:"Go to Dashboard "})]})]}),t.jsxs("form",{onSubmit:xe,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Full Name *"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter your full name",required:!0,value:r.name,onChange:se,style:tn.input,onFocus:Y=>Y.target.style.borderColor="#667eea",onBlur:Y=>Y.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"I am registering as: *"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsxs("div",{style:{...tn.roleCard,borderColor:r.role==="doctor"?"#667eea":"#e0e0e0",background:r.role==="doctor"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:r.role==="doctor"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>s({...r,role:"doctor"}),onMouseEnter:Y=>{r.role!=="doctor"&&(Y.currentTarget.style.borderColor="#667eea",Y.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Y=>{r.role!=="doctor"&&(Y.currentTarget.style.borderColor="#e0e0e0",Y.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"doctor",checked:r.role==="doctor",onChange:se,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Doctor"})]})]}),t.jsxs("div",{style:{...tn.roleCard,borderColor:r.role==="hospital"?"#667eea":"#e0e0e0",background:r.role==="hospital"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:r.role==="hospital"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>s({...r,role:"hospital"}),onMouseEnter:Y=>{r.role!=="hospital"&&(Y.currentTarget.style.borderColor="#667eea",Y.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Y=>{r.role!=="hospital"&&(Y.currentTarget.style.borderColor="#e0e0e0",Y.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"hospital",checked:r.role==="hospital",onChange:se,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Hospital"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Phone Number *"}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Enter phone number (with country code)",required:!0,value:r.phone,onChange:se,style:tn.input,onFocus:Y=>Y.target.style.borderColor="#667eea",onBlur:Y=>Y.target.style.borderColor="#e0e0e0"})]}),r.role==="doctor"&&t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Specialization *"}),t.jsx("input",{name:"specialization",type:"text",placeholder:"e.g., Cardiologist",required:r.role==="doctor",value:r.specialization,onChange:se,style:tn.input})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Email Address *"}),t.jsx("input",{name:"email",type:"email",placeholder:"your.email@example.com",required:!0,value:r.email,onChange:se,style:tn.input,onFocus:Y=>Y.target.style.borderColor="#667eea",onBlur:Y=>Y.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Password *"}),t.jsx("input",{name:"password",type:"password",placeholder:"At least 6 characters",required:!0,value:r.password,onChange:se,style:tn.input,onFocus:Y=>Y.target.style.borderColor="#667eea",onBlur:Y=>Y.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Confirm Password *"}),t.jsx("input",{name:"confirmPassword",type:"password",placeholder:"Re-enter your password",required:!0,value:r.confirmPassword,onChange:se,style:tn.input,onFocus:Y=>Y.target.style.borderColor="#667eea",onBlur:Y=>Y.target.style.borderColor="#e0e0e0"})]}),(r.role==="doctor"||r.role==="hospital")&&t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Country"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"country",type:"text",placeholder:"Start typing to search countries or enter manually",required:r.role==="doctor"||r.role==="hospital",value:r.country||"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,autoCapitalize:"words",inputMode:"text",onTouchStart:()=>g(!0),onChange:Y=>{const Ae=Y.target.value;s({...r,country:Ae}),c(Ae),g(!0),y(-1)},onKeyDown:Y=>{if(f)if(Y.key==="ArrowDown")Y.preventDefault(),y(Ae=>Math.min(Ae+1,S.length-1));else if(Y.key==="ArrowUp")Y.preventDefault(),y(Ae=>Math.max(Ae-1,0));else if(Y.key==="Enter"){if(x>=0&&S[x]){const Ae=S[x];s({...r,country:Ae}),c(Ae),g(!1)}}else Y.key==="Escape"&&g(!1)},onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),150),style:tn.input}),f&&S.length>0&&t.jsx("ul",{style:{position:"absolute",zIndex:50,top:"calc(100% + 6px)",left:0,right:0,maxHeight:"220px",overflowY:"auto",background:"white",border:"1px solid #e6e6e6",borderRadius:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",listStyle:"none",margin:0,padding:0},children:S.map((Y,Ae)=>t.jsx("li",{onMouseDown:ge=>{ge.preventDefault()},onClick:()=>{s({...r,country:Y}),c(Y),g(!1)},onMouseEnter:()=>y(Ae),style:{padding:"0.6rem 0.75rem",background:Ae===x?"#f1f5f9":"white",cursor:"pointer",borderBottom:"1px solid #f0f0f0"},children:Y},Y))})]}),(()=>{const Y=Uy(r.country);if(Y&&Y.length){const Ae=Y.filter(ge=>ge.toLowerCase().includes((J||r.state||"").toLowerCase())).slice(0,50);return t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"State / Province"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"state",type:"text",placeholder:"Start typing or select a state",required:!0,value:r.state||J||"",onChange:ge=>{const ae=ge.target.value;s({...r,state:ae}),W(ae),E(!0),re(-1)},onKeyDown:ge=>{if(pe)if(ge.key==="ArrowDown")ge.preventDefault(),re(ae=>Math.min(ae+1,Ae.length-1));else if(ge.key==="ArrowUp")ge.preventDefault(),re(ae=>Math.max(ae-1,0));else if(ge.key==="Enter"){if(de>=0&&Ae[de]){const ae=Ae[de];s({...r,state:ae}),W(ae),E(!1)}}else ge.key==="Escape"&&E(!1)},onFocus:()=>E(!0),onBlur:()=>setTimeout(()=>E(!1),150),style:tn.input}),pe&&Ae.length>0&&t.jsx("ul",{style:{position:"absolute",zIndex:50,top:"calc(100% + 6px)",left:0,right:0,maxHeight:"220px",overflowY:"auto",background:"white",border:"1px solid #e6e6e6",borderRadius:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",listStyle:"none",margin:0,padding:0},children:Ae.map((ge,ae)=>t.jsx("li",{onMouseDown:ke=>ke.preventDefault(),onClick:()=>{s({...r,state:ge}),W(ge),E(!1)},onMouseEnter:()=>re(ae),style:{padding:"0.6rem 0.75rem",background:ae===de?"#f1f5f9":"white",cursor:"pointer",borderBottom:"1px solid #f0f0f0"},children:ge},ge))})]})]})}return t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"State / Province"}),t.jsx("input",{name:"state",type:"text",placeholder:"State / Province",value:r.state||"",onChange:se,style:tn.input})]})})(),(Ny(r.country,r.state),r.country&&["united kingdom","uk","great britain","britain"].includes(r.country.trim().toLowerCase()),t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"City"}),t.jsx("input",{name:"city",type:"text",placeholder:"City",value:r.city||"",onChange:Y=>{s({...r,city:Y.target.value})},style:tn.input})]})),(()=>{const Y=Hy(r.country),Ae=!!r.country&&["united kingdom","uk","great britain","britain"].includes(r.country.trim().toLowerCase());let ge=Zm(r.country,r.state,r.city);if((!ge||!ge.length)&&r.country&&r.state){const ae=Ri&&Ri[r.country.trim()]?Ri[r.country.trim()]:r.country.trim();try{const ke=ll&&ll[ae]?ll[ae][r.state]:null;ke&&(ge=Object.values(ke).flat())}catch{ge=[]}}return ge&&ge.length,t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:Y}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"district",type:"text",placeholder:Ae?`${Y} (required)`:`Type ${Y} or leave empty`,value:r.district||"",onChange:ae=>{s({...r,district:ae.target.value}),A(ae.target.value),R(!0)},onKeyDown:ae=>{if(U)if(ae.key==="ArrowDown")ae.preventDefault(),I(ke=>Math.min(ke+1,Xe.length-1));else if(ae.key==="ArrowUp")ae.preventDefault(),I(ke=>Math.max(ke-1,0));else if(ae.key==="Enter"){if(he>=0&&Xe[he]){const ke=Xe[he];s({...r,district:ke}),A(ke),R(!1)}}else ae.key==="Escape"&&R(!1)},onFocus:()=>R(!0),onBlur:()=>setTimeout(()=>R(!1),150),required:Ae,style:tn.input}),U&&Xe&&Xe.length>0&&t.jsx("ul",{style:{position:"absolute",zIndex:50,top:"calc(100% + 6px)",left:0,right:0,maxHeight:"220px",overflowY:"auto",background:"white",border:"1px solid #e6e6e6",borderRadius:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.1)",listStyle:"none",margin:0,padding:0},children:Xe.map((ae,ke)=>t.jsx("li",{onMouseDown:nt=>nt.preventDefault(),onClick:()=>{s({...r,district:ae}),A(ae),R(!1)},onMouseEnter:()=>I(ke),style:{padding:"0.6rem 0.75rem",background:ke===he?"#f1f5f9":"white",cursor:"pointer",borderBottom:"1px solid #f0f0f0"},children:ae},ae))})]})]})})(),t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Address (optional)"}),t.jsx("input",{name:"address",type:"text",placeholder:"Clinic / Hospital Address",value:r.address||"",onChange:se,style:tn.input})]}),t.jsx("button",{type:"submit",disabled:ue,style:{...tn.button,opacity:ue?.7:1,cursor:ue?"not-allowed":"pointer"},onMouseEnter:Y=>{ue||(Y.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Y=>{Y.currentTarget.style.transform="translateY(0)"},children:ue?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Registering..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Create Account"]})})]}),t.jsxs("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid #f0f0f0",textAlign:"center"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Already have an account?"}),t.jsx(ji,{to:"/login",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Login here "})]})]})]})})},Py="modulepreload",Iy=function(r){return"/"+r},Jm={},Wr=function(s,u,c){let f=Promise.resolve();if(u&&u.length>0){let S=function(j){return Promise.all(j.map(A=>Promise.resolve(A).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),y=x?.nonce||x?.getAttribute("nonce");f=S(u.map(j=>{if(j=Iy(j),j in Jm)return;Jm[j]=!0;const A=j.endsWith(".css"),U=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${U}`))return;const R=document.createElement("link");if(R.rel=A?"stylesheet":Py,A||(R.as="script"),R.crossOrigin="",R.href=j,y&&R.setAttribute("nonce",y),document.head.appendChild(R),A)return new Promise((he,I)=>{R.addEventListener("load",he),R.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${j}`)))})}))}function g(x){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=x,window.dispatchEvent(y),!y.defaultPrevented)throw x}return f.then(x=>{for(const y of x||[])y.status==="rejected"&&g(y.reason);return s().catch(g)})},an=({size:r=20,style:s={},className:u="",ariaHidden:c=!0,...f})=>t.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":c?"true":void 0,focusable:"false",className:u,style:{display:"block",verticalAlign:"middle",...s},...f,children:[t.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),t.jsx("path",{d:"M16 3v4M8 3v4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M7 11h10M7 15h10",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ro=(r,s)=>{if(!s||!s.rates)return{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2};const c=r&&(r.toLowerCase()==="india"||r.toLowerCase()==="in")?"INR":"GBP",f=s.rates[c];return f||{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},_y=r=>({INR:"",GBP:"",USD:"$",EUR:""})[r]||r,_l=(r,s)=>{if(r.customRates&&r.customRates.appointmentCost)return{...r.customRates,currency:r.customRates.currency||r.currency||"USD",symbol:_y(r.customRates.currency||r.currency||"USD")};const u=r.country||"default";return Ro(u,s)},qy=async(r,s)=>{try{const u=Ce(F,"healthRecords"),c=ze(u,ce("patientId","==",r),ce("doctorId","==",s),fa("createdAt","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||new Date}))}catch(u){throw console.error("Error fetching health records:",u),u}},Gy=async(r,s)=>{try{const u=Ce(F,"prescriptions"),c=ze(u,ce("patientId","==",r),ce("doctorId","==",s),fa("createdAt","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||new Date}))}catch(u){throw console.error("Error fetching prescriptions:",u),u}},Wy=async(r,s)=>{try{const u=Ce(F,"appointments"),c=ze(u,ce("patientId","==",r),ce("doctorId","==",s),fa("date","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data()}))}catch(u){throw console.error("Error fetching patient appointments:",u),u}},Yy=async(r,s,u,c=null)=>{try{const f=Ce(F,"healthRecords"),g={patientId:r,doctorId:s,...u,createdAt:_r.now(),updatedAt:_r.now()};return c&&(g.hospitalId=c),(await ga(f,g)).id}catch(f){throw console.error("Error adding health record:",f),f}},Fy=async(r,s)=>{try{return(await ac(oc,"generateHealthSummary")({patientId:r,doctorId:s})).data}catch(u){throw console.error("Error generating health summary:",u),u}},Vy=async(r,s)=>{try{const u=Ce(F,"healthSummaries"),c=ze(u,ce("patientId","==",r),ce("doctorId","==",s),fa("generatedAt","desc")),f=await Pe(c);if(!f.empty){const g=f.docs[0],x=g.data(),y=x.generatedAt?.toDate?.()||new Date,S=new Date(Date.now()-3600*1e3);if(y>S)return{id:g.id,...x,generatedAt:y}}return null}catch(u){return console.error("Error fetching cached summary:",u),null}},Qy=async(r,s)=>{try{const[u,c,f]=await Promise.all([qy(r,s),Gy(r,s),Wy(r,s)]);return{healthRecords:u,prescriptions:c,appointments:f}}catch(u){throw console.error("Error fetching comprehensive patient data:",u),u}},Xy=async(r,s)=>{try{console.log(" Searching hospital patients:",{searchTerm:r,hospitalId:s});const u=r.toLowerCase().trim(),c=Ce(F,"appointments"),f=ze(c,ce("hospitalId","==",s)),g=await Pe(f);console.log(` Found ${g.size} appointments for hospital`);const x=new Map;g.forEach(S=>{const j=S.data(),A=(j.patientName||j.name||"").toLowerCase(),U=j.patientPhone||j.userPhone||j.phone||"",R=j.patientEmail||j.email||"",he=(j.id||S.id).toLowerCase(),I=j.patientId||j.userId||j.patientUid||j.patient_id||j.user_id||U||j.patientEmail||he,J=A.includes(u)||U.includes(u)||he.includes(u);if(console.log("Checking appointment:",{patientName:A,patientPhone:U,patientId:I,matchesSearch:J,bookingNumber:he}),J)if(!x.has(I))x.set(I,{id:I,name:j.patientName||j.name||"Unknown",phone:U,email:R,lastAppointment:j.date,bookingNumber:S.id,totalAppointments:1,lastDoctorId:j.doctorId,lastDoctorName:j.doctorName||"Unknown"});else{const W=x.get(I);W.totalAppointments+=1,j.date>W.lastAppointment&&(W.lastAppointment=j.date,W.bookingNumber=S.id,W.lastDoctorId=j.doctorId,W.lastDoctorName=j.doctorName||"Unknown")}});const y=Array.from(x.values());return console.log(` Found ${y.length} unique patients matching search`),y}catch(u){throw console.error(" Error searching hospital patients:",u),u}},Ky=async(r,s)=>{try{const u=Ce(F,"healthRecords"),c=ze(u,ce("patientId","==",r),ce("hospitalId","==",s),fa("createdAt","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||new Date}))}catch(u){throw console.error("Error fetching hospital patient health records:",u),u}},Zy=async(r,s)=>{try{const u=Ce(F,"prescriptions"),c=ze(u,ce("patientId","==",r),ce("hospitalId","==",s),fa("createdAt","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||new Date}))}catch(u){throw console.error("Error fetching hospital patient prescriptions:",u),u}},Jy=async(r,s)=>{try{const u=Ce(F,"appointments"),c=ze(u,ce("patientId","==",r),ce("hospitalId","==",s),fa("date","desc"));return(await Pe(c)).docs.map(g=>({id:g.id,...g.data()}))}catch(u){throw console.error("Error fetching hospital patient appointments:",u),u}},$y=async(r,s)=>{try{const[u,c,f]=await Promise.all([Ky(r,s),Zy(r,s),Jy(r,s)]);return{healthRecords:u,prescriptions:c,appointments:f}}catch(u){throw console.error("Error fetching comprehensive hospital patient data:",u),u}},ex=async(r,s,u,c)=>{try{const f=[],g=Ce(F,"healthRecords"),x=ze(g,ce("patientId","==",r),ce("doctorId","==",s),ce("hospitalId","==",c)),y=await Pe(x),S=Ce(F,"prescriptions"),j=ze(S,ce("patientId","==",r),ce("doctorId","==",s),ce("hospitalId","==",c)),A=await Pe(j),U=y.docs.map(async he=>{const I=Me(F,"healthRecords",he.id);await Ft(I,{doctorId:u,transferredFrom:s,transferredAt:_r.now()})}),R=A.docs.map(async he=>{const I=Me(F,"prescriptions",he.id);await Ft(I,{doctorId:u,transferredFrom:s,transferredAt:_r.now()})});return await Promise.all([...U,...R]),{success:!0,recordsTransferred:y.size,prescriptionsTransferred:A.size}}catch(f){throw console.error("Error transferring patient records:",f),f}},tx=async r=>{const s=Me(F,"patients",r),u=await Vt(s);return u.exists()?{id:u.id,...u.data()}:null},nx=async r=>{r.replace(/[^\d]/g,"");const s=ze(Ce(F,"patients"),ce("phone","==",r)),u=await Pe(s);if(!u.empty){const c=u.docs[0];return{id:c.id,...c.data()}}return null},ix=async r=>{try{console.log(" Fetching patient details for ID:",r);let s=await tx(r);if(s||(console.log(" Patient not found by ID, trying phone search..."),s=await nx(r)),!s)return console.warn(" Patient not found by ID or phone:",r),{id:r,name:"Unknown Patient",phone:r,appointments:[],prescriptions:[]};console.log(" Patient found:",s);const u=s.phone||r;console.log(" Searching by phone:",u);const c=ze(Ce(F,"appointments"),ce("patientPhone","==",u)),g=(await Pe(c)).docs.map(j=>({id:j.id,...j.data()})).sort((j,A)=>{const U=j.date?new Date(j.date):new Date(0);return(A.date?new Date(A.date):new Date(0))-U});console.log(` Found ${g.length} appointments`);const x=ze(Ce(F,"prescriptions"),ce("patientPhone","==",u)),S=(await Pe(x)).docs.map(j=>({id:j.id,...j.data()})).sort((j,A)=>{const U=j.createdAt?new Date(j.createdAt):new Date(0);return(A.createdAt?new Date(A.createdAt):new Date(0))-U});return console.log(` Found ${S.length} prescriptions`),{...s,appointments:g,prescriptions:S}}catch(s){throw console.error(" Error in getPatientDetails:",s),s}},ax=async r=>{const s=Ce(F,"patients"),u=await Pe(s),c=r.toLowerCase();return u.docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.name?.toLowerCase().includes(c)||g.phone?.includes(r)||g.dob?.includes(r))},lx=({patientId:r,doctorId:s,doctorName:u,appointment:c=null,onClose:f})=>{const[g,x]=b.useState("overview"),[y,S]=b.useState(null),[j,A]=b.useState(!0),[U,R]=b.useState(!1),[he,I]=b.useState(!!c),[J,W]=b.useState(null),[pe,E]=b.useState({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""}),[de,re]=b.useState({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),z=b.useRef(null),[Xe,ct]=b.useState(!1),[X,ue]=b.useState([]),[P,tt]=b.useState("#000000"),[ye,at]=b.useState(2),[bt,qe]=b.useState(!1),[q,se]=b.useState(""),xe=b.useRef(null);b.useEffect(()=>{lt(),Y()},[r]);const lt=async()=>{try{if(A(!0),console.log(" Loading patient data for ID:",r),!r)throw new Error("Patient ID is required");const k=await ix(r);if(console.log(" Patient data loaded:",k),!k)throw new Error("Patient not found");S(k)}catch(k){console.error(" Error loading patient data:",k),ge("Error loading patient data: "+k.message,"error"),S({id:r,name:"Unknown Patient",phone:"N/A",appointments:[],prescriptions:[],visits:[]})}finally{A(!1)}},Y=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const k=window.SpeechRecognition||window.webkitSpeechRecognition;xe.current=new k,xe.current.continuous=!0,xe.current.interimResults=!0,xe.current.lang="en-US",xe.current.onresult=De=>{let je="";for(let Ge=De.resultIndex;Ge<De.results.length;Ge++){const Fe=De.results[Ge][0].transcript;De.results[Ge].isFinal&&(je+=Fe+" ")}se(Ge=>Ge+je)},xe.current.onerror=De=>{console.error("Speech recognition error:",De.error),qe(!1)}}},Ae=()=>{bt?(xe.current?.stop(),qe(!1)):(se(""),xe.current?.start(),qe(!0))},ge=(k,De="success")=>{W({message:k,type:De}),setTimeout(()=>W(null),3e3)},ae=k=>{const De=z.current,je=De.getContext("2d"),Ge=De.getBoundingClientRect(),Fe=(k.clientX||k.touches?.[0]?.clientX)-Ge.left,An=(k.clientY||k.touches?.[0]?.clientY)-Ge.top;je.beginPath(),je.moveTo(Fe,An),ct(!0),ue(qn=>[...qn,De.toDataURL()])},ke=k=>{if(!Xe)return;const De=z.current,je=De.getContext("2d"),Ge=De.getBoundingClientRect(),Fe=(k.clientX||k.touches?.[0]?.clientX)-Ge.left,An=(k.clientY||k.touches?.[0]?.clientY)-Ge.top;je.lineTo(Fe,An),je.strokeStyle=P,je.lineWidth=ye,je.lineCap="round",je.lineJoin="round",je.stroke()},nt=()=>{ct(!1)},Ye=()=>{const k=z.current;k.getContext("2d").clearRect(0,0,k.width,k.height),ue([])},ft=()=>{if(X.length>0){const k=z.current,De=k.getContext("2d"),je=X[X.length-1],Ge=new Image;Ge.src=je,Ge.onload=()=>{De.clearRect(0,0,k.width,k.height),De.drawImage(Ge,0,0)},ue(Fe=>Fe.slice(0,-1))}},pn=()=>{re(k=>({...k,medicines:[...k.medicines,{name:"",dosage:"",frequency:"",duration:"",instructions:""}]}))},kt=k=>{re(De=>({...De,medicines:De.medicines.filter((je,Ge)=>Ge!==k)}))},ln=(k,De,je)=>{re(Ge=>({...Ge,medicines:Ge.medicines.map((Fe,An)=>An===k?{...Fe,[De]:je}:Fe)}))},Nt=async()=>{try{await Ty(r,s,pe),ge("Visit record saved successfully!"),R(!1),lt(),E({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""})}catch(k){ge("Error saving visit: "+k.message,"error")}},yn=async()=>{try{let k={...de,doctorName:u,handwrittenImage:de.inputMethod==="draw"?z.current?.toDataURL():null,voiceTranscript:de.inputMethod==="voice"?q:null};await zy(r,s,k),ge("Prescription saved successfully!"),I(!1),lt(),re({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),se(""),z.current&&Ye()}catch(k){ge("Error saving prescription: "+k.message,"error")}},wt=k=>{const De=window.open("","","width=800,height=600"),je=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Prescription</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; }
          .header { text-align: center; border-bottom: 2px solid #11998e; padding-bottom: 20px; margin-bottom: 20px; }
          .header h1 { color: #11998e; margin: 0; }
          .patient-info, .prescription-info { margin: 20px 0; }
          .label { font-weight: bold; color: #666; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
          th { background-color: #11998e; color: white; }
          .footer { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; }
          .signature { margin-top: 60px; }
          .handwritten-image { max-width: 100%; border: 1px solid #ddd; margin: 20px 0; }
          @media print {
            body { margin: 0; }
            button { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1> Medical Prescription</h1>
          <p><strong>Dr. ${u}</strong></p>
          <p>Date: ${new Date(k.date).toLocaleDateString()}</p>
        </div>
        
        <div class="patient-info">
          <h3>Patient Information</h3>
          <p><span class="label">Name:</span> ${y.name}</p>
          <p><span class="label">Age:</span> ${y.age||"N/A"}</p>
          <p><span class="label">Gender:</span> ${y.gender||"N/A"}</p>
          <p><span class="label">Contact:</span> ${y.phone||y.email}</p>
        </div>
        
        <div class="prescription-info">
          <h3>Diagnosis</h3>
          <p>${k.diagnosis||"N/A"}</p>
        </div>
        
        ${k.handwrittenImage?`
          <div>
            <h3>Handwritten Prescription</h3>
            <img src="${k.handwrittenImage}" class="handwritten-image" alt="Handwritten Prescription" />
          </div>
        `:""}
        
        ${k.medicines&&k.medicines.length>0?`
          <div>
            <h3>Medications</h3>
            <table>
              <thead>
                <tr>
                  <th>Medicine</th>
                  <th>Dosage</th>
                  <th>Frequency</th>
                  <th>Duration</th>
                  <th>Instructions</th>
                </tr>
              </thead>
              <tbody>
                ${k.medicines.map(Ge=>`
                  <tr>
                    <td>${Ge.name}</td>
                    <td>${Ge.dosage}</td>
                    <td>${Ge.frequency}</td>
                    <td>${Ge.duration}</td>
                    <td>${Ge.instructions}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        `:""}
        
        ${k.additionalNotes?`
          <div>
            <h3>Additional Notes</h3>
            <p>${k.additionalNotes}</p>
          </div>
        `:""}
        
        ${k.voiceTranscript?`
          <div>
            <h3>Voice Notes</h3>
            <p>${k.voiceTranscript}</p>
          </div>
        `:""}
        
        <div class="footer">
          <div class="signature">
            <p>___________________________</p>
            <p><strong>Dr. ${u}</strong></p>
            <p>Digital Signature</p>
          </div>
        </div>
        
        <button onclick="window.print()" style="background: #11998e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Print Prescription</button>
      </body>
      </html>
    `;De.document.write(je),De.document.close()};return j?t.jsx("div",{style:Z.modalOverlay,children:t.jsx("div",{style:Z.modal,children:t.jsx("div",{style:Z.loadingSpinner,children:"Loading patient data..."})})}):y?t.jsx("div",{style:Z.modalOverlay,onClick:f,children:t.jsxs("div",{style:Z.modal,onClick:k=>k.stopPropagation(),children:[J&&t.jsx("div",{style:{...Z.notification,background:J.type==="error"?"#ff4444":"#11998e"},children:J.message}),t.jsxs("div",{style:Z.modalHeader,children:[t.jsxs("div",{children:[t.jsxs("h2",{style:Z.modalTitle,children:["Patient Record: ",y.name]}),t.jsxs("p",{style:Z.modalSubtitle,children:["Age: ",y.age||"N/A"," | Gender: ",y.gender||"N/A"," | Blood Type: ",y.healthRecords?.bloodType||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:Z.primaryButton,onClick:()=>R(!0),children:" Add Visit"}),t.jsx("button",{style:Z.primaryButton,onClick:()=>I(!0),children:" New Prescription"}),t.jsx("button",{style:Z.closeButton,onClick:f,children:""})]})]}),c&&t.jsxs("div",{style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",margin:"0 1.5rem 1rem 1.5rem",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",marginBottom:"0.25rem"},children:" Active Consultation"}),t.jsxs("div",{style:{fontSize:"0.95rem",opacity:.9},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",c.date," |  ",c.timeSlot||c.time]})]}),t.jsx("button",{onClick:()=>I(!0),style:{padding:"0.75rem 1.5rem",background:"white",color:"#667eea",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",transition:"transform 0.2s"},onMouseOver:k=>k.currentTarget.style.transform="scale(1.05)",onMouseOut:k=>k.currentTarget.style.transform="scale(1)",children:" Add Prescription Now"})]}),t.jsx("div",{style:Z.tabs,children:["overview","prescriptions","visits","health"].map(k=>t.jsx("button",{style:{...Z.tab,...g===k?Z.activeTab:{}},onClick:()=>x(k),children:k.charAt(0).toUpperCase()+k.slice(1)},k))}),t.jsxs("div",{style:Z.modalBody,children:[g==="overview"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Patient Information"}),t.jsxs("div",{style:Z.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",y.email]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",y.phone||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",y.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",y.healthRecords?.bloodType||"N/A"]})]})]}),t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Recent Vitals"}),y.visits&&y.visits[0]?.vitals?t.jsxs("div",{style:Z.vitalsGrid,children:[t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Blood Pressure"}),t.jsx("div",{style:Z.vitalValue,children:y.visits[0].vitals.bloodPressure})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Temperature"}),t.jsx("div",{style:Z.vitalValue,children:y.visits[0].vitals.temperature})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Pulse"}),t.jsx("div",{style:Z.vitalValue,children:y.visits[0].vitals.pulse})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Weight"}),t.jsx("div",{style:Z.vitalValue,children:y.visits[0].vitals.weight})]})]}):t.jsx("p",{style:Z.noData,children:"No vital signs recorded yet"})]}),t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Allergies & Conditions"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Allergies:"})," ",y.healthRecords?.allergies?.join(", ")||"None recorded"]}),t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",y.healthRecords?.chronicConditions?.join(", ")||"None recorded"]})]})]}),g==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Prescription History"}),y.prescriptions&&y.prescriptions.length>0?y.prescriptions.map((k,De)=>t.jsxs("div",{style:Z.prescriptionCard,children:[t.jsxs("div",{style:Z.prescriptionHeader,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString(),t.jsx("br",{}),t.jsx("strong",{children:"Doctor:"})," ",k.doctorName||"N/A"]}),t.jsx("button",{style:Z.printButton,onClick:()=>wt(k),children:" Print"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.medicines&&k.medicines.length>0&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Medicines:"}),t.jsx("ul",{style:Z.medicineList,children:k.medicines.map((je,Ge)=>t.jsxs("li",{children:[je.name," - ",je.dosage," (",je.frequency,") for ",je.duration,je.instructions&&` - ${je.instructions}`]},Ge))})]}),k.handwrittenImage&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Handwritten Notes:"}),t.jsx("img",{src:k.handwrittenImage,style:Z.handwrittenPreview,alt:"Handwritten"})]}),k.additionalNotes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.additionalNotes]})]},De)):t.jsx("p",{style:Z.noData,children:"No prescriptions recorded yet"})]}),g==="visits"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Visit History"}),y.visits&&y.visits.length>0?y.visits.map((k,De)=>t.jsxs("div",{style:Z.visitCard,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",k.chiefComplaint]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.vitals&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Vitals:"})," BP: ",k.vitals.bloodPressure,", Temp: ",k.vitals.temperature,", Pulse: ",k.vitals.pulse]}),k.notes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.notes]})]},De)):t.jsx("p",{style:Z.noData,children:"No visits recorded yet"})]}),g==="health"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Health Records"}),t.jsxs("div",{style:Z.section,children:[t.jsxs("div",{style:Z.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",y.healthRecords?.bloodType||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Height:"})," ",y.healthRecords?.height||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",y.healthRecords?.weight||"N/A"]})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Current Medications:"}),t.jsx("p",{children:y.healthRecords?.medications?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Allergies:"}),t.jsx("p",{children:y.healthRecords?.allergies?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Chronic Conditions:"}),t.jsx("p",{children:y.healthRecords?.chronicConditions?.join(", ")||"None"})]})]})]})]}),U&&t.jsx("div",{style:Z.subModalOverlay,children:t.jsxs("div",{style:Z.subModal,children:[t.jsxs("div",{style:Z.modalHeader,children:[t.jsx("h3",{children:"Add Visit Record"}),t.jsx("button",{style:Z.closeButton,onClick:()=>R(!1),children:""})]}),t.jsxs("div",{style:Z.formBody,children:[t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Chief Complaint"}),t.jsx("input",{style:Z.input,value:pe.chiefComplaint,onChange:k=>E({...pe,chiefComplaint:k.target.value}),placeholder:"Patient's main concern"})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Diagnosis"}),t.jsx("input",{style:Z.input,value:pe.diagnosis,onChange:k=>E({...pe,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:Z.vitalsSection,children:[t.jsx("h4",{children:"Vital Signs"}),t.jsxs("div",{style:Z.vitalsInputGrid,children:[t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"BP"}),t.jsx("input",{style:Z.input,value:pe.vitals.bloodPressure,onChange:k=>E({...pe,vitals:{...pe.vitals,bloodPressure:k.target.value}}),placeholder:"120/80"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Temp"}),t.jsx("input",{style:Z.input,value:pe.vitals.temperature,onChange:k=>E({...pe,vitals:{...pe.vitals,temperature:k.target.value}}),placeholder:"98.6F"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Pulse"}),t.jsx("input",{style:Z.input,value:pe.vitals.pulse,onChange:k=>E({...pe,vitals:{...pe.vitals,pulse:k.target.value}}),placeholder:"72 bpm"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Weight"}),t.jsx("input",{style:Z.input,value:pe.vitals.weight,onChange:k=>E({...pe,vitals:{...pe.vitals,weight:k.target.value}}),placeholder:"70 kg"})]})]})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Notes"}),t.jsx("textarea",{style:{...Z.input,minHeight:"100px"},value:pe.notes,onChange:k=>E({...pe,notes:k.target.value}),placeholder:"Additional observations"})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Follow-up Date"}),t.jsx("input",{type:"date",style:Z.input,value:pe.followUpDate,onChange:k=>E({...pe,followUpDate:k.target.value})})]}),t.jsx("button",{style:Z.saveButton,onClick:Nt,children:"Save Visit Record"})]})]})}),he&&t.jsx("div",{style:Z.subModalOverlay,children:t.jsxs("div",{style:{...Z.subModal,maxWidth:"900px"},children:[t.jsxs("div",{style:Z.modalHeader,children:[t.jsx("h3",{children:"New Prescription"}),t.jsx("button",{style:Z.closeButton,onClick:()=>I(!1),children:""})]}),t.jsxs("div",{style:Z.formBody,children:[t.jsxs("div",{style:Z.inputMethodSelector,children:[t.jsx("button",{style:{...Z.methodButton,...de.inputMethod==="type"?Z.methodButtonActive:{}},onClick:()=>re({...de,inputMethod:"type"}),children:" Type"}),t.jsx("button",{style:{...Z.methodButton,...de.inputMethod==="draw"?Z.methodButtonActive:{}},onClick:()=>re({...de,inputMethod:"draw"}),children:" Draw/Write"}),t.jsx("button",{style:{...Z.methodButton,...de.inputMethod==="voice"?Z.methodButtonActive:{}},onClick:()=>re({...de,inputMethod:"voice"}),children:" Voice"})]}),de.inputMethod==="type"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Diagnosis"}),t.jsx("input",{style:Z.input,value:de.diagnosis,onChange:k=>re({...de,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:Z.medicinesSection,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h4",{children:"Medicines"}),t.jsx("button",{style:Z.addButton,onClick:pn,children:" Add Medicine"})]}),de.medicines.map((k,De)=>t.jsxs("div",{style:Z.medicineRow,children:[t.jsx("input",{style:{...Z.input,flex:2},placeholder:"Medicine name",value:k.name,onChange:je=>ln(De,"name",je.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Dosage",value:k.dosage,onChange:je=>ln(De,"dosage",je.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Frequency",value:k.frequency,onChange:je=>ln(De,"frequency",je.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Duration",value:k.duration,onChange:je=>ln(De,"duration",je.target.value)}),t.jsx("input",{style:{...Z.input,flex:2},placeholder:"Instructions",value:k.instructions,onChange:je=>ln(De,"instructions",je.target.value)}),de.medicines.length>1&&t.jsx("button",{style:Z.removeButton,onClick:()=>kt(De),children:""})]},De))]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Additional Notes"}),t.jsx("textarea",{style:{...Z.input,minHeight:"80px"},value:de.additionalNotes,onChange:k=>re({...de,additionalNotes:k.target.value}),placeholder:"Any additional instructions or notes"})]})]}),de.inputMethod==="draw"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.canvasControls,children:[t.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[t.jsx("label",{children:"Pen Color:"}),t.jsx("input",{type:"color",value:P,onChange:k=>tt(k.target.value),style:Z.colorPicker}),t.jsx("label",{children:"Size:"}),t.jsx("input",{type:"range",min:"1",max:"10",value:ye,onChange:k=>at(k.target.value),style:Z.sizeSlider}),t.jsxs("span",{children:[ye,"px"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:Z.canvasButton,onClick:ft,children:" Undo"}),t.jsx("button",{style:Z.canvasButton,onClick:Ye,children:" Clear"})]})]}),t.jsx("canvas",{ref:z,width:800,height:500,style:Z.canvas,onMouseDown:ae,onMouseMove:ke,onMouseUp:nt,onMouseLeave:nt,onTouchStart:ae,onTouchMove:ke,onTouchEnd:nt}),t.jsx("p",{style:Z.canvasHint,children:" Use your mouse, stylus, or touch to write the prescription"})]}),de.inputMethod==="voice"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.voiceControls,children:[t.jsx("button",{style:{...Z.voiceButton,background:bt?"#ff4444":"#11998e"},onClick:Ae,children:bt?" Stop Recording":" Start Recording"}),bt&&t.jsxs("div",{style:Z.recordingIndicator,children:[t.jsx("span",{style:Z.recordingDot}),"Recording..."]})]}),t.jsxs("div",{style:Z.transcriptBox,children:[t.jsx("strong",{children:"Transcript:"}),t.jsx("div",{style:Z.transcript,children:q||"Speak to start transcription..."})]}),t.jsx("p",{style:Z.voiceHint,children:' Click "Start Recording" and speak clearly. The system will convert your speech to text.'})]}),t.jsx("button",{style:Z.saveButton,onClick:yn,children:" Save Prescription"})]})]})})]})}):null},Z={modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},modal:{background:"white",borderRadius:"15px",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},modalHeader:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",padding:"20px 30px",display:"flex",justifyContent:"space-between",alignItems:"center"},modalTitle:{margin:0,fontSize:"24px",fontWeight:"600"},modalSubtitle:{margin:"5px 0 0 0",opacity:.9,fontSize:"14px"},closeButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"35px",height:"35px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s"},primaryButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},tabs:{display:"flex",borderBottom:"2px solid #e0e0e0",background:"#f8f9fa"},tab:{flex:1,padding:"15px",border:"none",background:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#666",transition:"all 0.3s"},activeTab:{color:"#11998e",borderBottom:"3px solid #11998e",fontWeight:"600"},modalBody:{padding:"30px",overflowY:"auto",flex:1},section:{marginBottom:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"10px"},sectionTitle:{margin:"0 0 15px 0",color:"#11998e",fontSize:"18px",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},vitalsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},vitalCard:{background:"white",padding:"15px",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},vitalLabel:{fontSize:"12px",color:"#666",marginBottom:"5px"},vitalValue:{fontSize:"20px",fontWeight:"600",color:"#11998e"},noData:{textAlign:"center",color:"#999",padding:"40px",fontStyle:"italic"},prescriptionCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},prescriptionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #e0e0e0"},printButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",transition:"all 0.3s"},medicineList:{marginTop:"10px",paddingLeft:"20px"},handwrittenPreview:{maxWidth:"100%",border:"1px solid #ddd",borderRadius:"5px",marginTop:"10px"},visitCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},loadingSpinner:{textAlign:"center",padding:"40px",color:"#11998e",fontSize:"18px"},notification:{position:"absolute",top:"20px",right:"20px",color:"white",padding:"15px 25px",borderRadius:"8px",zIndex:1001,animation:"slideIn 0.3s ease",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},subModalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1001},subModal:{background:"white",borderRadius:"15px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},formBody:{padding:"30px",overflowY:"auto"},formGroup:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"},vitalsSection:{marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},vitalsInputGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginTop:"15px"},saveButton:{width:"100%",padding:"15px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"all 0.3s",marginTop:"20px"},inputMethodSelector:{display:"flex",gap:"10px",marginBottom:"20px",padding:"10px",background:"#f8f9fa",borderRadius:"8px"},methodButton:{flex:1,padding:"12px",border:"2px solid #ddd",background:"white",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},methodButtonActive:{background:"#11998e",color:"white",borderColor:"#11998e"},medicinesSection:{marginBottom:"20px"},medicineRow:{display:"flex",gap:"10px",marginBottom:"10px",alignItems:"center"},addButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},removeButton:{background:"#ff4444",color:"white",border:"none",padding:"8px 12px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvas:{border:"2px solid #ddd",borderRadius:"8px",cursor:"crosshair",width:"100%",touchAction:"none",background:"white"},canvasControls:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},colorPicker:{width:"40px",height:"40px",border:"none",borderRadius:"5px",cursor:"pointer"},sizeSlider:{width:"100px"},canvasButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvasHint:{textAlign:"center",color:"#666",fontSize:"14px",marginTop:"10px",fontStyle:"italic"},voiceControls:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},voiceButton:{padding:"15px 30px",border:"none",borderRadius:"8px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s"},recordingIndicator:{display:"flex",alignItems:"center",gap:"10px",color:"#ff4444",fontWeight:"600"},recordingDot:{width:"12px",height:"12px",background:"#ff4444",borderRadius:"50%",animation:"pulse 1.5s infinite"},transcriptBox:{marginBottom:"20px"},transcript:{marginTop:"10px",padding:"20px",background:"white",border:"2px solid #ddd",borderRadius:"8px",minHeight:"150px",fontSize:"14px",lineHeight:"1.6",color:"#333"},voiceHint:{textAlign:"center",color:"#666",fontSize:"14px",fontStyle:"italic"}},uh=({patientId:r,onClose:s,doctorId:u=null,doctorName:c=null,hospitalId:f=null,isHospitalView:g=!1})=>{const[x,y]=b.useState({healthRecords:[],prescriptions:[],appointments:[]}),[S,j]=b.useState(null),[A,U]=b.useState(!0),[R,he]=b.useState(null),[I,J]=b.useState(!1),[W,pe]=b.useState("summary"),[E,de]=b.useState(!1),[re,z]=b.useState({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""});b.useEffect(()=>{r&&(u||f)&&(Xe(),u&&ct())},[r,u,f]);const Xe=async()=>{U(!0);try{const P=g&&f?await $y(r,f):await Qy(r,u);if(y(P),P.appointments&&P.appointments.length>0){const tt=P.appointments[0];j({name:tt.patientName,phone:tt.patientPhone,email:tt.patientEmail||"N/A"})}}catch(P){console.error("Error loading patient data:",P),alert("Failed to load patient data")}finally{U(!1)}},ct=async()=>{try{const P=await Vy(r,u);P&&he(P.summary)}catch(P){console.error("Error loading cached summary:",P)}},X=async()=>{J(!0);try{const P=await Fy(r,u);he(P.summary)}catch(P){console.error("Error generating AI summary:",P),alert("Failed to generate AI summary: "+P.message)}finally{J(!1)}},ue=async P=>{P.preventDefault();try{await Yy(r,u,{...re,doctorName:c}),alert("Health record added successfully!"),de(!1),z({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""}),await Xe()}catch(tt){console.error("Error adding health record:",tt),alert("Failed to add health record")}};return A?t.jsx("div",{style:zn.modal,onClick:s,children:t.jsx("div",{style:{...zn.modalContent,maxWidth:"900px"},onClick:P=>P.stopPropagation(),children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Loading patient health records..."})]})})}):t.jsx("div",{style:zn.modal,onClick:s,children:t.jsxs("div",{style:{...zn.modalContent,maxWidth:"1000px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:P=>P.stopPropagation(),children:[t.jsx("div",{style:{borderBottom:"2px solid #11998e",paddingBottom:"1rem",marginBottom:"1rem"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Complete Health Records"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#666"},children:["Patient: ",t.jsx("strong",{children:S?.name||"Unknown"}),S?.phone&&` |  ${S.phone}`,S?.email&&` |  ${S.email}`]})]}),t.jsx("button",{onClick:s,style:{background:"#f5576c",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontWeight:"600"},children:" Close"})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:zn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#11998e"},children:x?.appointments?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Total Visits"})]}),t.jsxs("div",{style:zn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#667eea"},children:x?.prescriptions?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Prescriptions"})]}),t.jsxs("div",{style:zn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f5576c"},children:x?.healthRecords?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Health Records"})]}),t.jsxs("div",{style:zn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#38ef7d"},children:x?.appointments?.filter(P=>P.status==="completed").length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Completed"})]})]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"2px solid #e0e0e0"},children:["summary","appointments","prescriptions","records"].map(P=>t.jsx("button",{onClick:()=>pe(P),style:{padding:"0.75rem 1.5rem",background:W===P?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"transparent",color:W===P?"white":"#666",border:"none",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",textTransform:"capitalize"},children:P},P))}),t.jsxs("div",{style:{flex:1,overflow:"auto",padding:"0.5rem"},children:[W==="summary"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" AI-Powered Health Summary"}),t.jsx("button",{onClick:X,disabled:I,style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:I?"not-allowed":"pointer",fontWeight:"600",opacity:I?.6:1},children:I?" Generating...":" Generate AI Summary"})]}),R?t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",border:"2px solid #667eea",whiteSpace:"pre-wrap",lineHeight:"1.8"},children:R}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:'Click "Generate AI Summary" to get an AI-powered comprehensive health analysis'})]})]}),W==="appointments"&&t.jsxs("div",{children:[t.jsxs("h3",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(IconCalendar,{size:20})}),"Appointment History"]}),x?.appointments.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No appointments found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:x?.appointments.map(P=>t.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("strong",{style:{color:"#11998e"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(IconCalendar,{size:18})})," ",P.date," at ",P.time]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:P.status==="completed"?"#38ef7d":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:P.status})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[" ",P.hospitalName||P.doctorName]}),P.reason&&t.jsxs("div",{children:[" ",P.reason]})]})]},P.id))})]}),W==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Prescription History"}),x?.prescriptions.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No prescriptions found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:x?.prescriptions.map(P=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #11998e"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#11998e"},children:[" ",P.prescriptionDate||"Date N/A"]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",P.diagnosis]}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Medications:"}),t.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:P.medications?.map((tt,ye)=>t.jsxs("li",{children:[tt.name," - ",tt.dosage||"N/A"," | ",tt.frequency||"N/A"," | ",tt.duration||"N/A"]},ye))})]}),P.instructions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Instructions:"})," ",P.instructions]}),P.tests&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Tests:"})," ",P.tests]})]})]},P.id))})]}),W==="records"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" Detailed Health Records"}),t.jsx("button",{onClick:()=>de(!E),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:E?" Cancel":" Add New Record"})]}),E&&t.jsxs("form",{onSubmit:ue,style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",marginBottom:"1.5rem",border:"2px solid #11998e"},children:[t.jsx("h4",{style:{marginTop:0,color:"#11998e"},children:" Add Health Record"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Chief Complaint *",value:re.chiefComplaint,onChange:P=>z({...re,chiefComplaint:P.target.value}),style:zn.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Blood Pressure (e.g., 120/80)",value:re.bloodPressure,onChange:P=>z({...re,bloodPressure:P.target.value}),style:zn.input}),t.jsx("input",{type:"text",placeholder:"Heart Rate (bpm)",value:re.heartRate,onChange:P=>z({...re,heartRate:P.target.value}),style:zn.input}),t.jsx("input",{type:"text",placeholder:"Temperature (F/C)",value:re.temperature,onChange:P=>z({...re,temperature:P.target.value}),style:zn.input}),t.jsx("input",{type:"text",placeholder:"Weight",value:re.weight,onChange:P=>z({...re,weight:P.target.value}),style:zn.input}),t.jsx("input",{type:"text",placeholder:"Height",value:re.height,onChange:P=>z({...re,height:P.target.value}),style:zn.input})]}),t.jsx("textarea",{placeholder:"Symptoms",value:re.symptoms,onChange:P=>z({...re,symptoms:P.target.value}),style:{...zn.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Observations",value:re.observations,onChange:P=>z({...re,observations:P.target.value}),style:{...zn.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Allergies",value:re.allergies,onChange:P=>z({...re,allergies:P.target.value}),style:{...zn.input,marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Chronic Conditions",value:re.chronicConditions,onChange:P=>z({...re,chronicConditions:P.target.value}),style:{...zn.input,marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Additional Notes",value:re.notes,onChange:P=>z({...re,notes:P.target.value}),style:{...zn.input,minHeight:"80px",marginTop:"1rem"}}),t.jsx("button",{type:"submit",style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",width:"100%"},children:" Save Health Record"})]}),x?.healthRecords?.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No detailed health records yet. Add one using the button above."}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:x?.healthRecords?.map(P=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #667eea"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#667eea"},children:[" ",P.createdAt?new Date(P.createdAt).toLocaleDateString():"N/A"," | Dr. ",P.doctorName||c]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",P.chiefComplaint]}),P.bloodPressure&&t.jsxs("div",{children:[t.jsx("strong",{children:"BP:"})," ",P.bloodPressure]}),P.heartRate&&t.jsxs("div",{children:[t.jsx("strong",{children:"Heart Rate:"})," ",P.heartRate," bpm"]}),P.temperature&&t.jsxs("div",{children:[t.jsx("strong",{children:"Temperature:"})," ",P.temperature]}),P.weight&&t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",P.weight]}),P.symptoms&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Symptoms:"})," ",P.symptoms]}),P.observations&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Observations:"})," ",P.observations]}),P.allergies&&t.jsxs("div",{style:{marginTop:"0.5rem",color:"#f5576c"},children:[t.jsx("strong",{children:" Allergies:"})," ",P.allergies]}),P.chronicConditions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",P.chronicConditions]}),P.notes&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Notes:"})," ",P.notes]})]})]},P.id))})]})]})]})})},zn={modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},modalContent:{background:"white",borderRadius:"15px",padding:"2rem",width:"100%",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},statBox:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",textAlign:"center",border:"1px solid #e0e0e0"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"1rem",boxSizing:"border-box"}},di="/assets/billing_qr-D9aYMsrW.png";function ec(r){const[s,u]=r.split("-").map(Number),c=new Date(s,u-1,1),f=new Date(s,u-1+1,1);return{startISO:c.toISOString(),nextMonthISO:f.toISOString(),startDateStr:`${r}-01`}}function ph({appointmentsCount:r=0,prescriptionsCount:s=0,rates:u={},pricingModel:c="full",discountPercentage:f=0}){let g=r*(u.appointmentCost||0),x=s*(u.prescriptionCost||0),y=g+x;if(c==="free")g=0,x=0,y=0;else if(c==="reduced"){const S=(f||0)/100;g*=1-S,x*=1-S,y*=1-S}return{appointmentCost:g,prescriptionCost:x,totalCost:y}}function mh({doctorId:r,doctorProfile:s,isHospitalView:u=!1,suppressHeader:c=!1}){const{currentUser:f,userProfile:g,refresh:x}=_a(),y=r||f?.uid,S=s||g,[j,A]=b.useState("overview"),[U,R]=b.useState(!1),[he,I]=b.useState([]),[J,W]=b.useState({}),[pe,E]=b.useState({}),[de,re]=b.useState(!0),[z,Xe]=b.useState(null),[ct,X]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[ue,P]=b.useState(""),[tt,ye]=b.useState([]),[at,bt]=b.useState(!1),[qe,q]=b.useState(!1),[se,xe]=b.useState(null),[lt,Y]=b.useState(!1),[Ae,ge]=b.useState(!1),[ae,ke]=b.useState(null),[nt,Ye]=b.useState(!1),[ft,pn]=b.useState(null),[kt,ln]=b.useState(new Date().toISOString().split("T")[0]),[Nt,yn]=b.useState(!1),[wt,k]=b.useState(!1),[De,je]=b.useState(!1),[Ge,Fe]=b.useState(null),An=h=>{try{const D=sessionStorage.getItem(h);if(D)return JSON.parse(D)}catch(D){console.warn("Cache read error",D)}return null},qn=(h,D)=>{try{sessionStorage.setItem(h,JSON.stringify(D))}catch(K){console.warn("Cache write error",K)}},[fe,xn]=b.useState(""),[Ei,Ht]=b.useState([]),[Qt,Vn]=b.useState(!1),[vt,Qn]=b.useState(!1),[Ut,sn]=b.useState({displayName:"",specialization:"",consultationFee:"",phone:"",country:"",state:"",city:"",address:""}),[M,ee]=b.useState({date:new Date().toISOString().split("T")[0],startTime:"12:00",endTime:"13:00",reason:"Lunch Break"}),[Se,we]=b.useState(!1),[be,Re]=b.useState({slotDuration:30,workingDays:[1,2,3,4,5],dayWiseHours:{1:{enabled:!0,start:"09:00",end:"17:00"},2:{enabled:!0,start:"09:00",end:"17:00"},3:{enabled:!0,start:"09:00",end:"17:00"},4:{enabled:!0,start:"09:00",end:"17:00"},5:{enabled:!0,start:"09:00",end:"17:00"},6:{enabled:!1,start:"09:00",end:"17:00"},7:{enabled:!1,start:"09:00",end:"17:00"}}}),[Ct,Nn]=b.useState(!1),[dn,Gn]=b.useState({date:new Date().toISOString().split("T")[0],reason:""}),[Rt,on]=b.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[bn,Bn]=b.useState(null);b.useEffect(()=>{const h=window.matchMedia("(max-width: 480px)"),D=K=>R(K.matches);return R(h.matches),h.addEventListener?h.addEventListener("change",D):h.addListener(D),()=>{h.removeEventListener?h.removeEventListener("change",D):h.removeListener(D)}},[]);const[Ze,ni]=b.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[jt,Xt]=b.useState(""),[Ot,$e]=b.useState(!1),[C,O]=b.useState(""),[G,ie]=b.useState(!1),[Ne,He]=b.useState(null);b.useEffect(()=>{const h=new Image;h.src=di,h.onload=()=>{try{const D=document.createElement("canvas");D.width=h.width,D.height=h.height;const K=D.getContext("2d");K.drawImage(h,0,0);const oe=K.getImageData(0,0,D.width,D.height).data;let ve=D.width,Ie=D.height,Qe=0,pt=0;const ot=250;for(let kn=0;kn<D.height;kn++)for(let Rn=0;Rn<D.width;Rn++){const Yn=(kn*D.width+Rn)*4,Fn=oe[Yn],Hn=oe[Yn+1],En=oe[Yn+2];oe[Yn+3]>10&&!(Fn>ot&&Hn>ot&&En>ot)&&(Rn<ve&&(ve=Rn),kn<Ie&&(Ie=kn),Rn>Qe&&(Qe=Rn),kn>pt&&(pt=kn))}if(ve>Qe||Ie>pt){He(di);return}const Le=Math.max(8,Math.floor(Math.min(D.width,D.height)*.02));ve=Math.max(0,ve-Le),Ie=Math.max(0,Ie-Le),Qe=Math.min(D.width,Qe+Le),pt=Math.min(D.height,pt+Le);const rt=Qe-ve+1,ut=pt-Ie+1,mn=document.createElement("canvas");mn.width=rt,mn.height=ut,mn.getContext("2d").drawImage(D,ve,Ie,rt,ut,0,0,rt,ut);const Dn=mn.toDataURL("image/png");He(Dn)}catch(D){console.error("QR crop failed",D),He(di)}},h.onerror=()=>He(di)},[di]),b.useEffect(()=>{y&&Ve()},[y]),b.useEffect(()=>{if(!ue){const h=new Date,D=h.getFullYear(),K=String(h.getMonth()+1).padStart(2,"0");P(`${D}-${K}`)}},[]),b.useEffect(()=>{S&&sn({displayName:S.displayName||"",specialization:S.specialization||"",consultationFee:S.consultationFee||"",phone:S.phone||"",country:S.country||"",state:S.state||"",city:S.city||"",address:S.address||""})},[S]),b.useEffect(()=>{j==="usage"&&y&&Si()},[j,y]),b.useEffect(()=>{j==="billing"&&y&&St()},[j,y,ue]),b.useEffect(()=>{j==="appointments"&&y&&!vt&&At()},[j,y,vt]);const At=async()=>{if(!de){re(!0);try{const h=await vy(y),D=[...new Set(h.filter(oe=>!oe.patientName||!oe.patientPhone).map(oe=>oe.patientId||oe.userId||oe.patientUid).filter(oe=>oe))],K={};await Promise.all(D.map(async oe=>{try{const ve=Me(F,"users",oe),Ie=await Vt(ve);Ie.exists()&&(K[oe]=Ie.data())}catch(ve){console.error("Error fetching patient data for:",oe,ve)}}));const me=h.map(oe=>{if(oe.patientName&&oe.patientPhone)return oe;const ve=oe.patientId||oe.userId||oe.patientUid,Ie=K[ve];return Ie?{...oe,patientId:ve,patientName:Ie.displayName||Ie.name||Ie.email,patientPhone:Ie.phone||Ie.phoneNumber||"N/A",patientEmail:Ie.email}:oe});console.log(" Loaded all appointments:",me.length),I(me),Qn(!0)}catch(h){console.error("Error loading all appointments:",h),Oe("Error loading appointments","error")}finally{re(!1)}}},Ve=async()=>{re(!0);try{const h=new Date().toISOString().split("T")[0],D=Ce(F,"appointments"),K=ze(D,ce("doctorId","==",y),ce("date","==",h)),[me,oe,ve]=await Promise.all([Ay(y),Pe(K),rc(y)]),Ie=oe.docs.map(Le=>({id:Le.id,...Le.data()}));console.log(" Dashboard Data Loaded (Optimized):",{stats:me,todayAppointments:Ie.length});const Qe=[...new Set(Ie.filter(Le=>!Le.patientName||!Le.patientPhone).map(Le=>Le.patientId||Le.userId||Le.patientUid).filter(Le=>Le))],pt={};await Promise.all(Qe.map(async Le=>{try{const rt=Me(F,"users",Le),ut=await Vt(rt);ut.exists()&&(pt[Le]=ut.data())}catch(rt){console.error(rt)}}));const ot=Ie.map(Le=>{if(Le.patientName&&Le.patientPhone)return Le;const rt=Le.patientId||Le.userId||Le.patientUid,ut=pt[rt];return ut?{...Le,patientId:rt,patientName:ut.displayName||ut.name||ut.email,patientPhone:ut.phone||ut.phoneNumber||"N/A",patientEmail:ut.email}:Le});vt||I(ot),W(ve),E({...me,todayAppointments:Ie.length,patientCount:0})}catch(h){console.error("Error loading dashboard data:",h),Oe("Error loading data","error")}finally{re(!1)}},Oe=(h,D="success")=>{Bn({message:h,type:D}),setTimeout(()=>Bn(null),3e3)};b.useEffect(()=>{const h=new Date,D=h.getFullYear(),K=String(h.getMonth()+1).padStart(2,"0");P(`${D}-${K}`)},[]),b.useEffect(()=>{j==="payments"&&ue&&y&&St()},[j,ue,y]);const Kt=h=>{console.log(" Getting payment methods for country:",h);const D=[];return h==="India"||h==="IN"?D.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):h==="United States"||h==="US"||h==="USA"?D.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):h==="United Kingdom"||h==="UK"||h==="GB"?D.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):h==="Canada"||h==="CA"?D.push("PayPal","Stripe","Interac","Bank Transfer","Check"):h==="Australia"||h==="AU"?D.push("PayPal","Stripe","BPAY","Bank Transfer"):D.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",D),D},Si=async()=>{try{re(!0),console.log(" Loading usage data for doctor:",y);let h={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const Jt=Me(F,"config","billing"),Dn=await Vt(Jt);Dn.exists()&&(h=Dn.data(),X(h))}catch(Jt){console.warn("Config not found, using defaults:",Jt)}const D=Me(F,"users",y),K=await Vt(D);if(!K.exists())throw new Error("Doctor profile not found");const me=K.data(),oe=Ce(F,"appointments"),ve=ze(oe,ce("doctorId","==",y)),Qe=(await Pe(ve)).docs.map(Jt=>({id:Jt.id,...Jt.data()})),pt=Ce(F,"prescriptions"),ot=ze(pt,ce("doctorId","==",y)),rt=(await Pe(ot)).docs.map(Jt=>({id:Jt.id,...Jt.data()})),ut=S?.country||me?.country||"default",mn=_l({country:ut,customRates:me?.customRates},h);Xe({totalAppointments:Qe.length,totalPrescriptions:rt.length,appointmentsByMonth:Xn(Qe),prescriptionsByMonth:Xn(rt),pricingModel:me?.pricingModel||"full",discountPercentage:me?.discountPercentage||0,currency:mn.currency||"GBP",symbol:mn.symbol||"",rates:mn})}catch(h){console.error("Error loading usage data:",h),Oe("Error loading usage data","error")}finally{re(!1)}},Je=async h=>{if(h.preventDefault(),!C){Oe("Please select a payment method","error");return}const D=parseFloat(jt);if(!D||D<=0){Oe("Please enter a valid amount","error");return}if(D>Ze.pendingAmount){Oe("Amount cannot exceed pending balance","error");return}try{$e(!0);const K={doctorId:y,doctorName:S.displayName||S.email,amount:D,currency:z.currency,paymentMethod:C,status:"pending",createdAt:new Date().toISOString(),createdBy:f.uid,type:"partial",description:`Partial payment for doctor app usage - ${Ze.totalAppointments} appointments, ${Ze.totalPrescriptions} prescriptions`},me=Ce(F,"payments");await ga(me,K),Oe("Payment request submitted successfully! Admin will verify and process.","success"),je(!1),Xt(""),O(""),St()}catch(K){console.error("Error processing payment:",K),Oe("Failed to process payment","error")}finally{$e(!1)}},Wn=()=>{Xt(""),O(""),je(!0)},St=async()=>{try{re(!0),console.log(" Loading billing data for doctor:",y);const h=`doc_billing_${y}_${ue||"all"}`;if(u)console.log(" Embedded hospital view: bypassing doctor cache to reflect hospital aggregation");else{const Ke=An(h);if(Ke){console.log(" Using cached doctor billing data for",h),Ke.cumulativeData&&ni(Ke.cumulativeData),Ke.paymentInfo?Xe(Ke.paymentInfo):Xe(Ke),re(!1);return}}let D={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const Ke=Me(F,"config","billing"),vn=await Vt(Ke);vn.exists()&&(D=vn.data(),X(D))}catch(Ke){console.warn("Config not found, using defaults:",Ke)}const K=Me(F,"users",y),me=await Vt(K);if(!me.exists())throw new Error("Doctor profile not found");const oe=me.data(),ve=Ce(F,"appointments"),Ie=Ce(F,"prescriptions"),Qe=Ce(F,"payments"),pt=ze(ve,ce("doctorId","==",y)),ot=ze(Ie,ce("doctorId","==",y)),Le=ze(Qe,ce("doctorId","==",y));let rt=pt,ut=ot,mn=Le;if(ue){const{startISO:Ke,nextMonthISO:vn}=ec(ue);rt=ze(ve,ce("doctorId","==",y),ce("date",">=",Ke),ce("date","<",vn)),ut=ze(Ie,ce("doctorId","==",y),ce("createdAt",">=",Ke),ce("createdAt","<",vn)),mn=ze(Qe,ce("doctorId","==",y),ce("createdAt",">=",Ke),ce("createdAt","<",vn))}const Jt=ze(Le,fa("createdAt","desc"),Jd(100));let Dn=null;if(ue){const{startISO:Ke,nextMonthISO:vn}=ec(ue);Dn=ze(Qe,ce("doctorId","==",y),ce("createdAt",">=",Ke),ce("createdAt","<",vn),fa("createdAt","desc"),Jd(100))}console.time("DoctorBillingFetch");const[kn,Rn,Yn,Fn,Hn,En]=await Promise.all([ci(pt).catch(Ke=>({data:()=>({count:0})})),ci(ot).catch(Ke=>({data:()=>({count:0})})),Pr(Le,{totalPaid:Ir("amount")}).catch(Ke=>({data:()=>({totalPaid:0})})),ci(rt).catch(Ke=>({data:()=>({count:0})})),ci(ut).catch(Ke=>({data:()=>({count:0})})),Pe(Jt).catch(Ke=>({docs:[]})),Dn?Pe(Dn).catch(Ke=>({docs:[]})):Promise.resolve({docs:[]})]);console.timeEnd("DoctorBillingFetch");const ii=kn.data().count,pi=Rn.data().count,Zn=S?.country||oe?.country||"default",hn=_l({country:Zn,customRates:oe?.customRates},D),mi=oe?.pricingModel||"full",rl=oe?.discountPercentage||0;let Ui=ii*(hn.appointmentCost||0),Jn=pi*(hn.prescriptionCost||0),Ji=Ui+Jn;if(mi==="free")Ui=0,Jn=0,Ji=0;else if(mi==="reduced"){const Ke=rl/100;Ui*=1-Ke,Jn*=1-Ke,Ji*=1-Ke}let Yi=0;Yn.data&&(Yi=Yn.data().totalPaid||0);const Oi=Math.max(0,Ji-Yi),sl=Fn.data().count,Ga=Hn.data().count,Eo=ph({appointmentsCount:sl,prescriptionsCount:Ga,rates:hn,pricingModel:mi,discountPercentage:rl});let xa=En.docs.map(Ke=>({id:Ke.id,...Ke.data()})).sort((Ke,vn)=>vn.createdAt.localeCompare(Ke.createdAt));const dl=arguments[6]&&arguments[6].docs?arguments[6].docs.map(Ke=>({id:Ke.id,...Ke.data()})).sort((Ke,vn)=>vn.createdAt.localeCompare(Ke.createdAt)):[];let cl=0;try{cl=(await Pr(mn,{totalPaid:Ir("amount")}).catch(()=>({data:()=>({totalPaid:0})}))).data().totalPaid||0}catch{cl=xa.reduce((vn,Mo)=>vn+(Mo.status==="completed"&&Mo.amount||0),0)}const Un={totalAppointments:ii,totalPrescriptions:pi,appointmentCost:Ui,prescriptionCost:Jn,totalCost:Ji,totalPaid:Yi,pendingAmount:Oi,paymentHistory:xa};ni(Un);const Fi={displayCost:Eo?.totalCost||0,monthlyAppointments:sl,monthlyPrescriptions:Ga,monthlyPaymentHistory:dl,totalAppointments:ii,totalPrescriptions:pi,totalCost:Ji,appointmentCost:Ui,prescriptionCost:Jn,paid:Yi,pending:Oi,pricingModel:mi,discountPercentage:rl,rates:hn,currency:hn.currency,symbol:hn.symbol,country:Zn,paymentHistory:xa,monthlyPaid:cl,paymentDetails:D.paymentDetails||{},countryInstructions:D.countrySpecificInstructions||{},isHospitalDoctor:!!oe.hospitalId};Xe(Fi);try{qn(h,{cumulativeData:Un,paymentInfo:Fi,timestamp:Date.now()})}catch(Ke){console.warn("Failed to write doctor billing cache",Ke)}console.log(" Billing data loaded (Monthly & All-Time)")}catch(h){console.error("Error loading billing data:",h);const D=h&&h.message?h.message:"Failed to load billing data.";Oe("Error loading billing data: "+D,"error");try{ni({totalAppointments:0,totalPrescriptions:0,appointmentCost:0,prescriptionCost:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),Xe({error:!0,message:D,displayCost:0,monthlyAppointments:0,monthlyPrescriptions:0,totalAppointments:0,totalPrescriptions:0,totalCost:0,appointmentCost:0,prescriptionCost:0,paid:0,pending:0,pricingModel:"full",discountPercentage:0,rates:{},currency:"USD",symbol:"$",country:S?.country||"default",paymentDetails:{},countryInstructions:{}})}catch(K){console.warn("Error while setting fallback billing UI state",K)}}finally{re(!1)}},Xn=h=>{const D={};return h.forEach(K=>{const me=K.date||K.createdAt||"";if(me){const oe=me.substring(0,7);D[oe]=(D[oe]||0)+1}}),D},Kn=async h=>{h.preventDefault();try{if(await oh(y,Ut),Oe("Profile updated successfully!"),bt(!1),!u)try{await x()}catch{window.location.href="/dashboard"}}catch(D){console.error("Error updating profile:",D),Oe("Failed to update profile","error")}},Mi=async h=>{h.preventDefault();try{const D=he.filter(K=>K.date===M.date&&K.time>=M.startTime&&K.time<M.endTime&&K.status!=="cancelled"&&K.status!=="completed");if(D.length>0){const K=D.map(oe=>`${oe.patientName||oe.userName} at ${oe.time}`).join(", "),me=` WARNING: You have ${D.length} appointment(s) during this time:

${K}

You should cancel or reschedule these appointments before blocking this time. Do you still want to block this time?`;if(!window.confirm(me))return}await wy(y,M),D.length>0?Oe(`Time blocked. Please contact ${D.length} patient(s) to reschedule!`,"error"):Oe("Time blocked successfully!"),q(!1),Ve()}catch(D){console.error("Error blocking time:",D),Oe("Failed to block time","error")}},qi=async h=>{try{await Cy(y,h),Oe("Time unblocked successfully!"),Ve()}catch(D){console.error("Error unblocking time:",D),Oe("Failed to unblock time","error")}},Gi=async h=>{h.preventDefault();try{const D=Object.keys(be.dayWiseHours).filter(ve=>be.dayWiseHours[ve].enabled).map(ve=>parseInt(ve)),K=Object.values(be.dayWiseHours).filter(ve=>ve.enabled),me=K.length>0?{start:K[0].start,end:K[0].end}:{start:"09:00",end:"17:00"},oe={...J,slotDuration:be.slotDuration,workingDays:D,workingHours:me,dayWiseHours:be.dayWiseHours};await Xd(y,oe),W(oe),Oe("Availability settings updated successfully!"),we(!1),Ve()}catch(D){console.error("Error updating slot config:",D),Oe("Failed to update availability settings","error")}},Zi=async h=>{h.preventDefault();try{const D=he.filter(me=>me.date===dn.date&&me.status!=="cancelled"&&me.status!=="completed");if(D.length>0){const me=D.map(ve=>ve.patientName||ve.userName).join(", "),oe=` WARNING: You have ${D.length} appointment(s) scheduled on ${dn.date}.

Patients: ${me}

You should cancel or reschedule these appointments before marking this date as leave. Do you still want to mark this date as absent?`;if(!window.confirm(oe))return}const K={...J,unavailableDates:[...J.unavailableDates||[],{date:dn.date,reason:dn.reason,id:Date.now().toString()}]};await Xd(y,K),W(K),D.length>0?Oe(`Date marked as absent. Please contact ${D.length} patient(s) to reschedule!`,"error"):Oe("Date marked as absent successfully!"),Nn(!1),Gn({date:new Date().toISOString().split("T")[0],reason:""}),Ve()}catch(D){console.error("Error marking absent:",D),Oe("Failed to mark date as absent","error")}},Ni=async h=>{try{const D={...J,unavailableDates:(J.unavailableDates||[]).filter(K=>K.id!==h)};await Xd(y,D),W(D),Oe("Absent date removed successfully!"),Ve()}catch(D){console.error("Error removing absent date:",D),Oe("Failed to remove absent date","error")}},rn=h=>{Re(D=>({...D,dayWiseHours:{...D.dayWiseHours,[h]:{...D.dayWiseHours[h],enabled:!D.dayWiseHours[h].enabled}}}))},qa=(h,D,K)=>{Re(me=>({...me,dayWiseHours:{...me.dayWiseHours,[h]:{...me.dayWiseHours[h],[D]:K}}}))},ya=h=>{ke(h),on({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),ge(!0)},Hi=()=>{on(h=>({...h,medications:[...h.medications,{name:"",dosage:"",frequency:"",duration:""}]}))},Wi=h=>{on(D=>({...D,medications:D.medications.filter((K,me)=>me!==h)}))},te=(h,D,K)=>{on(me=>({...me,medications:me.medications.map((oe,ve)=>ve===h?{...oe,[D]:K}:oe)}))},v=async h=>{h.preventDefault();try{const D={appointmentId:ae.id,patientId:ae.patientId||"",patientName:ae.patientName,patientPhone:ae.patientPhone,doctorId:y,doctorName:S.displayName,hospitalId:S.hospitalId||"",diagnosis:Rt.diagnosis,medications:Rt.medications.filter(oe=>oe.name),tests:Rt.tests,instructions:Rt.instructions,followUpDate:Rt.followUpDate,prescribedDate:new Date().toISOString(),prescribedBy:y},K=await ga(Ce(F,"prescriptions"),D),me=Me(F,"appointments",ae.id);await Ft(me,{status:"completed",prescriptionId:K.id,completedAt:new Date().toISOString()}),Oe("Prescription saved successfully!"),ge(!1),Ve()}catch(D){console.error("Error saving prescription:",D),Oe("Failed to save prescription","error")}},le=async()=>{if(!fe.trim()){Ht([]);return}Vn(!0);try{console.log("Searching for patients:",fe);const h=await ax(fe);console.log("Search results:",h);const D=h.map(K=>({id:K.id,patientId:K.id,phone:K.phone,name:K.name,dob:K.dob,age:K.age,gender:K.gender}));Ht(D),D.length===0&&Oe("No patients found","error")}catch(h){console.error("Error searching patients:",h),Oe("Failed to search patients","error")}finally{Vn(!1)}},We=h=>{const D=he.find(K=>K.patientName===h.patient&&(K.time===h.time||K.appointmentTime===h.time)&&(K.date===ft.date||K.appointmentDate===ft.date)||K.id===h.appointmentId);D?(ke(D),k(!0)):(ke({id:h.appointmentId,patientName:h.patient,patientPhone:h.phone,patientId:h.patientId,date:ft.date,time:h.time,status:h.status||"confirmed"}),k(!0))},Lt=()=>{ae&&ae.patientId&&(xe(ae.patientId),yn(!0),k(!1))},Zt=()=>{ae&&(k(!1),ya(ae))},qt=async h=>{try{const D=zt(J,h),K=Ce(F,"appointments"),me=ze(K,ce("doctorId","==",y),ce("date","==",h)),ve=(await Pe(me)).docs.map(Ie=>{const Qe=Ie.data();return{time:Qe.time||Qe.appointmentTime,patient:Qe.patientName,phone:Qe.patientPhone,patientId:Qe.patientId,appointmentId:Ie.id,status:Qe.status}});pn({date:h,slots:D,bookedSlots:ve}),Ye(!0)}catch(D){console.error("Error viewing slots:",D),Oe("Failed to load slots","error")}},zt=(h,D)=>{if(!h||!D)return[];const{workingHours:K,slotDuration:me,workingDays:oe,unavailableDates:ve,blockedTimeSlots:Ie}=h;if(ve&&ve.some(Rn=>Rn.date===D))return[];const Qe=new Date(D).getDay(),pt=Qe===0?7:Qe;if(!oe||!oe.includes(pt))return[];const ot=[],[Le,rt]=(K?.start||"09:00").split(":").map(Number),[ut,mn]=(K?.end||"17:00").split(":").map(Number);let Jt=Le*60+rt;const Dn=ut*60+mn,kn=me||30;for(;Jt<Dn;){const Rn=Math.floor(Jt/60),Yn=Jt%60,Fn=`${String(Rn).padStart(2,"0")}:${String(Yn).padStart(2,"0")}`;Ie&&Ie.some(En=>En.date===D&&(En.time===Fn||En.startTime&&En.endTime&&Fn>=En.startTime&&Fn<En.endTime))||ot.push(Fn),Jt+=kn}return ot},V={container:{maxWidth:"min(1200px, 100%)",width:"100%",margin:"0 auto",padding:"1rem",fontFamily:"var(--font-sans)",color:"var(--text-main)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem",background:"var(--bg-card)",padding:"1.5rem",borderRadius:"16px",boxShadow:"var(--shadow-md)",border:"1px solid var(--border-subtle)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px",border:"1px solid var(--border-subtle)",cursor:"default"},tabContainer:{display:"flex",gap:"0.5rem",marginBottom:"2rem",overflowX:"auto",paddingBottom:"0.5rem",msOverflowStyle:"none",scrollbarWidth:"none",borderBottom:"1px solid var(--border-subtle)",padding:"0.5rem 0"},tab:{padding:"0.75rem 1.25rem",borderRadius:"8px",border:"1px solid transparent",background:"transparent",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},activeTab:{background:"var(--primary-light)",color:"white",boxShadow:"var(--shadow-sm)",fontWeight:"600"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"2rem",boxShadow:"var(--shadow-md)",marginBottom:"1.5rem",width:"100%",boxSizing:"border-box",border:"1px solid var(--border-subtle)"},appointmentCard:{background:"white",borderRadius:"12px",padding:"1rem",boxShadow:"var(--shadow-sm)",border:"1px solid #e6e9ef"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-sm)"},dangerButton:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fecaca"},secondaryButton:{background:"white",color:"var(--text-main)",border:"1px solid var(--border-subtle)"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem",backdropFilter:"blur(4px)"},modalContent:{background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",border:"1px solid var(--border-subtle)",animation:"slideUp 0.3s ease-out"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-subtle)",fontSize:"1rem",marginBottom:"1rem",transition:"all 0.2s ease",background:"var(--bg-main)",color:"var(--text-main)"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-lg)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease",color:"white",display:"flex",alignItems:"center",gap:"0.75rem"}};return de||!y||!S?t.jsx("div",{style:V.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:V.container,children:[bn&&t.jsx("div",{style:{...V.notification,background:bn.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:bn.message}),!c&&t.jsxs("div",{style:V.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" Dr. ",S?.displayName||"Doctor Dashboard"]}),t.jsxs("p",{style:{margin:0,color:"#666"},children:[S?.specialization||"Medical Professional"," "]})]}),t.jsxs("div",{style:V.statsGrid,children:[t.jsxs("div",{style:V.statCard,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:28})}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:pe.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...V.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:pe.completedAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Completed"})]}),t.jsxs("div",{style:{...V.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:pe.patientCount||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Patients"})]})]}),t.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:t.jsx("button",{style:{...V.button,background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",color:"white"},onClick:()=>bt(!0),children:" Update Profile"})}),t.jsx("div",{style:V.tabContainer,children:U?t.jsx("select",{value:j,onChange:h=>A(h.target.value),style:{padding:"0.5rem",borderRadius:"8px",fontSize:"1rem"},"aria-label":"Select dashboard tab",children:["overview","appointments","availability","patients","usage","billing"].filter(h=>!((h==="usage"||h==="billing")&&u)).map(h=>t.jsx("option",{value:h,children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}):["overview","appointments","availability","patients","usage","billing"].filter(h=>!((h==="usage"||h==="billing")&&u)).map(h=>t.jsx("button",{style:{...V.tab,...j===h?V.activeTab:{}},onClick:()=>A(h),children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}),j==="appointments"&&t.jsxs("div",{style:V.card,children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:22}),"Your Appointments"]}),he.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:he.map(h=>t.jsx("div",{style:{...V.appointmentCard,borderLeft:`4px solid ${h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsxs("strong",{style:{fontSize:"1.1rem",color:"#333"},children:[" ",h.patientName]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:h.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Date:"})," ",h.date||h.appointmentDate]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",h.time||h.appointmentTime]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",h.patientPhone]}),h.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",h.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.status!=="completed"&&t.jsx("button",{onClick:()=>ya(h),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),t.jsx("button",{onClick:()=>{console.log("=== View Record Clicked ==="),console.log("Full appointment data:",h),console.log("Available fields:",Object.keys(h));const D=h.patientId||h.userId||h.patientUid||h.patient_id||h.user_id||h.patientPhone||h.userPhone||h.patientEmail||h.email||h.patientName;if(console.log("Extracted Patient ID:",D),console.log("Doctor ID:",y),console.log("Doctor Name:",S?.displayName||S?.name),!D){const K=`Patient ID not found in appointment data.

Available fields: ${Object.keys(h).join(", ")}

Please check the console for full appointment data.`;alert(K),console.error("Cannot find patient ID. Appointment structure:",h);return}console.log(" Opening modal with patient ID:",D),xe(D),Y(!0)},style:{padding:"0.6rem 1.2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Patient Records"})]})]})},h.id))})]}),j==="availability"&&t.jsxs("div",{style:V.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Manage Availability"}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{Re({slotDuration:J.slotDuration||30,dayWiseHours:{1:{enabled:J.workingDays?.includes(1),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},2:{enabled:J.workingDays?.includes(2),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},3:{enabled:J.workingDays?.includes(3),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},4:{enabled:J.workingDays?.includes(4),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},5:{enabled:J.workingDays?.includes(5),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},6:{enabled:J.workingDays?.includes(6),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"},7:{enabled:J.workingDays?.includes(7),start:J.workingHours?.start||"09:00",end:J.workingHours?.end||"17:00"}}}),we(!0)},style:{...V.button,...V.primaryButton},children:" Configure Slots & Hours"}),t.jsx("button",{style:{...V.button,...V.secondaryButton},onClick:()=>q(!0),children:" Block Time"}),t.jsx("button",{style:{...V.button,background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white"},onClick:()=>Nn(!0),children:" Mark Leave/Absent"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsxs("h3",{style:{color:"#333",marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:16}),"View Slots for a Date"]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("input",{type:"date",value:kt,onChange:h=>ln(h.target.value),style:{...V.input,marginBottom:0,flex:"1",minWidth:"0"}}),t.jsx("button",{onClick:()=>qt(kt),style:{...V.button,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:" View Slots"})]})]}),ft&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{children:[" Slots for ",ft.date]}),t.jsx("button",{onClick:()=>pn(null),style:{padding:"0.5rem 1rem",background:"#e0e0e0",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"Close"})]}),ft.slots.length===0?t.jsx("div",{style:{padding:"2rem",background:J.unavailableDates?.some(h=>h.date===ft.date)?"#fff3cd":"#fee",borderRadius:"10px",textAlign:"center",color:J.unavailableDates?.some(h=>h.date===ft.date)?"#856404":"#c33",border:J.unavailableDates?.some(h=>h.date===ft.date)?"2px solid #ffc107":"2px solid #f5c6cb"},children:J.unavailableDates?.some(h=>h.date===ft.date)?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"Doctor is on Leave"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:J.unavailableDates.find(h=>h.date===ft.date)?.reason||"No appointments can be booked on this date"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"No Working Slots Available"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:"This is not a working day"})]})}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem"},children:ft.slots.map(h=>{const D=ft.bookedSlots.find(K=>K.time===h);return t.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",border:D?"2px solid #38ef7d":"2px solid #e0e0e0",background:D?"linear-gradient(135deg, rgba(17, 153, 142, 0.1) 0%, rgba(56, 239, 125, 0.1) 100%)":"white",textAlign:"center",cursor:D?"pointer":"default",transition:"all 0.3s ease",position:"relative"},onClick:()=>D&&We(D),onMouseEnter:K=>{D&&(K.currentTarget.style.transform="translateY(-4px)",K.currentTarget.style.boxShadow="0 4px 12px rgba(17, 153, 142, 0.3)")},onMouseLeave:K=>{D&&(K.currentTarget.style.transform="translateY(0)",K.currentTarget.style.boxShadow="none")},children:[t.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:D?"#11998e":"#333",marginBottom:"0.5rem"},children:[" ",h]}),D?t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#38ef7d",color:"white",borderRadius:"5px",marginBottom:"0.5rem",fontWeight:"600"},children:"BOOKED"}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",color:"#333"},children:[" ",D.patient]}),t.jsxs("div",{style:{fontSize:"0.8rem"},children:[" ",D.phone]})]}),t.jsx("div",{style:{fontSize:"0.7rem",color:"#11998e",fontWeight:"600",marginTop:"0.5rem",padding:"0.3rem",background:"rgba(17, 153, 142, 0.1)",borderRadius:"4px"},children:"Click for records"})]}):t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#e0e0e0",color:"#666",borderRadius:"5px",fontWeight:"600"},children:"AVAILABLE"})]},h)})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{style:{color:"#333"},children:" Current Configuration"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Slot Duration"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"700"},children:[J.slotDuration||30," min"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Working Hours"}),t.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"700"},children:[J.workingHours?.start||"09:00"," - ",J.workingHours?.end||"17:00"]})]})]})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333"},children:[t.jsx(an,{size:16})," Working Days"]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"1rem"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((h,D)=>t.jsx("div",{style:{padding:"0.75rem 1.5rem",borderRadius:"10px",background:J.workingDays?.includes(D+1)?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"#e0e0e0",color:J.workingDays?.includes(D+1)?"white":"#666",fontWeight:"600",fontSize:"1rem"},children:h},h))})]}),J.blockedTimeSlots&&J.blockedTimeSlots.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Blocked Time Slots"}),J.blockedTimeSlots.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date})," | ",h.startTime," - ",h.endTime,t.jsx("br",{}),t.jsx("small",{children:h.reason})]}),t.jsx("button",{style:{...V.button,...V.dangerButton},onClick:()=>qi(h.id),children:"Unblock"})]},h.id))]}),J.unavailableDates&&J.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Absent Dates"}),J.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#ffe5e5",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffcccc"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("small",{children:h.reason})]})]}),t.jsx("button",{style:{...V.button,...V.dangerButton},onClick:()=>Ni(h.id),children:"Remove"})]},h.id))]})]}),j==="patients"&&t.jsxs("div",{style:V.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" My Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and manage your patient records and prescriptions"}),t.jsx("div",{style:{marginBottom:"2rem"},children:t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by name, phone, or patient ID...",value:fe,onChange:h=>xn(h.target.value),onKeyPress:h=>h.key==="Enter"&&le(),style:{...V.input,flex:1}}),t.jsx("button",{onClick:le,disabled:Qt,style:{...V.button,minWidth:"0",background:Qt?"#ccc":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:Qt?" Searching...":" Search"})]})}),Ei.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",marginBottom:"1rem"},children:["Search Results (",Ei.length,")"]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:Ei.map(h=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #667eea"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},children:[" ",h.name]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem"},children:[" ",h.phone,h.email&&t.jsxs(t.Fragment,{children:[" |  ",h.email]})]})]}),t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Search ==="),console.log("Patient:",h),console.log("Patient ID:",h.id),!h.id){alert("Patient ID not found");return}xe(h.id),Y(!0),console.log("Modal state updated")},style:V.button,children:" View Records"})]})},h.id))}),t.jsx("button",{onClick:()=>Ht([]),style:{...V.button,marginTop:"1rem",background:"#e0e0e0",color:"#333"},children:"Clear Search Results"})]}),t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"All My Patients"}),(()=>{console.log("Patients Tab - Total appointments:",he.length),console.log("Patients Tab - Appointments data:",he);const h={};he.forEach(oe=>{const ve=oe.patientId||oe.userId||oe.patientUid,Ie=oe.patientPhone||oe.userPhone,Qe=ve||Ie,pt=oe.patientName||oe.userName||"Unknown Patient";if(console.log("Processing appointment:",{id:oe.id,actualUserId:ve,patientKey:Qe,patientName:pt,patientPhone:Ie}),Qe&&!h[Qe]&&(h[Qe]={id:Qe,userId:ve,name:pt,phone:Ie||"N/A",appointments:[],lastVisit:oe.date,completedVisits:0,upcomingVisits:0}),Qe){h[Qe].appointments.push(oe),oe.status==="completed"&&h[Qe].completedVisits++;const ot=new Date().toISOString().split("T")[0];oe.date>=ot&&oe.status!=="completed"&&oe.status!=="cancelled"&&h[Qe].upcomingVisits++,oe.date>h[Qe].lastVisit&&(h[Qe].lastVisit=oe.date)}});const D=Object.values(h);console.log("Patients Tab - Unique patients found:",D.length),console.log("Patients Tab - Patients list:",D);const me=D.sort((oe,ve)=>new Date(ve.lastVisit)-new Date(oe.lastVisit)).slice(0,5);return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#11998e"},children:["Total: ",D.length," ",D.length===1?"Patient":"Patients"]}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.25rem"},children:["Showing ",Math.min(5,D.length)," most recent ",D.length>5?"(use search to find others)":""]})]}),me.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),he.length>0?t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#e74c3c"},children:t.jsxs("strong",{children:["Found ",he.length," appointments but no patient data!"]})}),t.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"1rem"},children:"This means appointments don't have patient information (patientId, patientName, patientPhone)."}),t.jsx("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",textAlign:"left",maxWidth:"min(600px, 100%)",margin:"0 auto"},children:t.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"#856404"},children:[t.jsx("strong",{children:"Check browser console for details:"}),t.jsx("br",{}),"- Open Developer Tools (F12)",t.jsx("br",{}),'- Look for "Patients Tab" logs',t.jsx("br",{}),"- Check what fields are in your appointments"]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"No patients yet"}),t.jsx("p",{style:{fontSize:"0.9rem"},children:"Patients will appear here after they book appointments with you"})]})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:me.map(oe=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:t.jsxs("strong",{style:{fontSize:"1.2rem",color:"#333"},children:[" ",oe.name]})}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.8"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",oe.phone]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Last Visit:"})," ",oe.lastVisit]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Completed Visits:"})," ",oe.completedVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Upcoming Visits:"})," ",oe.upcomingVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Total Appointments:"})," ",oe.appointments.length]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Patient List ==="),console.log("Patient:",oe),console.log("Patient ID:",oe.id),!oe.id){alert("Patient ID not found");return}xe(oe.id),Y(!0),console.log("Modal state updated")},style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Records"}),oe.upcomingVisits>0&&oe.appointments.filter(ve=>ve.date>=new Date().toISOString().split("T")[0]&&ve.status!=="completed").slice(0,1).map(ve=>t.jsx("button",{onClick:()=>ya(ve),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"},ve.id))]})]})},oe.id))})]})})()]}),j==="payments"&&t.jsxs("div",{style:V.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Payments & Earnings"}),t.jsx("button",{onClick:Wn,style:{...V.button,...V.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),z?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:z.pricingModel==="free"?"#e8f5e9":z.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:z.pricingModel==="free"?"#2e7d32":z.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[z.pricingModel==="free"&&" Free + Ads",z.pricingModel==="reduced"&&` Reduced Rate (${z.discountPercentage}% off)`,z.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[z.pricingModel==="free"&&"You use the app completely FREE! Ad revenue funds your access.",z.pricingModel==="reduced"&&`You get ${z.discountPercentage}% discount on all fees. Ads help reduce your costs.`,z.pricingModel==="full"&&"Premium tier with no ads. You pay standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Cost (",ue?"This Month":"Total",")"]}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[z.symbol,z.displayCost?.toFixed(2)||"0.00"]}),ue&&t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[z.monthlyAppointments||0," appts (this month)"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Pending Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[z.symbol,(Ze.pendingAmount||z.pending||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Amount due"}),t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:Wn,style:{...V.button,...V.primaryButton},children:"Pay Now"})})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[z.symbol,z.paid.toFixed(2)]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown (App Usage)"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",z.appointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[z.symbol,z.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",z.prescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[z.symbol,z.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[z.symbol,z.rates.appointmentCost]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[z.symbol,z.rates.prescriptionCost]})]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),z.countryInstructions?.[z.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",z.country," users:"]})," ",z.countryInstructions[z.country]]}),z.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:z.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:z.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",z.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:z.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",z.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",z.paymentDetails.wise.swift]})]})]}),z.country==="India"&&z.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:z.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:z.paymentDetails.upi.upiId})]})})]}),z.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:z.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:z.paymentDetails.paypal.email})]})})]}),z.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:z.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",z.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",z.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:z.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",z.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:z.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",z.paymentDetails.bankTransfer.swift]})]})]}),!z.paymentDetails?.wise?.enabled&&!z.paymentDetails?.upi?.enabled&&!z.paymentDetails?.paypal?.enabled&&!z.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Doctor ID (",t.jsx("strong",{children:f?.uid}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:Ne||di,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>ie(!0)})})}),G&&t.jsx("div",{onClick:()=>ie(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:Ne||di,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})}),z.lastPaymentDate&&t.jsxs("div",{style:{background:"#e8f5e9",borderRadius:"10px",padding:"1.5rem",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32"},children:" Last Payment Made"}),t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[z.symbol,z.lastPaymentAmount?.toFixed(2)||"0.00"]}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem",marginTop:"0.25rem"},children:new Date(z.lastPaymentDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Need help with payments?"})," Contact the admin for payment processing and bank detail updates."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment data..."})]})]}),j==="usage"&&t.jsxs("div",{style:V.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Usage Statistics"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#666"},children:"View Month:"}),t.jsxs("select",{value:ue||"all",onChange:h=>P(h.target.value==="all"?"":h.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"2px solid #667eea",fontSize:"1rem",fontWeight:"600",color:"#667eea",cursor:"pointer",background:"white"},children:[t.jsx("option",{value:"all",children:" All Time"}),z?.appointmentsByMonth&&Object.keys(z.appointmentsByMonth).sort().reverse().map(h=>t.jsx("option",{value:h,children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})},h))]})]})]}),de?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]}):z?t.jsxs(t.Fragment,{children:[ue&&ue!=="all"&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsxs("strong",{style:{color:"#1976d2"},children:[t.jsx(an,{size:16})," Viewing: "]}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(ue+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's usage)"})]}),t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:z.pricingModel==="free"?"#4caf50":z.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[z.pricingModel==="free"&&" FREE PLAN",z.pricingModel==="reduced"&&` DISCOUNTED (${z.discountPercentage}% OFF)`,z.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"10px",border:"2px solid #4caf50"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:36})}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[ue&&ue!=="all"?"Month":"Total"," Appointments"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#2e7d32"},children:ue&&ue!=="all"?z.appointmentsByMonth?.[ue]||0:z.totalAppointments||0})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e3f2fd",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[ue&&ue!=="all"?"Month":"Total"," Prescriptions"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1565c0"},children:ue&&ue!=="all"?z.prescriptionsByMonth?.[ue]||0:z.totalPrescriptions||0})]})]}),z.appointmentsByMonth&&Object.keys(z.appointmentsByMonth).length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Object.entries(z.appointmentsByMonth).sort(([h],[D])=>D.localeCompare(h)).map(([h,D])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",borderBottom:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{fontWeight:"500"},children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[D," appointments, ",z.prescriptionsByMonth?.[h]||0," prescriptions"]})]},h))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Note:"})," This is a read-only view of your cumulative usage statistics. For billing and payments, please check the Billing tab."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No usage data available yet."})]})]}),j==="billing"&&t.jsxs("div",{style:V.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Payments"}),t.jsx("button",{onClick:Wn,style:{...V.button,...V.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),de?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]}):Ze?t.jsxs(t.Fragment,{children:[typeof window<"u"&&window.location.search.includes("debugBilling=1")&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#fffbe6",border:"1px dashed #f59e0b"},children:[t.jsx("strong",{children:"Debug billing state:"}),t.jsx("pre",{style:{maxHeight:"200px",overflow:"auto",fontSize:"12px"},children:JSON.stringify({paymentInfo:z,cumulativeData:Ze},null,2)})]}),(()=>{const h=ue&&ue!=="all";let D=Ze;const K=Math.max(0,(Ze.totalCost||0)-(Ze.totalPaid||0));if(h){const me=z?.appointmentsByMonth?.[ue]||0,oe=z?.prescriptionsByMonth?.[ue]||0,ve=me*(z?.rates?.appointmentCost||0),Ie=oe*(z?.rates?.prescriptionCost||0),Qe=ve+Ie,pt=z?.monthlyPaymentHistory?.length?z.monthlyPaymentHistory.filter(rt=>rt.status==="completed"):Ze.paymentHistory?.filter(rt=>rt.createdAt&&rt.createdAt.startsWith(ue)&&rt.status==="completed")||[],ot=z?.monthlyPaid!==void 0?z.monthlyPaid:pt.reduce((rt,ut)=>rt+(ut.amount||0),0),Le=Math.max(0,Qe-ot);D={totalAppointments:me,totalPrescriptions:oe,appointmentCost:ve,prescriptionCost:Ie,totalCost:Qe,totalPaid:ot,pendingAmount:Le,paymentHistory:z?.monthlyPaymentHistory?.length?z.monthlyPaymentHistory:pt}}return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:z?.pricingModel==="free"?"#4caf50":z?.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[z?.pricingModel==="free"&&" FREE PLAN",z?.pricingModel==="reduced"&&` DISCOUNTED (${z.discountPercentage}% OFF)`,z?.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Total Cost"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[z?.symbol,(Ze.totalCost||0).toFixed?Ze.totalCost.toFixed(2):(Ze.totalCost||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All time usage charges"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(56, 239, 125, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Paid So Far"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[z?.symbol,(Ze.totalPaid||0).toFixed?Ze.totalPaid.toFixed(2):(Ze.totalPaid||0).toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[Ze.paymentHistory?.length||0," payment(s) made"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:(K||0)>0?"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)":"linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)",borderRadius:"12px",color:"white",boxShadow:(K||0)>0?"0 4px 12px rgba(245, 87, 108, 0.3)":"0 4px 12px rgba(76, 175, 80, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:(K||0)>0?" Pending":" All Paid"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[z?.symbol,(K||0).toFixed?K.toFixed(2):(K||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:K>0?"Amount due":"No pending balance"}),(K||0)>0&&t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:Wn,style:{...V.button,...V.primaryButton},children:"Pay Now"})})]})]}),h&&t.jsxs("div",{style:{marginTop:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsxs("strong",{style:{color:"#1976d2"},children:[t.jsx(an,{size:16})," Viewing: "]}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(ue+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's data)"})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",marginRight:"1rem"},children:"Select Month:"}),t.jsx("input",{type:"month",value:ue,onChange:me=>P(me.target.value),style:V.input})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("h3",{style:{marginTop:0,color:"#333"},children:[" Cost Breakdown ",ue?`(${new Date(ue+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})})`:"(All Time)"]}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[t.jsx(an,{size:14})," Appointments (",D.totalAppointments,"  ",z?.symbol,z?.rates?.appointmentCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[z?.symbol,(D.appointmentCost||0).toFixed?D.appointmentCost.toFixed(2):(D.appointmentCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[" Prescriptions (",D.totalPrescriptions,"  ",z?.symbol,z?.rates?.prescriptionCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[z?.symbol,(D.prescriptionCost||0).toFixed?D.prescriptionCost.toFixed(2):(D.prescriptionCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#667eea",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Cost"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[z?.symbol,(D.totalCost||0).toFixed?D.totalCost.toFixed(2):(D.totalCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#4caf50",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Paid"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[z?.symbol,(D.totalPaid||0).toFixed?D.totalPaid.toFixed(2):(D.totalPaid||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:(D.pendingAmount||0)>0?"#ff5252":"#38ef7d",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Pending Balance"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[z?.symbol,(D.pendingAmount||0).toFixed?D.pendingAmount.toFixed(2):(D.pendingAmount||0).toFixed(2)]})]})]})]}),ue&&z?.appointmentsByMonth&&z.appointmentsByMonth[ue]!==void 0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white",borderRadius:"8px",overflow:"hidden"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#667eea",color:"white"},children:[t.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Month"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Appointments"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Prescriptions"}),t.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Total Cost"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Status"})]})}),t.jsx("tbody",{children:Object.keys(z.appointmentsByMonth).sort().reverse().map(me=>{const oe=z.appointmentsByMonth[me]||0,ve=z.prescriptionsByMonth?.[me]||0,Ie=oe*(z.rates?.appointmentCost||0)+ve*(z.rates?.prescriptionCost||0),ot=(Ze.paymentHistory?.filter(Le=>Le.createdAt&&Le.createdAt.startsWith(me)&&Le.status==="completed")||[]).reduce((Le,rt)=>Le+(rt.amount||0),0)>=Ie;return t.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[t.jsx("td",{style:{padding:"1rem",fontWeight:"600"},children:new Date(me+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:oe}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:ve}),t.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:[z.symbol,Ie.toFixed(2)]}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600",background:ot?"#e8f5e9":"#fff3e0",color:ot?"#2e7d32":"#e65100"},children:ot?" Paid":" Pending"})})]},me)})})]})})]}),Ze.paymentHistory&&Ze.paymentHistory.length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Payment History"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Ze.paymentHistory.map(me=>t.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",background:"white",borderRadius:"8px",borderLeft:`4px solid ${me.status==="completed"?"#4caf50":me.status==="pending"?"#ff9800":"#f44336"}`},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[me.currency," ",me.amount?.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[t.jsx(an,{size:14})," ",new Date(me.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.jsxs("div",{children:[" ",me.paymentMethod]}),me.description&&t.jsxs("div",{children:[" ",me.description]})]})]}),t.jsx("div",{children:t.jsxs("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:me.status==="completed"?"#4caf50":me.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[me.status==="completed"&&" Verified",me.status==="pending"&&" Pending Verification",me.status==="failed"&&" Rejected"]})})]})},me.id))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Payment Process:"})," Submit your payment details below. Admin will verify and approve your payment. Once verified, your pending balance will be updated."]})})]})})()]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No billing data available yet."})]})]}),j==="overview"&&t.jsxs("div",{style:V.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#11998e"},children:"Today's Schedule"}),t.jsxs("p",{children:["Appointments: ",t.jsx("strong",{children:pe.todayAppointments||0})]}),t.jsxs("p",{children:["Status: ",t.jsx("strong",{style:{color:"#38ef7d"},children:"Active"})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:"Performance"}),t.jsxs("p",{children:["Total Appointments: ",t.jsx("strong",{children:pe.totalAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[pe.totalAppointments?Math.round(pe.completedAppointments/pe.totalAppointments*100):0,"%"]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#f5576c"},children:"Patient Care"}),t.jsxs("p",{children:["Total Patients: ",t.jsx("strong",{children:pe.patientCount||0})]}),t.jsxs("p",{children:["Rating: ",t.jsx("strong",{children:" 5.0"})]})]})]})]}),at&&t.jsx("div",{style:V.modal,onClick:()=>bt(!1),children:t.jsxs("div",{style:V.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Update Profile"}),t.jsxs("form",{onSubmit:Kn,children:[t.jsx("input",{type:"text",placeholder:"Full Name",value:Ut.displayName,onChange:h=>sn({...Ut,displayName:h.target.value}),style:V.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization",value:Ut.specialization,onChange:h=>sn({...Ut,specialization:h.target.value}),style:V.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee",value:Ut.consultationFee,onChange:h=>sn({...Ut,consultationFee:h.target.value}),style:V.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number",value:Ut.phone,onChange:h=>sn({...Ut,phone:h.target.value}),style:V.input,required:!0}),t.jsx("div",{style:{margin:"1.5rem 0 1rem 0",paddingTop:"1rem",borderTop:"2px solid #e0e0e0"},children:t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#667eea",fontSize:"1.1rem"},children:" Clinic/Practice Address"})}),t.jsx("input",{type:"text",placeholder:"Country",value:Ut.country,onChange:h=>sn({...Ut,country:h.target.value}),style:V.input}),t.jsx("input",{type:"text",placeholder:"State/Province",value:Ut.state,onChange:h=>sn({...Ut,state:h.target.value}),style:V.input}),t.jsx("input",{type:"text",placeholder:"City",value:Ut.city,onChange:h=>sn({...Ut,city:h.target.value}),style:V.input}),t.jsx("textarea",{placeholder:"Full Address (Street, Building, etc.)",value:Ut.address,onChange:h=>sn({...Ut,address:h.target.value}),style:{...V.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...V.button,...V.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>bt(!1),style:{...V.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),qe&&t.jsx("div",{style:V.modal,onClick:()=>q(!1),children:t.jsxs("div",{style:V.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Block Time Slot"}),t.jsxs("form",{onSubmit:Mi,children:[t.jsx("input",{type:"date",value:M.date,onChange:h=>ee({...M,date:h.target.value}),style:V.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:M.startTime,onChange:h=>ee({...M,startTime:h.target.value}),style:{...V.input,marginBottom:0},required:!0}),t.jsx("input",{type:"time",value:M.endTime,onChange:h=>ee({...M,endTime:h.target.value}),style:{...V.input,marginBottom:0},required:!0})]}),t.jsx("input",{type:"text",placeholder:"Reason (e.g., Lunch Break, Meeting)",value:M.reason,onChange:h=>ee({...M,reason:h.target.value}),style:V.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...V.button,...V.dangerButton,flex:1},children:"Block Time"}),t.jsx("button",{type:"button",onClick:()=>q(!1),style:{...V.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Se&&t.jsx("div",{style:V.modal,onClick:()=>we(!1),children:t.jsxs("div",{style:{...V.modalContent,maxWidth:"min(800px, 100%)",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Configure Slots & Working Hours"}),t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Set your slot duration and configure working hours for each day of the week"}),t.jsxs("form",{onSubmit:Gi,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:be.slotDuration,onChange:h=>Re({...be,slotDuration:parseInt(h.target.value)}),style:V.input,required:!0,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",color:"#333"},children:"Working Days & Hours"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((h,D)=>{const K=D+1,me=be.dayWiseHours[K];return t.jsx("div",{style:{padding:"1rem",background:me.enabled?"#f0f9ff":"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:`2px solid ${me.enabled?"#11998e":"#e0e0e0"}`},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("div",{style:{flex:"0 0 120px"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:me.enabled,onChange:()=>rn(K),style:{width:"18px",height:"18px",cursor:"pointer"}}),t.jsx("span",{style:{fontWeight:"600",color:me.enabled?"#11998e":"#666"},children:h})]})}),me.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"Start Time"}),t.jsx("input",{type:"time",value:me.start,onChange:oe=>qa(K,"start",oe.target.value),style:{...V.input,marginBottom:0,padding:"0.5rem"},required:!0})]}),t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"End Time"}),t.jsx("input",{type:"time",value:me.end,onChange:oe=>qa(K,"end",oe.target.value),style:{...V.input,marginBottom:0,padding:"0.5rem"},required:!0})]})]})]})},K)})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...V.button,...V.primaryButton,flex:1},children:"Save Configuration"}),t.jsx("button",{type:"button",onClick:()=>we(!1),style:{...V.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ct&&t.jsx("div",{style:V.modal,onClick:()=>Nn(!1),children:t.jsxs("div",{style:V.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Mark Absent Date"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Mark specific dates when you won't be available for appointments"}),J.unavailableDates&&J.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("h4",{style:{color:"#333",marginBottom:"0.75rem"},children:"Current Absent Dates:"}),J.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"0.75rem",background:"#fff3cd",borderRadius:"8px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffc107"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:h.reason})]}),t.jsx("button",{type:"button",onClick:()=>Ni(h.id),style:{padding:"0.4rem 0.8rem",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]},h.id))]}),t.jsxs("form",{onSubmit:Zi,children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Select Date"}),t.jsx("input",{type:"date",value:dn.date,min:new Date().toISOString().split("T")[0],onChange:h=>Gn({...dn,date:h.target.value}),style:V.input,required:!0})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Reason (optional)"}),t.jsx("input",{type:"text",placeholder:"e.g., Vacation, Personal Day, Conference",value:dn.reason,onChange:h=>Gn({...dn,reason:h.target.value}),style:V.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...V.button,...V.dangerButton,flex:1},children:"Mark Absent"}),t.jsx("button",{type:"button",onClick:()=>Nn(!1),style:{...V.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),console.log("=== MODAL RENDER CHECK ===",{showPatientModal:lt,selectedPatient:se,effectiveDoctorId:y,doctorName:S?.displayName||S?.name}),lt&&se&&t.jsx(lx,{patientId:se,doctorId:y,doctorName:S?.displayName||S?.name,onClose:()=>{console.log("Closing PatientRecordModal"),Y(!1),xe(null),Ve()}}),Ae&&ae&&t.jsx("div",{style:V.modal,onClick:()=>ge(!1),children:t.jsxs("div",{style:{...V.modalContent,maxWidth:"min(700px, 100%)",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",ae.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",ae.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",ae.date||ae.appointmentDate," at ",ae.time||ae.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:v,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:Rt.diagnosis,onChange:h=>on({...Rt,diagnosis:h.target.value}),style:{...V.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:Hi,style:{padding:"0.4rem 0.8rem",background:"#11998e",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),Rt.medications.map((h,D)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:h.name,onChange:K=>te(D,"name",K.target.value),style:{...V.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:h.dosage,onChange:K=>te(D,"dosage",K.target.value),style:V.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:h.frequency,onChange:K=>te(D,"frequency",K.target.value),style:V.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:h.duration,onChange:K=>te(D,"duration",K.target.value),style:V.input}),Rt.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>Wi(D),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},D))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:Rt.tests,onChange:h=>on({...Rt,tests:h.target.value}),style:{...V.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:Rt.instructions,onChange:h=>on({...Rt,instructions:h.target.value}),style:{...V.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:Rt.followUpDate,onChange:h=>on({...Rt,followUpDate:h.target.value}),min:new Date().toISOString().split("T")[0],style:V.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...V.button,...V.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>ge(!1),style:{...V.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes pulse {
                    0%, 100% {
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.5;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #11998e;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `}),wt&&ae&&t.jsx("div",{style:V.modal,onClick:()=>k(!1),children:t.jsxs("div",{style:{...V.modalContent,maxWidth:"min(500px, 100%)"},onClick:h=>h.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:[" Patient: ",ae.patientName]}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",marginBottom:"1.5rem"},children:t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsxs("strong",{children:[t.jsx(an,{size:14})," Date:"]})," ",ae.date||ae.appointmentDate]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Time:"})," ",ae.time||ae.appointmentTime]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Phone:"})," ",ae.patientPhone]}),ae.reason&&t.jsxs("div",{children:[t.jsx("strong",{children:" Reason:"})," ",ae.reason]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"white",borderRadius:"8px",border:"2px solid #11998e"},children:[t.jsx("strong",{style:{color:"#11998e"},children:"Status:"})," ",ae.status||"pending"]})]})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("button",{onClick:Lt,style:{padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" View Complete Health Records"}),ae.status!=="completed"&&t.jsx("button",{onClick:Zt,style:{padding:"1rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Add Prescription"}),ae.status==="completed"&&t.jsx("div",{style:{padding:"1rem",background:"#38ef7d",color:"white",borderRadius:"10px",textAlign:"center",fontSize:"1rem",fontWeight:"600"},children:" Consultation Completed"}),t.jsx("button",{onClick:()=>k(!1),style:{padding:"1rem",background:"#e0e0e0",color:"#333",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Close"})]})]})}),De&&t.jsx("div",{style:V.modal,onClick:()=>je(!1),children:t.jsxs("div",{style:{...V.modalContent,maxWidth:"min(600px, 100%)"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Submit your payment details. Admin will verify and update your account balance."}),t.jsxs("form",{onSubmit:Je,children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff3e0",borderRadius:"10px",border:"2px solid #ff9800"},children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#e65100",marginBottom:"0.25rem"},children:"Total Pending Balance:"}),t.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#e65100"},children:[z?.symbol,Ze?.pendingAmount?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:["Payment Amount (",z?.symbol,")"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ze?.pendingAmount||0,value:jt,onChange:h=>Xt(h.target.value),style:V.input,placeholder:"Enter amount",required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>Xt((Ze?.pendingAmount*.5).toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#1976d2"},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>Xt(Ze?.pendingAmount?.toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#2e7d32"},children:"Full Amount"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Payment Method"}),t.jsxs("select",{value:C,onChange:h=>O(h.target.value),style:V.input,required:!0,children:[t.jsx("option",{value:"",children:"Select payment method"}),Kt(z?.country||"US").map(h=>t.jsx("option",{value:h,children:h},h))]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",fontSize:"0.9rem",color:"#1565c0"},children:[t.jsx("strong",{children:" Payment Process:"}),t.jsx("br",{}),"1. Submit payment details below",t.jsx("br",{}),"2. Admin will verify your payment",t.jsx("br",{}),"3. Your balance will be updated once verified"]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Ot,style:{...V.button,...V.primaryButton,flex:1,opacity:Ot?.6:1,cursor:Ot?"not-allowed":"pointer"},children:Ot?"Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>je(!1),disabled:Ot,style:{...V.button,background:"#e0e0e0",flex:1,opacity:Ot?.6:1,cursor:Ot?"not-allowed":"pointer"},children:"Cancel"})]})]})]})}),Nt&&se&&t.jsx(uh,{patientId:se,onClose:()=>{yn(!1),xe(null)},doctorId:y,doctorName:S?.displayName}),De&&t.jsx("div",{style:V.modal,onClick:()=>je(!1),children:t.jsxs("div",{style:V.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsxs("div",{style:{background:"#f0f7ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:"Total Pending:"}),t.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",marginLeft:"0.5rem",color:"#1976d2"},children:[z?.currency," ",Ze.pendingAmount.toFixed(2)]})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[Ze.totalAppointments," appointments + ",Ze.totalPrescriptions," prescriptions"]})]}),t.jsxs("form",{onSubmit:Je,children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:["Payment Amount (",z?.currency,") *"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ze.pendingAmount,placeholder:`Enter amount (max: ${Ze.pendingAmount.toFixed(2)})`,value:jt,onChange:h=>Xt(h.target.value),style:V.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("button",{type:"button",onClick:()=>Xt((Ze.pendingAmount/2).toFixed(2)),style:{padding:"0.5rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>Xt(Ze.pendingAmount.toFixed(2)),style:{padding:"0.5rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"Pay Full"})]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method *"}),t.jsxs("select",{value:C,onChange:h=>O(h.target.value),style:{...V.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select payment method..."}),Kt(z?.country||"US").map(h=>t.jsx("option",{value:h,children:h},h))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"}),' After submitting, your payment will be marked as "pending" and will be verified by the admin. Once verified, it will be marked as "completed" and reflected in your balance.']}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Ot,style:{...V.button,...V.primaryButton,flex:1,opacity:Ot?.6:1,cursor:Ot?"not-allowed":"pointer"},children:Ot?"Processing...":"Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>je(!1),style:{...V.button,background:"#ccc",color:"#333",flex:1},children:"Cancel"})]})]})]})})]})}const ox=()=>{const{currentUser:r,userProfile:s,refresh:u}=_a(),[c,f]=b.useState("overview"),[g,x]=b.useState([]),[y,S]=b.useState([]),[j,A]=b.useState({}),[U,R]=b.useState(!0),[he,I]=b.useState(null),[J,W]=b.useState(!1),[pe,E]=b.useState(null),[de,re]=b.useState(""),[z,Xe]=b.useState([]),[ct,X]=b.useState(!1),[ue,P]=b.useState(null),[tt,ye]=b.useState(!1),[at,bt]=b.useState(!1),[qe,q]=b.useState("");b.useEffect(()=>{const v=new Date,le=v.getFullYear(),We=String(v.getMonth()+1).padStart(2,"0");q(`${le}-${We}`)},[]);const[se,xe]=b.useState({patientId:"",fromDoctorId:"",toDoctorId:""}),[lt,Y]=b.useState(!1),[Ae,ge]=b.useState(!1),[ae,ke]=b.useState(!1),[nt,Ye]=b.useState(!1),[ft,pn]=b.useState(!1),[kt,ln]=b.useState(null),[Nt,yn]=b.useState({displayName:"",email:"",specialization:"",consultationFee:"",phone:""}),[wt,k]=b.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[De,je]=b.useState(null),[Ge,Fe]=b.useState({}),[An,qn]=b.useState(null),[fe,xn]=b.useState(null),[Ei,Ht]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:2e3},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:20}}}),[Qt,Vn]=b.useState([]),[vt,Qn]=b.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[Ut,sn]=b.useState(""),[M,ee]=b.useState(!1),[Se,we]=b.useState(!1),[be,Re]=b.useState(""),[Ct,Nn]=b.useState(!1),[dn,Gn]=b.useState(!1),[Rt,on]=b.useState(null),bn=v=>{try{const le=sessionStorage.getItem(v);if(le)return JSON.parse(le)}catch(le){console.warn("Cache read error",le)}return null},Bn=(v,le)=>{try{sessionStorage.setItem(v,JSON.stringify(le))}catch(We){console.warn("Cache write error",We)}};b.useEffect(()=>{const v=new Image;v.src=di,v.onload=()=>{try{const le=document.createElement("canvas");le.width=v.width,le.height=v.height;const We=le.getContext("2d");We.drawImage(v,0,0);const Zt=We.getImageData(0,0,le.width,le.height).data;let qt=le.width,zt=le.height,V=0,h=0;const D=250;for(let pt=0;pt<le.height;pt++)for(let ot=0;ot<le.width;ot++){const Le=(pt*le.width+ot)*4,rt=Zt[Le],ut=Zt[Le+1],mn=Zt[Le+2];Zt[Le+3]>10&&!(rt>D&&ut>D&&mn>D)&&(ot<qt&&(qt=ot),pt<zt&&(zt=pt),ot>V&&(V=ot),pt>h&&(h=pt))}if(qt>V||zt>h){on(di);return}const K=Math.max(8,Math.floor(Math.min(le.width,le.height)*.02));qt=Math.max(0,qt-K),zt=Math.max(0,zt-K),V=Math.min(le.width,V+K),h=Math.min(le.height,h+K);const me=V-qt+1,oe=h-zt+1,ve=document.createElement("canvas");ve.width=me,ve.height=oe,ve.getContext("2d").drawImage(le,qt,zt,me,oe,0,0,me,oe);const Qe=ve.toDataURL("image/png");on(Qe)}catch(le){console.error("QR crop failed",le),on(di)}},v.onerror=()=>on(di)},[di]);const[Ze,ni]=b.useState(!1),[jt,Xt]=b.useState({displayName:"",country:"",state:"",city:"",address:"",phone:""});b.useEffect(()=>{r?.uid&&s?.hospitalId&&Ot()},[r,s]);const Ot=async()=>{const v=bn(`dashboard_${s.hospitalId}`);if(v){console.log(" Using cached overview data"),x(v.doctors),A(v.stats),R(!1);return}R(!0);try{const[le,We]=await Promise.all([xy(s.hospitalId),Km(s.hospitalId)]);x(le),A(We),Bn(`dashboard_${s.hospitalId}`,{doctors:le,stats:We})}catch(le){console.error("Error loading dashboard data:",le),$e("Error loading data","error")}finally{R(!1)}},$e=(v,le="success")=>{qn({message:v,type:le}),setTimeout(()=>qn(null),3e3)};b.useEffect(()=>{c==="usage"&&s?.hospitalId&&O()},[c,s?.hospitalId]),b.useEffect(()=>{c==="billing"&&s?.hospitalId&&qe&&G()},[c,s?.hospitalId,qe]),b.useEffect(()=>{c==="appointments"&&s?.hospitalId&&!Ct&&C()},[c,s,Ct]);const C=async()=>{if(!U){R(!0),console.log("loading all hospital appointments...");try{const v=await by(s.hospitalId);S(v),Nn(!0),console.log(" Loaded all hospital appointments:",v.length)}catch(v){console.error("Error loading appointments:",v),$e("Error loading appointments","error")}finally{R(!1)}}},O=async()=>{try{R(!0),console.log(" Loading optimized usage data for hospital:",s.hospitalId);const v=bn(`usage_${s.hospitalId}`);if(v){console.log(" Using cached usage data"),xn(v),R(!1);return}const[le,We,Lt]=await Promise.all([Vt(Me(F,"config","billing")).catch(D=>({exists:()=>!1})),Vt(Me(F,"hospitals",s.hospitalId)),Km(s.hospitalId)]);if(le.exists()&&Ht(le.data()),!We.exists()){$e("Hospital profile not found","error");return}const Zt=We.data(),qt=le.exists()?le.data():Ei,zt=Zt?.country||s?.country||"default",V=Ro(zt,qt),h={totalAppointments:Lt.totalAppointments||0,totalPrescriptions:Lt.totalPrescriptions||0,appointmentsByMonth:{},prescriptionsByMonth:{},pricingModel:Zt?.pricingModel||"full",discountPercentage:Zt?.discountPercentage||0,currency:V.currency,symbol:V.symbol};Bn(`usage_${s.hospitalId}`,h),xn(h)}catch(v){console.error("Error loading usage data:",v),$e("Error loading usage data","error")}finally{R(!1)}},G=async()=>{try{if(R(!0),console.log(" Loading billing data for hospital:",s.hospitalId,"Month:",qe),!qe){console.warn("No month selected for billing"),R(!1);return}const v=`billing_${s.hospitalId}_${qe}`,le=bn(v);if(le){console.log(" Using cached billing data for",qe),Qn(le.cumulativeData),xn(le.paymentInfo),R(!1);return}let We={currency:"USD",appointmentCost:50,prescriptionCost:20};const{startISO:Lt,nextMonthISO:Zt}=ec(qe);console.log(`Billing Range (ISO): ${Lt} to ${Zt}`);const qt=Ce(F,"appointments"),zt=ze(qt,ce("hospitalId","==",s.hospitalId),ce("appointmentDate",">=",Lt),ce("appointmentDate","<",Zt)),V=Ce(F,"prescriptions"),h=ze(V,ce("hospitalId","==",s.hospitalId),ce("date",">=",Lt),ce("date","<",Zt)),D=Ce(F,"payments"),K=ze(D,ce("hospitalId","==",s.hospitalId),ce("createdAt",">=",Lt),ce("createdAt","<",Zt)),me=K,oe=ze(K,Jd(100));console.time("BillingParallelFetch");const[ve,Ie,Qe,pt,ot,Le]=await Promise.all([Vt(Me(F,"config","billing")).catch(hn=>({exists:()=>!1})),Vt(Me(F,"hospitals",s.hospitalId)),ci(zt).catch(hn=>({data:()=>({count:0})})),ci(h).catch(hn=>({data:()=>({count:0})})),Pr(me,{totalPaid:Ir("amount")}).catch(hn=>({data:()=>({totalPaid:0})})),Pe(oe).catch(hn=>({docs:[]}))]);if(console.timeEnd("BillingParallelFetch"),ve.exists()&&(We=ve.data(),Ht(We)),!Ie.exists()){$e("Hospital profile not found","error");return}const rt=Ie.data(),ut=_l(rt,We),mn=Qe.data().count,Jt=pt.data().count;let Dn=Le.docs.map(hn=>({id:hn.id,...hn.data()})).sort((hn,mi)=>mi.createdAt.localeCompare(hn.createdAt));const kn=rt?.pricingModel||"full",Rn=rt?.discountPercentage||0,Yn=ph({appointmentsCount:mn,prescriptionsCount:Jt,rates:ut,pricingModel:kn,discountPercentage:Rn});let Fn=Yn.appointmentCost,Hn=Yn.prescriptionCost,En=Yn.totalCost,ii=0;ot.data?ii=ot.data().totalPaid||0:ii=Dn.reduce((hn,mi)=>hn+(mi.status==="completed"&&mi.amount||0),0);const pi=Math.max(0,En-ii),Zn={cumulativeData:{totalAppointments:mn,totalPrescriptions:Jt,appointmentCost:Fn,prescriptionCost:Hn,totalCost:En,totalPaid:ii,pendingAmount:pi,paymentHistory:Dn},paymentInfo:{totalAppointments:mn,totalPrescriptions:Jt,appointmentCost:Fn,prescriptionCost:Hn,totalCost:En,paid:ii,pending:pi,pricingModel:kn,discountPercentage:Rn,rates:ut,currency:ut.currency,symbol:ut.symbol,country:rt?.country||s?.country||"default",bankDetails:rt?.bankDetails||{},upiId:rt?.upiId||"",lastPaymentDate:Dn[0]?.createdAt,lastPaymentAmount:Dn[0]?.amount,doctorCount:g.length,paymentHistory:Dn,paymentDetails:We.paymentDetails||{},countryInstructions:We.countrySpecificInstructions||{}},timestamp:Date.now()};Bn(v,Zn),Zn.paymentInfo.displayCost=Yn.totalCost,Zn.paymentInfo.rates=ut,Qn(Zn.cumulativeData),xn(Zn.paymentInfo),console.log(" Billing data loaded successfully for",qe)}catch(v){console.error("Error loading billing data:",v),$e("Error loading billing data","error")}finally{R(!1)}},ie=v=>{console.log(" Getting payment methods for country:",v);const le=[];return v==="India"||v==="IN"?le.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):v==="United States"||v==="US"||v==="USA"?le.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):v==="United Kingdom"||v==="UK"||v==="GB"?le.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):v==="Canada"||v==="CA"?le.push("PayPal","Stripe","Interac","Bank Transfer","Check"):v==="Australia"||v==="AU"?le.push("PayPal","Stripe","BPAY","Bank Transfer"):le.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",le),le},Ne=async v=>{if(v.preventDefault(),!be){$e("Please select a payment method","error");return}const le=parseFloat(Ut);if(!le||le<=0){$e("Please enter a valid amount","error");return}if(le>vt.pendingAmount){$e("Amount cannot exceed pending balance","error");return}try{we(!0);const We={hospitalId:s.hospitalId,hospitalName:s.displayName,amount:le,currency:fe.currency,paymentMethod:be,status:"pending",createdAt:new Date().toISOString(),createdBy:r.uid,type:"partial",description:`Partial payment for hospital app usage - ${vt.totalAppointments} appointments, ${vt.totalPrescriptions} prescriptions`},Lt=Ce(F,"payments");await ga(Lt,We),$e("Payment request submitted successfully! Admin will verify and process.","success"),ee(!1),sn(""),Re(""),G()}catch(We){console.error("Error processing payment:",We),$e("Failed to process payment","error")}finally{we(!1)}},He=()=>{sn(""),Re(""),ee(!0)},At=async v=>{v.preventDefault();try{if(console.log("Adding doctor with data:",Nt),console.log("Hospital ID:",s.hospitalId),console.log("Hospital Name:",s.displayName),!s.hospitalId){$e("Hospital ID not found. Please contact support.","error");return}await Dy(s.hospitalId,s.displayName,Nt),$e("Doctor added successfully!"),Y(!1),yn({displayName:"",email:"",specialization:"",consultationFee:"",phone:""});try{const le=`dashboard_${s.hospitalId}`;sessionStorage.removeItem(le)}catch(le){console.warn("Failed to remove dashboard cache",le)}Ot()}catch(le){console.error("Error adding doctor:",le),$e("Failed to add doctor: "+(le.message||"Unknown error"),"error")}},Ve=v=>{ln(v),k({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),pn(!0)},Oe=()=>{k({...wt,medications:[...wt.medications,{name:"",dosage:"",frequency:"",duration:""}]})},Kt=(v,le,We)=>{const Lt=[...wt.medications];Lt[v][le]=We,k({...wt,medications:Lt})},Si=v=>{const le=wt.medications.filter((We,Lt)=>Lt!==v);k({...wt,medications:le})},Je=async v=>{v.preventDefault();try{const{db:le}=await Wr(async()=>{const{db:h}=await Promise.resolve().then(()=>gy);return{db:h}},void 0),{doc:We,updateDoc:Lt,setDoc:Zt,collection:qt}=await Wr(async()=>{const{doc:h,updateDoc:D,setDoc:K,collection:me}=await import("./firebase-p-DgfaJy.js").then(oe=>oe.K);return{doc:h,updateDoc:D,setDoc:K,collection:me}},[]),zt=We(qt(le,"prescriptions"));await Zt(zt,{appointmentId:kt.id,patientName:kt.patientName,patientPhone:kt.patientPhone,doctorName:kt.doctorName,hospitalId:s.hospitalId,hospitalName:s.displayName,...wt,createdAt:new Date().toISOString(),createdBy:r.uid});const V=We(le,"appointments",kt.id);await Lt(V,{status:"completed",prescriptionId:zt.id,completedAt:new Date().toISOString()}),$e("Prescription saved successfully!"),pn(!1),ln(null),Ot()}catch(le){console.error("Error saving prescription:",le),$e("Failed to save prescription","error")}},Wn=async v=>{v.preventDefault();try{await oh(De.uid,{displayName:De.displayName,specialization:De.specialization,consultationFee:De.consultationFee,phone:De.phone}),$e("Doctor updated successfully!"),ge(!1),je(null),Ot()}catch(le){console.error("Error updating doctor:",le),$e("Failed to update doctor","error")}},St=async(v,le)=>{try{await jy(v,!le),$e(`Doctor ${le?"disabled":"enabled"} successfully!`),Ot()}catch(We){console.error("Error toggling doctor status:",We),$e("Failed to update status","error")}},Xn=async v=>{if(window.confirm("Are you sure you want to remove this doctor?"))try{await Sy(v,s.hospitalId),$e("Doctor removed successfully!"),Ot()}catch(le){console.error("Error deleting doctor:",le),$e("Failed to remove doctor","error")}},Kn=async()=>{try{await Fe(he.uid,Ge),$e("Availability updated successfully!"),ke(!1)}catch(v){console.error("Error saving availability:",v),$e("Failed to update availability","error")}},Mi=async v=>{I(v);try{const le=await rc(v.uid);Fe(le),ke(!0)}catch(le){console.error("Error loading availability:",le),$e("Failed to load availability","error")}},qi=v=>{je({...v}),ge(!0)},Gi=v=>{E(v),W(!0)},Zi=async v=>{v.preventDefault();try{const le=Me(F,"users",r.uid);if(await Ft(le,{displayName:jt.displayName,country:jt.country,state:jt.state,city:jt.city,address:jt.address,phone:jt.phone,updatedAt:new Date().toISOString()}),s?.hospitalId){const We=Me(F,"hospitals",s.hospitalId);await Ft(We,{name:jt.displayName,country:jt.country,state:jt.state,city:jt.city,address:jt.address,updatedAt:new Date().toISOString()})}$e("Hospital profile updated successfully!"),ni(!1),setTimeout(async()=>{try{await u()}catch{window.location.href="/dashboard"}},1e3)}catch(le){console.error("Error updating hospital profile:",le),$e("Failed to update profile","error")}},Ni=()=>{Xt({displayName:s?.displayName||"",country:s?.country||"",state:s?.state||"",city:s?.city||"",address:s?.address||"",phone:s?.phone||""}),ni(!0)},rn=async()=>{if(!de.trim()){Xe([]);return}X(!0);try{const v=await Xy(de,s.hospitalId);Xe(v),v.length===0&&$e("No patients found","error")}catch(v){console.error("Error searching patients:",v),$e("Failed to search patients","error")}finally{X(!1)}},qa=v=>{P(v),ye(!0),Xe([]),re("")},ya=v=>{xe({patientId:v.id,patientName:v.name,fromDoctorId:v.lastDoctorId,fromDoctorName:v.lastDoctorName,toDoctorId:""}),bt(!0)},Hi=async v=>{if(v.preventDefault(),!se.toDoctorId){$e("Please select a doctor to transfer to","error");return}try{const le=await ex(se.patientId,se.fromDoctorId,se.toDoctorId,s.hospitalId);$e(`Successfully transferred ${le.recordsTransferred} health records and ${le.prescriptionsTransferred} prescriptions`,"success"),bt(!1),xe({patientId:"",fromDoctorId:"",toDoctorId:""})}catch(le){console.error("Error transferring records:",le),$e("Failed to transfer records","error")}},Wi=()=>{W(!1),E(null),Ot()};if(J&&pe)return t.jsxs("div",{children:[t.jsxs("div",{style:{background:"white",padding:"1rem 2rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("button",{onClick:Wi,style:{padding:"0.5rem 1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Back to Hospital Dashboard"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Viewing Dashboard for:"}),t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#333"},children:["Dr. ",pe.displayName," - ",pe.specialization]})]})]}),t.jsx(mh,{doctorId:pe.uid,doctorProfile:pe,isHospitalView:!0,suppressHeader:!0})]});const te={container:{maxWidth:"min(1200px, 100%)",width:"100%",margin:"0 auto",padding:"1rem",fontFamily:"var(--font-sans)",color:"var(--text-main)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem",background:"var(--bg-card)",padding:"1.5rem",borderRadius:"16px",boxShadow:"var(--shadow-md)",border:"1px solid var(--border-subtle)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px",border:"1px solid var(--border-subtle)",cursor:"default"},tabContainer:{display:"flex",gap:"0.5rem",marginBottom:"2rem",overflowX:"auto",paddingBottom:"0.5rem",msOverflowStyle:"none",scrollbarWidth:"none",borderBottom:"1px solid var(--border-subtle)",padding:"0.5rem 0"},tab:{padding:"0.75rem 1.25rem",borderRadius:"8px",border:"1px solid transparent",background:"transparent",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},activeTab:{background:"var(--primary-light)",color:"white",boxShadow:"var(--shadow-sm)",fontWeight:"600"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"2rem",boxShadow:"var(--shadow-md)",marginBottom:"1.5rem",width:"100%",boxSizing:"border-box",border:"1px solid var(--border-subtle)"},doctorCard:{background:"var(--bg-card)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1rem",border:"1px solid var(--border-subtle)",boxShadow:"var(--shadow-sm)",transition:"all 0.2s ease",display:"flex",flexDirection:"column",gap:"1rem"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-sm)"},successButton:{background:"#10b981",color:"white",boxShadow:"var(--shadow-sm)"},dangerButton:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fecaca"},warningButton:{background:"#fef3c7",color:"#d97706",border:"1px solid #fde68a"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem",backdropFilter:"blur(4px)"},modalContent:{background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"min(600px, 100%)",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",border:"1px solid var(--border-subtle)",animation:"slideUp 0.3s ease-out"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-subtle)",fontSize:"1rem",marginBottom:"1rem",transition:"all 0.2s ease",background:"var(--bg-main)",color:"var(--text-main)"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-lg)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease",color:"white",display:"flex",alignItems:"center",gap:"0.75rem"}};return U||!r||!s?.hospitalId?t.jsx("div",{style:te.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{className:"spinner",style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:te.container,children:[An&&t.jsx("div",{style:{...te.notification,background:An.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:An.message}),t.jsxs("div",{style:te.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" ",s?.displayName||"Hospital Dashboard"]}),t.jsx("p",{style:{margin:0,color:"#666"},children:"Welcome back! Manage your hospital operations efficiently."})]}),t.jsxs("div",{style:te.statsGrid,children:[t.jsxs("div",{style:te.statCard,children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.totalDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Doctors"})]}),t.jsxs("div",{style:{...te.statCard,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.activeDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"})]}),t.jsxs("div",{style:{...te.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:36})}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...te.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"}}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.totalAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"})]})]}),t.jsx("div",{style:te.tabContainer,children:typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width:480px)").matches?t.jsx("select",{value:c,onChange:v=>f(v.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select hospital tab",children:[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("option",{value:v.id,children:v.label},v.id))}):[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("button",{style:{...te.tab,...c===v.id?te.activeTab:{}},onClick:()=>f(v.id),children:v.label},v.id))}),c==="doctors"&&t.jsxs("div",{style:te.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Manage Doctors"}),t.jsx("button",{style:{...te.button,...te.primaryButton},onClick:()=>Y(!0),children:"+ Add New Doctor"})]}),g.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No doctors yet. Add your first doctor to get started!"})]}):g.map(v=>t.jsx("div",{style:te.doctorCard,children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsxs("h3",{style:{margin:"0 0 0.5rem 0",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.displayName,v.isActive===!1&&t.jsx("span",{style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",background:"#ff4444",color:"white",borderRadius:"5px"},children:"Disabled"})]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Specialization:"})," ",v.specialization||"N/A"]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Consultation Fee:"})," $",v.consultationFee||"N/A"]}),t.jsxs("p",{style:{margin:"0",color:"#666"},children:[t.jsx("strong",{children:"Phone:"})," ",v.phone||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{style:{...te.button,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontWeight:"600"},onClick:()=>Gi(v),children:" View Dashboard"}),t.jsx("button",{style:{...te.button,...te.primaryButton},onClick:()=>qi(v),children:" Edit"}),t.jsxs("button",{style:{...te.button,...te.successButton},onClick:()=>Mi(v),children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:16})})," Availability"]}),t.jsx("button",{style:{...te.button,...v.isActive===!1?te.successButton:te.warningButton},onClick:()=>St(v.uid,v.isActive!==!1),children:v.isActive===!1?" Enable":" Disable"}),t.jsx("button",{style:{...te.button,...te.dangerButton},onClick:()=>Xn(v.uid),children:" Delete"})]})]})},v.uid))]}),c==="appointments"&&t.jsxs("div",{style:te.card,children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:22}),"Appointments & Prescriptions"]}),y.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:t.jsx(an,{size:48})}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:y.map(v=>t.jsx("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",borderLeft:`4px solid ${v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#f5576c"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsx("strong",{style:{fontSize:"1.1rem",color:"#333"},children:v.patientName}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:v.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Doctor:"})," ",v.doctorName]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Date:"})," ",v.appointmentDate||v.date]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",v.appointmentTime||v.time]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",v.patientPhone]}),v.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",v.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.status!=="completed"&&t.jsx("button",{onClick:()=>Ve(v),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),v.status==="completed"&&v.prescriptionId&&t.jsx("div",{style:{padding:"0.5rem 1rem",background:"#38ef7d",color:"white",borderRadius:"8px",fontSize:"0.85rem",textAlign:"center",fontWeight:"600"},children:" Prescribed"})]})]})},v.id))})]}),c==="usage"&&t.jsxs("div",{style:te.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" App Usage Statistics"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"View your hospital's app usage metrics (appointments and prescriptions)"}),fe?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:fe.pricingModel==="free"?"#e8f5e9":fe.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:fe.pricingModel==="free"?"#2e7d32":fe.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[fe.pricingModel==="free"&&" Free + Ads",fe.pricingModel==="reduced"&&` Reduced Rate (${fe.discountPercentage}% off)`,fe.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[fe.pricingModel==="free"&&"Your hospital uses the app completely FREE! Ad revenue funds your access.",fe.pricingModel==="reduced"&&`Your hospital gets ${fe.discountPercentage}% discount on all fees. Ads help reduce your costs.`,fe.pricingModel==="full"&&"Premium tier with no ads. Your hospital pays standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:fe.totalAppointments}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Prescriptions"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:fe.totalPrescriptions}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:g.length}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Using the platform"})]})]}),fe.appointmentsByMonth&&Object.keys(fe.appointmentsByMonth).length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Monthly Breakdown"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Object.entries(fe.appointmentsByMonth).sort((v,le)=>le[0].localeCompare(v[0])).slice(0,12).map(([v,le])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"6px",marginBottom:"0.5rem"},children:[t.jsx("span",{style:{fontWeight:"600"},children:new Date(v+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[le," ",le===1?"appointment":"appointments"]})]},v))})]}),t.jsxs("div",{style:{background:"#e3f2fd",borderRadius:"10px",padding:"1.5rem",border:"2px solid #2196f3"},children:[t.jsx("h3",{style:{marginTop:0,color:"#1976d2"},children:" About Usage Tracking"}),t.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#424242",lineHeight:"1.8"},children:[t.jsx("li",{children:"All appointments and prescriptions are tracked cumulatively"}),t.jsx("li",{children:"Usage metrics help understand your hospital's platform engagement"}),t.jsx("li",{children:"Billing is calculated based on total usage (see Billing tab)"})]})]})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]})]}),c==="billing"&&t.jsxs("div",{style:te.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Analytics"}),t.jsx("button",{onClick:He,style:{...te.button,...te.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("label",{style:{fontWeight:"600",marginRight:"1rem"},children:"Select Month:"}),t.jsx("input",{type:"month",value:qe,onChange:v=>q(v.target.value),style:te.input})]}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"View your hospital's app usage metrics (appointments and prescriptions)"}),fe?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:fe.pricingModel==="free"?"#e8f5e9":fe.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:fe.pricingModel==="free"?"#2e7d32":fe.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[fe.pricingModel==="free"&&" Free + Ads",fe.pricingModel==="reduced"&&` Reduced Rate (${fe.discountPercentage}% off)`,fe.pricingModel==="full"&&" Full Rate"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Cost (",qe?"This Month":"Total",")"]}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[fe.symbol,fe.displayCost?.toFixed(2)||"0.00"]}),qe&&t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[fe.monthlyAppointments||0," appts (this month)"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Pending Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[fe.symbol,vt.pendingAmount.toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Amount due"}),t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:He,style:{...te.button,...te.primaryButton},children:"Pay Now"})})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[fe.symbol,vt.totalPaid.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[vt.paymentHistory.length," payment",vt.paymentHistory.length!==1?"s":""]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",vt.totalAppointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[fe.symbol,vt.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",vt.totalPrescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[fe.symbol,vt.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[fe.symbol,fe.rates?.appointmentCost||0]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[fe.symbol,fe.rates?.prescriptionCost||0]})]})]})]}),vt.paymentHistory.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Payment History"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:vt.paymentHistory.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",marginBottom:"0.75rem",borderLeft:`4px solid ${v.status==="completed"?"#4caf50":v.status==="pending"?"#ff9800":"#f44336"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[fe.symbol,v.amount.toFixed(2)]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",background:v.status==="completed"?"#e8f5e9":v.status==="pending"?"#fff3e0":"#ffebee",color:v.status==="completed"?"#2e7d32":v.status==="pending"?"#e65100":"#c62828"},children:v.status.toUpperCase()})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:["Method: ",v.paymentMethod]}),t.jsxs("div",{children:["Date: ",new Date(v.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),v.description&&t.jsxs("div",{children:["Note: ",v.description]})]})]},v.id))})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),fe.countryInstructions?.[fe.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",fe.country," users:"]})," ",fe.countryInstructions[fe.country]]}),fe.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:fe.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:fe.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",fe.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:fe.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",fe.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",fe.paymentDetails.wise.swift]})]})]}),(fe.country==="India"||fe.country==="IN")&&fe.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:fe.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:fe.paymentDetails.upi.upiId})]})})]}),fe.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:fe.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:fe.paymentDetails.paypal.email})]})})]}),fe.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:fe.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",fe.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",fe.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:fe.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",fe.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:fe.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",fe.paymentDetails.bankTransfer.swift]})]})]}),!fe.paymentDetails?.wise?.enabled&&!fe.paymentDetails?.upi?.enabled&&!fe.paymentDetails?.paypal?.enabled&&!fe.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Hospital ID (",t.jsx("strong",{children:s?.hospitalId}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:Rt||di,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>Gn(!0)})})}),dn&&t.jsx("div",{onClick:()=>Gn(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:Rt||di,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]})]}),c==="overview"&&t.jsxs("div",{style:te.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:" Doctor Summary"}),t.jsxs("p",{children:["Total Doctors: ",t.jsx("strong",{children:j.totalDoctors||0})]}),t.jsxs("p",{children:["Active Doctors: ",t.jsx("strong",{children:j.activeDoctors||0})]}),t.jsxs("p",{children:["Inactive Doctors: ",t.jsx("strong",{children:(j.totalDoctors||0)-(j.activeDoctors||0)})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsxs("h3",{style:{marginTop:0,color:"#38ef7d",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:18}),"Appointments"]}),t.jsxs("p",{children:["Today: ",t.jsx("strong",{children:j.todayAppointments||0})]}),t.jsxs("p",{children:["Total: ",t.jsx("strong",{children:j.totalAppointments||0})]}),t.jsxs("p",{children:["Completed: ",t.jsx("strong",{children:j.completedAppointments||0})]}),t.jsxs("p",{children:["Pending: ",t.jsx("strong",{children:j.pendingAppointments||0})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#fa709a"},children:" Status Breakdown"}),t.jsxs("p",{children:["Confirmed: ",t.jsx("strong",{children:j.confirmedAppointments||0})]}),t.jsxs("p",{children:["Cancelled: ",t.jsx("strong",{children:j.cancelledAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[j.totalAppointments?Math.round(j.completedAppointments/j.totalAppointments*100):0,"%"]})]})]})]})]}),c==="patients"&&t.jsxs("div",{style:te.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Hospital Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and view all patients who have visited your hospital across all doctors"}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by patient name or booking number...",value:de,onChange:v=>re(v.target.value),onKeyPress:v=>v.key==="Enter"&&rn(),style:{...te.input,flex:1}}),t.jsx("button",{onClick:rn,disabled:ct,style:{...te.button,...te.primaryButton,minWidth:"0"},children:ct?" Searching...":" Search"})]}),z.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1rem",maxHeight:"400px",overflowY:"auto"},children:[t.jsxs("h4",{style:{marginTop:0,color:"#333"},children:["Found ",z.length," patient",z.length!==1?"s":""]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:z.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",border:"2px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[" ",v.name]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",v.phone]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," Last Visit: ",v.lastAppointment]}),t.jsxs("div",{children:[" Last Seen by: Dr. ",v.lastDoctorName]}),t.jsxs("div",{children:[" Total Visits: ",v.totalAppointments]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>qa(v.id),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" View Full History"}),t.jsx("button",{onClick:()=>ya(v),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" Transfer Records"})]})]},v.id))})]})]}),z.length===0&&!ct&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Search for Patients"}),t.jsx("p",{children:"Enter a patient name or booking number to view their complete medical history across all your doctors."}),t.jsxs("p",{style:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Use Cases:"}),t.jsx("br",{})," View patient history when doctor is unavailable",t.jsx("br",{})," Transfer records when doctor leaves the hospital",t.jsx("br",{})," Access complete patient data across all departments"]})]})]}),c==="analytics"&&t.jsxs("div",{style:te.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Analytics & Reports"}),t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Advanced analytics coming soon!"}),t.jsx("p",{children:"View detailed reports, charts, and insights about your hospital performance."})]})]}),c==="settings"&&t.jsxs("div",{style:te.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Hospital Settings"}),t.jsx("button",{onClick:Ni,style:{...te.button,...te.primaryButton},children:" Edit Profile"})]}),t.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea",marginBottom:"1rem"},children:" Hospital Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Hospital Name"}),t.jsx("div",{style:{fontSize:"0.95rem",fontWeight:"500",color:"#444"},children:s?.displayName||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Email"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.email||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Phone"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.phone||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#38ef7d",marginBottom:"1rem"},children:" Address Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Country"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.country||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"State/Province"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.state||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"City"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.city||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Address"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.address||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"12px",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32",marginBottom:"1rem"},children:" Account Status"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Account Active"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Profile Verified"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsxs("span",{children:["Hospital ID: ",s?.hospitalId||"Not set"]})]})]})]})]})]}),lt&&t.jsx("div",{style:te.modal,onClick:()=>Y(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Add New Doctor"}),t.jsxs("form",{onSubmit:At,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:Nt.displayName,onChange:v=>yn({...Nt,displayName:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"email",placeholder:"Email (optional)",value:Nt.email,onChange:v=>yn({...Nt,email:v.target.value}),style:te.input}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:Nt.specialization,onChange:v=>yn({...Nt,specialization:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:Nt.consultationFee,onChange:v=>yn({...Nt,consultationFee:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:Nt.phone,onChange:v=>yn({...Nt,phone:v.target.value}),style:te.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...te.button,...te.primaryButton,flex:1},children:"Add Doctor"}),t.jsx("button",{type:"button",onClick:()=>Y(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ae&&De&&t.jsx("div",{style:te.modal,onClick:()=>ge(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Edit Doctor"}),t.jsxs("form",{onSubmit:Wn,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:De.displayName,onChange:v=>je({...De,displayName:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:De.specialization,onChange:v=>je({...De,specialization:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:De.consultationFee,onChange:v=>je({...De,consultationFee:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:De.phone,onChange:v=>je({...De,phone:v.target.value}),style:te.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...te.button,...te.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>ge(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),ae&&he&&t.jsx("div",{style:te.modal,onClick:()=>ke(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333"},children:["Manage Availability - ",he.displayName]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Hours"}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:Ge.workingHours?.start||"09:00",onChange:v=>Fe({...Ge,workingHours:{...Ge.workingHours,start:v.target.value}}),style:{...te.input,marginBottom:0}}),t.jsx("input",{type:"time",value:Ge.workingHours?.end||"17:00",onChange:v=>Fe({...Ge,workingHours:{...Ge.workingHours,end:v.target.value}}),style:{...te.input,marginBottom:0}})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:Ge.slotDuration||30,onChange:v=>Fe({...Ge,slotDuration:parseInt(v.target.value)}),style:te.input,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Days"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((v,le)=>{const We=le+1,Lt=Ge.workingDays?.includes(We);return t.jsx("button",{type:"button",onClick:()=>{const Zt=Ge.workingDays||[],qt=Lt?Zt.filter(zt=>zt!==We):[...Zt,We];Fe({...Ge,workingDays:qt})},style:{...te.button,background:Lt?"#667eea":"#e0e0e0",color:Lt?"white":"#666"},children:v},v)})})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[t.jsx("button",{type:"button",onClick:Kn,style:{...te.button,...te.primaryButton,flex:1},children:"Save Availability"}),t.jsx("button",{type:"button",onClick:()=>ke(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})}),ft&&kt&&t.jsx("div",{style:te.modal,onClick:()=>pn(!1),children:t.jsxs("div",{style:{...te.modalContent,maxWidth:"min(700px, 100%)",maxHeight:"90vh",overflow:"auto"},onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #667eea",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",kt.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",kt.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",kt.appointmentDate," at ",kt.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:Je,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:wt.diagnosis,onChange:v=>k({...wt,diagnosis:v.target.value}),style:{...te.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:Oe,style:{padding:"0.4rem 0.8rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),wt.medications.map((v,le)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:v.name,onChange:We=>Kt(le,"name",We.target.value),style:{...te.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:v.dosage,onChange:We=>Kt(le,"dosage",We.target.value),style:te.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:v.frequency,onChange:We=>Kt(le,"frequency",We.target.value),style:te.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:v.duration,onChange:We=>Kt(le,"duration",We.target.value),style:te.input}),wt.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>Si(le),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},le))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:wt.tests,onChange:v=>k({...wt,tests:v.target.value}),style:{...te.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:wt.instructions,onChange:v=>k({...wt,instructions:v.target.value}),style:{...te.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:wt.followUpDate,onChange:v=>k({...wt,followUpDate:v.target.value}),min:new Date().toISOString().split("T")[0],style:te.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...te.button,...te.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>pn(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),at&&t.jsx("div",{style:te.modal,onClick:()=>bt(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Transfer Patient Records"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Patient: ",se.patientName]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Current Doctor: Dr. ",se.fromDoctorName]})]}),t.jsxs("form",{onSubmit:Hi,children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Transfer To Doctor: *"}),t.jsxs("select",{value:se.toDoctorId,onChange:v=>xe({...se,toDoctorId:v.target.value}),style:{...te.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select a doctor..."}),g.filter(v=>v.uid!==se.fromDoctorId&&v.isActive).map(v=>t.jsxs("option",{value:v.uid,children:["Dr. ",v.displayName," - ",v.specialization]},v.uid))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This will transfer all health records and prescriptions from the current doctor to the selected doctor. The original records will be marked as transferred."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...te.button,...te.primaryButton,flex:1},children:" Transfer Records"}),t.jsx("button",{type:"button",onClick:()=>bt(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),M&&t.jsx("div",{style:te.modal,onClick:()=>ee(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsxs("div",{style:{background:"#f0f7ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:"Total Pending:"}),t.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",marginLeft:"0.5rem",color:"#1976d2"},children:[fe?.currency," ",vt.pendingAmount.toFixed(2)]})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[vt.totalAppointments," appointments + ",vt.totalPrescriptions," prescriptions"]})]}),t.jsxs("form",{onSubmit:Ne,children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:["Payment Amount (",fe?.currency,") *"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:vt.pendingAmount,placeholder:`Enter amount (max: ${vt.pendingAmount.toFixed(2)})`,value:Ut,onChange:v=>sn(v.target.value),style:te.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("button",{type:"button",onClick:()=>sn((vt.pendingAmount/2).toFixed(2)),style:{padding:"0.5rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>sn(vt.pendingAmount.toFixed(2)),style:{padding:"0.5rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"Pay Full"})]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method *"}),t.jsxs("select",{value:be,onChange:v=>Re(v.target.value),style:{...te.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select payment method..."}),ie(fe?.country||"US").map(v=>t.jsx("option",{value:v,children:v},v))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"}),' After submitting, your payment will be marked as "pending" and will be verified by the admin. Once verified, it will be marked as "completed" and reflected in your balance.']}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Se,style:{...te.button,...te.primaryButton,flex:1,opacity:Se?.6:1,cursor:Se?"not-allowed":"pointer"},children:Se?" Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>ee(!1),disabled:Se,style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ze&&t.jsx("div",{style:te.modal,onClick:()=>ni(!1),children:t.jsxs("div",{style:te.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Edit Hospital Profile"}),t.jsxs("form",{onSubmit:Zi,children:[t.jsx("input",{type:"text",placeholder:"Hospital Name *",value:jt.displayName,onChange:v=>Xt({...jt,displayName:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:jt.phone,onChange:v=>Xt({...jt,phone:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Country *",value:jt.country,onChange:v=>Xt({...jt,country:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"text",placeholder:"State/Province *",value:jt.state,onChange:v=>Xt({...jt,state:v.target.value}),style:te.input,required:!0}),t.jsx("input",{type:"text",placeholder:"City *",value:jt.city,onChange:v=>Xt({...jt,city:v.target.value}),style:te.input,required:!0}),t.jsx("textarea",{placeholder:"Full Address",value:jt.address,onChange:v=>Xt({...jt,address:v.target.value}),style:{...te.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{background:"#e3f2fd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This information will be visible to patients when they book appointments with your hospital's doctors."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...te.button,...te.primaryButton,flex:1},children:" Save Changes"}),t.jsx("button",{type:"button",onClick:()=>ni(!1),style:{...te.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),tt&&ue&&t.jsx(uh,{patientId:ue,onClose:()=>{ye(!1),P(null)},hospitalId:s?.hospitalId,isHospitalView:!0}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #667eea;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]})},rx=async()=>(await Pe(Ce(F,"doctors"))).docs.map(s=>({id:s.id,...s.data()})),sx=async(r,s)=>{const u=`${r}_${s}`,c=Me(F,"doctor_slots",u),f=await Vt(c);return f.exists()?f.data().slots:[]},dx=async(r,s,u,c)=>(await ac(oc,"createAppointment")({doctorId:r,date:s,time:u,paymentId:c})).data;var ql;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(ql||(ql={}));class Kd extends Error{constructor(s,u,c){super(s),this.message=s,this.code=u,this.data=c}}const cx=r=>{var s,u;return r?.androidBridge?"android":!((u=(s=r?.webkit)===null||s===void 0?void 0:s.messageHandlers)===null||u===void 0)&&u.bridge?"ios":"web"},ux=r=>{const s=r.CapacitorCustomPlatform||null,u=r.Capacitor||{},c=u.Plugins=u.Plugins||{},f=()=>s!==null?s.name:cx(r),g=()=>f()!=="web",x=U=>{const R=j.get(U);return!!(R?.platforms.has(f())||y(U))},y=U=>{var R;return(R=u.PluginHeaders)===null||R===void 0?void 0:R.find(he=>he.name===U)},S=U=>r.console.error(U),j=new Map,A=(U,R={})=>{const he=j.get(U);if(he)return console.warn(`Capacitor plugin "${U}" already registered. Cannot register plugins twice.`),he.proxy;const I=f(),J=y(U);let W;const pe=async()=>(!W&&I in R?W=typeof R[I]=="function"?W=await R[I]():W=R[I]:s!==null&&!W&&"web"in R&&(W=typeof R.web=="function"?W=await R.web():W=R.web),W),E=(X,ue)=>{var P,tt;if(J){const ye=J?.methods.find(at=>ue===at.name);if(ye)return ye.rtype==="promise"?at=>u.nativePromise(U,ue.toString(),at):(at,bt)=>u.nativeCallback(U,ue.toString(),at,bt);if(X)return(P=X[ue])===null||P===void 0?void 0:P.bind(X)}else{if(X)return(tt=X[ue])===null||tt===void 0?void 0:tt.bind(X);throw new Kd(`"${U}" plugin is not implemented on ${I}`,ql.Unimplemented)}},de=X=>{let ue;const P=(...tt)=>{const ye=pe().then(at=>{const bt=E(at,X);if(bt){const qe=bt(...tt);return ue=qe?.remove,qe}else throw new Kd(`"${U}.${X}()" is not implemented on ${I}`,ql.Unimplemented)});return X==="addListener"&&(ye.remove=async()=>ue()),ye};return P.toString=()=>`${X.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:X,writable:!1,configurable:!1}),P},re=de("addListener"),z=de("removeListener"),Xe=(X,ue)=>{const P=re({eventName:X},ue),tt=async()=>{const at=await P;z({eventName:X,callbackId:at},ue)},ye=new Promise(at=>P.then(()=>at({remove:tt})));return ye.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await tt()},ye},ct=new Proxy({},{get(X,ue){switch(ue){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return J?Xe:re;case"removeListener":return z;default:return de(ue)}}});return c[U]=ct,j.set(U,{name:U,proxy:ct,platforms:new Set([...Object.keys(R),...J?[I]:[]])}),ct};return u.convertFileSrc||(u.convertFileSrc=U=>U),u.getPlatform=f,u.handleError=S,u.isNativePlatform=g,u.isPluginAvailable=x,u.registerPlugin=A,u.Exception=Kd,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u},px=r=>r.Capacitor=ux(r),Yr=px(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),sc=Yr.registerPlugin;class dc{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(s,u){let c=!1;this.listeners[s]||(this.listeners[s]=[],c=!0),this.listeners[s].push(u);const g=this.windowListeners[s];g&&!g.registered&&this.addWindowListener(g),c&&this.sendRetainedArgumentsForEvent(s);const x=async()=>this.removeListener(s,u);return Promise.resolve({remove:x})}async removeAllListeners(){this.listeners={};for(const s in this.windowListeners)this.removeWindowListener(this.windowListeners[s]);this.windowListeners={}}notifyListeners(s,u,c){const f=this.listeners[s];if(!f){if(c){let g=this.retainedEventArguments[s];g||(g=[]),g.push(u),this.retainedEventArguments[s]=g}return}f.forEach(g=>g(u))}hasListeners(s){var u;return!!(!((u=this.listeners[s])===null||u===void 0)&&u.length)}registerWindowListener(s,u){this.windowListeners[u]={registered:!1,windowEventName:s,pluginEventName:u,handler:c=>{this.notifyListeners(u,c)}}}unimplemented(s="not implemented"){return new Yr.Exception(s,ql.Unimplemented)}unavailable(s="not available"){return new Yr.Exception(s,ql.Unavailable)}async removeListener(s,u){const c=this.listeners[s];if(!c)return;const f=c.indexOf(u);this.listeners[s].splice(f,1),this.listeners[s].length||this.removeWindowListener(this.windowListeners[s])}addWindowListener(s){window.addEventListener(s.windowEventName,s.handler),s.registered=!0}removeWindowListener(s){s&&(window.removeEventListener(s.windowEventName,s.handler),s.registered=!1)}sendRetainedArgumentsForEvent(s){const u=this.retainedEventArguments[s];u&&(delete this.retainedEventArguments[s],u.forEach(c=>{this.notifyListeners(s,c)}))}}const $m=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),eh=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class mx extends dc{async getCookies(){const s=document.cookie,u={};return s.split(";").forEach(c=>{if(c.length<=0)return;let[f,g]=c.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");f=eh(f).trim(),g=eh(g).trim(),u[f]=g}),u}async setCookie(s){try{const u=$m(s.key),c=$m(s.value),f=`; expires=${(s.expires||"").replace("expires=","")}`,g=(s.path||"/").replace("path=",""),x=s.url!=null&&s.url.length>0?`domain=${s.url}`:"";document.cookie=`${u}=${c||""}${f}; path=${g}; ${x};`}catch(u){return Promise.reject(u)}}async deleteCookie(s){try{document.cookie=`${s.key}=; Max-Age=0`}catch(u){return Promise.reject(u)}}async clearCookies(){try{const s=document.cookie.split(";")||[];for(const u of s)document.cookie=u.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(s){return Promise.reject(s)}}async clearAllCookies(){try{await this.clearCookies()}catch(s){return Promise.reject(s)}}}sc("CapacitorCookies",{web:()=>new mx});const hx=async r=>new Promise((s,u)=>{const c=new FileReader;c.onload=()=>{const f=c.result;s(f.indexOf(",")>=0?f.split(",")[1]:f)},c.onerror=f=>u(f),c.readAsDataURL(r)}),fx=(r={})=>{const s=Object.keys(r);return Object.keys(r).map(f=>f.toLocaleLowerCase()).reduce((f,g,x)=>(f[g]=r[s[x]],f),{})},gx=(r,s=!0)=>r?Object.entries(r).reduce((c,f)=>{const[g,x]=f;let y,S;return Array.isArray(x)?(S="",x.forEach(j=>{y=s?encodeURIComponent(j):j,S+=`${g}=${y}&`}),S.slice(0,-1)):(y=s?encodeURIComponent(x):x,S=`${g}=${y}`),`${c}&${S}`},"").substr(1):null,yx=(r,s={})=>{const u=Object.assign({method:r.method||"GET",headers:r.headers},s),f=fx(r.headers)["content-type"]||"";if(typeof r.data=="string")u.body=r.data;else if(f.includes("application/x-www-form-urlencoded")){const g=new URLSearchParams;for(const[x,y]of Object.entries(r.data||{}))g.set(x,y);u.body=g.toString()}else if(f.includes("multipart/form-data")||r.data instanceof FormData){const g=new FormData;if(r.data instanceof FormData)r.data.forEach((y,S)=>{g.append(S,y)});else for(const y of Object.keys(r.data))g.append(y,r.data[y]);u.body=g;const x=new Headers(u.headers);x.delete("content-type"),u.headers=x}else(f.includes("application/json")||typeof r.data=="object")&&(u.body=JSON.stringify(r.data));return u};class xx extends dc{async request(s){const u=yx(s,s.webFetchExtra),c=gx(s.params,s.shouldEncodeUrlParams),f=c?`${s.url}?${c}`:s.url,g=await fetch(f,u),x=g.headers.get("content-type")||"";let{responseType:y="text"}=g.ok?s:{};x.includes("application/json")&&(y="json");let S,j;switch(y){case"arraybuffer":case"blob":j=await g.blob(),S=await hx(j);break;case"json":S=await g.json();break;case"document":case"text":default:S=await g.text()}const A={};return g.headers.forEach((U,R)=>{A[R]=U}),{data:S,headers:A,status:g.status,url:g.url}}async get(s){return this.request(Object.assign(Object.assign({},s),{method:"GET"}))}async post(s){return this.request(Object.assign(Object.assign({},s),{method:"POST"}))}async put(s){return this.request(Object.assign(Object.assign({},s),{method:"PUT"}))}async patch(s){return this.request(Object.assign(Object.assign({},s),{method:"PATCH"}))}async delete(s){return this.request(Object.assign(Object.assign({},s),{method:"DELETE"}))}}sc("CapacitorHttp",{web:()=>new xx});class bx extends dc{constructor(){super()}async echo(s){return console.log("ECHO",s),s}async open(s){return console.log(s),new Promise((u,c)=>{var f,g,x=s;x.handler=function(A){console.log(A.razorpay_payment_id),u({response:A})},x["modal.ondismiss"]=function(){c(JSON.stringify({code:2,description:"Payment Canceled by User"}))};var y=0;x.hasOwnProperty("retry")&&x.retry.enabled===!0&&(y=x.retry.max_count);var S=document.getElementsByTagName("script")[0],j=document.createElement("script");j.id="rzp-jssdk",j.setAttribute("src","https://checkout.razorpay.com/v1/checkout.js"),(f=S.parentNode)===null||f===void 0||f.appendChild(j),j.addEventListener("load",()=>{try{g=new window.Razorpay(x),g.open(),g.on("payment.failed",A=>{var U;y=y-1,y<0&&(console.log(A),(U=S.parentNode)===null||U===void 0||U.removeChild(j),c(A.error))})}catch(A){c({response:A})}})})}}const hh=sc("Checkout",{web:()=>Wr(()=>Promise.resolve().then(()=>vx),void 0).then(r=>new r.CheckoutWeb)}),vx=Object.freeze(Object.defineProperty({__proto__:null,Checkout:hh,CheckoutWeb:bx},Symbol.toStringTag,{value:"Module"})),jx=async(r,s={})=>{console.log("Initializing payment of "+r,s);const u=s?.keyId||void 0||"rzp_test_1234567890";if(Yr.isNativePlatform())try{const c={key:u,amount:Math.round(r*100).toString(),name:"Appointment App",description:"Consultation Fee",prefill:{email:s?.email||"test@example.com",contact:s?.phone||"9999999999"},theme:{color:"#4f46e5"},...s.options},f=await hh.open(c);return console.log(" Native Payment Success:",f),{success:!0,paymentId:f.response.razorpay_payment_id||f.response.payment_id,amount:r,timestamp:new Date().toISOString(),method:"native-razorpay",details:f.response}}catch(c){throw console.error(" Native Payment Failed:",c),new Error(c.message||"Payment failed")}else return console.log(" Using Web Mock Payment"),new Promise((c,f)=>{setTimeout(()=>{console.log(" Web Mock Payment Success"),c({success:!0,paymentId:"pay_web_"+Math.random().toString(36).substr(2,9),amount:r,timestamp:new Date().toISOString(),method:"web-mock"})},1e3)})},Sx=()=>{const{currentUser:r}=_a(),[s,u]=b.useState([]),[c,f]=b.useState(null),[g,x]=b.useState(!1),[y,S]=b.useState([]),[j,A]=b.useState(new Date().toISOString().split("T")[0]),[U,R]=b.useState(!1);b.useEffect(()=>{he()},[]);const he=async()=>{try{const E=await rx();u(E)}catch(E){console.error(E)}},I=async E=>{f(E),x(!0),await J(E.id,j)},J=async(E,de)=>{R(!0),S([]);try{const re=await sx(E,de);S(re||[])}catch(re){console.error(re)}R(!1)},W=E=>{const de=E.target.value;A(de),c&&J(c.id,de)},pe=async E=>{if(window.confirm(`Book appointment with ${c.name} at ${E.time}? Fees: ${c.consultationFee}`)){R(!0);try{const de=await jx(c.consultationFee,{doctorId:c.id,patientId:r.uid});await dx(c.id,j,E.time,de.paymentId),alert(`Booking Confirmed! Payment ID: ${de.paymentId}`),J(c.id,j)}catch(de){console.error(de),alert("Booking Failed: "+de.message)}R(!1)}};return t.jsx("div",{style:{padding:"1rem"},children:g?t.jsxs("div",{children:[t.jsx("button",{onClick:()=>x(!1),style:{marginBottom:"1rem",background:"none",border:"none",color:"var(--color-text-muted)",cursor:"pointer"},children:" Back to Doctors"}),t.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"},children:[t.jsxs("h3",{style:{marginTop:0},children:["Book with ",c.name||c.displayName]}),t.jsxs("label",{style:{display:"block",marginBottom:"1rem"},children:["Select Date:",t.jsx("input",{type:"date",value:j,onChange:W,style:{marginLeft:"0.5rem",padding:"0.5rem"}})]}),U?t.jsx("p",{children:"Loading slots..."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem"},children:y.length===0?t.jsx("p",{children:"No slots available for this date."}):y.map((E,de)=>t.jsx("button",{disabled:E.isBooked,onClick:()=>!E.isBooked&&pe(E),style:{padding:"0.75rem",background:E.isBooked?"#e2e8f0":"var(--color-bg-card)",border:E.isBooked?"none":"1px solid var(--color-primary)",color:E.isBooked?"#94a3b8":"var(--color-primary)",cursor:E.isBooked?"not-allowed":"pointer",borderRadius:"var(--radius-md)"},children:E.time},de))})]})]}):t.jsxs("div",{children:[t.jsx("h3",{children:"Available Doctors"}),t.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:s.map(E=>t.jsxs("div",{style:{padding:"1.5rem",background:"white",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",transition:"transform 0.2s"},children:[t.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--color-primary)"},children:E.name||E.displayName}),t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"var(--color-text-muted)"},children:E.specialization}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[t.jsxs("span",{style:{fontWeight:600},children:["",E.consultationFee]}),t.jsx("button",{onClick:()=>I(E),style:{padding:"0.5rem 1rem",background:"var(--color-secondary)",color:"white",border:"none",borderRadius:"var(--radius-full)"},children:"Book Now"})]}),E.hospitalName&&t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",color:"#888"},children:["@",E.hospitalName]})]},E.id))})]})})},wx=({showNotification:r})=>{const[s,u]=b.useState(!1),[c,f]=b.useState(null),[g,x]=b.useState([]),[y,S]=b.useState("all"),[j,A]=b.useState("");b.useEffect(()=>{U()},[]);const U=async()=>{try{u(!0);const W=Me(F,"config","ads"),pe=await Vt(W);pe.exists()?f(pe.data()):f({enabled:!1,adProvider:"google",googleAdSenseId:"",bookingPageAdsEnabled:!1,adPlacements:{bookingPage:!1,doctorDashboard:!1,hospitalDashboard:!1}});const E=Ce(F,"users"),de=ze(E,ce("role","==","doctor")),re=ze(E,ce("role","==","hospital")),[z,Xe]=await Promise.all([Pe(de),Pe(re)]),ct=[];z.forEach(X=>{const ue=X.data();ct.push({id:X.id,...ue,type:"doctor",adsEnabled:ue.adsEnabled||!1,pricingModel:ue.pricingModel||"full",discountPercentage:ue.discountPercentage||0})}),Xe.forEach(X=>{const ue=X.data();ct.push({id:X.id,...ue,type:"hospital",adsEnabled:ue.adsEnabled||!1,pricingModel:ue.pricingModel||"full",discountPercentage:ue.discountPercentage||0})}),x(ct)}catch(W){console.error("Error loading ads data:",W),r?.("Error loading ads configuration","error")}finally{u(!1)}},R=async()=>{try{u(!0);const W=Me(F,"config","ads");await Ft(W,c),r?.("Global ad configuration saved successfully","success")}catch(W){console.error("Error saving config:",W),r?.("Error saving configuration","error")}finally{u(!1)}},he=async(W,pe)=>{try{const E=Me(F,"users",W);await Ft(E,{adsEnabled:!pe}),x(de=>de.map(re=>re.id===W?{...re,adsEnabled:!pe}:re)),r?.("Ad settings updated","success")}catch(E){console.error("Error updating entity ads:",E),r?.("Error updating ad settings","error")}},I=async(W,pe,E=0)=>{try{const de=Me(F,"users",W);await Ft(de,{pricingModel:pe,discountPercentage:pe==="reduced"?E:0}),x(re=>re.map(z=>z.id===W?{...z,pricingModel:pe,discountPercentage:E}:z)),r?.("Pricing model updated","success")}catch(de){console.error("Error updating pricing:",de),r?.("Error updating pricing model","error")}},J=g.filter(W=>y==="doctors"?W.type==="doctor":y==="hospitals"?W.type==="hospital":!0).filter(W=>{if(!j)return!0;const pe=j.toLowerCase();return W.name?.toLowerCase().includes(pe)||W.email?.toLowerCase().includes(pe)});return s&&!c?t.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading ads configuration..."}):t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{style:{marginBottom:"10px"},children:" Ads Management"}),t.jsx("p",{style:{color:"#666",marginBottom:"30px"},children:"Configure ads to monetize your platform. Providers use the app for free, and ads generate revenue for you."}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",marginBottom:"30px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Global Ad Settings"}),t.jsxs("div",{style:{display:"grid",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:c?.enabled||!1,onChange:W=>f({...c,enabled:W.target.checked}),style:{width:"20px",height:"20px",marginRight:"10px"}}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"500"},children:"Enable Ads System Globally"})]}),t.jsx("div",{style:{padding:"6px 12px",background:"#e3f2fd",borderRadius:"20px",fontSize:"13px",color:"#1976d2",fontWeight:"500"},children:"100% Revenue to Platform"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Google AdSense Publisher ID"}),t.jsx("input",{type:"text",placeholder:"ca-pub-xxxxxxxxxxxxxxxx",value:c?.googleAdSenseId||"",onChange:W=>f({...c,googleAdSenseId:W.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Get this from your Google AdSense account"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:" Revenue Model Options"}),t.jsxs("div",{style:{padding:"15px",background:"#f0f7ff",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"14px",marginBottom:"12px",fontWeight:"600",color:"#1976d2"},children:" Flexible Pricing Options"}),t.jsxs("div",{style:{display:"grid",gap:"10px",fontSize:"13px",color:"#555"},children:[t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Full Rate:"})," Providers pay standard app usage fees (no ads)"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Reduced Rate:"})," Providers pay discounted fees + see ads in dashboard"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Free with Ads:"})," Providers pay nothing but see ads in dashboard (you make money from ads)"]})]}),t.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"#fff3cd",borderRadius:"6px",fontSize:"12px",color:"#856404"},children:[t.jsx("strong",{children:"Note:"})," Configure each provider's pricing model individually below. Booking page ads are shown to patients regardless of provider's pricing model."]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"500"},children:" Ad Placement Locations"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:c?.adPlacements?.bookingPage||!1,onChange:W=>f({...c,adPlacements:{...c?.adPlacements,bookingPage:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Booking Page (Global - All Users)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Shows ads on the appointment booking page for all patients"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:c?.adPlacements?.doctorDashboard||!1,onChange:W=>f({...c,adPlacements:{...c?.adPlacements,doctorDashboard:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Doctor Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on doctor dashboards (control per-doctor below)"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:c?.adPlacements?.hospitalDashboard||!1,onChange:W=>f({...c,adPlacements:{...c?.adPlacements,hospitalDashboard:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Hospital Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on hospital dashboards (control per-hospital below)"})]})]})]}),t.jsx("button",{onClick:R,disabled:s,style:{padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",width:"fit-content"},children:s?"Saving...":"Save Global Settings"})]})]}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Configure Pricing & Ads Per Provider"}),t.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px"},children:"Set individual pricing models and ad settings for each doctor/hospital. Mix and match based on their preferences."}),t.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:j,onChange:W=>A(W.target.value),style:{flex:1,minWidth:"250px",padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsxs("select",{value:y,onChange:W=>S(W.target.value),style:{padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",cursor:"pointer"},children:[t.jsx("option",{value:"all",children:"All Providers"}),t.jsx("option",{value:"doctors",children:"Doctors Only"}),t.jsx("option",{value:"hospitals",children:"Hospitals Only"})]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Type"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Email"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Pricing Model"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Ads"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Actions"})]})}),t.jsx("tbody",{children:J.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"},children:"No providers found"})}):J.map(W=>t.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[t.jsx("td",{style:{padding:"12px"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:W.type==="doctor"?"#e3f2fd":"#f3e5f5",color:W.type==="doctor"?"#1976d2":"#7b1fa2"},children:W.type==="doctor"?" Doctor":" Hospital"})}),t.jsx("td",{style:{padding:"12px",fontWeight:"500"},children:W.name||"N/A"}),t.jsx("td",{style:{padding:"12px",color:"#666"},children:W.email||"N/A"}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsxs("select",{value:W.pricingModel||"full",onChange:pe=>{const E=pe.target.value;if(E==="reduced"){const de=prompt("Enter discount percentage (0-100):",W.discountPercentage||"50");de!==null&&I(W.id,E,parseInt(de)||50)}else I(W.id,E)},style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #ddd",fontSize:"13px",fontWeight:"600",cursor:"pointer",background:W.pricingModel==="free"?"#e8f5e9":W.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:W.pricingModel==="free"?"#2e7d32":W.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[t.jsx("option",{value:"full",children:" Full Rate"}),t.jsxs("option",{value:"reduced",children:[" Reduced (",W.discountPercentage||0,"% off)"]}),t.jsx("option",{value:"free",children:" Free + Ads"})]})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:W.adsEnabled?"#c8e6c9":"#ffcdd2",color:W.adsEnabled?"#2e7d32":"#c62828"},children:W.adsEnabled?" ON":" OFF"})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("button",{onClick:()=>he(W.id,W.adsEnabled),style:{padding:"6px 16px",background:W.adsEnabled?"#f44336":"#4caf50",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"600",cursor:"pointer"},children:W.adsEnabled?"Disable Ads":"Enable Ads"})})]},W.id))})]})})]}),t.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e8f5e9",borderRadius:"8px",border:"1px solid #4caf50"},children:[t.jsx("h4",{style:{marginTop:0,color:"#2e7d32"},children:" How Pricing Models Work"}),t.jsxs("div",{style:{display:"grid",gap:"15px",marginBottom:0},children:[t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#1976d2",marginBottom:"5px"},children:" Full Rate (No Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"100% of app usage fees"}),t.jsx("br",{})," No ads shown in their dashboard",t.jsx("br",{})," Premium experience",t.jsx("br",{})," Calculated: appointments  rate + prescriptions  rate"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#e65100",marginBottom:"5px"},children:" Reduced Rate (With Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"discounted fees"})," (you set %)",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads)",t.jsx("br",{})," Win-win: Lower cost for them, ad revenue for you",t.jsx("br",{})," Calculated: (appointments  rate + prescriptions  rate)  (1 - discount%)"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#2e7d32",marginBottom:"5px"},children:" Free + Ads"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"$0"})," app usage fees",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads only)",t.jsx("br",{})," Great for small clinics or new sign-ups",t.jsx("br",{})," Calculated: $0 cost to provider, 100% ad revenue to you"]})]})]})]}),t.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[t.jsx("h4",{style:{marginTop:0,color:"#856404"},children:" Configuration Steps"}),t.jsxs("ol",{style:{marginBottom:0,color:"#856404",lineHeight:"1.8",fontSize:"14px"},children:[t.jsxs("li",{children:["Create a Google AdSense account at ",t.jsx("a",{href:"https://www.google.com/adsense",target:"_blank",rel:"noopener noreferrer",children:"google.com/adsense"})]}),t.jsx("li",{children:'Get your Publisher ID (starts with "ca-pub-")'}),t.jsx("li",{children:"Add the AdSense code to your website's HTML head section"}),t.jsx("li",{children:"Enable ads globally and configure placements above"}),t.jsx("li",{children:"For each provider, choose their pricing model:"}),t.jsxs("ul",{style:{marginTop:"5px",marginBottom:"5px"},children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Full Rate:"})," Disable ads, they pay full price"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Reduced Rate:"})," Enable ads, set discount %, they pay less"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Free + Ads:"})," Enable ads, they pay nothing"]})]}),t.jsx("li",{children:"Booking page ads will show to all patients regardless of pricing model"})]})]})]})},Cx=()=>{const[r,s]=b.useState("overview"),[u,c]=b.useState(!1),[f,g]=b.useState(""),[x,y]=b.useState(null),[S,j]=b.useState(!1),[A,U]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[R,he]=b.useState([]),[I,J]=b.useState([]),[W,pe]=b.useState([]),[E,de]=b.useState([]),[re,z]=b.useState(""),[Xe,ct]=b.useState([]),[X,ue]=b.useState([]),[P,tt]=b.useState(!1),[ye,at]=b.useState(null),[bt,qe]=b.useState(!1),[q,se]=b.useState(""),[xe,lt]=b.useState(""),[Y,Ae]=b.useState("all"),[ge,ae]=b.useState("all"),[ke,nt]=b.useState(null),[Ye,ft]=b.useState({appointmentCost:"",prescriptionCost:""}),[pn,kt]=b.useState(!1),[ln,Nt]=b.useState(""),[yn,wt]=b.useState(!1),[k,De]=b.useState(null);b.useEffect(()=>{const C=window.matchMedia("(max-width: 480px)"),O=G=>j(G.matches);return j(C.matches),C.addEventListener?C.addEventListener("change",O):C.addListener(O),()=>{C.removeEventListener?C.removeEventListener("change",O):C.removeListener(O)}},[]);const[je,Ge]=b.useState(!1),[Fe,An]=b.useState(null),[qn,fe]=b.useState(!1);b.useEffect(()=>{const C=new Date,O=C.getFullYear(),G=String(C.getMonth()+1).padStart(2,"0");z(`${O}-${G}`)},[]),b.useEffect(()=>{(async()=>{try{await Ei(),await Ht()}catch(O){console.error("Error initializing dashboard:",O),g("Failed to initialize dashboard. Please refresh the page.")}})()},[]),b.useEffect(()=>{if(re&&r==="payments")try{Gn()}catch(C){console.error("Error calculating payments:",C)}},[re,r]),b.useEffect(()=>{r==="payment-requests"&&Ut()},[r]),b.useEffect(()=>{if(x){const C=setTimeout(()=>y(null),3e3);return()=>clearTimeout(C)}},[x]);const xn=(C,O="success")=>{y({message:C,type:O})},Ei=async()=>{try{const C=Me(F,"config","billing"),O=await Vt(C);O.exists()&&U(O.data())}catch(C){console.error("Error loading config:",C)}},Ht=async()=>{c(!0);try{await Promise.all([Qt(),Vn(),vt(),Qn()])}catch(C){console.error("Error loading data:",C),g("Failed to load data. Please refresh.")}finally{c(!1)}},Qt=async()=>{try{const C=Ce(F,"users"),O=ze(C,ce("role","==","doctor")),G=await Pe(O),ie=[];G.forEach(Ne=>{const He=Ne.data();He.hospitalId||ie.push({id:Ne.id,uid:Ne.id,...He})}),console.log(" Individual Doctors loaded:",ie.length),he(ie)}catch(C){console.error("Error loading individual doctors:",C)}},Vn=async()=>{try{const C=Ce(F,"hospitals"),O=await Pe(C),G=[];O.forEach(Ne=>{G.push({id:Ne.id,...Ne.data()})});const ie=Ce(F,"users");for(const Ne of G){const He=ze(ie,ce("role","==","doctor"),ce("hospitalId","==",Ne.id)),At=await Pe(He);Ne.doctorCount=At.size}console.log(" Hospitals loaded:",G.length),J(G)}catch(C){console.error("Error loading hospitals:",C)}},vt=async()=>{try{const C=Ce(F,"appointments"),O=await Pe(C),G=[];O.forEach(ie=>{const Ne={id:ie.id,...ie.data()};G.push(Ne)}),console.log("Appointments loaded:",G.length),G.length>0&&console.log("Sample appointment data:",G[0]),pe(G)}catch(C){console.error("Error loading appointments:",C)}},Qn=async()=>{try{const C=Ce(F,"prescriptions"),O=await Pe(C),G=[];O.forEach(ie=>{const Ne={id:ie.id,...ie.data()};G.push(Ne)}),console.log(" Prescriptions loaded:",G.length),G.length>0&&console.log(" Sample prescription data:",G[0]),de(G)}catch(C){console.error("Error loading prescriptions:",C)}},Ut=async()=>{try{tt(!0),console.log(" Loading payment requests...");const C=Ce(F,"payments"),O=await Pe(C);console.log(" Payment requests snapshot size:",O.size);const G=[];O.forEach(ie=>{const Ne={id:ie.id,...ie.data()};console.log("Payment document:",Ne),G.push(Ne)}),G.sort((ie,Ne)=>{const He=ie.createdAt?new Date(ie.createdAt):new Date(0);return(Ne.createdAt?new Date(Ne.createdAt):new Date(0))-He}),console.log(" Payment requests loaded successfully:",G.length),ue(G),tt(!1)}catch(C){console.error(" Error loading payment requests:",C),console.error("Error code:",C.code),console.error("Error message:",C.message),ue([]),tt(!1),C.code!=="permission-denied"&&C.code!=="not-found"&&xn("Error: "+C.message,"error")}},sn=async()=>{try{c(!0);const C=Me(F,"config","billing");await Ft(C,{...A,updatedAt:new Date().toISOString()}),alert(" Global configuration updated successfully!")}catch{try{const O=Me(F,"config","billing");await ti(O,{...A,updatedAt:new Date().toISOString()}),alert(" Global configuration created successfully!")}catch(O){console.error("Error saving config:",O),g("Failed to save configuration.")}}finally{c(!1)}},M=(C,O)=>{nt({...C,type:O}),ft({appointmentCost:C.customRates?.appointmentCost||"",prescriptionCost:C.customRates?.prescriptionCost||""})},ee=async()=>{if(ke)try{c(!0);const C=ke.type==="doctor"?"users":"hospitals",O=Me(F,C,ke.id),G={};Ye.appointmentCost&&(G.appointmentCost=parseFloat(Ye.appointmentCost)),Ye.prescriptionCost&&(G.prescriptionCost=parseFloat(Ye.prescriptionCost)),await Ft(O,{customRates:Object.keys(G).length>0?G:null}),ke.type==="doctor"?await Qt():await Vn(),nt(null),alert(" Custom rates updated successfully!")}catch(C){console.error("Error saving custom rates:",C),g("Failed to save custom rates.")}finally{c(!1)}},Se=async C=>{if(confirm(`Verify payment of ${C.currency} ${C.amount?.toFixed(2)} from ${C.hospitalName||C.doctorName}?`))try{c(!0);const O=Me(F,"payments",C.id);await Ft(O,{status:"completed",verifiedAt:new Date().toISOString(),verifiedBy:"admin"}),xn(" Payment verified successfully!","success"),await Ut(),(r==="payments"||r==="billing-overview")&&Gn()}catch(O){console.error("Error verifying payment:",O),xn("Failed to verify payment","error")}finally{c(!1)}},we=async C=>{const O=prompt("Enter rejection reason (optional):");if(O!==null)try{c(!0);const G=Me(F,"payments",C.id);await Ft(G,{status:"failed",rejectedAt:new Date().toISOString(),rejectedBy:"admin",rejectionReason:O||"No reason provided"}),xn(" Payment rejected","success"),await Ut()}catch(G){console.error("Error rejecting payment:",G),xn("Failed to reject payment","error")}finally{c(!1)}},be=C=>{at(C),qe(!0)},Re=(C,O,G)=>{De({entity:C,type:O,...G}),wt(!0)},Ct=async()=>{if(!k||k.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${A.currency} ${k.pending.toFixed(2)} as paid for ${k.entity.name||k.entity.displayName}?`))try{c(!0);const O=k.type==="doctor"?"users":"hospitals",G=Me(F,O,k.entity.id),Ne=(k.entity.paidAmount||0)+k.pending;await Ft(G,{paidAmount:Ne,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:k.pending}),await ga(Ce(F,"paymentHistory"),{entityType:k.type,entityId:k.entity.id,amount:k.pending,month:re,paidAt:new Date().toISOString()}),await bn(k.entity,k.type,re),alert(" Payment marked as paid!"),wt(!1),k.type==="doctor"?await Qt():await Vn(),await vt(),await Qn()}catch(O){console.error(" Error marking payment from modal:",O),console.error("Error details:",O.message,O.code),alert(`Failed to mark payment as paid: ${O.message||"Unknown error"}`),g(`Failed to mark payment as paid: ${O.message||"Unknown error"}`)}finally{c(!1)}},Nn=async()=>{if(!ln||!ln.includes("@")){alert("Please enter a valid email address");return}if(window.confirm(`Create new admin account for: ${ln}?

The user must register with this email first, then you can set their role to admin.`))try{c(!0);const O=Ce(F,"users"),G=ze(O,ce("email","==",ln)),ie=await Pe(G);if(ie.empty){alert(" User not found. The user must register first before being made an admin.");return}const Ne=ie.docs[0],He=Me(F,"users",Ne.id);await Ft(He,{role:"admin"}),alert(` User ${ln} is now an admin!`),kt(!1),Nt("")}catch(O){console.error("Error creating admin:",O),g(O.message),g("Failed to save custom rates.")}finally{c(!1)}},dn=async(C,O,G)=>{const ie=!O,Ne=ie?"enable":"disable";if(console.log(" Toggling provider status:",{providerId:C,currentStatus:O,newStatus:ie,providerType:G}),!!window.confirm(`Are you sure you want to ${Ne} this ${G}?

${ie?"They will appear in the booking system.":"They will be hidden from the booking system."}`))try{c(!0);const At=G==="doctor"?"users":"hospitals",Ve=Me(F,At,C);console.log(" Updating document:",At,C),await Ft(Ve,{enabled:ie,lastStatusChange:new Date().toISOString()}),console.log(" Successfully updated status"),xn(` ${G==="doctor"?"Doctor":"Hospital"} ${Ne}d successfully!`,"success"),G==="doctor"?await Qt():await Vn()}catch(At){console.error(` Error toggling ${G} status:`,At),console.error("Error details:",At.code,At.message),xn(` Failed to ${Ne} ${G}: ${At.message||"Permission denied"}`,"error")}finally{c(!1)}},Gn=()=>{if(console.log(" Calculating payments for:",re),!re||!R||!I||!W||!E){console.log(" Skipping payment calculation - data not ready");return}const C=[];R.forEach(O=>{const G=Rt(O,"doctor",re);C.push({type:"doctor",entity:O,...G})}),I.forEach(O=>{const G=Rt(O,"hospital",re);C.push({type:"hospital",entity:O,...G})}),console.log(" Payment data calculated:",C.length),ct(C)},Rt=(C,O,G)=>{console.log(" Calculating billing for:",{type:O,entityId:C.id,entityName:C.name||C.displayName,month:G,totalAppointments:W.length,totalPrescriptions:E.length});const ie=W.filter(Je=>{const Wn=O==="doctor"?Je.doctorId===C.uid&&!Je.hospitalId:Je.hospitalId===C.id;let St=Je.date||Je.appointmentDate||Je.createdAt||Je.timestamp;St&&typeof St=="object"&&St.toDate&&(St=St.toDate().toISOString().split("T")[0]),St&&typeof St=="string"&&(St=St.substring(0,7));const Xn=St&&St===G,Kn=Je.paymentStatus==="paid",Mi=!Je.paymentStatus||Je.paymentStatus==="unpaid"||Je.paymentStatus!=="paid";return console.log("  Checking appointment:",{aptId:Je.id,doctorId:Je.doctorId,hospitalId:Je.hospitalId,date:Je.date,appointmentDate:Je.appointmentDate,createdAt:Je.createdAt,extractedDate:St,month:G,paymentStatus:Je.paymentStatus,isPaid:Kn,isUnpaid:Mi,matchesEntity:Wn,matchesMonth:Xn,included:Wn&&Xn&&Mi}),Wn&&Xn&&Mi}),Ne=E.filter(Je=>{const Wn=O==="doctor"?Je.doctorId===C.uid&&!Je.hospitalId:Je.hospitalId===C.id;let St=Je.createdAt||Je.date||Je.prescriptionDate||Je.timestamp;St&&typeof St=="object"&&St.toDate&&(St=St.toDate().toISOString().split("T")[0]),St&&typeof St=="string"&&(St=St.substring(0,7));const Xn=St&&St===G,Kn=!Je.paymentStatus||Je.paymentStatus==="unpaid"||Je.paymentStatus!=="paid";return console.log("  Checking prescription:",{prescId:Je.id,doctorId:Je.doctorId,hospitalId:Je.hospitalId,createdAt:Je.createdAt,extractedDate:St,month:G,paymentStatus:Je.paymentStatus,matchesEntity:Wn,matchesMonth:Xn,isUnpaid:Kn,included:Wn&&Xn&&Kn}),Wn&&Xn&&Kn});console.log("  Result:",{appointments:ie.length,prescriptions:Ne.length});const He=_l(C,A);console.log("  Using rates:",He);const At=ie.length*(He.appointmentCost||0),Ve=Ne.length*(He.prescriptionCost||0),Oe=At+Ve,Kt=C.paidAmount||0,Si=Oe-Kt;return{appointments:ie.length,prescriptions:Ne.length,appointmentRevenue:At,prescriptionRevenue:Ve,totalRevenue:Oe,paid:Kt,pending:Math.max(0,Si),currency:He.currency,symbol:He.symbol}},on=async C=>{if(C.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${A.currency} ${C.pending.toFixed(2)} as paid for ${C.entity.name||C.entity.displayName}?`))try{c(!0);const G=C.type==="doctor"?"users":"hospitals",ie=Me(F,G,C.entity.id),He=(C.entity.paidAmount||0)+C.pending;await Ft(ie,{paidAmount:He,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:C.pending}),await ga(Ce(F,"paymentHistory"),{entityType:C.type,entityId:C.entity.id,amount:C.pending,month:re,paidAt:new Date().toISOString()}),await bn(C.entity,C.type,re),alert(" Payment marked as paid!"),C.type==="doctor"?await Qt():await Vn(),await vt(),await Qn()}catch(G){console.error(" Error marking payment:",G),console.error("Error details:",G.message,G.code),alert(`Failed to mark payment as paid: ${G.message||"Unknown error"}`),g(`Failed to mark payment as paid: ${G.message||"Unknown error"}`)}finally{c(!1)}},bn=async(C,O,G)=>{try{console.log(" Marking items as paid for:",{entity:C.name||C.displayName,type:O,month:G});const ie=W.filter(He=>{const At=O==="doctor"?He.doctorId===C.uid&&!He.hospitalId:He.hospitalId===C.id;let Ve=He.date||He.appointmentDate||He.createdAt||He.timestamp;return Ve&&typeof Ve=="object"&&Ve.toDate&&(Ve=Ve.toDate().toISOString().split("T")[0]),Ve&&typeof Ve=="string"&&(Ve=Ve.substring(0,7)),At&&(Ve&&Ve===G)&&He.paymentStatus!=="paid"}),Ne=E.filter(He=>{const At=O==="doctor"?He.doctorId===C.uid&&!He.hospitalId:He.hospitalId===C.id;let Ve=He.createdAt||He.date||He.prescriptionDate||He.timestamp;return Ve&&typeof Ve=="object"&&Ve.toDate&&(Ve=Ve.toDate().toISOString().split("T")[0]),Ve&&typeof Ve=="string"&&(Ve=Ve.substring(0,7)),At&&(Ve&&Ve===G)&&He.paymentStatus!=="paid"});console.log(` Found ${ie.length} appointments and ${Ne.length} prescriptions to mark as paid`);for(const He of ie)try{const At=Me(F,"appointments",He.id);await Ft(At,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:G}),console.log(` Marked appointment ${He.id} as paid`)}catch(At){console.error(` Error marking appointment ${He.id} as paid:`,At)}for(const He of Ne)try{const At=Me(F,"prescriptions",He.id);await Ft(At,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:G}),console.log(` Marked prescription ${He.id} as paid`)}catch(At){console.error(` Error marking prescription ${He.id} as paid:`,At)}console.log(` Marked ${ie.length} appointments and ${Ne.length} prescriptions as paid`)}catch(ie){throw console.error("Error marking items as paid:",ie),ie}},Bn=async C=>{try{let O=null,G=null;if(C.doctorId){const ie=Me(F,"users",C.doctorId),Ne=await Vt(ie);Ne.exists()&&(O={id:Ne.id,...Ne.data()})}if(C.hospitalId){const ie=Me(F,"hospitals",C.hospitalId),Ne=await Vt(ie);Ne.exists()&&(G={id:Ne.id,...Ne.data()})}An({...C,doctorInfo:O,hospitalInfo:G}),Ge(!0)}catch(O){console.error("Error loading appointment details:",O),xn(" Failed to load appointment details","error")}},Ze=()=>{if(!W||!E)return t.jsx("div",{style:m.loading,children:"Loading overview data..."});const C=W.filter(G=>G.paymentStatus!=="paid"),O=E.filter(G=>G.paymentStatus!=="paid");return t.jsxs("div",{style:m.overview,children:[t.jsx("h2",{children:" System Overview"}),t.jsxs("div",{style:m.statsGrid,children:[t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:R?.length||0}),t.jsx("div",{style:m.statLabel,children:"Individual Doctors"})]}),t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:I?.length||0}),t.jsx("div",{style:m.statLabel,children:"Hospitals"})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>s("payments"),children:[t.jsx("div",{style:m.statIcon,children:t.jsx(an,{size:20})}),t.jsx("div",{style:m.statValue,children:W?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Appointments"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[C?.length||0," unpaid"]})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>s("payments"),children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:E?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Prescriptions"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[O?.length||0," unpaid"]})]})]}),t.jsxs("div",{style:m.recentSection,children:[t.jsxs("div",{style:m.recentHeader,children:[t.jsxs("h3",{children:[t.jsx(an,{size:18})," Recent Appointments"]}),t.jsxs("label",{style:m.toggleLabel,children:[t.jsx("input",{type:"checkbox",checked:qn,onChange:G=>fe(G.target.checked)}),t.jsx("span",{style:{marginLeft:"0.5rem"},children:"Show paid items"})]})]}),t.jsxs("div",{style:m.tableContainer,children:[t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Patient"}),t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:(qn?W:C).slice(0,10).map(G=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:G.date||"N/A"}),t.jsx("td",{style:m.td,children:G.patientName||"N/A"}),t.jsx("td",{style:m.td,children:G.doctorName||"N/A"}),t.jsx("td",{style:m.td,children:G.hospitalName||"N/A"}),t.jsx("td",{style:m.td,children:G.status||"pending"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:G.paymentStatus==="paid"?"#27ae60":"#e74c3c",color:"white"},children:G.paymentStatus==="paid"?" Paid":" Unpaid"})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>Bn(G),style:m.viewButton,children:" View Details"})})]},G.id))})]}),(qn?W:C).length===0&&t.jsx("div",{style:m.emptyState,children:"No appointments found"})]})]}),t.jsxs("div",{style:m.infoBox,children:[t.jsx("h3",{children:" How This System Works"}),t.jsxs("ul",{style:m.infoList,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Individual Doctors:"})," Billed separately per appointment & prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Hospital Doctors:"})," All billing aggregated at hospital level"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Custom Rates:"})," Override global rates per doctor or hospital"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Monthly Tracking:"})," View and manage payments by month"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Payment Status:"})," Once paid, appointments/prescriptions are marked and hidden from billing"]})]})]}),t.jsxs("div",{style:m.adminSection,children:[t.jsx("h3",{children:" Admin Management"}),t.jsx("p",{style:m.subtitle,children:"Create new admin users"}),t.jsx("button",{onClick:()=>kt(!0),style:m.createAdminButton,children:" Create New Admin"})]})]})},ni=()=>t.jsxs("div",{style:m.configSection,children:[t.jsx("h2",{children:" Multi-Currency Configuration"}),t.jsx("p",{style:m.subtitle,children:"Set rates for different currencies. Currency is auto-selected based on doctor/hospital country."}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Currency Logic:"})," India  INR, All others  GBP"]}),A.rates?t.jsxs("div",{style:m.configForm,children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#fff3e0",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#e65100"},children:" INR (India)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:A.rates.INR?.appointmentCost||500,onChange:C=>U({...A,rates:{...A.rates,INR:{...A.rates.INR,appointmentCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"500"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:A.rates.INR?.prescriptionCost||200,onChange:C=>U({...A,rates:{...A.rates,INR:{...A.rates.INR,prescriptionCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"200"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#e8f5e9",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#2e7d32"},children:" GBP (Default)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:A.rates.GBP?.appointmentCost||5,onChange:C=>U({...A,rates:{...A.rates,GBP:{...A.rates.GBP,appointmentCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"5"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:A.rates.GBP?.prescriptionCost||2,onChange:C=>U({...A,rates:{...A.rates,GBP:{...A.rates.GBP,prescriptionCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"2"})]})]}),t.jsx("button",{onClick:sn,style:m.saveButton,disabled:u,children:u?"Saving...":" Save Multi-Currency Configuration"})]}):t.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[t.jsx("p",{style:{marginBottom:"1rem",color:"#666"},children:"Multi-currency not configured yet. Click below to set it up."}),t.jsx("button",{onClick:()=>window.location.href="/setup-multi-currency",style:{...m.saveButton,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:" Setup Multi-Currency"})]})]}),jt=()=>{if(!R)return t.jsx("div",{style:m.loading,children:"Loading doctors..."});const C=R.filter(O=>{const G=q.toLowerCase(),ie=!q||O.displayName?.toLowerCase().includes(G)||O.email?.toLowerCase().includes(G)||O.specialization?.toLowerCase().includes(G)||O.city?.toLowerCase().includes(G),Ne=O.enabled!==!1;return ie&&(Y==="all"||Y==="enabled"&&Ne||Y==="disabled"&&!Ne)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Individual Doctors (",R?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Doctors not affiliated with any hospital"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search doctors by name, email, specialization, location...",value:q,onChange:O=>se(O.target.value),style:m.searchInput}),t.jsxs("select",{value:Y,onChange:O=>Ae(O.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Doctors (",R?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",R?.filter(O=>O.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",R?.filter(O=>O.enabled===!1).length||0,")"]})]})]}),C.length===0?t.jsx("div",{style:m.emptyState,children:q||Y!=="all"?"No doctors match your search/filter criteria":"No individual doctors found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Name"}),t.jsx("th",{style:m.th,children:"Specialization"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(O=>{const G=Rt(O,"doctor",re),ie=O.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:ie?"#27ae60":"#e74c3c",color:"white"},children:ie?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:O.displayName||"N/A"}),t.jsx("td",{style:m.td,children:O.specialization||"N/A"}),t.jsx("td",{style:m.td,children:O.city?`${O.city}, ${O.country}`:"N/A"}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.appointmentCost||G.appointmentRevenue/Math.max(G.appointments,1),O.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.prescriptionCost||G.prescriptionRevenue/Math.max(G.prescriptions,1),O.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:G.pending>0?"#e74c3c":"#27ae60"},children:[G.symbol,G.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>dn(O.id,ie,"doctor"),style:{...m.toggleButton,backgroundColor:ie?"#e74c3c":"#27ae60"},children:ie?" Disable":" Enable"}),t.jsx("button",{onClick:()=>M(O,"doctor"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>Re(O,"doctor",G),style:m.viewButton,children:" View Payment"})]})})]},O.id)})})]})})]})},Xt=()=>{if(!I)return t.jsx("div",{style:m.loading,children:"Loading hospitals..."});const C=I.filter(O=>{const G=xe.toLowerCase(),ie=!xe||O.name?.toLowerCase().includes(G)||O.email?.toLowerCase().includes(G)||O.city?.toLowerCase().includes(G),Ne=O.enabled!==!1;return ie&&(ge==="all"||ge==="enabled"&&Ne||ge==="disabled"&&!Ne)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Hospitals (",I?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Hospital billing includes all affiliated doctors"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search hospitals by name, email, location...",value:xe,onChange:O=>lt(O.target.value),style:m.searchInput}),t.jsxs("select",{value:ge,onChange:O=>ae(O.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Hospitals (",I?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",I?.filter(O=>O.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",I?.filter(O=>O.enabled===!1).length||0,")"]})]})]}),C.length===0?t.jsx("div",{style:m.emptyState,children:xe||ge!=="all"?"No hospitals match your search/filter criteria":"No hospitals found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Hospital Name"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Doctors Count"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(O=>{const G=Rt(O,"hospital",re),ie=O.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:ie?"#27ae60":"#e74c3c",color:"white"},children:ie?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:O.name||"N/A"}),t.jsx("td",{style:m.td,children:O.city?`${O.city}, ${O.country}`:"N/A"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:m.doctorCount,children:O.doctorCount||0})}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.appointmentCost||G.appointmentRevenue/Math.max(G.appointments,1),O.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.prescriptionCost||G.prescriptionRevenue/Math.max(G.prescriptions,1),O.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:G.pending>0?"#e74c3c":"#27ae60"},children:[G.symbol,G.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>dn(O.id,ie,"hospital"),style:{...m.toggleButton,backgroundColor:ie?"#e74c3c":"#27ae60"},children:ie?" Disable":" Enable"}),t.jsx("button",{onClick:()=>M(O,"hospital"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>Re(O,"hospital",G),style:m.viewButton,children:" View Payment"})]})})]},O.id)})})]})})]})},Ot=()=>t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Tracking"}),t.jsxs("div",{style:m.monthSelector,children:[t.jsx("label",{style:m.label,children:"Select Month:"}),t.jsx("input",{type:"month",value:re,onChange:C=>z(C.target.value),style:m.input})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Individual Doctors"}),Xe.filter(C=>C.type==="doctor").length===0?t.jsx("div",{style:m.emptyState,children:"No individual doctor payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:Xe.filter(C=>C.type==="doctor").map(C=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:C.entity.displayName}),t.jsx("td",{style:m.td,children:C.appointments}),t.jsx("td",{style:m.td,children:C.prescriptions}),t.jsxs("td",{style:m.td,children:[A.currency," ",C.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[A.currency," ",C.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:C.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",C.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>on(C),style:m.payButton,disabled:C.pending<=0,children:" Mark Paid"})})]},C.entity.id))})]})})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Hospitals"}),Xe.filter(C=>C.type==="hospital").length===0?t.jsx("div",{style:m.emptyState,children:"No hospital payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:Xe.filter(C=>C.type==="hospital").map(C=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:C.entity.name}),t.jsx("td",{style:m.td,children:C.appointments}),t.jsx("td",{style:m.td,children:C.prescriptions}),t.jsxs("td",{style:m.td,children:[A.currency," ",C.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[A.currency," ",C.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:C.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",C.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>on(C),style:m.payButton,disabled:C.pending<=0,children:" Mark Paid"})})]},C.entity.id))})]})})]})]}),$e=()=>{const C=X.filter(ie=>ie.status==="pending"),O=X.filter(ie=>ie.status==="completed"),G=X.filter(ie=>ie.status==="failed");return t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Requests"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Review and verify payment submissions from hospitals and individual doctors"}),P?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment requests..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#ff9800",marginBottom:"1rem"},children:[" Pending Verification (",C.length,")"]}),C.length===0?t.jsx("div",{style:m.emptyState,children:" No pending payment requests"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Payment Type"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("strong",{children:ie.hospitalName||ie.doctorName})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ie.hospitalId?"#e3f2fd":"#f3e5f5",color:ie.hospitalId?"#1976d2":"#7b1fa2",fontSize:"0.85rem",fontWeight:"600"},children:ie.hospitalId?" Hospital":" Doctor"})}),t.jsx("td",{style:m.td,children:t.jsxs("strong",{style:{color:"#2e7d32",fontSize:"1.1rem"},children:[ie.currency," ",ie.amount?.toFixed(2)]})}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ie.type==="full"?"#e8f5e9":"#fff3e0",color:ie.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:ie.type==="full"?"Full Payment":"Partial Payment"})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>be(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#2196f3"},children:" View"}),t.jsx("button",{onClick:()=>Se(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#4caf50"},children:" Verify"}),t.jsx("button",{onClick:()=>we(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#f44336"},children:" Reject"})]})})]},ie.id))})]})})]}),t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#4caf50",marginBottom:"1rem"},children:[" Verified Payments (",O.length,")"]}),O.length===0?t.jsx("div",{style:m.emptyState,children:"No verified payments yet"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Verified"})]})}),t.jsx("tbody",{children:O.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:ie.hospitalName||ie.doctorName}),t.jsx("td",{style:m.td,children:ie.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[ie.currency," ",ie.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:ie.verifiedAt?new Date(ie.verifiedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]},ie.id))})]})})]}),G.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{style:{color:"#f44336",marginBottom:"1rem"},children:[" Rejected Payments (",G.length,")"]}),t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Rejected"}),t.jsx("th",{style:m.th,children:"Reason"})]})}),t.jsx("tbody",{children:G.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:ie.hospitalName||ie.doctorName}),t.jsx("td",{style:m.td,children:ie.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[ie.currency," ",ie.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:ie.rejectedAt?new Date(ie.rejectedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}),t.jsx("td",{style:m.td,children:ie.rejectionReason||"N/A"})]},ie.id))})]})})]})]})]})};return t.jsxs("div",{style:m.container,children:[x&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"15px 25px",borderRadius:"10px",background:x.type==="error"?"#f44336":"#4caf50",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e4,animation:"slideIn 0.3s ease-out"},children:x.message}),t.jsxs("div",{style:m.header,children:[t.jsx("h1",{style:m.title,children:" Admin Dashboard - Billing System"}),f&&t.jsx("div",{style:m.error,children:f})]}),t.jsx("div",{style:m.tabs,children:S?t.jsx("select",{value:r,onChange:C=>s(C.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select admin tab",children:["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(C=>t.jsx("option",{value:C,children:C==="overview"?"Overview":C.charAt(0).toUpperCase()+C.slice(1)},C))}):["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(C=>t.jsxs("button",{onClick:()=>s(C),style:{...m.tab,...r===C?m.activeTab:{}},children:[C==="overview"&&" Overview",C==="config"&&" Config",C==="doctors"&&" Doctors",C==="hospitals"&&" Hospitals",C==="billing-overview"&&" Billing Overview",C==="payment-requests"&&" Payment Requests",C==="ads"&&" Ads & Pricing"]},C))}),t.jsxs("div",{style:m.content,children:[u&&t.jsx("div",{style:m.loading,children:"Loading..."}),r==="overview"&&Ze(),r==="config"&&ni(),r==="doctors"&&jt(),r==="hospitals"&&Xt(),(r==="payments"||r==="billing-overview")&&Ot(),r==="payment-requests"&&$e(),r==="ads"&&t.jsx(wx,{showNotification:xn})]}),ke&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Edit Custom Rates"}),t.jsx("p",{style:m.modalSubtitle,children:ke.type==="doctor"?`Doctor: ${ke.displayName}`:`Hospital: ${ke.name}`}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Appointment Cost (leave empty for global rate: ",A.currency," ",A.appointmentCost,")"]}),t.jsx("input",{type:"number",value:Ye.appointmentCost,onChange:C=>ft({...Ye,appointmentCost:C.target.value}),style:m.input,placeholder:`Global: ${A.appointmentCost}`})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Prescription Cost (leave empty for global rate: ",A.currency," ",A.prescriptionCost,")"]}),t.jsx("input",{type:"number",value:Ye.prescriptionCost,onChange:C=>ft({...Ye,prescriptionCost:C.target.value}),style:m.input,placeholder:`Global: ${A.prescriptionCost}`})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:ee,style:m.saveButton,children:" Save"}),t.jsx("button",{onClick:()=>nt(null),style:m.cancelButton,children:" Cancel"})]})]})}),yn&&k&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Details"}),t.jsx("p",{style:m.modalSubtitle,children:k.type==="doctor"?`Doctor: ${k.entity.displayName}`:`Hospital: ${k.entity.name}`}),t.jsxs("p",{style:m.modalSubtitle,children:["Month: ",re]}),t.jsxs("div",{style:m.paymentDetails,children:[t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Appointments:"}),t.jsxs("span",{children:[k.appointments,"  ",A.currency," ",k.appointmentRevenue/(k.appointments||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[A.currency," ",k.appointmentRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Prescriptions:"}),t.jsxs("span",{children:[k.prescriptions,"  ",A.currency," ",k.prescriptionRevenue/(k.prescriptions||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[A.currency," ",k.prescriptionRevenue.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold"},children:"Total Revenue:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.2rem",color:"#667eea"},children:[A.currency," ",k.totalRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Already Paid:"}),t.jsx("span",{}),t.jsxs("span",{style:{color:"#27ae60"},children:[A.currency," ",k.paid.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Pending:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.3rem",color:k.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",k.pending.toFixed(2)]})]})]}),t.jsxs("div",{style:m.modalActions,children:[k.pending>0&&t.jsx("button",{onClick:Ct,style:m.saveButton,children:" Mark as Paid"}),t.jsx("button",{onClick:()=>wt(!1),style:m.cancelButton,children:" Close"})]})]})}),pn&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Create New Admin"}),t.jsx("p",{style:m.modalSubtitle,children:"Enter the email of the user you want to make an admin. The user must be registered first."}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:"User Email"}),t.jsx("input",{type:"email",value:ln,onChange:C=>Nt(C.target.value),style:m.input,placeholder:"user@example.com"})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:Nn,style:m.saveButton,children:" Make Admin"}),t.jsx("button",{onClick:()=>{kt(!1),Nt("")},style:m.cancelButton,children:" Cancel"})]})]})}),je&&Fe&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Patient Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:Fe.patientName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:Fe.patientEmail||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Phone:"}),t.jsx("span",{children:Fe.patientPhone||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Doctor Information"}),Fe.doctorInfo?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:Fe.doctorInfo.displayName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:Fe.doctorInfo.email||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Specialization:"}),t.jsx("span",{children:Fe.doctorInfo.specialization||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:Fe.hospitalId?"#3498db":"#9b59b6"},children:Fe.hospitalId?" Hospital Doctor":" Individual Doctor"})]})]}):t.jsx("div",{children:"Doctor information not available"})]}),Fe.hospitalInfo&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Hospital Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:Fe.hospitalInfo.name||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Location:"}),t.jsx("span",{children:Fe.hospitalInfo.city?`${Fe.hospitalInfo.city}, ${Fe.hospitalInfo.country}`:"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:Fe.hospitalInfo.email||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Date:"}),t.jsx("span",{children:Fe.date||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Time:"}),t.jsx("span",{children:Fe.time||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsx("span",{children:Fe.status||"pending"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Status:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:Fe.paymentStatus==="paid"?"#27ae60":"#e74c3c"},children:Fe.paymentStatus==="paid"?" Paid":" Unpaid"})]}),Fe.paymentStatus==="paid"&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Paid At:"}),t.jsx("span",{children:new Date(Fe.paidAt).toLocaleString()})]})]})]}),t.jsx("div",{style:m.modalActions,children:t.jsx("button",{onClick:()=>Ge(!1),style:m.cancelButton,children:" Close"})})]})}),bt&&ye&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Request Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Entity Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:t.jsx("strong",{children:ye.hospitalName||ye.doctorName})})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:ye.hospitalId?"#3498db":"#9b59b6"},children:ye.hospitalId?" Hospital":" Individual Doctor"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Payment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Amount:"}),t.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#2e7d32"},children:[ye.currency," ",ye.amount?.toFixed(2)]})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Method:"}),t.jsx("span",{children:ye.paymentMethod})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Type:"}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ye.type==="full"?"#e8f5e9":"#fff3e0",color:ye.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:ye.type==="full"?"Full Payment":"Partial Payment"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ye.status==="completed"?"#4caf50":ye.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[ye.status==="completed"&&" Verified",ye.status==="pending"&&" Pending",ye.status==="failed"&&" Rejected"]})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Timeline"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Submitted:"}),t.jsx("span",{children:new Date(ye.createdAt).toLocaleString()})]}),ye.verifiedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Verified:"}),t.jsx("span",{children:new Date(ye.verifiedAt).toLocaleString()})]}),ye.rejectedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Rejected:"}),t.jsx("span",{children:new Date(ye.rejectedAt).toLocaleString()})]})]}),ye.description&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Description"}),t.jsx("p",{style:{margin:0,color:"#666"},children:ye.description})]}),ye.rejectionReason&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Rejection Reason"}),t.jsx("p",{style:{margin:0,color:"#e74c3c"},children:ye.rejectionReason})]})]}),t.jsxs("div",{style:m.modalActions,children:[ye.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{qe(!1),Se(ye)},style:{...m.saveButton,background:"#4caf50"},children:" Verify Payment"}),t.jsx("button",{onClick:()=>{qe(!1),we(ye)},style:{...m.saveButton,background:"#f44336"},children:" Reject Payment"})]}),t.jsx("button",{onClick:()=>{qe(!1),at(null)},style:m.cancelButton,children:"Close"})]})]})})]})},m={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",color:"white",textAlign:"center",marginBottom:"1rem"},error:{background:"#e74c3c",color:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},tabs:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},tab:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",background:"rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s"},activeTab:{background:"white",color:"#667eea",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)"},content:{background:"white",borderRadius:"12px",padding:"2rem",minHeight:"500px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},loading:{textAlign:"center",padding:"2rem",fontSize:"1.2rem",color:"#667eea"},overview:{},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",color:"white"},statIcon:{fontSize:"2.5rem",marginBottom:"0.5rem"},statValue:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},statLabel:{fontSize:"0.9rem",opacity:.9},infoBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},infoList:{lineHeight:"1.8",marginLeft:"1.5rem"},section:{},subtitle:{color:"#666",marginBottom:"1.5rem"},searchContainer:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},searchInput:{flex:"1 1 300px",padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},filterSelect:{padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",background:"white",cursor:"pointer",minWidth:"200px"},statusBadge:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600"},toggleButton:{color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"opacity 0.3s"},configSection:{},configForm:{maxWidth:"600px"},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},saveButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},tableContainer:{overflowX:"auto",marginTop:"1rem"},table:{width:"100%",borderCollapse:"collapse"},th:{background:"#667eea",color:"white",padding:"1rem",textAlign:"left",fontWeight:"600"},tr:{borderBottom:"1px solid #e0e0e0"},td:{padding:"1rem"},customBadge:{display:"inline-block",marginLeft:"0.5rem",padding:"0.25rem 0.5rem",background:"#f39c12",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},doctorCount:{display:"inline-block",padding:"0.25rem 0.75rem",background:"#3498db",color:"white",borderRadius:"12px",fontWeight:"600"},editButton:{background:"#3498db",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},emptyState:{textAlign:"center",padding:"3rem",color:"#999",fontSize:"1.1rem"},monthSelector:{marginBottom:"2rem",display:"flex",alignItems:"center",gap:"1rem"},paymentSection:{marginBottom:"3rem"},pending:{fontWeight:"bold",fontSize:"1.1rem"},payButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},modalSubtitle:{color:"#666",marginBottom:"1.5rem"},modalActions:{display:"flex",gap:"1rem",marginTop:"1.5rem"},cancelButton:{background:"#e74c3c",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},adminSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},createAdminButton:{background:"#667eea",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s",marginTop:"1rem"},viewButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},paymentDetails:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"1rem"},paymentRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",padding:"0.75rem 0",fontSize:"0.95rem"},recentSection:{marginTop:"2rem"},recentHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},toggleLabel:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.95rem"},detailsGrid:{display:"grid",gridTemplateColumns:"1fr",gap:"1.5rem",marginTop:"1rem"},detailSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1rem"},detailRow:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #e0e0e0"},detailLabel:{fontWeight:"600",color:"#666"}},Ax=()=>{const{userProfile:r,currentUser:s,loading:u}=_a(),c=ol(),[f,g]=b.useState(!1),[x,y]=b.useState({displayName:"",role:"",specialization:"",phone:"",country:"",state:"",city:"",address:""}),[S,j]=b.useState(!1);b.useEffect(()=>{console.log("Dashboard useEffect:",{currentUser:s?.uid,userProfile:r,loading:u,hasRole:r?.role});const I=()=>!r||!r.role||!r.phone?!0:r.role==="doctor"?!r.specialization||!r.country||!r.state||!r.city:r.role==="hospital"?!r.country||!r.state||!r.city||!r.address:!1;if(s){if(!r){console.log("Dashboard: Waiting for userProfile to load...");return}I()?(j(!0),y({displayName:r.displayName||s.displayName||s.email||"",role:r.role||"",specialization:r.specialization||"",phone:r.phone||"",country:r.country||"",state:r.state||"",city:r.city||"",address:r.address||""})):j(!1)}},[r,s,u]);const A=async I=>{I.preventDefault(),g(!0);try{const J=Me(F,"users",s.uid),W={uid:s.uid,email:s.email,displayName:x.displayName,role:x.role,phone:x.phone,updatedAt:new Date().toISOString(),...x.role==="doctor"&&{specialization:x.specialization,country:x.country,state:x.state,city:x.city,address:x.address},...x.role==="hospital"&&{country:x.country,state:x.state,city:x.city,address:x.address}};if(await ti(J,W,{merge:!0}),x.role==="hospital"&&r?.hospitalId){console.log("Updating hospital document with location...");const pe=Me(F,"hospitals",r.hospitalId);await ti(pe,{name:x.displayName,country:x.country,state:x.state,city:x.city,address:x.address,phone:x.phone,enabled:!0,updatedAt:new Date().toISOString()},{merge:!0}),console.log("Hospital document updated successfully")}c("/dashboard",{replace:!0})}catch(J){console.error("Error creating profile:",J),alert("Failed to create profile: "+J.message)}g(!1)},U=I=>{y({...x,[I.target.name]:I.target.value})},R=r?.role==="admin";b.useEffect(()=>{console.log("Dashboard render state:",{hasCurrentUser:!!s,hasUserProfile:!!r,userRole:r?.role,isAdmin:R,loading:u})},[s,r,R,u]);const he=async()=>{await ky(),c("/login")};return t.jsxs("div",{style:{padding:"2rem"},children:[t.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h1",{children:"Dashboard"}),t.jsx("button",{onClick:he,style:{padding:"0.5rem 1rem",background:"var(--color-text-muted)",color:"white",border:"none",borderRadius:"var(--radius-md)"},children:"Logout"})]}),r?S?t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto"},children:[t.jsx("h2",{style:{marginTop:0},children:"Complete Your Profile"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Please provide additional information to complete your profile setup."}),x.role?t.jsxs("form",{onSubmit:A,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"displayName",type:"text",placeholder:"Full Name *",required:!0,value:x.displayName,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsxs("div",{style:{padding:"0.75rem",background:"#f0f0f0",borderRadius:"var(--radius-md)",border:"1px solid #ddd"},children:[t.jsx("strong",{children:"Account Type:"})," ",x.role?x.role==="doctor"?"Individual Doctor":x.role==="hospital"?"Hospital":x.role==="patient"?"Patient":x.role==="admin"?"Administrator":x.role:"Loading..."]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:x.phone,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),(x.role==="doctor"||x.role==="hospital")&&t.jsxs(t.Fragment,{children:[x.role==="doctor"&&t.jsx("input",{name:"specialization",type:"text",placeholder:"Specialization (e.g. Cardiologist) *",required:!0,value:x.specialization,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"country",type:"text",placeholder:"Country *",required:!0,value:x.country,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"state",type:"text",placeholder:"State/Province *",required:!0,value:x.state,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"city",type:"text",placeholder:"City *",required:!0,value:x.city,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"address",type:"text",placeholder:x.role==="doctor"?"Clinic Address":"Hospital Address",value:x.address,onChange:U,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}})]}),t.jsx("button",{type:"submit",disabled:f,style:{padding:"0.75rem",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:f?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:f?"Creating Profile...":"Complete Profile"})]}):t.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"Loading your account information..."})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"1.5rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[t.jsxs("h2",{style:{marginTop:0},children:["Welcome, ",r?.displayName||s?.email]}),r?.role&&t.jsxs("p",{children:["Role: ",R?"Admin":r.role]}),r?.role==="patient"&&t.jsx(Sx,{}),r?.role==="doctor"&&t.jsx(mh,{}),r?.role==="hospital"&&t.jsx(ox,{}),R&&t.jsx(Cx,{})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[t.jsx("h2",{style:{marginTop:0},children:"Loading Your Profile..."}),t.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Please wait while we load your account information."}),t.jsx("p",{style:{color:"#999",fontSize:"0.9rem"},children:"If this takes more than a few seconds, please try refreshing the page."}),t.jsx("button",{onClick:()=>c("/dashboard",{replace:!0}),style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:"Refresh Page"})]})]})},Dx=async r=>{const s=Ce(F,"appointments");if(r.doctorId&&r.date&&r.time){const f=Me(F,"doctors",r.doctorId),g=await Vt(f);if(g.exists()){const y=g.data().availability||{};if(y.unavailableDates&&y.unavailableDates.length>0&&y.unavailableDates.some(j=>j.date===r.date)){const j=y.unavailableDates.find(A=>A.date===r.date);throw new Error(`Doctor is on leave on ${r.date}. Reason: ${j.reason||"Not available"}`)}if(y.blockedTimeSlots&&y.blockedTimeSlots.length>0&&y.blockedTimeSlots.some(j=>j.date!==r.date?!1:j.time===r.time?!0:j.startTime&&j.endTime?r.time>=j.startTime&&r.time<j.endTime:!1)){const j=y.blockedTimeSlots.find(A=>A.date===r.date&&(A.time===r.time||A.startTime&&A.endTime&&r.time>=A.startTime&&r.time<A.endTime));throw new Error(`This time slot is blocked. Reason: ${j.reason||"Not available"}`)}}}const u={...r,status:"pending",createdAt:new Date().toISOString(),timestamp:Ig()};return{id:(await ga(s,u)).id,...u}},Tx=async r=>{const s=Ce(F,"appointments"),u=ze(s,ce("patientPhone","==",r));return(await Pe(u)).docs.map(f=>({id:f.id,...f.data()}))},Fr=async(r={})=>{console.log(" getHospitals called with filters:",r);try{const s=Ce(F,"hospitals");let u=ze(s);r.country&&(u=ze(u,ce("country","==",r.country)),console.log("   Filtering by country:",r.country)),r.state&&(u=ze(u,ce("state","==",r.state)),console.log("   Filtering by state:",r.state)),r.city&&(u=ze(u,ce("city","==",r.city)),console.log("   Filtering by city:",r.city)),console.log("   Executing Firestore query...");const c=await Pe(u);console.log(`   Query returned ${c.size} documents`);const f=[];return c.forEach(g=>{const x={id:g.id,...g.data()};x.enabled!==!1?(console.log("   Hospital found (enabled):",x.name||x.id),f.push(x)):console.log("   Hospital skipped (disabled):",x.name||x.id)}),console.log(` getHospitals returning ${f.length} enabled hospitals`),f}catch(s){throw console.error(" Error fetching hospitals:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s}},tc=async(r={})=>{try{const s=Ce(F,"users");let u=ze(s,ce("role","==","doctor"));r.country&&(u=ze(u,ce("country","==",r.country))),r.state&&(u=ze(u,ce("state","==",r.state))),r.city&&(u=ze(u,ce("city","==",r.city))),r.specialization&&(u=ze(u,ce("specialization","==",r.specialization)));const c=await Pe(u),f=[];return c.forEach(g=>{const x={id:g.id,...g.data()};x.enabled!==!1&&f.push(x)}),console.log(` getDoctors returning ${f.length} enabled doctors`),f}catch(s){throw console.error("Error fetching doctors:",s),s}},zx=async()=>{try{const r=new Map;(await Pe(Ce(F,"hospitals"))).forEach(g=>{const x=g.data();if(x.country&&x.state&&x.city){r.has(x.country)||r.set(x.country,new Map);const y=r.get(x.country);y.has(x.state)||y.set(x.state,new Set),y.get(x.state).add(x.city)}});const u=ze(Ce(F,"users"),ce("role","==","doctor"));(await Pe(u)).forEach(g=>{const x=g.data();if(x.country&&x.state&&x.city){r.has(x.country)||r.set(x.country,new Map);const y=r.get(x.country);y.has(x.state)||y.set(x.state,new Set),y.get(x.state).add(x.city)}});const f={};return r.forEach((g,x)=>{f[x]={},g.forEach((y,S)=>{f[x][S]=Array.from(y).sort()})}),{countries:Array.from(r.keys()).sort(),structured:f}}catch(r){throw console.error("Error fetching locations:",r),r}},Bx=async(r,s="all")=>{try{console.log(" searchProvidersByName called:",{searchTerm:r,providerType:s,searchTermLower:r.toLowerCase()});const u=[],c=r.toLowerCase();if(s==="all"||s==="hospital"){console.log(" Searching hospitals collection...");const f=await Pe(Ce(F,"hospitals"));console.log(" Total hospitals in database:",f.size),f.forEach(g=>{const x={id:g.id,...g.data()},y=x.name||"";console.log(" Checking hospital:",{id:g.id,name:y,nameLower:y.toLowerCase(),searchLower:c,enabled:x.enabled!==!1,matches:y.toLowerCase().includes(c)}),x.enabled!==!1&&y&&y.toLowerCase().includes(c)&&(console.log(" Hospital matched:",y),u.push({...x,type:"hospital"}))}),console.log(" Hospitals matched:",u.filter(g=>g.type==="hospital").length)}if(s==="all"||s==="doctor"){console.log(" Searching doctors collection...");const f=ze(Ce(F,"users"),ce("role","==","doctor")),g=await Pe(f);console.log(" Total doctors in database:",g.size),g.forEach(x=>{const y={id:x.id,...x.data()},S=y.displayName||"";console.log(" Checking doctor:",{id:x.id,name:S,nameLower:S.toLowerCase(),searchLower:c,enabled:y.enabled!==!1,matches:S.toLowerCase().includes(c)}),y.enabled!==!1&&S.toLowerCase().includes(c)&&(console.log(" Doctor matched:",S),u.push({...y,type:"doctor"}))}),console.log(" Doctors matched:",u.filter(x=>x.type==="doctor").length)}return console.log(" searchProvidersByName final results:",{totalResults:u.length,results:u.map(f=>({id:f.id,name:f.name||f.displayName,type:f.type}))}),u}catch(u){throw console.error(" Error searching providers:",u),u}},kx=async r=>{try{const s=Ce(F,"users"),u=ze(s,ce("role","==","doctor"),ce("hospitalId","==",r)),c=await Pe(u),f=[];return c.forEach(g=>{const x={id:g.id,uid:g.id,...g.data()};x.enabled!==!1&&f.push(x)}),console.log(` getDoctorsByHospital returning ${f.length} enabled doctors for hospital ${r}`),f}catch(s){throw console.error("Error fetching hospital doctors:",s),s}},Rx=async r=>{try{const{patientPhone:s,patientName:u,appointmentDate:c,appointmentTime:f,hospitalName:g,doctorName:x}=r,y=`Hi ${u}, your appointment is confirmed for ${c} at ${f} with Dr. ${x}${g?` at ${g}`:""}. Thank you for choosing us!`,S=Ce(F,"notifications");return await ga(S,{type:"sms",to:s,message:y,status:"pending",appointmentData:{patientName:u,appointmentDate:c,appointmentTime:f,hospitalName:g,doctorName:x},createdAt:new Date().toISOString()}),console.log("SMS notification queued successfully"),{success:!0}}catch(s){return console.error("Error queuing SMS notification:",s),{success:!1,error:s.message}}},Ex=async r=>{try{const{patientEmail:s,patientName:u,appointmentDate:c,appointmentTime:f,hospitalName:g,doctorName:x,reason:y}=r;if(!s)return console.log("No email provided, skipping email notification"),{success:!1,error:"No email provided"};const S=Ce(F,"notifications");return await ga(S,{type:"email",to:s,subject:"Appointment Confirmation",html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e0e0e0; border-radius: 10px;">
                    <h2 style="color: #667eea;">Appointment Confirmed! </h2>
                    <p>Dear ${u},</p>
                    <p>Your appointment has been successfully booked.</p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h3 style="margin-top: 0; color: #333;">Appointment Details</h3>
                        <p><strong>Date:</strong> ${c}</p>
                        <p><strong>Time:</strong> ${f}</p>
                        <p><strong>Doctor:</strong> Dr. ${x}</p>
                        ${g?`<p><strong>Hospital:</strong> ${g}</p>`:""}
                        ${y?`<p><strong>Reason:</strong> ${y}</p>`:""}
                    </div>
                    
                    <p>Please arrive 10 minutes before your scheduled time.</p>
                    <p>If you need to reschedule or cancel, please contact us as soon as possible.</p>
                    
                    <p style="margin-top: 30px;">Best regards,<br/>Healthcare Team</p>
                </div>
            `,status:"pending",appointmentData:{patientName:u,patientEmail:s,appointmentDate:c,appointmentTime:f,hospitalName:g,doctorName:x,reason:y},createdAt:new Date().toISOString()}),console.log("Email notification queued successfully"),{success:!0}}catch(s){return console.error("Error queuing email notification:",s),{success:!1,error:s.message}}},st={container:{minHeight:"100vh",background:"var(--bg-main)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)",fontFamily:"var(--font-sans)",color:"var(--text-main)"},mainCard:{maxWidth:"1200px",margin:"0 auto",background:"var(--bg-card)",borderRadius:"16px",boxShadow:"var(--shadow-xl)",overflow:"hidden",border:"1px solid var(--border-subtle)"},header:{background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",padding:"clamp(1rem, 3vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1rem, 3vw, 2rem)",display:"grid",gap:"clamp(1rem, 2vw, 2rem)",gridTemplateColumns:"1fr"},twoColumn:{gridTemplateColumns:"1fr"},infoBox:{padding:"clamp(1rem, 2vw, 1.25rem)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",marginBottom:"1rem",fontSize:"0.95rem",background:"var(--bg-main)",border:"1px solid var(--border-subtle)",borderLeft:"4px solid var(--primary)"},input:{padding:"0.75rem",border:"1px solid var(--border-subtle)",borderRadius:"8px",fontSize:"1rem",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box",background:"var(--bg-main)",color:"var(--text-main)"},button:{padding:"0.8rem 1.5rem",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",boxSizing:"border-box"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-md)"},secondaryButton:{background:"white",color:"var(--text-secondary)",border:"1px solid var(--border-subtle)"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",border:"1px solid var(--border-subtle)"},providerCard:{background:"var(--bg-main)",borderRadius:"12px",padding:"1.25rem",border:"1px solid var(--border-subtle)",position:"relative",transition:"all 0.2s ease"},sectionTitle:{fontSize:"1.2rem",fontWeight:"700",color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},historyCard:{background:"white",borderRadius:"10px",padding:"1rem",border:"1px solid var(--border-subtle)",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"}},Mx=()=>{const[r,s]=b.useState({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:"",state:"",city:""}),[u,c]=b.useState(!1),[f,g]=b.useState(null),[x,y]=b.useState(""),[S,j]=b.useState(!1),[A,U]=b.useState({countries:[],structured:{}}),[R,he]=b.useState([]),[I,J]=b.useState([]),[W,pe]=b.useState([]),[E,de]=b.useState([]),[re,z]=b.useState(!1),[Xe,ct]=b.useState(!1),[X,ue]=b.useState("location"),[P,tt]=b.useState(""),[ye,at]=b.useState(null),[bt,qe]=b.useState(null),[q,se]=b.useState(!0),[xe,lt]=b.useState(null),[Y,Ae]=b.useState([]),[ge,ae]=b.useState(!1),[ke,nt]=b.useState(!1),[Ye,ft]=b.useState(window.innerWidth),[pn,kt]=b.useState([]),[ln,Nt]=b.useState(!1),[yn,wt]=b.useState(""),[k,De]=b.useState(null),[je,Ge]=b.useState(null),Fe=A&&Array.isArray(A.countries)&&A.countries.length?A.countries:sh,An=Fe.slice(0,6);b.useEffect(()=>{const M=()=>ft(window.innerWidth);return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const qn=Ye<768,fe=Ye>=768&&Ye<1024,xn=Ye>=1024,Ei=()=>qn?"1fr":"repeat(2, 1fr)";b.useEffect(()=>{(async()=>{se(!0);try{if("geolocation"in navigator)navigator.geolocation.getCurrentPosition(async ee=>{const{latitude:Se,longitude:we}=ee.coords;console.log("User coordinates:",Se,we);try{const Re=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Se}&lon=${we}&accept-language=en`)).json();console.log("Geocoding response:",Re);const Ct={country:Re.address?.country||"India",state:Re.address?.state||"",city:Re.address?.city||Re.address?.town||Re.address?.village||""};lt(Ct),s(Nn=>({...Nn,country:Ct.country,state:Ct.state,city:Ct.city})),console.log("User location set:",Ct)}catch(be){console.error("Geocoding error:",be);const Re=Ht();s(Ct=>({...Ct,country:Re}))}se(!1)},ee=>{console.warn("Geolocation error:",ee.message);const Se=Ht();s(we=>({...we,country:Se})),se(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0});else{const ee=Ht();s(Se=>({...Se,country:ee})),se(!1)}}catch(ee){console.error("Error getting location:",ee);const Se=Ht();s(we=>({...we,country:Se})),se(!1)}})()},[]);const Ht=()=>{try{const M=navigator.language||navigator.userLanguage;console.log("Browser language:",M);const ee=Intl.DateTimeFormat().resolvedOptions().timeZone;return console.log("Timezone:",ee),ee.includes("Kolkata")||ee.includes("Mumbai")||ee.includes("Delhi")?"India":ee.includes("New_York")||ee.includes("Los_Angeles")||ee.includes("Chicago")?"United States":ee.includes("London")?"United Kingdom":ee.includes("Dubai")?"United Arab Emirates":ee.includes("Singapore")?"Singapore":ee.includes("Tokyo")?"Japan":ee.includes("Shanghai")||ee.includes("Hong_Kong")?"China":ee.includes("Sydney")||ee.includes("Melbourne")?"Australia":M.startsWith("en-IN")?"India":M.startsWith("en-US")?"United States":M.startsWith("en-GB")?"United Kingdom":M.startsWith("ar")?"United Arab Emirates":"India"}catch(M){return console.error("Error detecting country from browser:",M),"India"}};b.useEffect(()=>{(async()=>{try{console.log("BookAppointment: Loading locations...");const ee=await zx();console.log("BookAppointment: Locations loaded:",ee),U(ee),(!ee.countries||ee.countries.length===0)&&(console.warn("BookAppointment: No locations found in database!"),y("No healthcare providers found in the database. Please register hospitals or doctors first."))}catch(ee){console.error("BookAppointment: Error loading locations:",ee),y("Failed to load locations. Please check your connection and try again.")}})()},[]),b.useEffect(()=>{if(r.country&&A.structured[r.country]){const M=Object.keys(A.structured[r.country]).sort();he(M),r.state&&!M.includes(r.state)&&s(ee=>({...ee,state:"",city:""}))}else he([]),J([])},[r.country,A.structured]),b.useEffect(()=>{if(r.country&&r.state&&A.structured[r.country]?.[r.state]){const M=A.structured[r.country][r.state];J(M),r.city&&!M.includes(r.city)&&s(ee=>({...ee,city:""}))}else J([])},[r.country,r.state,A.structured]),b.useEffect(()=>{const ee=setTimeout(async()=>{if(r.phone.replace(/\D/g,"").length>=10){ae(!0);try{const we=await Tx(r.phone);if(we.length>0){Ae(we),nt(!0);const be=we.sort((Re,Ct)=>new Date(Ct.createdAt)-new Date(Re.createdAt))[0];be.patientName&&!r.patientName&&s(Re=>({...Re,patientName:be.patientName,email:be.patientEmail||Re.email}))}else Ae([]),nt(!1)}catch(we){console.error("Error fetching appointment history:",we)}finally{ae(!1)}}else Ae([]),nt(!1)},500);return()=>clearTimeout(ee)},[r.phone]),b.useEffect(()=>{(async()=>{if(X!=="name"){if(!r.country){pe([]);return}console.log("BookAppointment: Loading providers...",{providerType:r.providerType,country:r.country,state:r.state,city:r.city}),z(!0),y("");try{const ee={country:r.country,...r.state&&{state:r.state},...r.city&&{city:r.city}};console.log("BookAppointment: Applying filters:",ee);let Se=[];r.providerType==="hospital"?(Se=await Fr(ee),console.log("BookAppointment: Hospitals loaded:",Se.length),console.log("BookAppointment: Hospital details:",Se)):(Se=await tc(ee),console.log("BookAppointment: Doctors loaded:",Se.length),console.log("BookAppointment: Doctor details:",Se)),pe(Se),Se.length===0&&(console.warn("BookAppointment: No providers found for filters:",ee),console.warn("BookAppointment: Please check if your hospital has these exact location fields:",ee))}catch(ee){console.error("BookAppointment: Error loading providers:",ee),y("Failed to load providers. Please try again.")}finally{z(!1)}}})()},[r.country,r.state,r.city,r.providerType,X]),b.useEffect(()=>{const ee=setTimeout(async()=>{if(console.log(" BookAppointment Search Effect Triggered:",{searchMode:X,searchName:P,providerType:r.providerType,searchNameTrimmed:P.trim(),searchNameLength:P.length}),X!=="name"||!P.trim()){X==="name"&&(console.log(" Clearing providers (empty search)"),pe([]));return}if(P.length<2){console.log(" Search name too short, waiting for more characters...");return}console.log(" BookAppointment: Searching by name:",P,"Type:",r.providerType),z(!0),y("");try{const Se=await Bx(P,r.providerType);console.log(" BookAppointment: Search results:",Se.length,Se),pe(Se),Se.length===0&&console.warn(" BookAppointment: No providers found matching:",P)}catch(Se){console.error(" BookAppointment: Error searching providers:",Se),y("Failed to search providers. Please try again.")}finally{z(!1)}},300);return()=>clearTimeout(ee)},[P,r.providerType,X]);const Qt=M=>{const{name:ee,value:Se}=M.target;if(s({...r,[ee]:Se}),ee==="country")s(we=>({...we,state:"",city:"",providerId:"",hospitalId:"",doctorId:""})),pe([]),de([]),at(null),qe(null);else if(ee==="state")s(we=>({...we,city:"",providerId:"",hospitalId:"",doctorId:""})),de([]),at(null),qe(null);else if(ee==="city"||ee==="providerType")s(we=>({...we,providerId:"",hospitalId:"",doctorId:""})),de([]),at(null),qe(null);else if(ee==="providerId"){const we=W.find(be=>r.providerType==="hospital"?be.id===Se:be.uid===Se||be.id===Se);console.log("Provider selected:",{value:Se,provider:we,providerType:r.providerType}),at(we||null),r.providerType==="hospital"&&Se?(s(be=>({...be,hospitalId:Se,doctorId:""})),qe(we),Vn(Se)):(s(be=>({...be,hospitalId:"",doctorId:Se})),de([]),qe(null))}else if(ee==="doctorId"){const we=E.find(be=>be.uid===Se||be.id===Se);we&&at({...bt,selectedDoctor:we})}},Vn=async M=>{ct(!0);try{console.log("Loading doctors for hospital:",M);const ee=await kx(M);console.log("Hospital doctors loaded:",ee),de(ee)}catch(ee){console.error("Error loading hospital doctors:",ee),y("Failed to load doctors for this hospital.")}finally{ct(!1)}},vt=M=>{console.log(" Search mode changed to:",M),ue(M),s(ee=>({...ee,providerId:""})),pe([]),at(null),tt("")},Qn=async M=>{try{const ee=!!M.hospitalId;if(s(Se=>({...Se,providerType:ee?"hospital":"doctor",providerId:ee?M.hospitalId:M.doctorId})),ee){const we=(await Fr({})).find(be=>be.id===M.hospitalId);we&&(pe([we]),at(we),s(be=>({...be,country:we.country||be.country,state:we.state||be.state,city:we.city||be.city})))}else{const we=(await tc({})).find(be=>be.uid===M.doctorId);we&&(pe([we]),at(we),s(be=>({...be,country:we.country||be.country,state:we.state||be.state,city:we.city||be.city})))}nt(!1)}catch(ee){console.error("Error selecting previous provider:",ee),y("Failed to load previous provider details.")}},Ut=(M,ee)=>{if(!M||!ee)return[];const{workingHours:Se,slotDuration:we,workingDays:be,unavailableDates:Re,blockedTimeSlots:Ct}=M,Nn=new Date(ee).getDay();if(!be.includes(Nn))return[];if(Re&&Re.includes(ee))return[];const dn=[],[Gn,Rt]=Se.start.split(":").map(Number),[on,bn]=Se.end.split(":").map(Number);let Bn=Gn*60+Rt;const Ze=on*60+bn;for(;Bn<Ze;){const ni=Math.floor(Bn/60),jt=Bn%60,Xt=`${String(ni).padStart(2,"0")}:${String(jt).padStart(2,"0")}`;Ct&&Ct.some($e=>$e.date===ee&&$e.time===Xt)||dn.push(Xt),Bn+=we}return dn};b.useEffect(()=>{(async()=>{if(!r.doctorId||!r.appointmentDate){kt([]),wt("");return}Nt(!0),wt("");try{console.log("Fetching slots for doctor:",r.doctorId,"date:",r.appointmentDate);const ee=await rc(r.doctorId);console.log("Doctor availability:",ee),De(ee);const Se=Ut(ee,r.appointmentDate);console.log("Generated slots:",Se);const we=Ce(F,"appointments"),be=ze(we,ce("doctorId","==",r.doctorId),ce("appointmentDate","==",r.appointmentDate),ce("status","in",["pending","confirmed"])),Ct=(await Pe(be)).docs.map(dn=>dn.data().appointmentTime);console.log("Booked times:",Ct);const Nn=Se.filter(dn=>!Ct.includes(dn));console.log("Available slots:",Nn),kt(Nn)}catch(ee){console.error("Error fetching time slots:",ee),wt(`Failed to load slots: ${ee.message}`),kt([])}finally{Nt(!1)}})()},[r.doctorId,r.appointmentDate]);const sn=async M=>{M.preventDefault(),j(!0),y(""),c(!1);try{if(console.log("Booking appointment...",r),!r.patientName||!r.phone||!r.dob)throw new Error("Name, phone number, and date of birth are required");if(r.providerType==="hospital"){if(!r.hospitalId)throw new Error("Please select a hospital");if(!r.doctorId)throw new Error("Please select a doctor from the hospital")}else if(!r.doctorId)throw new Error("Please select a doctor");console.log("Checking slot availability before booking...");const ee=Ce(F,"appointments"),Se=ze(ee,ce("doctorId","==",r.doctorId),ce("appointmentDate","==",r.appointmentDate),ce("appointmentTime","==",r.appointmentTime),ce("status","in",["pending","confirmed"]));if(!(await Pe(Se)).empty)throw new Error("This time slot is no longer available. Please select a different time.");const be={patientName:r.patientName,patientPhone:r.phone,patientDob:r.dob,patientEmail:r.email||null,appointmentDate:r.appointmentDate,appointmentTime:r.appointmentTime,reason:r.reason,status:"pending",country:r.country,state:r.state,city:r.city};if(r.providerType==="hospital"){be.hospitalId=r.hospitalId,be.hospitalName=bt?.name||"",be.doctorId=r.doctorId;const Re=E.find(Ct=>(Ct.uid||Ct.id)===r.doctorId);Re&&(be.doctorName=Re.displayName||Re.name,be.specialization=Re.specialization)}else{const Re=W.find(Ct=>(Ct.uid||Ct.id)===r.doctorId);if(!Re)throw new Error("Selected doctor not found");be.doctorId=Re.uid||Re.id,be.doctorName=Re.displayName||Re.name,be.specialization=Re.specialization,Re.hospitalId&&(be.hospitalId=Re.hospitalId,be.hospitalName=Re.hospitalName||"")}await Dx(be),console.log("Appointment booked successfully!"),Promise.all([Rx(be),Ex(be)]).then(([Re,Ct])=>{console.log("SMS result:",Re),console.log("Email result:",Ct)}).catch(Re=>{console.error("Notification error (non-blocking):",Re)}),g(be),c(!0),y(""),be.hospitalId&&localStorage.setItem("lastUsedHospitalId",be.hospitalId),console.log(" Success state set:",{success:!0,bookedAppointment:be}),window.scrollTo({top:0,behavior:"smooth"}),s({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:xe?.country||Ht(),state:xe?.state||"",city:xe?.city||""}),pe([]),de([]),at(null),qe(null),tt(""),Ae([]),nt(!1),window.scrollTo({top:0,behavior:"smooth"})}catch(ee){console.error("Error booking appointment:",ee),y(ee.message||"Failed to book appointment. Please try again.")}finally{j(!1)}};return t.jsx("div",{style:st.container,children:t.jsxs("div",{style:st.mainCard,children:[t.jsxs("div",{style:st.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:28})}),"Book an Appointment"]}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,fontSize:"1rem"},children:"No registration required! Just fill in your details to book."})]}),t.jsxs("div",{style:{...st.content,...ye&&xn?st.twoColumn:{}},children:[t.jsxs("div",{children:[q&&t.jsxs("div",{style:{...st.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Detecting your location to show nearby providers..."})]}),xe&&!q&&t.jsxs("div",{style:{...st.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("span",{children:["Location detected: ",xe.city&&`${xe.city}, `,xe.state,", ",xe.country]})]}),u&&f&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",border:"2px solid #28a745",borderRadius:"15px",padding:"clamp(1.25rem, 3vw, 2rem)",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(40, 167, 69, 0.2)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid #28a745"},children:[t.jsx("span",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},children:""}),t.jsxs("div",{children:[t.jsx("h3",{style:{margin:0,color:"#155724",fontSize:"clamp(1.2rem, 4vw, 1.8rem)",fontWeight:"700"},children:"Appointment Confirmed!"}),t.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"#155724",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",opacity:.8},children:"Your booking has been successfully confirmed"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"1rem"},children:[t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"PATIENT"}),t.jsx("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:f.patientName}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.patientPhone]})]}),t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DATE & TIME"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",new Date(f.appointmentDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.appointmentTime]})]}),f.doctorName&&t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DOCTOR"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.doctorName]}),f.specialization&&t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:f.specialization})]}),f.hospitalName?t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"HOSPITAL"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.hospitalName]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.city,", ",f.state]})]}):t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"LOCATION"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.city,", ",f.state]}),t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:f.country})]})]}),t.jsxs("div",{style:{marginTop:"1.5rem",padding:"clamp(0.85rem, 2vw, 1rem)",background:"rgba(255, 255, 255, 0.5)",borderRadius:"10px",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",color:"#155724",lineHeight:"1.6"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:[" Confirmation sent to: ",f.patientEmail]}),t.jsx("div",{style:{opacity:.8},children:" We'll send you an SMS confirmation shortly. Please arrive 10 minutes before your appointment time."})]}),t.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("button",{type:"button",onClick:()=>{c(!1),g(null)},style:{...st.button,...st.primaryButton,flex:"1 1 200px"},children:" Book Another Appointment"}),t.jsx(ji,{to:"/",style:{...st.button,...st.secondaryButton,flex:"1 1 200px",textDecoration:"none",background:"white",border:"2px solid #28a745",color:"#155724"},children:" Go to Home"})]})]}),x&&t.jsxs("div",{style:{...st.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:x})]}),!u&&t.jsxs("form",{onSubmit:sn,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{style:st.card,children:[t.jsxs("div",{style:st.sectionTitle,children:[t.jsx("span",{children:""})," Personal Information"]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"patientName",type:"text",placeholder:"Full Name *",required:!0,value:r.patientName,onChange:Qt,style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"dob",type:"date",placeholder:"Date of Birth *",required:!0,value:r.dob,onChange:Qt,max:new Date().toISOString().split("T")[0],style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"}),t.jsx("small",{style:{color:"#666",fontSize:"0.8rem",display:"block",marginTop:"0.25rem"},children:" Date of Birth (Required for patient records)"})]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:r.phone,onChange:Qt,style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"}),ge&&t.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"-0.5rem"},children:" Checking previous appointments..."}),t.jsx("input",{name:"email",type:"email",placeholder:"Email (optional)",value:r.email,onChange:Qt,style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"})]})]}),ke&&Y.length>0&&t.jsxs("div",{style:st.card,children:[t.jsxs("div",{style:st.sectionTitle,children:[t.jsx("span",{children:""})," Previous Appointments",t.jsx("span",{style:{marginLeft:"auto",background:"#667eea",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:Y.length})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",maxHeight:"300px",overflowY:"auto"},children:Y.slice(0,5).map(M=>t.jsx("div",{style:st.historyCard,onClick:()=>Qn(M),onMouseEnter:ee=>{ee.currentTarget.style.borderColor="#667eea",ee.currentTarget.style.transform="translateX(5px)",ee.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.2)"},onMouseLeave:ee=>{ee.currentTarget.style.borderColor="#e9ecef",ee.currentTarget.style.transform="translateX(0)",ee.currentTarget.style.boxShadow="none"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1rem",color:"#333"},children:M.hospitalName||M.doctorName}),M.specialization&&t.jsx("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem",color:"#666"},children:M.specialization}),t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.85rem",color:"#999"},children:[new Date(M.appointmentDate).toLocaleDateString()," ",t.jsx("span",{style:{textTransform:"capitalize",color:M.status==="completed"?"#28a745":"#ffc107",marginLeft:"0.25rem"},children:M.status})]})]}),t.jsx("span",{style:{fontSize:"0.85rem",color:"#667eea",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"1rem"},children:"Book Again "})]})},M.id))}),t.jsx("button",{type:"button",onClick:()=>nt(!1),style:{marginTop:"0.75rem",padding:"0.5rem",background:"transparent",border:"none",color:"#666",fontSize:"0.9rem",cursor:"pointer",textDecoration:"underline"},children:"Hide history"})]}),t.jsxs("div",{style:st.card,children:[t.jsxs("div",{style:st.sectionTitle,children:[t.jsx("span",{children:""})," Find Hospital or Doctor"]}),je&&!r.hospitalId&&r.providerType==="hospital"&&t.jsxs("div",{onClick:()=>{s(M=>({...M,country:je.country||M.country,state:je.state||M.state,city:je.city||M.city})),pe([je]),at(je),s(M=>({...M,country:je.country,state:je.state,city:je.city,hospitalId:je.id,providerId:je.id})),Vn(je.id)},style:{background:"#f0f9ff",border:"1px solid #bae6fd",padding:"1rem",borderRadius:"10px",marginBottom:"1.5rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("div",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",color:"#0369a1"},children:["Book again with ",je.name||je.displayName]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#0c4a6e"},children:[je.city,", ",je.state]})]}),t.jsx("div",{style:{marginLeft:"auto",color:"#0284c7",fontWeight:"600"},children:"Select "})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>vt("location"),style:{...st.button,flex:1,background:X==="location"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:X==="location"?"white":"#666",boxShadow:X==="location"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Location"}),t.jsx("button",{type:"button",onClick:()=>vt("name"),style:{...st.button,flex:1,background:X==="name"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:X==="name"?"white":"#666",boxShadow:X==="name"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Name"})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{fontSize:"0.95rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Book with:"}),t.jsxs("select",{name:"providerType",value:r.providerType,onChange:Qt,style:{...st.input,cursor:"pointer"},children:[t.jsx("option",{value:"hospital",children:" Hospital"}),t.jsx("option",{value:"doctor",children:" Doctor"})]})]}),X==="name"?t.jsx("input",{type:"text",placeholder:`Search ${r.providerType==="hospital"?"hospital":"doctor"} by name...`,value:P,onChange:M=>tt(M.target.value),style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("select",{name:"country",value:r.country,onChange:Qt,required:!0,style:{...st.input,cursor:"pointer",backgroundColor:"white"},children:[t.jsx("option",{value:"",children:"Select Country *"}),t.jsx("optgroup",{label:"Popular",children:An.map(M=>t.jsx("option",{value:M,children:M},`pop-${M}`))}),t.jsx("optgroup",{label:"All Countries",children:Fe.map(M=>t.jsx("option",{value:M,children:M},M))})]}),t.jsxs("select",{name:"state",value:r.state,onChange:Qt,required:X==="location",disabled:!r.country||R.length===0,style:st.input,children:[t.jsx("option",{value:"",children:r.country?R.length===0?"No states available":"Select State/Province *":"Select country first"}),R.map(M=>t.jsx("option",{value:M,children:M},M))]}),t.jsxs("select",{name:"city",value:r.city,onChange:Qt,disabled:!r.state||I.length===0,style:st.input,children:[t.jsx("option",{value:"",children:r.state?I.length===0?"No cities available":"Select City (optional)":"Select state first"}),I.map(M=>t.jsx("option",{value:M,children:M},M))]})]}),t.jsxs("div",{style:{marginTop:"1rem"},children:[W.length>0&&t.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem",background:"#e8f5e9",padding:"0.5rem",borderRadius:"5px"},children:[" Found ",W.length," ",r.providerType==="hospital"?"hospital(s)":"doctor(s)"]}),t.jsxs("select",{name:"providerId",value:r.providerId,onChange:Qt,required:!0,disabled:re||X==="location"&&!r.country||X==="name"&&P.length<2,style:st.input,children:[t.jsx("option",{value:"",children:re?" Loading...":`Select ${r.providerType==="hospital"?"Hospital":"Doctor"} *`}),W.map(M=>{const ee=r.providerType==="hospital"?M.id:M.uid||M.id,Se=M.name||M.displayName||"Unnamed Provider";return console.log("Rendering provider option:",{id:ee,name:Se,provider:M}),t.jsxs("option",{value:ee,children:[Se,M.specialization&&` - ${M.specialization}`,M.city&&` (${M.city})`]},ee)})]}),W.length===0&&(X==="location"&&r.state||X==="name"&&P.length>=2)&&!re&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["No ",r.providerType==="hospital"?"hospitals":"doctors"," found. Try a different ",X==="location"?"location":"search term","."]})]})]}),r.providerType==="hospital"&&r.hospitalId&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsxs("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:["Select Doctor at ",bt?.name," *"]}),t.jsxs("select",{name:"doctorId",value:r.doctorId,onChange:Qt,required:!0,disabled:Xe,style:st.input,children:[t.jsx("option",{value:"",children:Xe?" Loading doctors...":"Select a doctor *"}),E.map(M=>t.jsxs("option",{value:M.id||M.uid,children:[M.displayName||M.name,M.specialization&&` - ${M.specialization}`]},M.id||M.uid))]}),E.length===0&&!Xe&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"No doctors available at this hospital yet. The hospital needs to add doctors to their staff."})]})]})]}),t.jsxs("div",{style:st.card,children:[t.jsxs("div",{style:st.sectionTitle,children:[t.jsx("span",{children:""})," Appointment Details"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:Ei(),gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Date *"}),t.jsx("input",{name:"appointmentDate",type:"date",required:!0,value:r.appointmentDate,onChange:Qt,min:new Date().toISOString().split("T")[0],style:st.input,onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Time Slot *"}),r.doctorId?r.appointmentDate?yn?t.jsxs("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem",border:"1px solid #fcc"},children:[" ",yn]}):ln?t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#667eea",fontSize:"0.9rem",textAlign:"center"},children:"Loading available slots..."}):pn.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem"},children:"No available slots for this date. Please select another date."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"0.75rem",marginTop:"0.5rem"},children:pn.map(M=>t.jsxs("button",{type:"button",onClick:()=>s(ee=>({...ee,appointmentTime:M})),style:{padding:"0.75rem",borderRadius:"8px",border:r.appointmentTime===M?"2px solid #667eea":"2px solid #e0e0e0",background:r.appointmentTime===M?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"white",color:r.appointmentTime===M?"#667eea":"#333",fontWeight:r.appointmentTime===M?"600":"500",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",boxShadow:r.appointmentTime===M?"0 2px 8px rgba(102, 126, 234, 0.3)":"none"},onMouseEnter:ee=>{r.appointmentTime!==M&&(ee.target.style.borderColor="#667eea",ee.target.style.background="#f8f9fa")},onMouseLeave:ee=>{r.appointmentTime!==M&&(ee.target.style.borderColor="#e0e0e0",ee.target.style.background="white")},children:[" ",M]},M))}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a date to view available time slots"}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a doctor first to view available time slots"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Reason for visit (optional)"}),t.jsx("textarea",{name:"reason",placeholder:"Describe your symptoms or reason for visit...",value:r.reason,onChange:Qt,rows:"4",style:{...st.input,resize:"vertical",fontFamily:"inherit"},onFocus:M=>M.target.style.borderColor="#667eea",onBlur:M=>M.target.style.borderColor="#e0e0e0"})]})]}),t.jsx("button",{type:"submit",disabled:S,style:{...st.button,...st.primaryButton,opacity:S?.7:1,cursor:S?"not-allowed":"pointer",fontSize:"1.1rem",padding:"1rem"},onMouseEnter:M=>{S||(M.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:M=>{M.currentTarget.style.transform="translateY(0)"},children:S?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Booking..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Book Appointment"]})}),t.jsxs("div",{style:{textAlign:"center",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",marginTop:"1rem"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Are you a doctor or hospital?"}),t.jsx(ji,{to:"/register",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Register here "})]})]})]}),ye&&t.jsxs("div",{style:st.providerCard,children:[t.jsxs("div",{style:st.sectionTitle,children:[t.jsx("span",{children:""})," Selected Provider"]}),t.jsxs("div",{style:{marginTop:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontWeight:"700",fontSize:"1.3rem",marginBottom:"0.75rem",color:"#667eea",lineHeight:"1.3"},children:ye.name||ye.displayName}),ye.specialization&&t.jsx("div",{style:{display:"inline-block",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0.4rem 0.9rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:ye.specialization})]}),(ye.email||ye.phone)&&t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Contact"}),ye.email&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{wordBreak:"break-word"},children:ye.email})]}),ye.phone&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:ye.phone})]})]}),t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Address"}),t.jsxs("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:"1.6",color:"#555"},children:[ye.address&&t.jsxs(t.Fragment,{children:[ye.address,t.jsx("br",{})]}),ye.city&&t.jsxs(t.Fragment,{children:[ye.city,", "]}),ye.state&&t.jsxs(t.Fragment,{children:[ye.state,t.jsx("br",{})]}),ye.country||"N/A"]})]})]})]})]})]})})},Nx=()=>{const[r,s]=b.useState({email:"",password:"",name:"Admin",setupKey:""}),[u,c]=b.useState(""),[f,g]=b.useState(!1),[x,y]=b.useState(!1),S=ol(),{currentUser:j,userProfile:A}=_a();b.useEffect(()=>{j?A?.role!=="admin"&&S("/dashboard"):S("/")},[j,A,S]);const U=async R=>{R.preventDefault(),y(!0),c("");try{const he=lh(),J=await ac(he,"createSecureAdmin")({email:r.email,password:r.password,name:r.name,setupKey:r.setupKey});g(!0),s({email:"",password:"",name:"Admin",setupKey:""}),setTimeout(()=>{S(j?"/dashboard":"/login")},2e3)}catch(he){console.error("Error creating admin:",he),c(he.message||"Failed to create admin user. Check your setup key and try again."),y(!1)}};return t.jsx("div",{style:Wt.container,children:t.jsxs("div",{style:Wt.card,children:[t.jsxs("div",{style:Wt.header,children:[t.jsx("div",{style:Wt.icon,children:""}),t.jsx("h2",{style:Wt.title,children:"Setup Admin User"})]}),t.jsxs("div",{style:Wt.warningBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"SECURITY NOTICE"}),t.jsxs("p",{style:{margin:0,fontSize:"0.9rem",lineHeight:"1.5"},children:["This is a protected operation. You need the admin setup key from your Firebase Functions config.",j&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("strong",{children:"Note:"})," As an admin, you can create additional admin accounts."]})]})]}),f&&t.jsxs("div",{style:Wt.successBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),"Admin user created successfully! Redirecting..."]}),u&&t.jsxs("div",{style:Wt.errorBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),u]}),t.jsxs("form",{onSubmit:U,style:Wt.form,children:[t.jsxs("div",{style:Wt.inputGroup,children:[t.jsx("label",{style:Wt.label,children:"Admin Name"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter admin name",required:!0,value:r.name,onChange:R=>s({...r,name:R.target.value}),style:Wt.input})]}),t.jsxs("div",{style:Wt.inputGroup,children:[t.jsx("label",{style:Wt.label,children:"Admin Email"}),t.jsx("input",{name:"email",type:"email",placeholder:"admin@example.com",required:!0,value:r.email,onChange:R=>s({...r,email:R.target.value}),style:Wt.input})]}),t.jsxs("div",{style:Wt.inputGroup,children:[t.jsx("label",{style:Wt.label,children:"Password"}),t.jsx("input",{name:"password",type:"password",placeholder:"Minimum 8 characters",required:!0,minLength:"8",value:r.password,onChange:R=>s({...r,password:R.target.value}),style:Wt.input})]}),t.jsxs("div",{style:Wt.inputGroup,children:[t.jsx("label",{style:Wt.label,children:"Admin Setup Key "}),t.jsx("input",{name:"setupKey",type:"password",placeholder:"Enter setup key from Firebase config",required:!0,value:r.setupKey,onChange:R=>s({...r,setupKey:R.target.value}),style:Wt.input}),t.jsx("small",{style:Wt.hint,children:"Get this from: firebase functions:config:get admin.setup_key"})]}),t.jsx("button",{type:"submit",disabled:x,style:{...Wt.button,opacity:x?.7:1,cursor:x?"not-allowed":"pointer"},children:x?" Creating Admin...":" Create Admin User"})]}),t.jsxs("div",{style:Wt.infoBox,children:[t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:"#333"},children:" Setup Instructions"}),t.jsxs("ol",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",lineHeight:"1.8",fontSize:"0.9rem"},children:[t.jsxs("li",{children:["Set the setup key: ",t.jsx("code",{style:Wt.code,children:'firebase functions:config:set admin.setup_key="YOUR_SECRET_KEY"'})]}),t.jsxs("li",{children:["Deploy functions: ",t.jsx("code",{style:Wt.code,children:"firebase deploy --only functions"})]}),t.jsx("li",{children:"Enter admin details and setup key above"}),t.jsxs("li",{children:[t.jsx("strong",{children:"After creating first admin:"})," Set ",t.jsx("code",{style:Wt.code,children:"VITE_ENABLE_ADMIN_SETUP=false"})]}),t.jsx("li",{children:"Existing admins can create more admins without this page"})]})]})]})})},Wt={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{maxWidth:"550px",width:"100%",background:"white",borderRadius:"20px",padding:"2.5rem",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},header:{textAlign:"center",marginBottom:"2rem"},icon:{fontSize:"3rem",marginBottom:"0.5rem"},title:{margin:0,color:"#333",fontSize:"1.8rem"},warningBox:{padding:"1.5rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"12px",marginBottom:"1.5rem",textAlign:"center",color:"#856404"},successBox:{padding:"1rem",background:"#d4edda",color:"#155724",borderRadius:"12px",marginBottom:"1rem",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"500"},errorBox:{padding:"1rem",background:"#f8d7da",color:"#721c24",borderRadius:"12px",marginBottom:"1rem",display:"flex",alignItems:"center",fontSize:"0.95rem"},form:{display:"flex",flexDirection:"column",gap:"1.25rem",marginBottom:"1.5rem"},inputGroup:{display:"flex",flexDirection:"column",gap:"0.5rem"},label:{fontSize:"0.9rem",fontWeight:"600",color:"#555"},input:{padding:"0.875rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"10px",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit"},hint:{fontSize:"0.8rem",color:"#888",fontStyle:"italic"},button:{padding:"1rem",fontSize:"1rem",fontWeight:"600",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",marginTop:"0.5rem",transition:"transform 0.2s, box-shadow 0.2s"},infoBox:{padding:"1.25rem",background:"#f8f9fa",borderRadius:"12px",fontSize:"0.9rem",color:"#666",border:"1px solid #dee2e6"},code:{background:"#e9ecef",padding:"0.2rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem",fontFamily:"monospace",color:"#495057"}},Hx=()=>{const[r,s]=b.useState(!1),[u,c]=b.useState(!1),[f,g]=b.useState(""),x=async()=>{try{s(!0),g(""),console.log(" Creating billing configuration...");const y=Me(F,"config","billing");await ti(y,{currency:"USD",appointmentCost:50,prescriptionCost:20,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log(" Billing configuration created!"),c(!0)}catch(y){console.error(" Error:",y),g(y.message)}finally{s(!1)}};return t.jsx("div",{style:_n.container,children:t.jsxs("div",{style:_n.card,children:[t.jsx("h1",{style:_n.title,children:" Setup Billing Configuration"}),u?t.jsxs("div",{style:_n.successBox,children:[t.jsx("div",{style:_n.successIcon,children:""}),t.jsx("h2",{style:_n.successTitle,children:"Configuration Created!"}),t.jsx("p",{style:_n.successText,children:"The billing configuration has been successfully created."}),t.jsx("p",{style:_n.successText,children:"You can now access the Admin Dashboard to manage billing."}),t.jsx("button",{onClick:()=>window.location.href="/dashboard",style:_n.button,children:"Go to Dashboard"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:_n.description,children:"This will create the global billing configuration with default values:"}),t.jsxs("div",{style:_n.configBox,children:[t.jsxs("div",{style:_n.configItem,children:[t.jsx("strong",{children:"Currency:"})," USD"]}),t.jsxs("div",{style:_n.configItem,children:[t.jsx("strong",{children:"Appointment Cost:"})," $50"]}),t.jsxs("div",{style:_n.configItem,children:[t.jsx("strong",{children:"Prescription Cost:"})," $20"]})]}),t.jsx("p",{style:_n.note,children:" You can modify these values later from the Admin Dashboard > Config tab"}),f&&t.jsxs("div",{style:_n.error,children:[" Error: ",f]}),t.jsx("button",{onClick:x,disabled:r,style:_n.button,children:r?"Creating...":" Create Billing Config"})]})]})})},_n={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"3rem",maxWidth:"600px",width:"100%",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},title:{fontSize:"2rem",color:"#333",marginBottom:"1.5rem",textAlign:"center"},description:{fontSize:"1.1rem",color:"#666",marginBottom:"1.5rem",lineHeight:"1.6"},configBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem"},configItem:{padding:"0.5rem 0",fontSize:"1.1rem",color:"#333"},note:{background:"#e3f2fd",borderLeft:"4px solid #2196f3",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#1976d2"},error:{background:"#ffebee",borderLeft:"4px solid #f44336",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#c62828"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"transform 0.3s"},successBox:{textAlign:"center"},successIcon:{fontSize:"4rem",marginBottom:"1rem"},successTitle:{fontSize:"1.8rem",color:"#27ae60",marginBottom:"1rem"},successText:{fontSize:"1.1rem",color:"#666",marginBottom:"1rem",lineHeight:"1.6"}},Ux=()=>{const[r,s]=b.useState(!1),[u,c]=b.useState(""),f=ol(),g=async()=>{try{s(!0),c("Setting up multi-currency configuration...");const x=Me(F,"config","billing"),y=await Vt(x),j={...y.exists()?y.data():{},rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},updatedAt:new Date().toISOString()};await ti(x,j,{merge:!0}),c(" Multi-currency configuration updated successfully!"),setTimeout(()=>{f("/dashboard")},2e3)}catch(x){console.error("Error setting up multi-currency:",x),c(" Error: "+x.message)}finally{s(!1)}};return t.jsx("div",{style:ha.container,children:t.jsxs("div",{style:ha.card,children:[t.jsx("h1",{style:ha.title,children:" Multi-Currency Setup"}),t.jsxs("div",{style:ha.info,children:[t.jsx("h3",{children:"This will configure your billing system with:"}),t.jsxs("ul",{style:ha.list,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"INR ()"})," - For India: 500/appointment, 200/prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"GBP ()"})," - For all other countries: 5/appointment, 2/prescription"]})]}),t.jsxs("div",{style:ha.note,children:[t.jsx("strong",{children:" Note:"})," Currency is automatically selected based on the doctor/hospital's country field. Payment gateways will handle currency conversion if needed."]})]}),u&&t.jsx("div",{style:{...ha.message,backgroundColor:u.includes("")?"#d4edda":"#f8d7da",color:u.includes("")?"#155724":"#721c24"},children:u}),t.jsx("button",{onClick:g,disabled:r,style:{...ha.button,opacity:r?.6:1,cursor:r?"not-allowed":"pointer"},children:r?"Setting up...":" Setup Multi-Currency"}),t.jsx("button",{onClick:()=>f("/dashboard"),style:ha.backButton,children:" Back to Dashboard"})]})})},ha={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"600px",width:"100%",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},title:{color:"#667eea",marginBottom:"1.5rem",textAlign:"center"},info:{marginBottom:"2rem"},list:{marginLeft:"1.5rem",marginTop:"1rem",lineHeight:"2"},note:{marginTop:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},message:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",textAlign:"center",fontWeight:"500"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},backButton:{width:"100%",padding:"0.75rem",background:"#f5f5f5",color:"#666",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"}},Ox=()=>{const[r,s]=b.useState(null),[u,c]=b.useState([]),[f,g]=b.useState([]),[x,y]=b.useState(!0);b.useEffect(()=>{S()},[]);const S=async()=>{try{const j=Me(F,"config","billing"),A=await Vt(j),U=A.exists()?A.data():null;s(U);const R=ze(Ce(F,"users"),ce("role","==","doctor")),I=(await Pe(R)).docs.map(pe=>({id:pe.id,...pe.data()}));c(I.slice(0,5));const W=(await Pe(Ce(F,"hospitals"))).docs.map(pe=>({id:pe.id,...pe.data()}));g(W.slice(0,5)),y(!1)}catch(j){console.error("Error loading data:",j),y(!1)}};return x?t.jsx("div",{style:Yt.container,children:"Loading..."}):t.jsxs("div",{style:Yt.container,children:[t.jsx("h1",{style:Yt.title,children:" Currency Debug Tool"}),t.jsxs("div",{style:Yt.section,children:[t.jsx("h2",{children:" Global Config"}),t.jsx("pre",{style:Yt.code,children:JSON.stringify(r,null,2)}),!r?.rates&&t.jsxs("div",{style:Yt.warning,children:[" ",t.jsx("strong",{children:"No multi-currency rates found!"}),t.jsx("br",{}),"Go to ",t.jsx("a",{href:"/setup-multi-currency",children:"/setup-multi-currency"})," to set it up."]})]}),t.jsxs("div",{style:Yt.section,children:[t.jsx("h2",{children:" Sample Doctors (First 5)"}),u.map(j=>{const A=_l(j,r);return t.jsxs("div",{style:Yt.card,children:[t.jsxs("div",{style:Yt.cardHeader,children:[t.jsx("strong",{children:j.displayName||"No Name"}),t.jsx("span",{style:Yt.badge,children:j.country||" No Country"})]}),t.jsxs("div",{style:Yt.cardBody,children:[t.jsxs("div",{children:["Email: ",j.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:j.country||" NOT SET"})]}),t.jsxs("div",{style:Yt.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",A.currency," ",A.symbol,t.jsx("br",{}),"Appointment: ",A.symbol,A.appointmentCost,t.jsx("br",{}),"Prescription: ",A.symbol,A.prescriptionCost]}),j.customRates&&t.jsx("div",{style:Yt.customBadge,children:"Has Custom Rates"})]})]},j.id)})]}),t.jsxs("div",{style:Yt.section,children:[t.jsx("h2",{children:" Sample Hospitals (First 5)"}),f.map(j=>{const A=_l(j,r);return t.jsxs("div",{style:Yt.card,children:[t.jsxs("div",{style:Yt.cardHeader,children:[t.jsx("strong",{children:j.name||"No Name"}),t.jsx("span",{style:Yt.badge,children:j.country||" No Country"})]}),t.jsxs("div",{style:Yt.cardBody,children:[t.jsxs("div",{children:["Email: ",j.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:j.country||" NOT SET"})]}),t.jsxs("div",{style:Yt.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",A.currency," ",A.symbol,t.jsx("br",{}),"Appointment: ",A.symbol,A.appointmentCost,t.jsx("br",{}),"Prescription: ",A.symbol,A.prescriptionCost]}),j.customRates&&t.jsx("div",{style:Yt.customBadge,children:"Has Custom Rates"})]})]},j.id)})]}),t.jsxs("div",{style:Yt.section,children:[t.jsx("h2",{children:" Test Cases"}),t.jsxs("div",{style:Yt.testCase,children:[t.jsx("strong",{children:"Test: India"}),t.jsx("pre",{style:Yt.code,children:JSON.stringify(Ro("India",r),null,2)})]}),t.jsxs("div",{style:Yt.testCase,children:[t.jsx("strong",{children:"Test: United Kingdom"}),t.jsx("pre",{style:Yt.code,children:JSON.stringify(Ro("United Kingdom",r),null,2)})]}),t.jsxs("div",{style:Yt.testCase,children:[t.jsx("strong",{children:"Test: USA"}),t.jsx("pre",{style:Yt.code,children:JSON.stringify(Ro("USA",r),null,2)})]})]})]})},Yt={container:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"system-ui, -apple-system, sans-serif"},title:{color:"#667eea",marginBottom:"2rem"},section:{marginBottom:"3rem",background:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},code:{background:"#f5f5f5",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"0.9rem"},warning:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},card:{marginBottom:"1rem",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden"},cardHeader:{padding:"1rem",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},cardBody:{padding:"1rem"},badge:{padding:"0.25rem 0.75rem",background:"#667eea",color:"white",borderRadius:"12px",fontSize:"0.85rem"},ratesBox:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},customBadge:{marginTop:"0.5rem",padding:"0.5rem",background:"#fff3e0",borderRadius:"4px",fontSize:"0.85rem",color:"#e65100"},testCase:{marginBottom:"1rem"}},Lx=()=>{const{currentUser:r,userProfile:s}=_a(),u=ol(),[c,f]=b.useState(!1),[g,x]=b.useState(null),y=(A,U="success")=>{x({message:A,type:U}),setTimeout(()=>x(null),3e3)},S=()=>{r?.uid&&(navigator.clipboard.writeText(r.uid),f(!0),y("UID copied to clipboard!"),setTimeout(()=>f(!1),2e3))},j=()=>{r?.email&&(navigator.clipboard.writeText(r.email),y("Email copied to clipboard!"))};return r?t.jsxs("div",{style:dt.container,children:[g&&t.jsx("div",{style:{...dt.notification,background:g.type==="success"?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)"},children:g.message}),t.jsxs("div",{style:dt.header,children:[t.jsx("button",{onClick:()=>u("/dashboard"),style:dt.backButton,children:" Back to Dashboard"}),t.jsx("h1",{style:{margin:0,fontSize:"clamp(1.5rem, 4vw, 2.5rem)"},children:" My Profile Information"})]}),t.jsxs("div",{style:dt.card,children:[t.jsxs("div",{style:dt.cardHeader,children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" User Details"}),t.jsx("span",{style:dt.roleBadge,children:s?.role?.toUpperCase()||"USER"})]}),t.jsxs("div",{style:dt.infoGrid,children:[t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"User ID (UID)"})]}),t.jsx("div",{style:dt.infoValue,children:t.jsx("code",{style:dt.code,children:r.uid})}),t.jsx("button",{onClick:S,style:{...dt.button,...dt.copyButton,background:c?"#38ef7d":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:c?" Copied!":" Copy UID"})]}),t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Address"})]}),t.jsx("div",{style:dt.infoValue,children:r.email||"No email provided"}),r.email&&t.jsx("button",{onClick:j,style:{...dt.button,...dt.copyButton},children:" Copy Email"})]}),t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Display Name"})]}),t.jsx("div",{style:dt.infoValue,children:s?.displayName||"Not set"})]}),s?.phone&&t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Phone Number"})]}),t.jsx("div",{style:dt.infoValue,children:s.phone})]}),s?.hospitalId&&t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Hospital ID"})]}),t.jsx("div",{style:dt.infoValue,children:t.jsx("code",{style:dt.code,children:s.hospitalId})})]}),r.metadata?.creationTime&&t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem",display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:20})}),t.jsx("span",{children:"Account Created"})]}),t.jsx("div",{style:dt.infoValue,children:new Date(r.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{style:dt.infoCard,children:[t.jsxs("div",{style:dt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Verification"})]}),t.jsx("div",{style:dt.infoValue,children:t.jsx("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:r.emailVerified?"#38ef7d":"#ffa502",color:"white",fontSize:"0.9rem",fontWeight:"600"},children:r.emailVerified?" Verified":" Not Verified"})})]})]}),t.jsxs("div",{style:dt.infoBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#333"},children:"What is UID?"}),t.jsx("p",{style:{margin:0,color:"#666",lineHeight:"1.6"},children:"Your User ID (UID) is a unique identifier assigned to your account. It's used internally by the system to manage your data securely. You might need this when contacting support or for administrative purposes."})]})]}),t.jsx("style",{children:`
                @keyframes slideDown {
                    from {
                        transform: translateY(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]}):t.jsx("div",{style:dt.container,children:t.jsx("div",{style:dt.card,children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),t.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Authentication Required"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Please log in to view your user information"}),t.jsx("button",{onClick:()=>u("/login"),style:{...dt.button,...dt.primaryButton},children:"Go to Login"})]})})})},dt={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1rem, 3vw, 2rem)",position:"relative"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 2rem",borderRadius:"10px",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,animation:"slideDown 0.3s ease"},header:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1rem, 3vw, 2rem)",marginBottom:"2rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"1rem"},backButton:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",alignSelf:"flex-start",transition:"all 0.3s ease"},card:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1.5rem, 3vw, 2.5rem)",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e0e0e0",flexWrap:"wrap",gap:"1rem"},roleBadge:{padding:"0.5rem 1.5rem",borderRadius:"20px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontSize:"0.9rem",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},infoCard:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"15px",padding:"1.5rem",border:"2px solid #e0e0e0",transition:"all 0.3s ease"},infoLabel:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",color:"#666",fontSize:"0.9rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"1.1rem",color:"#333",fontWeight:"500",marginBottom:"1rem",wordBreak:"break-all"},code:{background:"#f5f5f5",padding:"0.5rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.9rem",display:"block"},button:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.3s ease",width:"100%"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},copyButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},infoBox:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"15px",padding:"2rem",textAlign:"center",border:"2px solid #667eea"}};async function Px(){console.log(" Starting hospital role migration...");try{const r=await Pe(Ce(F,"hospitals"));console.log(` Found ${r.size} hospitals`);let s=0,u=0,c=0;for(const f of r.docs){const g=f.data(),x=g.ownerId;if(!x){console.log(`  Hospital ${f.id} has no ownerId, skipping`),c++;continue}console.log(`
 Processing hospital: ${g.name} (${f.id})`),console.log(`   Owner UID: ${x}`);const y=Me(F,"users",x),S=await Vt(y);if(!S.exists()){console.log(` User document not found for UID: ${x}`),c++;continue}const j=S.data();console.log(`   Current role: ${j.role||"MISSING"}`),j.role==="hospital"?(console.log(" Already has correct role"),u++):(console.log(" Updating role to 'hospital'..."),await Ft(y,{role:"hospital",hospitalId:f.id}),console.log(" Role updated successfully!"),s++)}return console.log(`
`+"=".repeat(50)),console.log(" MIGRATION SUMMARY:"),console.log("=".repeat(50)),console.log(` Fixed: ${s}`),console.log(`  Already correct: ${u}`),console.log(` Errors: ${c}`),console.log(` Total processed: ${r.size}`),console.log("=".repeat(50)),{success:!0,fixed:s,alreadyCorrect:u,errors:c,total:r.size}}catch(r){return console.error(" Migration failed:",r),{success:!1,error:r.message}}}const Ix=()=>{const[r,s]=b.useState([]),[u,c]=b.useState([]),[f,g]=b.useState([]),[x,y]=b.useState(!0),[S,j]=b.useState(null),[A,U]=b.useState(!1);b.useEffect(()=>{R()},[]);const R=async()=>{try{const I=await Pe(Ce(F,"hospitals")),J=[];I.forEach(re=>{J.push({id:re.id,...re.data()})}),s(J),console.log(" Hospitals collection:",J);const W=await Pe(ze(Ce(F,"users"),ce("role","==","hospital"))),pe=[];W.forEach(re=>{pe.push({id:re.id,...re.data()})}),g(pe),console.log(" Hospital users:",pe);const E=await tc({});c(E),console.log(" Doctors:",E);const de=await Fr({});console.log(" getHospitals() result:",de)}catch(I){console.error("Error loading data:",I)}finally{y(!1)}},he=async()=>{if(confirm('This will update all hospital users to have role="hospital". Continue?')){U(!0),j(null);try{const I=await Px();j(I),await R()}catch(I){console.error("Migration error:",I),j({success:!1,error:I.message})}finally{U(!1)}}};return x?t.jsx("div",{style:{padding:"2rem"},children:"Loading database data..."}):t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace"},children:[t.jsx("h1",{children:" Database Debug Page"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginTop:0},children:" Fix Hospital Roles"}),t.jsx("p",{children:"If hospitals are not showing up when booking, click this button to fix their roles:"}),t.jsx("button",{onClick:he,disabled:A,style:{padding:"0.75rem 1.5rem",background:A?"#ccc":"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:A?"not-allowed":"pointer"},children:A?" Fixing...":" Fix Hospital Roles Now"}),S&&t.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:S.success?"#d4edda":"#f8d7da",borderRadius:"8px"},children:S.success?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Complete!"})}),t.jsxs("div",{children:["Fixed: ",S.fixed]}),t.jsxs("div",{children:["Already correct: ",S.alreadyCorrect]}),t.jsxs("div",{children:["Errors: ",S.errors]}),t.jsxs("div",{children:["Total: ",S.total]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Failed"})}),t.jsx("div",{children:S.error})]})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospitals Collection (",r.length,")"]}),r.length===0?t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[" No hospitals found in 'hospitals' collection",t.jsx("br",{}),t.jsx("strong",{children:"Problem:"})," Hospitals are not being saved during registration!"]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.map(I=>t.jsxs("div",{style:{padding:"1rem",background:"#e8f5e9",borderRadius:"8px",border:"2px solid #4caf50"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",I.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",I.name||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",I.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",I.country||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",I.state||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",I.city||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",I.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",I.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Owner ID:"})," ",I.ownerId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",I.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",I.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",I.city||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",I.address||"N/A"]})]},I.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospital Users (role='hospital') (",f.length,")"]}),f.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No users with role='hospital' found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:f.map(I=>t.jsxs("div",{style:{padding:"1rem",background:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",I.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",I.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",I.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Role:"})," ",I.role]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",I.hospitalId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",I.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",I.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",I.city||"N/A"]})]},I.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Doctors (",u.length,")"]}),u.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No doctors found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:u.map(I=>t.jsxs("div",{style:{padding:"1rem",background:"#f3e5f5",borderRadius:"8px",border:"2px solid #9c27b0"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",I.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",I.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",I.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Specialization:"})," ",I.specialization||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",I.hospitalId||"Independent"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",I.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",I.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",I.city||"N/A"]})]},I.id))})]}),t.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f5f5f5",borderRadius:"8px"},children:[t.jsx("h3",{children:" Summary"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Hospitals in 'hospitals' collection: ",t.jsx("strong",{children:r.length})]}),t.jsxs("li",{children:["Users with role='hospital': ",t.jsx("strong",{children:f.length})]}),t.jsxs("li",{children:["Doctors: ",t.jsx("strong",{children:u.length})]})]}),t.jsx("h3",{children:" What to Check"}),t.jsxs("ol",{style:{lineHeight:"1.8"},children:[t.jsx("li",{children:"If hospitals collection is empty, registration is not creating hospital documents"}),t.jsx("li",{children:"If hospitalUsers is empty, users aren't getting role='hospital' during registration"}),t.jsx("li",{children:"Check if hospital documents have location fields (country, state, city)"}),t.jsx("li",{children:"The BookAppointment page filters by location, so missing location = won't show up"})]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Solution:"})," If hospitals have no location data:",t.jsx("br",{}),"1. Go to Firebase Console  Firestore  hospitals collection",t.jsx("br",{}),"2. Edit each hospital document and add: country, state, city",t.jsx("br",{}),"3. OR re-register the hospital with complete profile"]})]}),t.jsx("button",{onClick:R,style:{marginTop:"2rem",padding:"1rem 2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Refresh Data"})]})},_x=()=>{const[r,s]=b.useState(null),[u,c]=b.useState(!1),f=async()=>{c(!0),s(`Starting test...
`);const g=`test_hospital_${Date.now()}@test.com`,x="TestPass123!",y=`Test Hospital ${Date.now()}`;try{s(E=>E+`
 Test 1: Registering hospital...`),s(E=>E+`
   Email: ${g}`),s(E=>E+`
   Name: ${y}`);const S=await rh(g,x,y,"hospital",{country:"Test Country",state:"Test State",city:"Test City",address:"Test Address"});s(E=>E+`
 Registration successful!`),s(E=>E+`
   User UID: ${S.uid}`),s(E=>E+`
   Hospital ID: ${S.hospitalId||"NOT SET"}`),await new Promise(E=>setTimeout(E,2e3)),s(E=>E+`

 Test 2: Checking hospitals collection...`);const j=await Pe(Ce(F,"hospitals"));s(E=>E+`
   Found ${j.size} hospitals`);let A=!1;j.forEach(E=>{const de=E.data();s(re=>re+`
   - ${de.name} (${E.id})`),de.email===g&&(A=!0,s(re=>re+"  OUR TEST HOSPITAL "))}),A||s(E=>E+`
 Our test hospital NOT found in hospitals collection!`),s(E=>E+`

 Test 3: Checking users collection...`),s(E=>E+`
   Looking for user: ${S.uid}`);const{doc:U,getDoc:R}=await Wr(async()=>{const{doc:E,getDoc:de}=await import("./firebase-p-DgfaJy.js").then(re=>re.K);return{doc:E,getDoc:de}},[]),he=U(F,"users",S.uid),I=await R(he);let J=!1;if(I.exists()){J=!0;const E=I.data();s(de=>de+`
    Found user: ${E.displayName} (${I.id})`),s(de=>de+`
     Email: ${E.email}`),s(de=>de+`
     Role: ${E.role||"NOT SET"} ${E.role==="hospital"?"":""}`),s(de=>de+`
     HospitalID: ${E.hospitalId||"NOT SET"}`)}else s(E=>E+`
 User document not found!`);J||s(E=>E+`
 Our test user NOT found in users collection!`),s(E=>E+`

 Test 4: Testing getHospitals() function...`);const W=await Fr({});s(E=>E+`
   getHospitals() returned ${W.length} hospitals`);const pe=W.find(E=>E.email===g);s(pe?E=>E+`
 Our test hospital found via getHospitals()!`:E=>E+`
 Our test hospital NOT found via getHospitals()!`),s(E=>E+`

`+"=".repeat(50)),A&&J&&pe?s(E=>E+`
 ALL TESTS PASSED - Hospital registration is working!`):(s(E=>E+`
 SOME TESTS FAILED - There is an issue with registration`),A||s(E=>E+`
   - Hospital not in hospitals collection`),J||s(E=>E+`
   - User not in users collection`),pe||s(E=>E+`
   - getHospitals() not returning hospital`)),s(E=>E+`
`+"=".repeat(50))}catch(S){s(j=>j+`

 ERROR: ${S.message}`),s(j=>j+`
   Code: ${S.code||"N/A"}`),s(j=>j+`
   Stack: ${S.stack}`),console.error("Test error:",S)}finally{c(!1)}};return t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[t.jsx("h1",{children:" Hospital Registration Test"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("p",{children:t.jsx("strong",{children:"This test will:"})}),t.jsxs("ol",{children:[t.jsx("li",{children:"Register a new test hospital"}),t.jsx("li",{children:"Check if it appears in hospitals collection"}),t.jsx("li",{children:"Check if user has correct role in users collection"}),t.jsx("li",{children:"Test if getHospitals() returns it"})]}),t.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#666"},children:[t.jsx("strong",{children:"Note:"})," This will create a real test hospital in your database. You can delete it later from Firebase Console if needed."]})]}),t.jsx("button",{onClick:f,disabled:u,style:{padding:"1rem 2rem",background:u?"#ccc":"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:u?"not-allowed":"pointer",marginBottom:"2rem"},children:u?" Running Tests...":" Run Test"}),r&&t.jsx("div",{style:{padding:"1.5rem",background:"#1e1e1e",color:"#00ff00",borderRadius:"8px",fontSize:"0.9rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"Consolas, Monaco, monospace",maxHeight:"600px",overflow:"auto"},children:r})]})},qx=()=>{const[r,s]=b.useState([]),[u,c]=b.useState(!1),[f,g]=b.useState(""),x=async()=>{c(!0);try{const S=await Pe(Ce(F,"hospitals")),j=[];S.forEach(A=>{j.push({id:A.id,...A.data()})}),s(j),g(`Loaded ${j.length} hospitals`)}catch(S){g(`Error: ${S.message}`)}finally{c(!1)}},y=async(S,j)=>{try{await Ft(Me(F,"hospitals",S),{country:j.country,state:j.state,city:j.city,address:j.address||""}),g(A=>A+`
 Updated ${S}`),await x()}catch(A){g(U=>U+`
 Failed ${S}: ${A.message}`)}};return t.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[t.jsx("h1",{children:" Fix Hospital Locations"}),t.jsx("button",{onClick:x,disabled:u,style:{padding:"1rem 2rem",background:"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:u?"not-allowed":"pointer",marginBottom:"2rem"},children:u?"Loading...":" Load Hospitals"}),f&&t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"2rem",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:f}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.map(S=>{const j=S.country&&S.state&&S.city;return t.jsxs("div",{style:{padding:"1.5rem",background:j?"#e8f5e9":"#fff3cd",border:`2px solid ${j?"#4caf50":"#ffc107"}`,borderRadius:"12px"},children:[t.jsxs("h3",{style:{marginTop:0},children:[j?"":""," ",S.name]}),t.jsxs("div",{style:{marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",S.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",S.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",S.country||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",S.state||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",S.city||t.jsx("span",{style:{color:"red"},children:" MISSING"})]})]}),!j&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsx("h4",{children:"Add Location:"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsx("input",{type:"text",placeholder:"Country",id:`country-${S.id}`,defaultValue:S.country||"",style:ko.input}),t.jsx("input",{type:"text",placeholder:"State",id:`state-${S.id}`,defaultValue:S.state||"",style:ko.input}),t.jsx("input",{type:"text",placeholder:"City",id:`city-${S.id}`,defaultValue:S.city||"",style:ko.input}),t.jsx("input",{type:"text",placeholder:"Address (optional)",id:`address-${S.id}`,defaultValue:S.address||"",style:ko.input}),t.jsx("button",{onClick:()=>{const A=document.getElementById(`country-${S.id}`).value,U=document.getElementById(`state-${S.id}`).value,R=document.getElementById(`city-${S.id}`).value,he=document.getElementById(`address-${S.id}`).value;if(!A||!U||!R){alert("Country, State, and City are required!");return}y(S.id,{country:A,state:U,city:R,address:he})},style:ko.button,children:" Save Location"})]})]})]},S.id)})})]})},ko={input:{padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem"},button:{padding:"0.75rem 1.5rem",background:"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"}},Gx=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Privacy Policy"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'This Privacy Policy describes how Souldoc ("we", "us", or "our") collects, uses, and shares personal information when you use our services. We are committed to protecting your privacy and will handle your personal information in accordance with applicable laws.'}),t.jsx("h2",{children:"Information We Collect"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Account information (name, email, phone) when you register or book appointments."}),t.jsx("li",{children:"Appointment and payment history."}),t.jsx("li",{children:"Device and usage information (IP address, browser, logs) to improve service quality."})]}),t.jsx("h2",{children:"How We Use Information"}),t.jsx("p",{children:"We use the information to provide, maintain, and improve our services, process transactions, communicate with you, and for fraud prevention."}),t.jsx("h2",{children:"Sharing and Disclosure"}),t.jsx("p",{children:"We may share information with service providers, payment processors, and when required by law. We do not sell personal information."}),t.jsx("h2",{children:"Data Security"}),t.jsx("p",{children:"We maintain reasonable administrative and technical safeguards to protect personal information. However, no method of transmission over the Internet is completely secure."}),t.jsx("h2",{children:"Your Rights"}),t.jsxs("p",{children:["You may access, correct, or request deletion of your personal information. To do so, contact us at ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]}),t.jsx("h2",{children:"Changes"}),t.jsx("p",{children:"We may update this policy from time to time. We will post any changes on this page with a revised date."})]}),Wx=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Terms of Service"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'These Terms of Service ("Terms") govern your access to and use of Souldoc (the "Service"). By using the Service you agree to these Terms.'}),t.jsx("h2",{children:"Use of the Service"}),t.jsx("p",{children:"You may use the Service only in compliance with these Terms and all applicable laws. You must provide accurate information during registration and booking."}),t.jsx("h2",{children:"Payments"}),t.jsx("p",{children:"Payments processed through the Service are subject to our billing policies. We may use third-party payment processors; their terms will also apply."}),t.jsx("h2",{children:"Intellectual Property"}),t.jsx("p",{children:"All content, trademarks, and software provided on the Service are the property of Souldoc or its licensors."}),t.jsx("h2",{children:"Limitation of Liability"}),t.jsx("p",{children:"To the maximum extent permitted by law, Souldoc will not be liable for any indirect, incidental, or consequential damages arising from your use of the Service."}),t.jsx("h2",{children:"Governing Law"}),t.jsx("p",{children:"These Terms are governed by the laws of the jurisdiction in which the company operates. Any disputes will be resolved under those laws."}),t.jsx("h2",{children:"Contact"}),t.jsxs("p",{children:["Questions about these Terms should be sent to ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]})]}),Yx=({children:r})=>{const{isAuthenticated:s,loading:u}=_a();return u?t.jsx("div",{children:"Loading..."}):s?r:t.jsx(Sg,{to:"/login"})};function Fx(){const r=()=>{const s=ol();return b.useEffect(()=>{let u=null;return(async()=>{try{const c=await Function('return import("@capacitor/core")')();if((c?.Capacitor?.getPlatform?c.Capacitor.getPlatform():"web")==="web")return;const y=(await Function('return import("@capacitor/app")')()).App.addListener("backButton",({canGoBack:S})=>{S&&s(-1)});u=y&&y.remove?()=>y.remove():null}catch(c){console.debug("Capacitor App plugin not available (web/dev):",c?.message||c)}})(),()=>{try{u&&u()}catch{}}},[s]),null};return t.jsxs(vg,{children:[t.jsx(r,{}),t.jsxs(jg,{children:[t.jsx(ei,{path:"/",element:t.jsx(Qg,{})}),t.jsx(ei,{path:"/book",element:t.jsx(Mx,{})}),t.jsx(ei,{path:"/login",element:t.jsx(Ey,{})}),t.jsx(ei,{path:"/register",element:t.jsx(Ly,{})}),t.jsx(ei,{path:"/setup-admin",element:t.jsx(Nx,{})}),t.jsx(ei,{path:"/setup-billing",element:t.jsx(Hx,{})}),t.jsx(ei,{path:"/setup-multi-currency",element:t.jsx(Ux,{})}),t.jsx(ei,{path:"/debug-currency",element:t.jsx(Ox,{})}),t.jsx(ei,{path:"/privacy",element:t.jsx(Gx,{})}),t.jsx(ei,{path:"/terms",element:t.jsx(Wx,{})}),t.jsx(ei,{path:"/get-my-uid",element:t.jsx(Lx,{})}),t.jsx(ei,{path:"/debug-database",element:t.jsx(Ix,{})}),t.jsx(ei,{path:"/test-hospital",element:t.jsx(_x,{})}),t.jsx(ei,{path:"/fix-hospitals",element:t.jsx(qx,{})}),t.jsx(ei,{path:"/dashboard",element:t.jsx(Yx,{children:t.jsx(Ax,{})})})]})]})}let Lr,Zd;const Vx=()=>(b.useEffect(()=>{(async()=>{try{const r=await Function('return import("@capacitor/core")')(),s=r?.Capacitor?.getPlatform?r.Capacitor.getPlatform():"web";try{Lr=(await Function('return import("@capacitor/status-bar")')()).StatusBar,s==="ios"?await Lr.setStyle({style:"LIGHT"}):s==="android"&&(await Lr.setBackgroundColor({color:"#0f766e"}),await Lr.setStyle({style:"DARK"}))}catch(u){console.debug("StatusBar plugin not available (web/dev):",u?.message||u)}try{Zd=(await Function('return import("@capacitor/keyboard")')()).Keyboard,s==="ios"?await Zd.setResizeMode({mode:"body"}):s==="android"&&await Zd.setResizeMode({mode:"native"})}catch(u){console.debug("Keyboard plugin not available (web/dev):",u?.message||u)}}catch(r){console.debug("Capacitor core not available (web/dev):",r?.message||r)}})()},[]),t.jsx(b.StrictMode,{children:t.jsx(Oy,{children:t.jsx(Fx,{})})}));Vg.createRoot(document.getElementById("root")).render(t.jsx(Vx,{}));
