import{r as ag,a as lg,L as ci,b as x,u as Sl,c as og,B as sg,R as rg,d as _n,N as dg}from"./react-vendor-Dqf2LXFM.js";import{_ as cg,C as ug,r as Tm,a as pg,g as mg,b as hg,c as qd,d as fg,i as Im,p as gg,u as yg,F as xg,e as bg,f as vg,h as jg,j as Se,k as Gt,l as xe,q as Oe,w as ye,m as Re,n as Zt,s as qn,o as Sg,t as wg,v as zm,x as Rm,y as Cg,z as Ag,A as Ia,T as As,B as ea,D as Dg}from"./firebase-Culp_hMH.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))u(g);new MutationObserver(g=>{for(const f of g)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&u(y)}).observe(document,{childList:!0,subtree:!0});function c(g){const f={};return g.integrity&&(f.integrity=g.integrity),g.referrerPolicy&&(f.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?f.credentials="include":g.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(g){if(g.ep)return;g.ep=!0;const f=c(g);fetch(g.href,f)}})();var Nd={exports:{}},po={};var Bm;function Tg(){if(Bm)return po;Bm=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(u,g,f){var y=null;if(f!==void 0&&(y=""+f),g.key!==void 0&&(y=""+g.key),"key"in g){f={};for(var b in g)b!=="key"&&(f[b]=g[b])}else f=g;return g=f.ref,{$$typeof:s,type:u,key:y,ref:g!==void 0?g:null,props:f}}return po.Fragment=r,po.jsx=c,po.jsxs=c,po}var km;function zg(){return km||(km=1,Nd.exports=Tg()),Nd.exports}var t=zg(),Md={exports:{}},mo={},Hd={exports:{}},Ud={};var Em;function Rg(){return Em||(Em=1,(function(s){function r(I,re){var fe=I.length;I.push(re);e:for(;0<fe;){var Je=fe-1>>>1,qe=I[Je];if(0<g(qe,re))I[Je]=re,I[fe]=qe,fe=Je;else break e}}function c(I){return I.length===0?null:I[0]}function u(I){if(I.length===0)return null;var re=I[0],fe=I.pop();if(fe!==re){I[0]=fe;e:for(var Je=0,qe=I.length,Ae=qe>>>1;Je<Ae;){var We=2*(Je+1)-1,$e=I[We],ft=We+1,Ie=I[ft];if(0>g($e,fe))ft<qe&&0>g(Ie,$e)?(I[Je]=Ie,I[ft]=fe,Je=ft):(I[Je]=$e,I[We]=fe,Je=We);else if(ft<qe&&0>g(Ie,fe))I[Je]=Ie,I[ft]=fe,Je=ft;else break e}}return re}function g(I,re){var fe=I.sortIndex-re.sortIndex;return fe!==0?fe:I.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var y=Date,b=y.now();s.unstable_now=function(){return y.now()-b}}var A=[],w=[],T=1,N=null,R=3,$=!1,L=!1,ce=!1,W=!1,se=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function ae(I){for(var re=c(w);re!==null;){if(re.callback===null)u(w);else if(re.startTime<=I)u(w),re.sortIndex=re.expirationTime,r(A,re);else break;re=c(w)}}function Be(I){if(ce=!1,ae(I),!L)if(c(A)!==null)L=!0,rt||(rt=!0,de());else{var re=c(w);re!==null&&Ke(Be,re.startTime-I)}}var rt=!1,ve=-1,K=5,De=-1;function q(){return W?!0:!(s.unstable_now()-De<K)}function Fe(){if(W=!1,rt){var I=s.unstable_now();De=I;var re=!0;try{e:{L=!1,ce&&(ce=!1,E(ve),ve=-1),$=!0;var fe=R;try{t:{for(ae(I),N=c(A);N!==null&&!(N.expirationTime>I&&q());){var Je=N.callback;if(typeof Je=="function"){N.callback=null,R=N.priorityLevel;var qe=Je(N.expirationTime<=I);if(I=s.unstable_now(),typeof qe=="function"){N.callback=qe,ae(I),re=!0;break t}N===c(A)&&u(A),ae(I)}else u(A);N=c(A)}if(N!==null)re=!0;else{var Ae=c(w);Ae!==null&&Ke(Be,Ae.startTime-I),re=!1}}break e}finally{N=null,R=fe,$=!1}re=void 0}}finally{re?de():rt=!1}}}var de;if(typeof S=="function")de=function(){S(Fe)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,ht=dt.port2;dt.port1.onmessage=Fe,de=function(){ht.postMessage(null)}}else de=function(){se(Fe,0)};function Ke(I,re){ve=se(function(){I(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(I){switch(R){case 1:case 2:case 3:var re=3;break;default:re=R}var fe=R;R=re;try{return I()}finally{R=fe}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(I,re){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var fe=R;R=I;try{return re()}finally{R=fe}},s.unstable_scheduleCallback=function(I,re,fe){var Je=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Je+fe:Je):fe=Je,I){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=fe+qe,I={id:T++,callback:re,priorityLevel:I,startTime:fe,expirationTime:qe,sortIndex:-1},fe>Je?(I.sortIndex=fe,r(w,I),c(A)===null&&I===c(w)&&(ce?(E(ve),ve=-1):ce=!0,Ke(Be,fe-Je))):(I.sortIndex=qe,r(A,I),L||$||(L=!0,rt||(rt=!0,de()))),I},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(I){var re=R;return function(){var fe=R;R=re;try{return I.apply(this,arguments)}finally{R=fe}}}})(Ud)),Ud}var Nm;function Bg(){return Nm||(Nm=1,Hd.exports=Rg()),Hd.exports}var Mm;function kg(){if(Mm)return mo;Mm=1;var s=Bg(),r=ag(),c=lg();function u(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function y(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function b(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function A(e){if(f(e)!==e)throw Error(u(188))}function w(e){var n=e.alternate;if(!n){if(n=f(e),n===null)throw Error(u(188));return n!==e?null:e}for(var i=e,a=n;;){var l=i.return;if(l===null)break;var o=l.alternate;if(o===null){if(a=l.return,a!==null){i=a;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===i)return A(l),e;if(o===a)return A(l),n;o=o.sibling}throw Error(u(188))}if(i.return!==a.return)i=l,a=o;else{for(var d=!1,p=l.child;p;){if(p===i){d=!0,i=l,a=o;break}if(p===a){d=!0,a=l,i=o;break}p=p.sibling}if(!d){for(p=o.child;p;){if(p===i){d=!0,i=o,a=l;break}if(p===a){d=!0,a=o,i=l;break}p=p.sibling}if(!d)throw Error(u(189))}}if(i.alternate!==a)throw Error(u(190))}if(i.tag!==3)throw Error(u(188));return i.stateNode.current===i?e:n}function T(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=T(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,R=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),S=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),De=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),Fe=Symbol.iterator;function de(e){return e===null||typeof e!="object"?null:(e=Fe&&e[Fe]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ce:return"Fragment";case se:return"Profiler";case W:return"StrictMode";case Be:return"Suspense";case rt:return"SuspenseList";case De:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case S:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case ae:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ve:return n=e.displayName||null,n!==null?n:ht(e.type)||"Memo";case K:n=e._payload,e=e._init;try{return ht(e(n))}catch{}}return null}var Ke=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Je=[],qe=-1;function Ae(e){return{current:e}}function We(e){0>qe||(e.current=Je[qe],Je[qe]=null,qe--)}function $e(e,n){qe++,Je[qe]=e.current,e.current=n}var ft=Ae(null),Ie=Ae(null),at=Ae(null),Dn=Ae(null);function Qt(e,n){switch($e(at,n),$e(Ie,e),$e(ft,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Zp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Zp(n),e=Kp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}We(ft),$e(ft,e)}function Kt(){We(ft),We(Ie),We(at)}function lt(e){e.memoizedState!==null&&$e(Dn,e);var n=ft.current,i=Kp(n,e.type);n!==i&&($e(Ie,e),$e(ft,i))}function en(e){Ie.current===e&&(We(ft),We(Ie)),Dn.current===e&&(We(Dn),so._currentValue=fe)}var At,tn;function k(e){if(At===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);At=n&&n[1]||"",tn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+tn}var Te=!1;function He(e,n){if(!e||Te)return"";Te=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(P){var U=P}Reflect.construct(e,[],te)}else{try{te.call()}catch(P){U=P}e.call(te.prototype)}}else{try{throw Error()}catch(P){U=P}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(P){if(P&&U&&typeof P.stack=="string")return[P.stack,U.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=a.DetermineComponentFrameRoot(),d=o[0],p=o[1];if(d&&p){var j=d.split(`
`),H=p.split(`
`);for(l=a=0;a<j.length&&!j[a].includes("DetermineComponentFrameRoot");)a++;for(;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;if(a===j.length||l===H.length)for(a=j.length-1,l=H.length-1;1<=a&&0<=l&&j[a]!==H[l];)l--;for(;1<=a&&0<=l;a--,l--)if(j[a]!==H[l]){if(a!==1||l!==1)do if(a--,l--,0>l||j[a]!==H[l]){var F=`
`+j[a].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=a&&0<=l);break}}}finally{Te=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?k(i):""}function Ge(e,n){switch(e.tag){case 26:case 27:case 5:return k(e.type);case 16:return k("Lazy");case 13:return e.child!==n&&n!==null?k("Suspense Fallback"):k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return He(e.type,!1);case 11:return He(e.type.render,!1);case 1:return He(e.type,!0);case 31:return k("Activity");default:return""}}function ne(e){try{var n="",i=null;do n+=Ge(e,i),i=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var St=Object.prototype.hasOwnProperty,Ot=s.unstable_scheduleCallback,wt=s.unstable_cancelCallback,jn=s.unstable_shouldYield,zi=s.unstable_requestPaint,rn=s.unstable_now,Sn=s.unstable_getCurrentPriorityLevel,et=s.unstable_ImmediatePriority,_=s.unstable_UserBlockingPriority,X=s.unstable_NormalPriority,ge=s.unstable_LowPriority,ke=s.unstable_IdlePriority,me=s.log,Ee=s.unstable_setDisableYieldValue,ot=null,Nt=null;function Ue(e){if(typeof me=="function"&&Ee(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ot,e)}catch{}}var dn=Math.clz32?Math.clz32:ei,ji=Math.log,In=Math.LN2;function ei(e){return e>>>=0,e===0?32:31-(ji(e)/In|0)|0}var wn=256,nn=262144,gt=4194304;function an(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mn(e,n,i){var a=e.pendingLanes;if(a===0)return 0;var l=0,o=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var p=a&134217727;return p!==0?(a=p&~o,a!==0?l=an(a):(d&=p,d!==0?l=an(d):i||(i=p&~e,i!==0&&(l=an(i))))):(p=a&~o,p!==0?l=an(p):d!==0?l=an(d):i||(i=a&~e,i!==0&&(l=an(i)))),l===0?0:n!==0&&n!==l&&(n&o)===0&&(o=l&-l,i=n&-n,o>=i||o===32&&(i&4194048)!==0)?n:l}function Ye(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Si(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ri(){var e=gt;return gt<<=1,(gt&62914560)===0&&(gt=4194304),e}function ti(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Tn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ct(e,n,i,a,l,o){var d=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,j=e.expirationTimes,H=e.hiddenUpdates;for(i=d&~i;0<i;){var F=31-dn(i),te=1<<F;p[F]=0,j[F]=-1;var U=H[F];if(U!==null)for(H[F]=null,F=0;F<U.length;F++){var P=U[F];P!==null&&(P.lane&=-536870913)}i&=~te}a!==0&&C(e,a,0),o!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=o&~(d&~n))}function C(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-dn(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|i&261930}function O(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var a=31-dn(i),l=1<<a;l&n|e[a]&n&&(e[a]|=n),i&=~l}}function G(e,n){var i=n&-n;return i=(i&42)!==0?1:ie(i),(i&(e.suspendedLanes|n))!==0?0:i}function ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Me(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:vm(e.type))}function Dt(e,n){var i=re.p;try{return re.p=e,n()}finally{re.p=i}}var Xe=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Xe,hn="__reactProps$"+Xe,ui="__reactContainer$"+Xe,Ve="__reactEvents$"+Xe,ni="__reactListeners$"+Xe,Tt="__reactHandles$"+Xe,Gn="__reactResources$"+Xe,Un="__reactMarker$"+Xe;function Wn(e){delete e[Ft],delete e[hn],delete e[Ve],delete e[ni],delete e[Tt]}function Bi(e){var n=e[Ft];if(n)return n;for(var i=e.parentNode;i;){if(n=i[ui]||i[Ft]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=am(e);e!==null;){if(i=e[Ft])return i;e=am(e)}return n}e=i,i=e.parentNode}return null}function ki(e){if(e=e[Ft]||e[ui]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(u(33))}function Ei(e){var n=e[Gn];return n||(n=e[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Q(e){e[Un]=!0}var v=new Set,oe={};function Pe(e,n){ct(e,n),ct(e+"Capture",n)}function ct(e,n){for(oe[e]=n,e=0;e<n.length;e++)v.add(n[e])}var Xt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ee={},h={};function z(e){return St.call(h,e)?!0:St.call(ee,e)?!1:Xt.test(e)?h[e]=!0:(ee[e]=!0,!1)}function Y(e,n,i){if(z(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function he(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function le(e,n,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+a)}}function pe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tt(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function we(e,n,i){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,o=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(d){i=""+d,o.call(this,d)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ze(e){if(!e._valueTracker){var n=tt(e)?"checked":"value";e._valueTracker=we(e,n,""+e[n])}}function st(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),a="";return e&&(a=tt(e)?e.checked?"true":"false":e.value),e=a,e!==i?(n.setValue(e),!0):!1}function bt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vt=/[\n"\\]/g;function _e(e){return e.replace(vt,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ln(e,n,i,a,l,o,d,p){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),n!=null?d==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+pe(n)):e.value!==""+pe(n)&&(e.value=""+pe(n)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),n!=null?ut(e,d,pe(n)):i!=null?ut(e,d,pe(i)):a!=null&&e.removeAttribute("value"),l==null&&o!=null&&(e.defaultChecked=!!o),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+pe(p):e.removeAttribute("name")}function Bt(e,n,i,a,l,o,d,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),n!=null||i!=null){if(!(o!=="submit"&&o!=="reset"||n!=null)){ze(e);return}i=i!=null?""+pe(i):"",n=n!=null?""+pe(n):i,p||n===e.value||(e.value=n),e.defaultValue=n}a=a??l,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=p?e.checked:!!a,e.defaultChecked=!!a,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),ze(e)}function ut(e,n,i){n==="number"&&bt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function kt(e,n,i,a){if(e=e.options,n){n={};for(var l=0;l<i.length;l++)n["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=n.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&a&&(e[i].defaultSelected=!0)}else{for(i=""+pe(i),n=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}n!==null||e[l].disabled||(n=e[l])}n!==null&&(n.selected=!0)}}function Mt(e,n,i){if(n!=null&&(n=""+pe(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+pe(i):""}function Lt(e,n,i,a){if(n==null){if(a!=null){if(i!=null)throw Error(u(92));if(Ke(a)){if(1<a.length)throw Error(u(93));a=a[0]}i=a}i==null&&(i=""),n=i}i=pe(n),e.defaultValue=i,a=e.textContent,a===i&&a!==""&&a!==null&&(e.value=a),ze(e)}function Pt(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Rn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cn(e,n,i){var a=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,i):typeof i!="number"||i===0||Rn.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function on(e,n,i){if(n!=null&&typeof n!="object")throw Error(u(62));if(e=e.style,i!=null){for(var a in i)!i.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var l in n)a=n[l],n.hasOwnProperty(l)&&i[l]!==a&&cn(e,l,a)}else for(var o in n)n.hasOwnProperty(o)&&cn(e,o,n[o])}function Ln(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function On(e){return Bn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wi(){}var go=null;function ks(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ga=null,Wa=null;function Xd(e){var n=ki(e);if(n&&(e=n.stateNode)){var i=e[hn]||null;e:switch(e=n.stateNode,n.type){case"input":if(ln(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+_e(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var a=i[n];if(a!==e&&a.form===e.form){var l=a[hn]||null;if(!l)throw Error(u(90));ln(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(n=0;n<i.length;n++)a=i[n],a.form===e.form&&st(a)}break e;case"textarea":Mt(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&kt(e,!!i.multiple,n,!1)}}}var Es=!1;function Zd(e,n,i){if(Es)return e(n,i);Es=!0;try{var a=e(n);return a}finally{if(Es=!1,(Ga!==null||Wa!==null)&&(is(),Ga&&(n=Ga,e=Wa,Wa=Ga=null,Xd(n),e)))for(n=0;n<e.length;n++)Xd(e[n])}}function Cl(e,n){var i=e.stateNode;if(i===null)return null;var a=i[hn]||null;if(a===null)return null;i=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(u(231,n,typeof i));return i}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(Oi)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{Ns=!1}var ta=null,Ms=null,yo=null;function Kd(){if(yo)return yo;var e,n=Ms,i=n.length,a,l="value"in ta?ta.value:ta.textContent,o=l.length;for(e=0;e<i&&n[e]===l[e];e++);var d=i-e;for(a=1;a<=d&&n[i-a]===l[o-a];a++);return yo=l.slice(e,1<a?1-a:void 0)}function xo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function bo(){return!0}function Jd(){return!1}function Yn(e){function n(i,a,l,o,d){this._reactName=i,this._targetInst=l,this.type=a,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bo:Jd,this.isPropagationStopped=Jd,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),n}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=Yn(Aa),Dl=N({},Aa,{view:0,detail:0}),th=Yn(Dl),Hs,Us,Tl,jo=N({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(Hs=e.screenX-Tl.screenX,Us=e.screenY-Tl.screenY):Us=Hs=0,Tl=e),Hs)},movementY:function(e){return"movementY"in e?e.movementY:Us}}),$d=Yn(jo),nh=N({},jo,{dataTransfer:0}),ih=Yn(nh),ah=N({},Dl,{relatedTarget:0}),Os=Yn(ah),lh=N({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=Yn(lh),sh=N({},Aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rh=Yn(sh),dh=N({},Aa,{data:0}),ec=Yn(dh),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ph[e])?!!n[e]:!1}function Ls(){return mh}var hh=N({},Dl,{key:function(e){if(e.key){var n=ch[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=xo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(e){return e.type==="keypress"?xo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fh=Yn(hh),gh=N({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=Yn(gh),yh=N({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),xh=Yn(yh),bh=N({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),vh=Yn(bh),jh=N({},jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sh=Yn(jh),wh=N({},Aa,{newState:0,oldState:0}),Ch=Yn(wh),Ah=[9,13,27,32],Ps=Oi&&"CompositionEvent"in window,zl=null;Oi&&"documentMode"in document&&(zl=document.documentMode);var Dh=Oi&&"TextEvent"in window&&!zl,nc=Oi&&(!Ps||zl&&8<zl&&11>=zl),ic=" ",ac=!1;function lc(e,n){switch(e){case"keyup":return Ah.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function Th(e,n){switch(e){case"compositionend":return oc(n);case"keypress":return n.which!==32?null:(ac=!0,ic);case"textInput":return e=n.data,e===ic&&ac?null:e;default:return null}}function zh(e,n){if(Ya)return e==="compositionend"||!Ps&&lc(e,n)?(e=Kd(),yo=Ms=ta=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return nc&&n.locale!=="ko"?null:n.data;default:return null}}var Rh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Rh[e.type]:n==="textarea"}function rc(e,n,i,a){Ga?Wa?Wa.push(a):Wa=[a]:Ga=a,n=cs(n,"onChange"),0<n.length&&(i=new vo("onChange","change",null,i,a),e.push({event:i,listeners:n}))}var Rl=null,Bl=null;function Bh(e){Wp(e,0)}function So(e){var n=pi(e);if(st(n))return e}function dc(e,n){if(e==="change")return n}var cc=!1;if(Oi){var _s;if(Oi){var qs="oninput"in document;if(!qs){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),qs=typeof uc.oninput=="function"}_s=qs}else _s=!1;cc=_s&&(!document.documentMode||9<document.documentMode)}function pc(){Rl&&(Rl.detachEvent("onpropertychange",mc),Bl=Rl=null)}function mc(e){if(e.propertyName==="value"&&So(Bl)){var n=[];rc(n,Bl,e,ks(e)),Zd(Bh,n)}}function kh(e,n,i){e==="focusin"?(pc(),Rl=n,Bl=i,Rl.attachEvent("onpropertychange",mc)):e==="focusout"&&pc()}function Eh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return So(Bl)}function Nh(e,n){if(e==="click")return So(n)}function Mh(e,n){if(e==="input"||e==="change")return So(n)}function Hh(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ii=typeof Object.is=="function"?Object.is:Hh;function kl(e,n){if(ii(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),a=Object.keys(n);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var l=i[a];if(!St.call(n,l)||!ii(e[l],n[l]))return!1}return!0}function hc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fc(e,n){var i=hc(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=n&&a>=n)return{node:i,offset:n-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hc(i)}}function gc(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?gc(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function yc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=bt(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=bt(e.document)}return n}function Is(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Uh=Oi&&"documentMode"in document&&11>=document.documentMode,Va=null,Gs=null,El=null,Ws=!1;function xc(e,n,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ws||Va==null||Va!==bt(a)||(a=Va,"selectionStart"in a&&Is(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),El&&kl(El,a)||(El=a,a=cs(Gs,"onSelect"),0<a.length&&(n=new vo("onSelect","select",null,n,i),e.push({event:n,listeners:a}),n.target=Va)))}function Da(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Qa={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Ys={},bc={};Oi&&(bc=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Ta(e){if(Ys[e])return Ys[e];if(!Qa[e])return e;var n=Qa[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in bc)return Ys[e]=n[i];return e}var vc=Ta("animationend"),jc=Ta("animationiteration"),Sc=Ta("animationstart"),Oh=Ta("transitionrun"),Lh=Ta("transitionstart"),Ph=Ta("transitioncancel"),wc=Ta("transitionend"),Cc=new Map,Vs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vs.push("scrollEnd");function Ci(e,n){Cc.set(e,n),Pe(n,[e])}var wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},mi=[],Fa=0,Qs=0;function Co(){for(var e=Fa,n=Qs=Fa=0;n<e;){var i=mi[n];mi[n++]=null;var a=mi[n];mi[n++]=null;var l=mi[n];mi[n++]=null;var o=mi[n];if(mi[n++]=null,a!==null&&l!==null){var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}o!==0&&Ac(i,l,o)}}function Ao(e,n,i,a){mi[Fa++]=e,mi[Fa++]=n,mi[Fa++]=i,mi[Fa++]=a,Qs|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Fs(e,n,i,a){return Ao(e,n,i,a),Do(e)}function za(e,n){return Ao(e,null,null,n),Do(e)}function Ac(e,n,i){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i);for(var l=!1,o=e.return;o!==null;)o.childLanes|=i,a=o.alternate,a!==null&&(a.childLanes|=i),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(l=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,l&&n!==null&&(l=31-dn(i),e=o.hiddenUpdates,a=e[l],a===null?e[l]=[n]:a.push(n),n.lane=i|536870912),o):null}function Do(e){if(50<eo)throw eo=0,id=null,Error(u(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Xa={};function _h(e,n,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(e,n,i,a){return new _h(e,n,i,a)}function Xs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,n){var i=e.alternate;return i===null?(i=ai(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Dc(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function To(e,n,i,a,l,o){var d=0;if(a=e,typeof e=="function")Xs(e)&&(d=1);else if(typeof e=="string")d=Vf(e,i,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case De:return e=ai(31,i,n,l),e.elementType=De,e.lanes=o,e;case ce:return Ra(i.children,l,o,n);case W:d=8,l|=24;break;case se:return e=ai(12,i,n,l|2),e.elementType=se,e.lanes=o,e;case Be:return e=ai(13,i,n,l),e.elementType=Be,e.lanes=o,e;case rt:return e=ai(19,i,n,l),e.elementType=rt,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:d=10;break e;case E:d=9;break e;case ae:d=11;break e;case ve:d=14;break e;case K:d=16,a=null;break e}d=29,i=Error(u(130,e===null?"null":typeof e,"")),a=null}return n=ai(d,i,n,l),n.elementType=e,n.type=a,n.lanes=o,n}function Ra(e,n,i,a){return e=ai(7,e,a,n),e.lanes=i,e}function Zs(e,n,i){return e=ai(6,e,null,n),e.lanes=i,e}function Tc(e){var n=ai(18,null,null,0);return n.stateNode=e,n}function Ks(e,n,i){return n=ai(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var zc=new WeakMap;function hi(e,n){if(typeof e=="object"&&e!==null){var i=zc.get(e);return i!==void 0?i:(n={value:e,source:n,stack:ne(n)},zc.set(e,n),n)}return{value:e,source:n,stack:ne(n)}}var Za=[],Ka=0,zo=null,Nl=0,fi=[],gi=0,na=null,Ni=1,Mi="";function Pi(e,n){Za[Ka++]=Nl,Za[Ka++]=zo,zo=e,Nl=n}function Rc(e,n,i){fi[gi++]=Ni,fi[gi++]=Mi,fi[gi++]=na,na=e;var a=Ni;e=Mi;var l=32-dn(a)-1;a&=~(1<<l),i+=1;var o=32-dn(n)+l;if(30<o){var d=l-l%5;o=(a&(1<<d)-1).toString(32),a>>=d,l-=d,Ni=1<<32-dn(n)+l|i<<l|a,Mi=o+e}else Ni=1<<o|i<<l|a,Mi=e}function Js(e){e.return!==null&&(Pi(e,1),Rc(e,1,0))}function $s(e){for(;e===zo;)zo=Za[--Ka],Za[Ka]=null,Nl=Za[--Ka],Za[Ka]=null;for(;e===na;)na=fi[--gi],fi[gi]=null,Mi=fi[--gi],fi[gi]=null,Ni=fi[--gi],fi[gi]=null}function Bc(e,n){fi[gi++]=Ni,fi[gi++]=Mi,fi[gi++]=na,Ni=n.id,Mi=n.overflow,na=e}var kn=null,Jt=null,jt=!1,ia=null,yi=!1,er=Error(u(519));function aa(e){var n=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ml(hi(n,e)),er}function kc(e){var n=e.stateNode,i=e.type,a=e.memoizedProps;switch(n[Ft]=e,n[hn]=a,i){case"dialog":mt("cancel",n),mt("close",n);break;case"iframe":case"object":case"embed":mt("load",n);break;case"video":case"audio":for(i=0;i<no.length;i++)mt(no[i],n);break;case"source":mt("error",n);break;case"img":case"image":case"link":mt("error",n),mt("load",n);break;case"details":mt("toggle",n);break;case"input":mt("invalid",n),Bt(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":mt("invalid",n);break;case"textarea":mt("invalid",n),Lt(n,a.value,a.defaultValue,a.children)}i=a.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||a.suppressHydrationWarning===!0||Fp(n.textContent,i)?(a.popover!=null&&(mt("beforetoggle",n),mt("toggle",n)),a.onScroll!=null&&mt("scroll",n),a.onScrollEnd!=null&&mt("scrollend",n),a.onClick!=null&&(n.onclick=wi),n=!0):n=!1,n||aa(e,!0)}function Ec(e){for(kn=e.return;kn;)switch(kn.tag){case 5:case 31:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:kn=kn.return}}function Ja(e){if(e!==kn)return!1;if(!jt)return Ec(e),jt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xd(e.type,e.memoizedProps)),i=!i),i&&Jt&&aa(e),Ec(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Jt=im(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Jt=im(e)}else n===27?(n=Jt,xa(e.type)?(e=wd,wd=null,Jt=e):Jt=n):Jt=kn?bi(e.stateNode.nextSibling):null;return!0}function Ba(){Jt=kn=null,jt=!1}function tr(){var e=ia;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),ia=null),e}function Ml(e){ia===null?ia=[e]:ia.push(e)}var nr=Ae(null),ka=null,_i=null;function la(e,n,i){$e(nr,n._currentValue),n._currentValue=i}function qi(e){e._currentValue=nr.current,We(nr)}function ir(e,n,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===i)break;e=e.return}}function ar(e,n,i,a){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){var d=l.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=l;for(var j=0;j<n.length;j++)if(p.context===n[j]){o.lanes|=i,p=o.alternate,p!==null&&(p.lanes|=i),ir(o.return,i,e),a||(d=null);break e}o=p.next}}else if(l.tag===18){if(d=l.return,d===null)throw Error(u(341));d.lanes|=i,o=d.alternate,o!==null&&(o.lanes|=i),ir(d,i,e),d=null}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}}function $a(e,n,i,a){e=null;for(var l=n,o=!1;l!==null;){if(!o){if((l.flags&524288)!==0)o=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var d=l.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var p=l.type;ii(l.pendingProps.value,d.value)||(e!==null?e.push(p):e=[p])}}else if(l===Dn.current){if(d=l.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(so):e=[so])}l=l.return}e!==null&&ar(n,e,i,a),n.flags|=262144}function Ro(e){for(e=e.firstContext;e!==null;){if(!ii(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){ka=e,_i=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function En(e){return Nc(ka,e)}function Bo(e,n){return ka===null&&Ea(e),Nc(e,n)}function Nc(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},_i===null){if(e===null)throw Error(u(308));_i=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else _i=_i.next=n;return i}var qh=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ih=s.unstable_scheduleCallback,Gh=s.unstable_NormalPriority,yn={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lr(){return{controller:new qh,data:new Map,refCount:0}}function Hl(e){e.refCount--,e.refCount===0&&Ih(Gh,function(){e.controller.abort()})}var Ul=null,or=0,el=0,tl=null;function Wh(e,n){if(Ul===null){var i=Ul=[];or=0,el=dd(),tl={status:"pending",value:void 0,then:function(a){i.push(a)}}}return or++,n.then(Mc,Mc),n}function Mc(){if(--or===0&&Ul!==null){tl!==null&&(tl.status="fulfilled");var e=Ul;Ul=null,el=0,tl=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Yh(e,n){var i=[],a={status:"pending",value:null,reason:null,then:function(l){i.push(l)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var l=0;l<i.length;l++)(0,i[l])(n)},function(l){for(a.status="rejected",a.reason=l,l=0;l<i.length;l++)(0,i[l])(void 0)}),a}var Hc=I.S;I.S=function(e,n){xp=rn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Wh(e,n),Hc!==null&&Hc(e,n)};var Na=Ae(null);function sr(){var e=Na.current;return e!==null?e:Wt.pooledCache}function ko(e,n){n===null?$e(Na,Na.current):$e(Na,n.pool)}function Uc(){var e=sr();return e===null?null:{parent:yn._currentValue,pool:e}}var nl=Error(u(460)),rr=Error(u(474)),Eo=Error(u(542)),No={then:function(){}};function Oc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lc(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(wi,wi),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_c(e),e;default:if(typeof n.status=="string")n.then(wi,wi);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var l=n;l.status="fulfilled",l.value=a}},function(a){if(n.status==="pending"){var l=n;l.status="rejected",l.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_c(e),e}throw Ha=n,nl}}function Ma(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ha=i,nl):i}}var Ha=null;function Pc(){if(Ha===null)throw Error(u(459));var e=Ha;return Ha=null,e}function _c(e){if(e===nl||e===Eo)throw Error(u(483))}var il=null,Ol=0;function Mo(e){var n=Ol;return Ol+=1,il===null&&(il=[]),Lc(il,e,n)}function Ll(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ho(e,n){throw n.$$typeof===R?Error(u(525)):(e=Object.prototype.toString.call(n),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function qc(e){function n(B,D){if(e){var M=B.deletions;M===null?(B.deletions=[D],B.flags|=16):M.push(D)}}function i(B,D){if(!e)return null;for(;D!==null;)n(B,D),D=D.sibling;return null}function a(B){for(var D=new Map;B!==null;)B.key!==null?D.set(B.key,B):D.set(B.index,B),B=B.sibling;return D}function l(B,D){return B=Li(B,D),B.index=0,B.sibling=null,B}function o(B,D,M){return B.index=M,e?(M=B.alternate,M!==null?(M=M.index,M<D?(B.flags|=67108866,D):M):(B.flags|=67108866,D)):(B.flags|=1048576,D)}function d(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function p(B,D,M,J){return D===null||D.tag!==6?(D=Zs(M,B.mode,J),D.return=B,D):(D=l(D,M),D.return=B,D)}function j(B,D,M,J){var Ne=M.type;return Ne===ce?F(B,D,M.props.children,J,M.key):D!==null&&(D.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===K&&Ma(Ne)===D.type)?(D=l(D,M.props),Ll(D,M),D.return=B,D):(D=To(M.type,M.key,M.props,null,B.mode,J),Ll(D,M),D.return=B,D)}function H(B,D,M,J){return D===null||D.tag!==4||D.stateNode.containerInfo!==M.containerInfo||D.stateNode.implementation!==M.implementation?(D=Ks(M,B.mode,J),D.return=B,D):(D=l(D,M.children||[]),D.return=B,D)}function F(B,D,M,J,Ne){return D===null||D.tag!==7?(D=Ra(M,B.mode,J,Ne),D.return=B,D):(D=l(D,M),D.return=B,D)}function te(B,D,M){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Zs(""+D,B.mode,M),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $:return M=To(D.type,D.key,D.props,null,B.mode,M),Ll(M,D),M.return=B,M;case L:return D=Ks(D,B.mode,M),D.return=B,D;case K:return D=Ma(D),te(B,D,M)}if(Ke(D)||de(D))return D=Ra(D,B.mode,M,null),D.return=B,D;if(typeof D.then=="function")return te(B,Mo(D),M);if(D.$$typeof===S)return te(B,Bo(B,D),M);Ho(B,D)}return null}function U(B,D,M,J){var Ne=D!==null?D.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return Ne!==null?null:p(B,D,""+M,J);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case $:return M.key===Ne?j(B,D,M,J):null;case L:return M.key===Ne?H(B,D,M,J):null;case K:return M=Ma(M),U(B,D,M,J)}if(Ke(M)||de(M))return Ne!==null?null:F(B,D,M,J,null);if(typeof M.then=="function")return U(B,D,Mo(M),J);if(M.$$typeof===S)return U(B,D,Bo(B,M),J);Ho(B,M)}return null}function P(B,D,M,J,Ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return B=B.get(M)||null,p(D,B,""+J,Ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case $:return B=B.get(J.key===null?M:J.key)||null,j(D,B,J,Ne);case L:return B=B.get(J.key===null?M:J.key)||null,H(D,B,J,Ne);case K:return J=Ma(J),P(B,D,M,J,Ne)}if(Ke(J)||de(J))return B=B.get(M)||null,F(D,B,J,Ne,null);if(typeof J.then=="function")return P(B,D,M,Mo(J),Ne);if(J.$$typeof===S)return P(B,D,M,Bo(D,J),Ne);Ho(D,J)}return null}function be(B,D,M,J){for(var Ne=null,zt=null,Ce=D,Ze=D=0,xt=null;Ce!==null&&Ze<M.length;Ze++){Ce.index>Ze?(xt=Ce,Ce=null):xt=Ce.sibling;var Rt=U(B,Ce,M[Ze],J);if(Rt===null){Ce===null&&(Ce=xt);break}e&&Ce&&Rt.alternate===null&&n(B,Ce),D=o(Rt,D,Ze),zt===null?Ne=Rt:zt.sibling=Rt,zt=Rt,Ce=xt}if(Ze===M.length)return i(B,Ce),jt&&Pi(B,Ze),Ne;if(Ce===null){for(;Ze<M.length;Ze++)Ce=te(B,M[Ze],J),Ce!==null&&(D=o(Ce,D,Ze),zt===null?Ne=Ce:zt.sibling=Ce,zt=Ce);return jt&&Pi(B,Ze),Ne}for(Ce=a(Ce);Ze<M.length;Ze++)xt=P(Ce,B,Ze,M[Ze],J),xt!==null&&(e&&xt.alternate!==null&&Ce.delete(xt.key===null?Ze:xt.key),D=o(xt,D,Ze),zt===null?Ne=xt:zt.sibling=xt,zt=xt);return e&&Ce.forEach(function(wa){return n(B,wa)}),jt&&Pi(B,Ze),Ne}function Le(B,D,M,J){if(M==null)throw Error(u(151));for(var Ne=null,zt=null,Ce=D,Ze=D=0,xt=null,Rt=M.next();Ce!==null&&!Rt.done;Ze++,Rt=M.next()){Ce.index>Ze?(xt=Ce,Ce=null):xt=Ce.sibling;var wa=U(B,Ce,Rt.value,J);if(wa===null){Ce===null&&(Ce=xt);break}e&&Ce&&wa.alternate===null&&n(B,Ce),D=o(wa,D,Ze),zt===null?Ne=wa:zt.sibling=wa,zt=wa,Ce=xt}if(Rt.done)return i(B,Ce),jt&&Pi(B,Ze),Ne;if(Ce===null){for(;!Rt.done;Ze++,Rt=M.next())Rt=te(B,Rt.value,J),Rt!==null&&(D=o(Rt,D,Ze),zt===null?Ne=Rt:zt.sibling=Rt,zt=Rt);return jt&&Pi(B,Ze),Ne}for(Ce=a(Ce);!Rt.done;Ze++,Rt=M.next())Rt=P(Ce,B,Ze,Rt.value,J),Rt!==null&&(e&&Rt.alternate!==null&&Ce.delete(Rt.key===null?Ze:Rt.key),D=o(Rt,D,Ze),zt===null?Ne=Rt:zt.sibling=Rt,zt=Rt);return e&&Ce.forEach(function(ig){return n(B,ig)}),jt&&Pi(B,Ze),Ne}function It(B,D,M,J){if(typeof M=="object"&&M!==null&&M.type===ce&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case $:e:{for(var Ne=M.key;D!==null;){if(D.key===Ne){if(Ne=M.type,Ne===ce){if(D.tag===7){i(B,D.sibling),J=l(D,M.props.children),J.return=B,B=J;break e}}else if(D.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===K&&Ma(Ne)===D.type){i(B,D.sibling),J=l(D,M.props),Ll(J,M),J.return=B,B=J;break e}i(B,D);break}else n(B,D);D=D.sibling}M.type===ce?(J=Ra(M.props.children,B.mode,J,M.key),J.return=B,B=J):(J=To(M.type,M.key,M.props,null,B.mode,J),Ll(J,M),J.return=B,B=J)}return d(B);case L:e:{for(Ne=M.key;D!==null;){if(D.key===Ne)if(D.tag===4&&D.stateNode.containerInfo===M.containerInfo&&D.stateNode.implementation===M.implementation){i(B,D.sibling),J=l(D,M.children||[]),J.return=B,B=J;break e}else{i(B,D);break}else n(B,D);D=D.sibling}J=Ks(M,B.mode,J),J.return=B,B=J}return d(B);case K:return M=Ma(M),It(B,D,M,J)}if(Ke(M))return be(B,D,M,J);if(de(M)){if(Ne=de(M),typeof Ne!="function")throw Error(u(150));return M=Ne.call(M),Le(B,D,M,J)}if(typeof M.then=="function")return It(B,D,Mo(M),J);if(M.$$typeof===S)return It(B,D,Bo(B,M),J);Ho(B,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,D!==null&&D.tag===6?(i(B,D.sibling),J=l(D,M),J.return=B,B=J):(i(B,D),J=Zs(M,B.mode,J),J.return=B,B=J),d(B)):i(B,D)}return function(B,D,M,J){try{Ol=0;var Ne=It(B,D,M,J);return il=null,Ne}catch(Ce){if(Ce===nl||Ce===Eo)throw Ce;var zt=ai(29,Ce,null,B.mode);return zt.lanes=J,zt.return=B,zt}finally{}}}var Ua=qc(!0),Ic=qc(!1),oa=!1;function dr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cr(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,n,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Et&2)!==0){var l=a.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),a.pending=n,n=Do(e),Ac(e,null,i),n}return Ao(e,a,n,i),Do(e)}function Pl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,O(e,i)}}function ur(e,n){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var l=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var d={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};o===null?l=o=d:o=o.next=d,i=i.next}while(i!==null);o===null?l=o=n:o=o.next=n}else l=o=n;i={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:a.shared,callbacks:a.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var pr=!1;function _l(){if(pr){var e=tl;if(e!==null)throw e}}function ql(e,n,i,a){pr=!1;var l=e.updateQueue;oa=!1;var o=l.firstBaseUpdate,d=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var j=p,H=j.next;j.next=null,d===null?o=H:d.next=H,d=j;var F=e.alternate;F!==null&&(F=F.updateQueue,p=F.lastBaseUpdate,p!==d&&(p===null?F.firstBaseUpdate=H:p.next=H,F.lastBaseUpdate=j))}if(o!==null){var te=l.baseState;d=0,F=H=j=null,p=o;do{var U=p.lane&-536870913,P=U!==p.lane;if(P?(yt&U)===U:(a&U)===U){U!==0&&U===el&&(pr=!0),F!==null&&(F=F.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var be=e,Le=p;U=n;var It=i;switch(Le.tag){case 1:if(be=Le.payload,typeof be=="function"){te=be.call(It,te,U);break e}te=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Le.payload,U=typeof be=="function"?be.call(It,te,U):be,U==null)break e;te=N({},te,U);break e;case 2:oa=!0}}U=p.callback,U!==null&&(e.flags|=64,P&&(e.flags|=8192),P=l.callbacks,P===null?l.callbacks=[U]:P.push(U))}else P={lane:U,tag:p.tag,payload:p.payload,callback:p.callback,next:null},F===null?(H=F=P,j=te):F=F.next=P,d|=U;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;P=p,p=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);F===null&&(j=te),l.baseState=j,l.firstBaseUpdate=H,l.lastBaseUpdate=F,o===null&&(l.shared.lanes=0),ma|=d,e.lanes=d,e.memoizedState=te}}function Gc(e,n){if(typeof e!="function")throw Error(u(191,e));e.call(n)}function Wc(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Gc(i[e],n)}var al=Ae(null),Uo=Ae(0);function Yc(e,n){e=Zi,$e(Uo,e),$e(al,n),Zi=e|n.baseLanes}function mr(){$e(Uo,Zi),$e(al,al.current)}function hr(){Zi=Uo.current,We(al),We(Uo)}var li=Ae(null),xi=null;function da(e){var n=e.alternate;$e(fn,fn.current&1),$e(li,e),xi===null&&(n===null||al.current!==null||n.memoizedState!==null)&&(xi=e)}function fr(e){$e(fn,fn.current),$e(li,e),xi===null&&(xi=e)}function Vc(e){e.tag===22?($e(fn,fn.current),$e(li,e),xi===null&&(xi=e)):ca()}function ca(){$e(fn,fn.current),$e(li,li.current)}function oi(e){We(li),xi===e&&(xi=null),We(fn)}var fn=Ae(0);function Oo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||jd(i)||Sd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ii=0,Qe=null,_t=null,xn=null,Lo=!1,ll=!1,Oa=!1,Po=0,Il=0,ol=null,Vh=0;function un(){throw Error(u(321))}function gr(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!ii(e[i],n[i]))return!1;return!0}function yr(e,n,i,a,l,o){return Ii=o,Qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,I.H=e===null||e.memoizedState===null?Ru:Er,Oa=!1,o=i(a,l),Oa=!1,ll&&(o=Fc(n,i,a,l)),Qc(e),o}function Qc(e){I.H=Yl;var n=_t!==null&&_t.next!==null;if(Ii=0,xn=_t=Qe=null,Lo=!1,Il=0,ol=null,n)throw Error(u(300));e===null||bn||(e=e.dependencies,e!==null&&Ro(e)&&(bn=!0))}function Fc(e,n,i,a){Qe=e;var l=0;do{if(ll&&(ol=null),Il=0,ll=!1,25<=l)throw Error(u(301));if(l+=1,xn=_t=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}I.H=Bu,o=n(i,a)}while(ll);return o}function Qh(){var e=I.H,n=e.useState()[0];return n=typeof n.then=="function"?Gl(n):n,e=e.useState()[0],(_t!==null?_t.memoizedState:null)!==e&&(Qe.flags|=1024),n}function xr(){var e=Po!==0;return Po=0,e}function br(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function vr(e){if(Lo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Lo=!1}Ii=0,xn=_t=Qe=null,ll=!1,Il=Po=0,ol=null}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Qe.memoizedState=xn=e:xn=xn.next=e,xn}function gn(){if(_t===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var n=xn===null?Qe.memoizedState:xn.next;if(n!==null)xn=n,_t=e;else{if(e===null)throw Qe.alternate===null?Error(u(467)):Error(u(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},xn===null?Qe.memoizedState=xn=e:xn=xn.next=e}return xn}function _o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(e){var n=Il;return Il+=1,ol===null&&(ol=[]),e=Lc(ol,e,n),n=Qe,(xn===null?n.memoizedState:xn.next)===null&&(n=n.alternate,I.H=n===null||n.memoizedState===null?Ru:Er),e}function qo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Gl(e);if(e.$$typeof===S)return En(e)}throw Error(u(438,String(e)))}function jr(e){var n=null,i=Qe.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var a=Qe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(l){return l.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=_o(),Qe.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),a=0;a<e;a++)i[a]=q;return n.index++,i}function Gi(e,n){return typeof n=="function"?n(e):n}function Io(e){var n=gn();return Sr(n,_t,e)}function Sr(e,n,i){var a=e.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=i;var l=e.baseQueue,o=a.pending;if(o!==null){if(l!==null){var d=l.next;l.next=o.next,o.next=d}n.baseQueue=l=o,a.pending=null}if(o=e.baseState,l===null)e.memoizedState=o;else{n=l.next;var p=d=null,j=null,H=n,F=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(yt&te)===te:(Ii&te)===te){var U=H.revertLane;if(U===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===el&&(F=!0);else if((Ii&U)===U){H=H.next,U===el&&(F=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(p=j=te,d=o):j=j.next=te,Qe.lanes|=U,ma|=U;te=H.action,Oa&&i(o,te),o=H.hasEagerState?H.eagerState:i(o,te)}else U={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(p=j=U,d=o):j=j.next=U,Qe.lanes|=te,ma|=te;H=H.next}while(H!==null&&H!==n);if(j===null?d=o:j.next=p,!ii(o,e.memoizedState)&&(bn=!0,F&&(i=tl,i!==null)))throw i;e.memoizedState=o,e.baseState=d,e.baseQueue=j,a.lastRenderedState=o}return l===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function wr(e){var n=gn(),i=n.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=e;var a=i.dispatch,l=i.pending,o=n.memoizedState;if(l!==null){i.pending=null;var d=l=l.next;do o=e(o,d.action),d=d.next;while(d!==l);ii(o,n.memoizedState)||(bn=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),i.lastRenderedState=o}return[o,a]}function Xc(e,n,i){var a=Qe,l=gn(),o=jt;if(o){if(i===void 0)throw Error(u(407));i=i()}else i=n();var d=!ii((_t||l).memoizedState,i);if(d&&(l.memoizedState=i,bn=!0),l=l.queue,Dr(Jc.bind(null,a,l,e),[e]),l.getSnapshot!==n||d||xn!==null&&xn.memoizedState.tag&1){if(a.flags|=2048,sl(9,{destroy:void 0},Kc.bind(null,a,l,i,n),null),Wt===null)throw Error(u(349));o||(Ii&127)!==0||Zc(a,n,i)}return i}function Zc(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Qe.updateQueue,n===null?(n=_o(),Qe.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Kc(e,n,i,a){n.value=i,n.getSnapshot=a,$c(n)&&eu(e)}function Jc(e,n,i){return i(function(){$c(n)&&eu(e)})}function $c(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!ii(e,i)}catch{return!0}}function eu(e){var n=za(e,2);n!==null&&Zn(n,e,2)}function Cr(e){var n=Pn();if(typeof e=="function"){var i=e;if(e=i(),Oa){Ue(!0);try{i()}finally{Ue(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},n}function tu(e,n,i,a){return e.baseState=i,Sr(e,_t,typeof a=="function"?a:Gi)}function Fh(e,n,i,a,l){if(Yo(e))throw Error(u(485));if(e=n.action,e!==null){var o={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){o.listeners.push(d)}};I.T!==null?i(!0):o.isTransition=!1,a(o),i=n.pending,i===null?(o.next=n.pending=o,nu(n,o)):(o.next=i.next,n.pending=i.next=o)}}function nu(e,n){var i=n.action,a=n.payload,l=e.state;if(n.isTransition){var o=I.T,d={};I.T=d;try{var p=i(l,a),j=I.S;j!==null&&j(d,p),iu(e,n,p)}catch(H){Ar(e,n,H)}finally{o!==null&&d.types!==null&&(o.types=d.types),I.T=o}}else try{o=i(l,a),iu(e,n,o)}catch(H){Ar(e,n,H)}}function iu(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(a){au(e,n,a)},function(a){return Ar(e,n,a)}):au(e,n,i)}function au(e,n,i){n.status="fulfilled",n.value=i,lu(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,nu(e,i)))}function Ar(e,n,i){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=i,lu(n),n=n.next;while(n!==a)}e.action=null}function lu(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function ou(e,n){return n}function su(e,n){if(jt){var i=Wt.formState;if(i!==null){e:{var a=Qe;if(jt){if(Jt){t:{for(var l=Jt,o=yi;l.nodeType!==8;){if(!o){l=null;break t}if(l=bi(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){Jt=bi(l.nextSibling),a=l.data==="F!";break e}}aa(a)}a=!1}a&&(n=i[0])}}return i=Pn(),i.memoizedState=i.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:n},i.queue=a,i=Du.bind(null,Qe,a),a.dispatch=i,a=Cr(!1),o=kr.bind(null,Qe,!1,a.queue),a=Pn(),l={state:n,dispatch:null,action:e,pending:null},a.queue=l,i=Fh.bind(null,Qe,l,o,i),l.dispatch=i,a.memoizedState=e,[n,i,!1]}function ru(e){var n=gn();return du(n,_t,e)}function du(e,n,i){if(n=Sr(e,n,ou)[0],e=Io(Gi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=Gl(n)}catch(d){throw d===nl?Eo:d}else a=n;n=gn();var l=n.queue,o=l.dispatch;return i!==n.memoizedState&&(Qe.flags|=2048,sl(9,{destroy:void 0},Xh.bind(null,l,i),null)),[a,o,e]}function Xh(e,n){e.action=n}function cu(e){var n=gn(),i=_t;if(i!==null)return du(n,i,e);gn(),n=n.memoizedState,i=gn();var a=i.queue.dispatch;return i.memoizedState=e,[n,a,!1]}function sl(e,n,i,a){return e={tag:e,create:i,deps:a,inst:n,next:null},n=Qe.updateQueue,n===null&&(n=_o(),Qe.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,n.lastEffect=e),e}function uu(){return gn().memoizedState}function Go(e,n,i,a){var l=Pn();Qe.flags|=e,l.memoizedState=sl(1|n,{destroy:void 0},i,a===void 0?null:a)}function Wo(e,n,i,a){var l=gn();a=a===void 0?null:a;var o=l.memoizedState.inst;_t!==null&&a!==null&&gr(a,_t.memoizedState.deps)?l.memoizedState=sl(n,o,i,a):(Qe.flags|=e,l.memoizedState=sl(1|n,o,i,a))}function pu(e,n){Go(8390656,8,e,n)}function Dr(e,n){Wo(2048,8,e,n)}function Zh(e){Qe.flags|=4;var n=Qe.updateQueue;if(n===null)n=_o(),Qe.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function mu(e){var n=gn().memoizedState;return Zh({ref:n,nextImpl:e}),function(){if((Et&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}function hu(e,n){return Wo(4,2,e,n)}function fu(e,n){return Wo(4,4,e,n)}function gu(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function yu(e,n,i){i=i!=null?i.concat([e]):null,Wo(4,4,gu.bind(null,n,e),i)}function Tr(){}function xu(e,n){var i=gn();n=n===void 0?null:n;var a=i.memoizedState;return n!==null&&gr(n,a[1])?a[0]:(i.memoizedState=[e,n],e)}function bu(e,n){var i=gn();n=n===void 0?null:n;var a=i.memoizedState;if(n!==null&&gr(n,a[1]))return a[0];if(a=e(),Oa){Ue(!0);try{e()}finally{Ue(!1)}}return i.memoizedState=[a,n],a}function zr(e,n,i){return i===void 0||(Ii&1073741824)!==0&&(yt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=vp(),Qe.lanes|=e,ma|=e,i)}function vu(e,n,i,a){return ii(i,n)?i:al.current!==null?(e=zr(e,i,a),ii(e,n)||(bn=!0),e):(Ii&42)===0||(Ii&1073741824)!==0&&(yt&261930)===0?(bn=!0,e.memoizedState=i):(e=vp(),Qe.lanes|=e,ma|=e,n)}function ju(e,n,i,a,l){var o=re.p;re.p=o!==0&&8>o?o:8;var d=I.T,p={};I.T=p,kr(e,!1,n,i);try{var j=l(),H=I.S;if(H!==null&&H(p,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var F=Yh(j,a);Wl(e,n,F,di(e))}else Wl(e,n,a,di(e))}catch(te){Wl(e,n,{then:function(){},status:"rejected",reason:te},di())}finally{re.p=o,d!==null&&p.types!==null&&(d.types=p.types),I.T=d}}function Kh(){}function Rr(e,n,i,a){if(e.tag!==5)throw Error(u(476));var l=Su(e).queue;ju(e,l,n,fe,i===null?Kh:function(){return wu(e),i(a)})}function Su(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:fe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function wu(e){var n=Su(e);n.next===null&&(n=e.alternate.memoizedState),Wl(e,n.next.queue,{},di())}function Br(){return En(so)}function Cu(){return gn().memoizedState}function Au(){return gn().memoizedState}function Jh(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=di();e=sa(i);var a=ra(n,e,i);a!==null&&(Zn(a,n,i),Pl(a,n,i)),n={cache:lr()},e.payload=n;return}n=n.return}}function $h(e,n,i){var a=di();i={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Yo(e)?Tu(n,i):(i=Fs(e,n,i,a),i!==null&&(Zn(i,e,a),zu(i,n,a)))}function Du(e,n,i){var a=di();Wl(e,n,i,a)}function Wl(e,n,i,a){var l={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Tu(n,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var d=n.lastRenderedState,p=o(d,i);if(l.hasEagerState=!0,l.eagerState=p,ii(p,d))return Ao(e,n,l,0),Wt===null&&Co(),!1}catch{}finally{}if(i=Fs(e,n,l,a),i!==null)return Zn(i,e,a),zu(i,n,a),!0}return!1}function kr(e,n,i,a){if(a={lane:2,revertLane:dd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yo(e)){if(n)throw Error(u(479))}else n=Fs(e,i,a,2),n!==null&&Zn(n,e,2)}function Yo(e){var n=e.alternate;return e===Qe||n!==null&&n===Qe}function Tu(e,n){ll=Lo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function zu(e,n,i){if((i&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,O(e,i)}}var Yl={readContext:En,use:qo,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};Yl.useEffectEvent=un;var Ru={readContext:En,use:qo,useCallback:function(e,n){return Pn().memoizedState=[e,n===void 0?null:n],e},useContext:En,useEffect:pu,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Go(4194308,4,gu.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Go(4194308,4,e,n)},useInsertionEffect:function(e,n){Go(4,2,e,n)},useMemo:function(e,n){var i=Pn();n=n===void 0?null:n;var a=e();if(Oa){Ue(!0);try{e()}finally{Ue(!1)}}return i.memoizedState=[a,n],a},useReducer:function(e,n,i){var a=Pn();if(i!==void 0){var l=i(n);if(Oa){Ue(!0);try{i(n)}finally{Ue(!1)}}}else l=n;return a.memoizedState=a.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},a.queue=e,e=e.dispatch=$h.bind(null,Qe,e),[a.memoizedState,e]},useRef:function(e){var n=Pn();return e={current:e},n.memoizedState=e},useState:function(e){e=Cr(e);var n=e.queue,i=Du.bind(null,Qe,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Tr,useDeferredValue:function(e,n){var i=Pn();return zr(i,e,n)},useTransition:function(){var e=Cr(!1);return e=ju.bind(null,Qe,e.queue,!0,!1),Pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var a=Qe,l=Pn();if(jt){if(i===void 0)throw Error(u(407));i=i()}else{if(i=n(),Wt===null)throw Error(u(349));(yt&127)!==0||Zc(a,n,i)}l.memoizedState=i;var o={value:i,getSnapshot:n};return l.queue=o,pu(Jc.bind(null,a,o,e),[e]),a.flags|=2048,sl(9,{destroy:void 0},Kc.bind(null,a,o,i,n),null),i},useId:function(){var e=Pn(),n=Wt.identifierPrefix;if(jt){var i=Mi,a=Ni;i=(a&~(1<<32-dn(a)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Po++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Vh++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Br,useFormState:su,useActionState:su,useOptimistic:function(e){var n=Pn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=kr.bind(null,Qe,!0,i),i.dispatch=n,[e,n]},useMemoCache:jr,useCacheRefresh:function(){return Pn().memoizedState=Jh.bind(null,Qe)},useEffectEvent:function(e){var n=Pn(),i={impl:e};return n.memoizedState=i,function(){if((Et&2)!==0)throw Error(u(440));return i.impl.apply(void 0,arguments)}}},Er={readContext:En,use:qo,useCallback:xu,useContext:En,useEffect:Dr,useImperativeHandle:yu,useInsertionEffect:hu,useLayoutEffect:fu,useMemo:bu,useReducer:Io,useRef:uu,useState:function(){return Io(Gi)},useDebugValue:Tr,useDeferredValue:function(e,n){var i=gn();return vu(i,_t.memoizedState,e,n)},useTransition:function(){var e=Io(Gi)[0],n=gn().memoizedState;return[typeof e=="boolean"?e:Gl(e),n]},useSyncExternalStore:Xc,useId:Cu,useHostTransitionStatus:Br,useFormState:ru,useActionState:ru,useOptimistic:function(e,n){var i=gn();return tu(i,_t,e,n)},useMemoCache:jr,useCacheRefresh:Au};Er.useEffectEvent=mu;var Bu={readContext:En,use:qo,useCallback:xu,useContext:En,useEffect:Dr,useImperativeHandle:yu,useInsertionEffect:hu,useLayoutEffect:fu,useMemo:bu,useReducer:wr,useRef:uu,useState:function(){return wr(Gi)},useDebugValue:Tr,useDeferredValue:function(e,n){var i=gn();return _t===null?zr(i,e,n):vu(i,_t.memoizedState,e,n)},useTransition:function(){var e=wr(Gi)[0],n=gn().memoizedState;return[typeof e=="boolean"?e:Gl(e),n]},useSyncExternalStore:Xc,useId:Cu,useHostTransitionStatus:Br,useFormState:cu,useActionState:cu,useOptimistic:function(e,n){var i=gn();return _t!==null?tu(i,_t,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:jr,useCacheRefresh:Au};Bu.useEffectEvent=mu;function Nr(e,n,i,a){n=e.memoizedState,i=i(a,n),i=i==null?n:N({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Mr={enqueueSetState:function(e,n,i){e=e._reactInternals;var a=di(),l=sa(a);l.payload=n,i!=null&&(l.callback=i),n=ra(e,l,a),n!==null&&(Zn(n,e,a),Pl(n,e,a))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var a=di(),l=sa(a);l.tag=1,l.payload=n,i!=null&&(l.callback=i),n=ra(e,l,a),n!==null&&(Zn(n,e,a),Pl(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=di(),a=sa(i);a.tag=2,n!=null&&(a.callback=n),n=ra(e,a,i),n!==null&&(Zn(n,e,i),Pl(n,e,i))}};function ku(e,n,i,a,l,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,d):n.prototype&&n.prototype.isPureReactComponent?!kl(i,a)||!kl(l,o):!0}function Eu(e,n,i,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,a),n.state!==e&&Mr.enqueueReplaceState(n,n.state,null)}function La(e,n){var i=n;if("ref"in n){i={};for(var a in n)a!=="ref"&&(i[a]=n[a])}if(e=e.defaultProps){i===n&&(i=N({},i));for(var l in e)i[l]===void 0&&(i[l]=e[l])}return i}function Nu(e){wo(e)}function Mu(e){console.error(e)}function Hu(e){wo(e)}function Vo(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function Uu(e,n,i){try{var a=e.onCaughtError;a(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Hr(e,n,i){return i=sa(i),i.tag=3,i.payload={element:null},i.callback=function(){Vo(e,n)},i}function Ou(e){return e=sa(e),e.tag=3,e}function Lu(e,n,i,a){var l=i.type.getDerivedStateFromError;if(typeof l=="function"){var o=a.value;e.payload=function(){return l(o)},e.callback=function(){Uu(n,i,a)}}var d=i.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){Uu(n,i,a),typeof l!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var p=a.stack;this.componentDidCatch(a.value,{componentStack:p!==null?p:""})})}function ef(e,n,i,a,l){if(i.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=i.alternate,n!==null&&$a(n,i,l,!0),i=li.current,i!==null){switch(i.tag){case 31:case 13:return xi===null?as():i.alternate===null&&pn===0&&(pn=3),i.flags&=-257,i.flags|=65536,i.lanes=l,a===No?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([a]):n.add(a),od(e,a,l)),!1;case 22:return i.flags|=65536,a===No?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([a]):i.add(a)),od(e,a,l)),!1}throw Error(u(435,i.tag))}return od(e,a,l),as(),!1}if(jt)return n=li.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=l,a!==er&&(e=Error(u(422),{cause:a}),Ml(hi(e,i)))):(a!==er&&(n=Error(u(423),{cause:a}),Ml(hi(n,i))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,a=hi(a,i),l=Hr(e.stateNode,a,l),ur(e,l),pn!==4&&(pn=2)),!1;var o=Error(u(520),{cause:a});if(o=hi(o,i),$l===null?$l=[o]:$l.push(o),pn!==4&&(pn=2),n===null)return!0;a=hi(a,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=l&-l,i.lanes|=e,e=Hr(i.stateNode,a,e),ur(i,e),!1;case 1:if(n=i.type,o=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ha===null||!ha.has(o))))return i.flags|=65536,l&=-l,i.lanes|=l,l=Ou(l),Lu(l,e,i,a),ur(i,l),!1}i=i.return}while(i!==null);return!1}var Ur=Error(u(461)),bn=!1;function Nn(e,n,i,a){n.child=e===null?Ic(n,null,i,a):Ua(n,e.child,i,a)}function Pu(e,n,i,a,l){i=i.render;var o=n.ref;if("ref"in a){var d={};for(var p in a)p!=="ref"&&(d[p]=a[p])}else d=a;return Ea(n),a=yr(e,n,i,d,o,l),p=xr(),e!==null&&!bn?(br(e,n,l),Wi(e,n,l)):(jt&&p&&Js(n),n.flags|=1,Nn(e,n,a,l),n.child)}function _u(e,n,i,a,l){if(e===null){var o=i.type;return typeof o=="function"&&!Xs(o)&&o.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=o,qu(e,n,o,a,l)):(e=To(i.type,null,a,n,n.mode,l),e.ref=n.ref,e.return=n,n.child=e)}if(o=e.child,!Wr(e,l)){var d=o.memoizedProps;if(i=i.compare,i=i!==null?i:kl,i(d,a)&&e.ref===n.ref)return Wi(e,n,l)}return n.flags|=1,e=Li(o,a),e.ref=n.ref,e.return=n,n.child=e}function qu(e,n,i,a,l){if(e!==null){var o=e.memoizedProps;if(kl(o,a)&&e.ref===n.ref)if(bn=!1,n.pendingProps=a=o,Wr(e,l))(e.flags&131072)!==0&&(bn=!0);else return n.lanes=e.lanes,Wi(e,n,l)}return Or(e,n,i,a,l)}function Iu(e,n,i,a){var l=a.children,o=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(o=o!==null?o.baseLanes|i:i,e!==null){for(a=n.child=e.child,l=0;a!==null;)l=l|a.lanes|a.childLanes,a=a.sibling;a=l&~o}else a=0,n.child=null;return Gu(e,n,o,i,a)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ko(n,o!==null?o.cachePool:null),o!==null?Yc(n,o):mr(),Vc(n);else return a=n.lanes=536870912,Gu(e,n,o!==null?o.baseLanes|i:i,i,a)}else o!==null?(ko(n,o.cachePool),Yc(n,o),ca(),n.memoizedState=null):(e!==null&&ko(n,null),mr(),ca());return Nn(e,n,l,i),n.child}function Vl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Gu(e,n,i,a,l){var o=sr();return o=o===null?null:{parent:yn._currentValue,pool:o},n.memoizedState={baseLanes:i,cachePool:o},e!==null&&ko(n,null),mr(),Vc(n),e!==null&&$a(e,n,a,!0),n.childLanes=l,null}function Qo(e,n){return n=Xo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Wu(e,n,i){return Ua(n,e.child,null,i),e=Qo(n,n.pendingProps),e.flags|=2,oi(n),n.memoizedState=null,e}function tf(e,n,i){var a=n.pendingProps,l=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(jt){if(a.mode==="hidden")return e=Qo(n,a),n.lanes=536870912,Vl(null,e);if(fr(n),(e=Jt)?(e=nm(e,yi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:na!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},i=Tc(e),i.return=n,n.child=i,kn=n,Jt=null)):e=null,e===null)throw aa(n);return n.lanes=536870912,null}return Qo(n,a)}var o=e.memoizedState;if(o!==null){var d=o.dehydrated;if(fr(n),l)if(n.flags&256)n.flags&=-257,n=Wu(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(u(558));else if(bn||$a(e,n,i,!1),l=(i&e.childLanes)!==0,bn||l){if(a=Wt,a!==null&&(d=G(a,i),d!==0&&d!==o.retryLane))throw o.retryLane=d,za(e,d),Zn(a,e,d),Ur;as(),n=Wu(e,n,i)}else e=o.treeContext,Jt=bi(d.nextSibling),kn=n,jt=!0,ia=null,yi=!1,e!==null&&Bc(n,e),n=Qo(n,a),n.flags|=4096;return n}return e=Li(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Fo(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(u(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Or(e,n,i,a,l){return Ea(n),i=yr(e,n,i,a,void 0,l),a=xr(),e!==null&&!bn?(br(e,n,l),Wi(e,n,l)):(jt&&a&&Js(n),n.flags|=1,Nn(e,n,i,l),n.child)}function Yu(e,n,i,a,l,o){return Ea(n),n.updateQueue=null,i=Fc(n,a,i,l),Qc(e),a=xr(),e!==null&&!bn?(br(e,n,o),Wi(e,n,o)):(jt&&a&&Js(n),n.flags|=1,Nn(e,n,i,o),n.child)}function Vu(e,n,i,a,l){if(Ea(n),n.stateNode===null){var o=Xa,d=i.contextType;typeof d=="object"&&d!==null&&(o=En(d)),o=new i(a,o),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Mr,n.stateNode=o,o._reactInternals=n,o=n.stateNode,o.props=a,o.state=n.memoizedState,o.refs={},dr(n),d=i.contextType,o.context=typeof d=="object"&&d!==null?En(d):Xa,o.state=n.memoizedState,d=i.getDerivedStateFromProps,typeof d=="function"&&(Nr(n,i,d,a),o.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(d=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),d!==o.state&&Mr.enqueueReplaceState(o,o.state,null),ql(n,a,o,l),_l(),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){o=n.stateNode;var p=n.memoizedProps,j=La(i,p);o.props=j;var H=o.context,F=i.contextType;d=Xa,typeof F=="object"&&F!==null&&(d=En(F));var te=i.getDerivedStateFromProps;F=typeof te=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=n.pendingProps!==p,F||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||H!==d)&&Eu(n,o,a,d),oa=!1;var U=n.memoizedState;o.state=U,ql(n,a,o,l),_l(),H=n.memoizedState,p||U!==H||oa?(typeof te=="function"&&(Nr(n,i,te,a),H=n.memoizedState),(j=oa||ku(n,i,j,a,U,H,d))?(F||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=H),o.props=a,o.state=H,o.context=d,a=j):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{o=n.stateNode,cr(e,n),d=n.memoizedProps,F=La(i,d),o.props=F,te=n.pendingProps,U=o.context,H=i.contextType,j=Xa,typeof H=="object"&&H!==null&&(j=En(H)),p=i.getDerivedStateFromProps,(H=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==te||U!==j)&&Eu(n,o,a,j),oa=!1,U=n.memoizedState,o.state=U,ql(n,a,o,l),_l();var P=n.memoizedState;d!==te||U!==P||oa||e!==null&&e.dependencies!==null&&Ro(e.dependencies)?(typeof p=="function"&&(Nr(n,i,p,a),P=n.memoizedState),(F=oa||ku(n,i,F,a,U,P,j)||e!==null&&e.dependencies!==null&&Ro(e.dependencies))?(H||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,P,j),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,P,j)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=P),o.props=a,o.state=P,o.context=j,a=F):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),a=!1)}return o=a,Fo(e,n),a=(n.flags&128)!==0,o||a?(o=n.stateNode,i=a&&typeof i.getDerivedStateFromError!="function"?null:o.render(),n.flags|=1,e!==null&&a?(n.child=Ua(n,e.child,null,l),n.child=Ua(n,null,i,l)):Nn(e,n,i,l),n.memoizedState=o.state,e=n.child):e=Wi(e,n,l),e}function Qu(e,n,i,a){return Ba(),n.flags|=256,Nn(e,n,i,a),n.child}var Lr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pr(e){return{baseLanes:e,cachePool:Uc()}}function _r(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=ri),e}function Fu(e,n,i){var a=n.pendingProps,l=!1,o=(n.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),d&&(l=!0,n.flags&=-129),d=(n.flags&32)!==0,n.flags&=-33,e===null){if(jt){if(l?da(n):ca(),(e=Jt)?(e=nm(e,yi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:na!==null?{id:Ni,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},i=Tc(e),i.return=n,n.child=i,kn=n,Jt=null)):e=null,e===null)throw aa(n);return Sd(e)?n.lanes=32:n.lanes=536870912,null}var p=a.children;return a=a.fallback,l?(ca(),l=n.mode,p=Xo({mode:"hidden",children:p},l),a=Ra(a,l,i,null),p.return=n,a.return=n,p.sibling=a,n.child=p,a=n.child,a.memoizedState=Pr(i),a.childLanes=_r(e,d,i),n.memoizedState=Lr,Vl(null,a)):(da(n),qr(n,p))}var j=e.memoizedState;if(j!==null&&(p=j.dehydrated,p!==null)){if(o)n.flags&256?(da(n),n.flags&=-257,n=Ir(e,n,i)):n.memoizedState!==null?(ca(),n.child=e.child,n.flags|=128,n=null):(ca(),p=a.fallback,l=n.mode,a=Xo({mode:"visible",children:a.children},l),p=Ra(p,l,i,null),p.flags|=2,a.return=n,p.return=n,a.sibling=p,n.child=a,Ua(n,e.child,null,i),a=n.child,a.memoizedState=Pr(i),a.childLanes=_r(e,d,i),n.memoizedState=Lr,n=Vl(null,a));else if(da(n),Sd(p)){if(d=p.nextSibling&&p.nextSibling.dataset,d)var H=d.dgst;d=H,a=Error(u(419)),a.stack="",a.digest=d,Ml({value:a,source:null,stack:null}),n=Ir(e,n,i)}else if(bn||$a(e,n,i,!1),d=(i&e.childLanes)!==0,bn||d){if(d=Wt,d!==null&&(a=G(d,i),a!==0&&a!==j.retryLane))throw j.retryLane=a,za(e,a),Zn(d,e,a),Ur;jd(p)||as(),n=Ir(e,n,i)}else jd(p)?(n.flags|=192,n.child=e.child,n=null):(e=j.treeContext,Jt=bi(p.nextSibling),kn=n,jt=!0,ia=null,yi=!1,e!==null&&Bc(n,e),n=qr(n,a.children),n.flags|=4096);return n}return l?(ca(),p=a.fallback,l=n.mode,j=e.child,H=j.sibling,a=Li(j,{mode:"hidden",children:a.children}),a.subtreeFlags=j.subtreeFlags&65011712,H!==null?p=Li(H,p):(p=Ra(p,l,i,null),p.flags|=2),p.return=n,a.return=n,a.sibling=p,n.child=a,Vl(null,a),a=n.child,p=e.child.memoizedState,p===null?p=Pr(i):(l=p.cachePool,l!==null?(j=yn._currentValue,l=l.parent!==j?{parent:j,pool:j}:l):l=Uc(),p={baseLanes:p.baseLanes|i,cachePool:l}),a.memoizedState=p,a.childLanes=_r(e,d,i),n.memoizedState=Lr,Vl(e.child,a)):(da(n),i=e.child,e=i.sibling,i=Li(i,{mode:"visible",children:a.children}),i.return=n,i.sibling=null,e!==null&&(d=n.deletions,d===null?(n.deletions=[e],n.flags|=16):d.push(e)),n.child=i,n.memoizedState=null,i)}function qr(e,n){return n=Xo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Xo(e,n){return e=ai(22,e,null,n),e.lanes=0,e}function Ir(e,n,i){return Ua(n,e.child,null,i),e=qr(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Xu(e,n,i){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),ir(e.return,n,i)}function Gr(e,n,i,a,l,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:l,treeForkCount:o}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=l,d.treeForkCount=o)}function Zu(e,n,i){var a=n.pendingProps,l=a.revealOrder,o=a.tail;a=a.children;var d=fn.current,p=(d&2)!==0;if(p?(d=d&1|2,n.flags|=128):d&=1,$e(fn,d),Nn(e,n,a,i),a=jt?Nl:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xu(e,i,n);else if(e.tag===19)Xu(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(i=n.child,l=null;i!==null;)e=i.alternate,e!==null&&Oo(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=n.child,n.child=null):(l=i.sibling,i.sibling=null),Gr(n,!1,l,i,o,a);break;case"backwards":case"unstable_legacy-backwards":for(i=null,l=n.child,n.child=null;l!==null;){if(e=l.alternate,e!==null&&Oo(e)===null){n.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}Gr(n,!0,i,null,o,a);break;case"together":Gr(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function Wi(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),ma|=n.lanes,(i&n.childLanes)===0)if(e!==null){if($a(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(u(153));if(n.child!==null){for(e=n.child,i=Li(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Li(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Wr(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ro(e)))}function nf(e,n,i){switch(n.tag){case 3:Qt(n,n.stateNode.containerInfo),la(n,yn,e.memoizedState.cache),Ba();break;case 27:case 5:lt(n);break;case 4:Qt(n,n.stateNode.containerInfo);break;case 10:la(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,fr(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(da(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Fu(e,n,i):(da(n),e=Wi(e,n,i),e!==null?e.sibling:null);da(n);break;case 19:var l=(e.flags&128)!==0;if(a=(i&n.childLanes)!==0,a||($a(e,n,i,!1),a=(i&n.childLanes)!==0),l){if(a)return Zu(e,n,i);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),$e(fn,fn.current),a)break;return null;case 22:return n.lanes=0,Iu(e,n,i,n.pendingProps);case 24:la(n,yn,e.memoizedState.cache)}return Wi(e,n,i)}function Ku(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)bn=!0;else{if(!Wr(e,i)&&(n.flags&128)===0)return bn=!1,nf(e,n,i);bn=(e.flags&131072)!==0}else bn=!1,jt&&(n.flags&1048576)!==0&&Rc(n,Nl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=Ma(n.elementType),n.type=e,typeof e=="function")Xs(e)?(a=La(e,a),n.tag=1,n=Vu(null,n,e,a,i)):(n.tag=0,n=Or(null,n,e,a,i));else{if(e!=null){var l=e.$$typeof;if(l===ae){n.tag=11,n=Pu(null,n,e,a,i);break e}else if(l===ve){n.tag=14,n=_u(null,n,e,a,i);break e}}throw n=ht(e)||e,Error(u(306,n,""))}}return n;case 0:return Or(e,n,n.type,n.pendingProps,i);case 1:return a=n.type,l=La(a,n.pendingProps),Vu(e,n,a,l,i);case 3:e:{if(Qt(n,n.stateNode.containerInfo),e===null)throw Error(u(387));a=n.pendingProps;var o=n.memoizedState;l=o.element,cr(e,n),ql(n,a,null,i);var d=n.memoizedState;if(a=d.cache,la(n,yn,a),a!==o.cache&&ar(n,[yn],i,!0),_l(),a=d.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:d.cache},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){n=Qu(e,n,a,i);break e}else if(a!==l){l=hi(Error(u(424)),n),Ml(l),n=Qu(e,n,a,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Jt=bi(e.firstChild),kn=n,jt=!0,ia=null,yi=!0,i=Ic(n,null,a,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ba(),a===l){n=Wi(e,n,i);break e}Nn(e,n,a,i)}n=n.child}return n;case 26:return Fo(e,n),e===null?(i=rm(n.type,null,n.pendingProps,null))?n.memoizedState=i:jt||(i=n.type,e=n.pendingProps,a=us(at.current).createElement(i),a[Ft]=n,a[hn]=e,Mn(a,i,e),Q(a),n.stateNode=a):n.memoizedState=rm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return lt(n),e===null&&jt&&(a=n.stateNode=lm(n.type,n.pendingProps,at.current),kn=n,yi=!0,l=Jt,xa(n.type)?(wd=l,Jt=bi(a.firstChild)):Jt=l),Nn(e,n,n.pendingProps.children,i),Fo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&jt&&((l=a=Jt)&&(a=Nf(a,n.type,n.pendingProps,yi),a!==null?(n.stateNode=a,kn=n,Jt=bi(a.firstChild),yi=!1,l=!0):l=!1),l||aa(n)),lt(n),l=n.type,o=n.pendingProps,d=e!==null?e.memoizedProps:null,a=o.children,xd(l,o)?a=null:d!==null&&xd(l,d)&&(n.flags|=32),n.memoizedState!==null&&(l=yr(e,n,Qh,null,null,i),so._currentValue=l),Fo(e,n),Nn(e,n,a,i),n.child;case 6:return e===null&&jt&&((e=i=Jt)&&(i=Mf(i,n.pendingProps,yi),i!==null?(n.stateNode=i,kn=n,Jt=null,e=!0):e=!1),e||aa(n)),null;case 13:return Fu(e,n,i);case 4:return Qt(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Ua(n,null,a,i):Nn(e,n,a,i),n.child;case 11:return Pu(e,n,n.type,n.pendingProps,i);case 7:return Nn(e,n,n.pendingProps,i),n.child;case 8:return Nn(e,n,n.pendingProps.children,i),n.child;case 12:return Nn(e,n,n.pendingProps.children,i),n.child;case 10:return a=n.pendingProps,la(n,n.type,a.value),Nn(e,n,a.children,i),n.child;case 9:return l=n.type._context,a=n.pendingProps.children,Ea(n),l=En(l),a=a(l),n.flags|=1,Nn(e,n,a,i),n.child;case 14:return _u(e,n,n.type,n.pendingProps,i);case 15:return qu(e,n,n.type,n.pendingProps,i);case 19:return Zu(e,n,i);case 31:return tf(e,n,i);case 22:return Iu(e,n,i,n.pendingProps);case 24:return Ea(n),a=En(yn),e===null?(l=sr(),l===null&&(l=Wt,o=lr(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=i),l=o),n.memoizedState={parent:a,cache:l},dr(n),la(n,yn,l)):((e.lanes&i)!==0&&(cr(e,n),ql(n,null,null,i),_l()),l=e.memoizedState,o=n.memoizedState,l.parent!==a?(l={parent:a,cache:a},n.memoizedState=l,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=l),la(n,yn,a)):(a=o.cache,la(n,yn,a),a!==l.cache&&ar(n,[yn],i,!0))),Nn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(u(156,n.tag))}function Yi(e){e.flags|=4}function Yr(e,n,i,a,l){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Cp())e.flags|=8192;else throw Ha=No,rr}else e.flags&=-16777217}function Ju(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mm(n))if(Cp())e.flags|=8192;else throw Ha=No,rr}function Zo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ri():536870912,e.lanes|=n,ul|=n)}function Ql(e,n){if(!jt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $t(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(n)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags&65011712,a|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=i,n}function af(e,n,i){var a=n.pendingProps;switch($s(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(n),null;case 1:return $t(n),null;case 3:return i=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),qi(yn),Kt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ja(n)?Yi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,tr())),$t(n),null;case 26:var l=n.type,o=n.memoizedState;return e===null?(Yi(n),o!==null?($t(n),Ju(n,o)):($t(n),Yr(n,l,null,a,i))):o?o!==e.memoizedState?(Yi(n),$t(n),Ju(n,o)):($t(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&Yi(n),$t(n),Yr(n,l,e,a,i)),null;case 27:if(en(n),i=at.current,l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Yi(n);else{if(!a){if(n.stateNode===null)throw Error(u(166));return $t(n),null}e=ft.current,Ja(n)?kc(n):(e=lm(l,a,i),n.stateNode=e,Yi(n))}return $t(n),null;case 5:if(en(n),l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Yi(n);else{if(!a){if(n.stateNode===null)throw Error(u(166));return $t(n),null}if(o=ft.current,Ja(n))kc(n);else{var d=us(at.current);switch(o){case 1:o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof a.is=="string"?d.createElement("select",{is:a.is}):d.createElement("select"),a.multiple?o.multiple=!0:a.size&&(o.size=a.size);break;default:o=typeof a.is=="string"?d.createElement(l,{is:a.is}):d.createElement(l)}}o[Ft]=n,o[hn]=a;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=o;e:switch(Mn(o,l,a),l){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Yi(n)}}return $t(n),Yr(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&Yi(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(u(166));if(e=at.current,Ja(n)){if(e=n.stateNode,i=n.memoizedProps,a=null,l=kn,l!==null)switch(l.tag){case 27:case 5:a=l.memoizedProps}e[Ft]=n,e=!!(e.nodeValue===i||a!==null&&a.suppressHydrationWarning===!0||Fp(e.nodeValue,i)),e||aa(n,!0)}else e=us(e).createTextNode(a),e[Ft]=n,n.stateNode=e}return $t(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(a=Ja(n),i!==null){if(e===null){if(!a)throw Error(u(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Ft]=n}else Ba(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),e=!1}else i=tr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(oi(n),n):(oi(n),null);if((n.flags&128)!==0)throw Error(u(558))}return $t(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Ja(n),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(u(318));if(l=n.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[Ft]=n}else Ba(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),l=!1}else l=tr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return n.flags&256?(oi(n),n):(oi(n),null)}return oi(n),(n.flags&128)!==0?(n.lanes=i,n):(i=a!==null,e=e!==null&&e.memoizedState!==null,i&&(a=n.child,l=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(l=a.alternate.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Zo(n,n.updateQueue),$t(n),null);case 4:return Kt(),e===null&&md(n.stateNode.containerInfo),$t(n),null;case 10:return qi(n.type),$t(n),null;case 19:if(We(fn),a=n.memoizedState,a===null)return $t(n),null;if(l=(n.flags&128)!==0,o=a.rendering,o===null)if(l)Ql(a,!1);else{if(pn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(o=Oo(e),o!==null){for(n.flags|=128,Ql(a,!1),e=o.updateQueue,n.updateQueue=e,Zo(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Dc(i,e),i=i.sibling;return $e(fn,fn.current&1|2),jt&&Pi(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&rn()>ts&&(n.flags|=128,l=!0,Ql(a,!1),n.lanes=4194304)}else{if(!l)if(e=Oo(o),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,Zo(n,e),Ql(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!jt)return $t(n),null}else 2*rn()-a.renderingStartTime>ts&&i!==536870912&&(n.flags|=128,l=!0,Ql(a,!1),n.lanes=4194304);a.isBackwards?(o.sibling=n.child,n.child=o):(e=a.last,e!==null?e.sibling=o:n.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=rn(),e.sibling=null,i=fn.current,$e(fn,l?i&1|2:i&1),jt&&Pi(n,a.treeForkCount),e):($t(n),null);case 22:case 23:return oi(n),hr(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(i&536870912)!==0&&(n.flags&128)===0&&($t(n),n.subtreeFlags&6&&(n.flags|=8192)):$t(n),i=n.updateQueue,i!==null&&Zo(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048),e!==null&&We(Na),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),qi(yn),$t(n),null;case 25:return null;case 30:return null}throw Error(u(156,n.tag))}function lf(e,n){switch($s(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qi(yn),Kt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return en(n),null;case 31:if(n.memoizedState!==null){if(oi(n),n.alternate===null)throw Error(u(340));Ba()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(oi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(u(340));Ba()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return We(fn),null;case 4:return Kt(),null;case 10:return qi(n.type),null;case 22:case 23:return oi(n),hr(),e!==null&&We(Na),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return qi(yn),null;case 25:return null;default:return null}}function $u(e,n){switch($s(n),n.tag){case 3:qi(yn),Kt();break;case 26:case 27:case 5:en(n);break;case 4:Kt();break;case 31:n.memoizedState!==null&&oi(n);break;case 13:oi(n);break;case 19:We(fn);break;case 10:qi(n.type);break;case 22:case 23:oi(n),hr(),e!==null&&We(Na);break;case 24:qi(yn)}}function Fl(e,n){try{var i=n.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var l=a.next;i=l;do{if((i.tag&e)===e){a=void 0;var o=i.create,d=i.inst;a=o(),d.destroy=a}i=i.next}while(i!==l)}}catch(p){Ut(n,n.return,p)}}function ua(e,n,i){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){var d=a.inst,p=d.destroy;if(p!==void 0){d.destroy=void 0,l=n;var j=i,H=p;try{H()}catch(F){Ut(l,j,F)}}}a=a.next}while(a!==o)}}catch(F){Ut(n,n.return,F)}}function ep(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Wc(n,i)}catch(a){Ut(e,e.return,a)}}}function tp(e,n,i){i.props=La(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(a){Ut(e,n,a)}}function Xl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof i=="function"?e.refCleanup=i(a):i.current=a}}catch(l){Ut(e,n,l)}}function Hi(e,n){var i=e.ref,a=e.refCleanup;if(i!==null)if(typeof a=="function")try{a()}catch(l){Ut(e,n,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(l){Ut(e,n,l)}else i.current=null}function np(e){var n=e.type,i=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&a.focus();break e;case"img":i.src?a.src=i.src:i.srcSet&&(a.srcset=i.srcSet)}}catch(l){Ut(e,e.return,l)}}function Vr(e,n,i){try{var a=e.stateNode;Tf(a,e.type,i,n),a[hn]=n}catch(l){Ut(e,e.return,l)}}function ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xa(e.type)||e.tag===4}function Qr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fr(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=wi));else if(a!==4&&(a===27&&xa(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Fr(e,n,i),e=e.sibling;e!==null;)Fr(e,n,i),e=e.sibling}function Ko(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(a!==4&&(a===27&&xa(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ko(e,n,i),e=e.sibling;e!==null;)Ko(e,n,i),e=e.sibling}function ap(e){var n=e.stateNode,i=e.memoizedProps;try{for(var a=e.type,l=n.attributes;l.length;)n.removeAttributeNode(l[0]);Mn(n,a,i),n[Ft]=e,n[hn]=i}catch(o){Ut(e,e.return,o)}}var Vi=!1,vn=!1,Xr=!1,lp=typeof WeakSet=="function"?WeakSet:Set,zn=null;function of(e,n){if(e=e.containerInfo,gd=xs,e=yc(e),Is(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var l=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var d=0,p=-1,j=-1,H=0,F=0,te=e,U=null;t:for(;;){for(var P;te!==i||l!==0&&te.nodeType!==3||(p=d+l),te!==o||a!==0&&te.nodeType!==3||(j=d+a),te.nodeType===3&&(d+=te.nodeValue.length),(P=te.firstChild)!==null;)U=te,te=P;for(;;){if(te===e)break t;if(U===i&&++H===l&&(p=d),U===o&&++F===a&&(j=d),(P=te.nextSibling)!==null)break;te=U,U=te.parentNode}te=P}i=p===-1||j===-1?null:{start:p,end:j}}else i=null}i=i||{start:0,end:0}}else i=null;for(yd={focusedElem:e,selectionRange:i},xs=!1,zn=n;zn!==null;)if(n=zn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,zn=e;else for(;zn!==null;){switch(n=zn,o=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)l=e[i],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,i=n,l=o.memoizedProps,o=o.memoizedState,a=i.stateNode;try{var be=La(i.type,l);e=a.getSnapshotBeforeUpdate(be,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(Le){Ut(i,i.return,Le)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)vd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=n.sibling,e!==null){e.return=n.return,zn=e;break}zn=n.return}}function op(e,n,i){var a=i.flags;switch(i.tag){case 0:case 11:case 15:Fi(e,i),a&4&&Fl(5,i);break;case 1:if(Fi(e,i),a&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(d){Ut(i,i.return,d)}else{var l=La(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(l,n,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Ut(i,i.return,d)}}a&64&&ep(i),a&512&&Xl(i,i.return);break;case 3:if(Fi(e,i),a&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Wc(e,n)}catch(d){Ut(i,i.return,d)}}break;case 27:n===null&&a&4&&ap(i);case 26:case 5:Fi(e,i),n===null&&a&4&&np(i),a&512&&Xl(i,i.return);break;case 12:Fi(e,i);break;case 31:Fi(e,i),a&4&&dp(e,i);break;case 13:Fi(e,i),a&4&&cp(e,i),a&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ff.bind(null,i),Hf(e,i))));break;case 22:if(a=i.memoizedState!==null||Vi,!a){n=n!==null&&n.memoizedState!==null||vn,l=Vi;var o=vn;Vi=a,(vn=n)&&!o?Xi(e,i,(i.subtreeFlags&8772)!==0):Fi(e,i),Vi=l,vn=o}break;case 30:break;default:Fi(e,i)}}function sp(e){var n=e.alternate;n!==null&&(e.alternate=null,sp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Wn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sn=null,Vn=!1;function Qi(e,n,i){for(i=i.child;i!==null;)rp(e,n,i),i=i.sibling}function rp(e,n,i){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ot,i)}catch{}switch(i.tag){case 26:vn||Hi(i,n),Qi(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:vn||Hi(i,n);var a=sn,l=Vn;xa(i.type)&&(sn=i.stateNode,Vn=!1),Qi(e,n,i),ao(i.stateNode),sn=a,Vn=l;break;case 5:vn||Hi(i,n);case 6:if(a=sn,l=Vn,sn=null,Qi(e,n,i),sn=a,Vn=l,sn!==null)if(Vn)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(i.stateNode)}catch(o){Ut(i,n,o)}else try{sn.removeChild(i.stateNode)}catch(o){Ut(i,n,o)}break;case 18:sn!==null&&(Vn?(e=sn,em(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),bl(e)):em(sn,i.stateNode));break;case 4:a=sn,l=Vn,sn=i.stateNode.containerInfo,Vn=!0,Qi(e,n,i),sn=a,Vn=l;break;case 0:case 11:case 14:case 15:ua(2,i,n),vn||ua(4,i,n),Qi(e,n,i);break;case 1:vn||(Hi(i,n),a=i.stateNode,typeof a.componentWillUnmount=="function"&&tp(i,n,a)),Qi(e,n,i);break;case 21:Qi(e,n,i);break;case 22:vn=(a=vn)||i.memoizedState!==null,Qi(e,n,i),vn=a;break;default:Qi(e,n,i)}}function dp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{bl(e)}catch(i){Ut(n,n.return,i)}}}function cp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{bl(e)}catch(i){Ut(n,n.return,i)}}function sf(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new lp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new lp),n;default:throw Error(u(435,e.tag))}}function Jo(e,n){var i=sf(e);n.forEach(function(a){if(!i.has(a)){i.add(a);var l=gf.bind(null,e,a);a.then(l,l)}})}function Qn(e,n){var i=n.deletions;if(i!==null)for(var a=0;a<i.length;a++){var l=i[a],o=e,d=n,p=d;e:for(;p!==null;){switch(p.tag){case 27:if(xa(p.type)){sn=p.stateNode,Vn=!1;break e}break;case 5:sn=p.stateNode,Vn=!1;break e;case 3:case 4:sn=p.stateNode.containerInfo,Vn=!0;break e}p=p.return}if(sn===null)throw Error(u(160));rp(o,d,l),sn=null,Vn=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)up(n,e),n=n.sibling}var Ai=null;function up(e,n){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qn(n,e),Fn(e),a&4&&(ua(3,e,e.return),Fl(3,e),ua(5,e,e.return));break;case 1:Qn(n,e),Fn(e),a&512&&(vn||i===null||Hi(i,i.return)),a&64&&Vi&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?a:i.concat(a))));break;case 26:var l=Ai;if(Qn(n,e),Fn(e),a&512&&(vn||i===null||Hi(i,i.return)),a&4){var o=i!==null?i.memoizedState:null;if(a=e.memoizedState,i===null)if(a===null)if(e.stateNode===null){e:{a=e.type,i=e.memoizedProps,l=l.ownerDocument||l;t:switch(a){case"title":o=l.getElementsByTagName("title")[0],(!o||o[Un]||o[Ft]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(a),l.head.insertBefore(o,l.querySelector("head > title"))),Mn(o,a,i),o[Ft]=e,Q(o),a=o;break e;case"link":var d=um("link","href",l).get(a+(i.href||""));if(d){for(var p=0;p<d.length;p++)if(o=d[p],o.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&o.getAttribute("rel")===(i.rel==null?null:i.rel)&&o.getAttribute("title")===(i.title==null?null:i.title)&&o.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){d.splice(p,1);break t}}o=l.createElement(a),Mn(o,a,i),l.head.appendChild(o);break;case"meta":if(d=um("meta","content",l).get(a+(i.content||""))){for(p=0;p<d.length;p++)if(o=d[p],o.getAttribute("content")===(i.content==null?null:""+i.content)&&o.getAttribute("name")===(i.name==null?null:i.name)&&o.getAttribute("property")===(i.property==null?null:i.property)&&o.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&o.getAttribute("charset")===(i.charSet==null?null:i.charSet)){d.splice(p,1);break t}}o=l.createElement(a),Mn(o,a,i),l.head.appendChild(o);break;default:throw Error(u(468,a))}o[Ft]=e,Q(o),a=o}e.stateNode=a}else pm(l,e.type,e.stateNode);else e.stateNode=cm(l,a,e.memoizedProps);else o!==a?(o===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):o.count--,a===null?pm(l,e.type,e.stateNode):cm(l,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Vr(e,e.memoizedProps,i.memoizedProps)}break;case 27:Qn(n,e),Fn(e),a&512&&(vn||i===null||Hi(i,i.return)),i!==null&&a&4&&Vr(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Qn(n,e),Fn(e),a&512&&(vn||i===null||Hi(i,i.return)),e.flags&32){l=e.stateNode;try{Pt(l,"")}catch(be){Ut(e,e.return,be)}}a&4&&e.stateNode!=null&&(l=e.memoizedProps,Vr(e,l,i!==null?i.memoizedProps:l)),a&1024&&(Xr=!0);break;case 6:if(Qn(n,e),Fn(e),a&4){if(e.stateNode===null)throw Error(u(162));a=e.memoizedProps,i=e.stateNode;try{i.nodeValue=a}catch(be){Ut(e,e.return,be)}}break;case 3:if(hs=null,l=Ai,Ai=ps(n.containerInfo),Qn(n,e),Ai=l,Fn(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bl(n.containerInfo)}catch(be){Ut(e,e.return,be)}Xr&&(Xr=!1,pp(e));break;case 4:a=Ai,Ai=ps(e.stateNode.containerInfo),Qn(n,e),Fn(e),Ai=a;break;case 12:Qn(n,e),Fn(e);break;case 31:Qn(n,e),Fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jo(e,a)));break;case 13:Qn(n,e),Fn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(es=rn()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jo(e,a)));break;case 22:l=e.memoizedState!==null;var j=i!==null&&i.memoizedState!==null,H=Vi,F=vn;if(Vi=H||l,vn=F||j,Qn(n,e),vn=F,Vi=H,Fn(e),a&8192)e:for(n=e.stateNode,n._visibility=l?n._visibility&-2:n._visibility|1,l&&(i===null||j||Vi||vn||Pa(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){j=i=n;try{if(o=j.stateNode,l)d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{p=j.stateNode;var te=j.memoizedProps.style,U=te!=null&&te.hasOwnProperty("display")?te.display:null;p.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(be){Ut(j,j.return,be)}}}else if(n.tag===6){if(i===null){j=n;try{j.stateNode.nodeValue=l?"":j.memoizedProps}catch(be){Ut(j,j.return,be)}}}else if(n.tag===18){if(i===null){j=n;try{var P=j.stateNode;l?tm(P,!0):tm(j.stateNode,!1)}catch(be){Ut(j,j.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(i=a.retryQueue,i!==null&&(a.retryQueue=null,Jo(e,i))));break;case 19:Qn(n,e),Fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jo(e,a)));break;case 30:break;case 21:break;default:Qn(n,e),Fn(e)}}function Fn(e){var n=e.flags;if(n&2){try{for(var i,a=e.return;a!==null;){if(ip(a)){i=a;break}a=a.return}if(i==null)throw Error(u(160));switch(i.tag){case 27:var l=i.stateNode,o=Qr(e);Ko(e,o,l);break;case 5:var d=i.stateNode;i.flags&32&&(Pt(d,""),i.flags&=-33);var p=Qr(e);Ko(e,p,d);break;case 3:case 4:var j=i.stateNode.containerInfo,H=Qr(e);Fr(e,H,j);break;default:throw Error(u(161))}}catch(F){Ut(e,e.return,F)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function pp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;pp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Fi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)op(e,n.alternate,n),n=n.sibling}function Pa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ua(4,n,n.return),Pa(n);break;case 1:Hi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&tp(n,n.return,i),Pa(n);break;case 27:ao(n.stateNode);case 26:case 5:Hi(n,n.return),Pa(n);break;case 22:n.memoizedState===null&&Pa(n);break;case 30:Pa(n);break;default:Pa(n)}e=e.sibling}}function Xi(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,l=e,o=n,d=o.flags;switch(o.tag){case 0:case 11:case 15:Xi(l,o,i),Fl(4,o);break;case 1:if(Xi(l,o,i),a=o,l=a.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(H){Ut(a,a.return,H)}if(a=o,l=a.updateQueue,l!==null){var p=a.stateNode;try{var j=l.shared.hiddenCallbacks;if(j!==null)for(l.shared.hiddenCallbacks=null,l=0;l<j.length;l++)Gc(j[l],p)}catch(H){Ut(a,a.return,H)}}i&&d&64&&ep(o),Xl(o,o.return);break;case 27:ap(o);case 26:case 5:Xi(l,o,i),i&&a===null&&d&4&&np(o),Xl(o,o.return);break;case 12:Xi(l,o,i);break;case 31:Xi(l,o,i),i&&d&4&&dp(l,o);break;case 13:Xi(l,o,i),i&&d&4&&cp(l,o);break;case 22:o.memoizedState===null&&Xi(l,o,i),Xl(o,o.return);break;case 30:break;default:Xi(l,o,i)}n=n.sibling}}function Zr(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Hl(i))}function Kr(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Hl(e))}function Di(e,n,i,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)mp(e,n,i,a),n=n.sibling}function mp(e,n,i,a){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Di(e,n,i,a),l&2048&&Fl(9,n);break;case 1:Di(e,n,i,a);break;case 3:Di(e,n,i,a),l&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Hl(e)));break;case 12:if(l&2048){Di(e,n,i,a),e=n.stateNode;try{var o=n.memoizedProps,d=o.id,p=o.onPostCommit;typeof p=="function"&&p(d,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Ut(n,n.return,j)}}else Di(e,n,i,a);break;case 31:Di(e,n,i,a);break;case 13:Di(e,n,i,a);break;case 23:break;case 22:o=n.stateNode,d=n.alternate,n.memoizedState!==null?o._visibility&2?Di(e,n,i,a):Zl(e,n):o._visibility&2?Di(e,n,i,a):(o._visibility|=2,rl(e,n,i,a,(n.subtreeFlags&10256)!==0||!1)),l&2048&&Zr(d,n);break;case 24:Di(e,n,i,a),l&2048&&Kr(n.alternate,n);break;default:Di(e,n,i,a)}}function rl(e,n,i,a,l){for(l=l&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var o=e,d=n,p=i,j=a,H=d.flags;switch(d.tag){case 0:case 11:case 15:rl(o,d,p,j,l),Fl(8,d);break;case 23:break;case 22:var F=d.stateNode;d.memoizedState!==null?F._visibility&2?rl(o,d,p,j,l):Zl(o,d):(F._visibility|=2,rl(o,d,p,j,l)),l&&H&2048&&Zr(d.alternate,d);break;case 24:rl(o,d,p,j,l),l&&H&2048&&Kr(d.alternate,d);break;default:rl(o,d,p,j,l)}n=n.sibling}}function Zl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,a=n,l=a.flags;switch(a.tag){case 22:Zl(i,a),l&2048&&Zr(a.alternate,a);break;case 24:Zl(i,a),l&2048&&Kr(a.alternate,a);break;default:Zl(i,a)}n=n.sibling}}var Kl=8192;function dl(e,n,i){if(e.subtreeFlags&Kl)for(e=e.child;e!==null;)hp(e,n,i),e=e.sibling}function hp(e,n,i){switch(e.tag){case 26:dl(e,n,i),e.flags&Kl&&e.memoizedState!==null&&Qf(i,Ai,e.memoizedState,e.memoizedProps);break;case 5:dl(e,n,i);break;case 3:case 4:var a=Ai;Ai=ps(e.stateNode.containerInfo),dl(e,n,i),Ai=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Kl,Kl=16777216,dl(e,n,i),Kl=a):dl(e,n,i));break;default:dl(e,n,i)}}function fp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Jl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];zn=a,yp(a,e)}fp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gp(e),e=e.sibling}function gp(e){switch(e.tag){case 0:case 11:case 15:Jl(e),e.flags&2048&&ua(9,e,e.return);break;case 3:Jl(e);break;case 12:Jl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,$o(e)):Jl(e);break;default:Jl(e)}}function $o(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];zn=a,yp(a,e)}fp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ua(8,n,n.return),$o(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,$o(n));break;default:$o(n)}e=e.sibling}}function yp(e,n){for(;zn!==null;){var i=zn;switch(i.tag){case 0:case 11:case 15:ua(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var a=i.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Hl(i.memoizedState.cache)}if(a=i.child,a!==null)a.return=i,zn=a;else e:for(i=e;zn!==null;){a=zn;var l=a.sibling,o=a.return;if(sp(a),a===i){zn=null;break e}if(l!==null){l.return=o,zn=l;break e}zn=o}}}var rf={getCacheForType:function(e){var n=En(yn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return En(yn).controller.signal}},df=typeof WeakMap=="function"?WeakMap:Map,Et=0,Wt=null,pt=null,yt=0,Ht=0,si=null,pa=!1,cl=!1,Jr=!1,Zi=0,pn=0,ma=0,_a=0,$r=0,ri=0,ul=0,$l=null,Xn=null,ed=!1,es=0,xp=0,ts=1/0,ns=null,ha=null,Cn=0,fa=null,pl=null,Ki=0,td=0,nd=null,bp=null,eo=0,id=null;function di(){return(Et&2)!==0&&yt!==0?yt&-yt:I.T!==null?dd():Me()}function vp(){if(ri===0)if((yt&536870912)===0||jt){var e=nn;nn<<=1,(nn&3932160)===0&&(nn=262144),ri=e}else ri=536870912;return e=li.current,e!==null&&(e.flags|=32),ri}function Zn(e,n,i){(e===Wt&&(Ht===2||Ht===9)||e.cancelPendingCommit!==null)&&(ml(e,0),ga(e,yt,ri,!1)),Tn(e,i),((Et&2)===0||e!==Wt)&&(e===Wt&&((Et&2)===0&&(_a|=i),pn===4&&ga(e,yt,ri,!1)),Ui(e))}function jp(e,n,i){if((Et&6)!==0)throw Error(u(327));var a=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Ye(e,n),l=a?pf(e,n):ld(e,n,!0),o=a;do{if(l===0){cl&&!a&&ga(e,n,0,!1);break}else{if(i=e.current.alternate,o&&!cf(i)){l=ld(e,n,!1),o=!1;continue}if(l===2){if(o=n,e.errorRecoveryDisabledLanes&o)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){n=d;e:{var p=e;l=$l;var j=p.current.memoizedState.isDehydrated;if(j&&(ml(p,d).flags|=256),d=ld(p,d,!1),d!==2){if(Jr&&!j){p.errorRecoveryDisabledLanes|=o,_a|=o,l=4;break e}o=Xn,Xn=l,o!==null&&(Xn===null?Xn=o:Xn.push.apply(Xn,o))}l=d}if(o=!1,l!==2)continue}}if(l===1){ml(e,0),ga(e,n,0,!0);break}e:{switch(a=e,o=l,o){case 0:case 1:throw Error(u(345));case 4:if((n&4194048)!==n)break;case 6:ga(a,n,ri,!pa);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(u(329))}if((n&62914560)===n&&(l=es+300-rn(),10<l)){if(ga(a,n,ri,!pa),mn(a,0,!0)!==0)break e;Ki=n,a.timeoutHandle=Jp(Sp.bind(null,a,i,Xn,ns,ed,n,ri,_a,ul,pa,o,"Throttled",-0,0),l);break e}Sp(a,i,Xn,ns,ed,n,ri,_a,ul,pa,o,null,-0,0)}}break}while(!0);Ui(e)}function Sp(e,n,i,a,l,o,d,p,j,H,F,te,U,P){if(e.timeoutHandle=-1,te=n.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},hp(n,o,te);var be=(o&62914560)===o?es-rn():(o&4194048)===o?xp-rn():0;if(be=Ff(te,be),be!==null){Ki=o,e.cancelPendingCommit=be(Bp.bind(null,e,n,o,i,a,l,d,p,j,F,te,null,U,P)),ga(e,o,d,!H);return}}Bp(e,n,o,i,a,l,d,p,j)}function cf(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var a=0;a<i.length;a++){var l=i[a],o=l.getSnapshot;l=l.value;try{if(!ii(o(),l))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ga(e,n,i,a){n&=~$r,n&=~_a,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var l=n;0<l;){var o=31-dn(l),d=1<<o;a[o]=-1,l&=~d}i!==0&&C(e,i,n)}function is(){return(Et&6)===0?(to(0),!1):!0}function ad(){if(pt!==null){if(Ht===0)var e=pt.return;else e=pt,_i=ka=null,vr(e),il=null,Ol=0,e=pt;for(;e!==null;)$u(e.alternate,e),e=e.return;pt=null}}function ml(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Bf(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ki=0,ad(),Wt=e,pt=i=Li(e.current,null),yt=n,Ht=0,si=null,pa=!1,cl=Ye(e,n),Jr=!1,ul=ri=$r=_a=ma=pn=0,Xn=$l=null,ed=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var l=31-dn(a),o=1<<l;n|=e[l],a&=~o}return Zi=n,Co(),i}function wp(e,n){Qe=null,I.H=Yl,n===nl||n===Eo?(n=Pc(),Ht=3):n===rr?(n=Pc(),Ht=4):Ht=n===Ur?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,si=n,pt===null&&(pn=1,Vo(e,hi(n,e.current)))}function Cp(){var e=li.current;return e===null?!0:(yt&4194048)===yt?xi===null:(yt&62914560)===yt||(yt&536870912)!==0?e===xi:!1}function Ap(){var e=I.H;return I.H=Yl,e===null?Yl:e}function Dp(){var e=I.A;return I.A=rf,e}function as(){pn=4,pa||(yt&4194048)!==yt&&li.current!==null||(cl=!0),(ma&134217727)===0&&(_a&134217727)===0||Wt===null||ga(Wt,yt,ri,!1)}function ld(e,n,i){var a=Et;Et|=2;var l=Ap(),o=Dp();(Wt!==e||yt!==n)&&(ns=null,ml(e,n)),n=!1;var d=pn;e:do try{if(Ht!==0&&pt!==null){var p=pt,j=si;switch(Ht){case 8:ad(),d=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(n=!0);var H=Ht;if(Ht=0,si=null,hl(e,p,j,H),i&&cl){d=0;break e}break;default:H=Ht,Ht=0,si=null,hl(e,p,j,H)}}uf(),d=pn;break}catch(F){wp(e,F)}while(!0);return n&&e.shellSuspendCounter++,_i=ka=null,Et=a,I.H=l,I.A=o,pt===null&&(Wt=null,yt=0,Co()),d}function uf(){for(;pt!==null;)Tp(pt)}function pf(e,n){var i=Et;Et|=2;var a=Ap(),l=Dp();Wt!==e||yt!==n?(ns=null,ts=rn()+500,ml(e,n)):cl=Ye(e,n);e:do try{if(Ht!==0&&pt!==null){n=pt;var o=si;t:switch(Ht){case 1:Ht=0,si=null,hl(e,n,o,1);break;case 2:case 9:if(Oc(o)){Ht=0,si=null,zp(n);break}n=function(){Ht!==2&&Ht!==9||Wt!==e||(Ht=7),Ui(e)},o.then(n,n);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:Oc(o)?(Ht=0,si=null,zp(n)):(Ht=0,si=null,hl(e,n,o,7));break;case 5:var d=null;switch(pt.tag){case 26:d=pt.memoizedState;case 5:case 27:var p=pt;if(d?mm(d):p.stateNode.complete){Ht=0,si=null;var j=p.sibling;if(j!==null)pt=j;else{var H=p.return;H!==null?(pt=H,ls(H)):pt=null}break t}}Ht=0,si=null,hl(e,n,o,5);break;case 6:Ht=0,si=null,hl(e,n,o,6);break;case 8:ad(),pn=6;break e;default:throw Error(u(462))}}mf();break}catch(F){wp(e,F)}while(!0);return _i=ka=null,I.H=a,I.A=l,Et=i,pt!==null?0:(Wt=null,yt=0,Co(),pn)}function mf(){for(;pt!==null&&!jn();)Tp(pt)}function Tp(e){var n=Ku(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,n===null?ls(e):pt=n}function zp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Yu(i,n,n.pendingProps,n.type,void 0,yt);break;case 11:n=Yu(i,n,n.pendingProps,n.type.render,n.ref,yt);break;case 5:vr(n);default:$u(i,n),n=pt=Dc(n,Zi),n=Ku(i,n,Zi)}e.memoizedProps=e.pendingProps,n===null?ls(e):pt=n}function hl(e,n,i,a){_i=ka=null,vr(n),il=null,Ol=0;var l=n.return;try{if(ef(e,l,n,i,yt)){pn=1,Vo(e,hi(i,e.current)),pt=null;return}}catch(o){if(l!==null)throw pt=l,o;pn=1,Vo(e,hi(i,e.current)),pt=null;return}n.flags&32768?(jt||a===1?e=!0:cl||(yt&536870912)!==0?e=!1:(pa=e=!0,(a===2||a===9||a===3||a===6)&&(a=li.current,a!==null&&a.tag===13&&(a.flags|=16384))),Rp(n,e)):ls(n)}function ls(e){var n=e;do{if((n.flags&32768)!==0){Rp(n,pa);return}e=n.return;var i=af(n.alternate,n,Zi);if(i!==null){pt=i;return}if(n=n.sibling,n!==null){pt=n;return}pt=n=e}while(n!==null);pn===0&&(pn=5)}function Rp(e,n){do{var i=lf(e.alternate,e);if(i!==null){i.flags&=32767,pt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){pt=e;return}pt=e=i}while(e!==null);pn=6,pt=null}function Bp(e,n,i,a,l,o,d,p,j){e.cancelPendingCommit=null;do os();while(Cn!==0);if((Et&6)!==0)throw Error(u(327));if(n!==null){if(n===e.current)throw Error(u(177));if(o=n.lanes|n.childLanes,o|=Qs,Ct(e,i,o,d,p,j),e===Wt&&(pt=Wt=null,yt=0),pl=n,fa=e,Ki=i,td=o,nd=l,bp=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yf(X,function(){return Hp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=I.T,I.T=null,l=re.p,re.p=2,d=Et,Et|=4;try{of(e,n,i)}finally{Et=d,re.p=l,I.T=a}}Cn=1,kp(),Ep(),Np()}}function kp(){if(Cn===1){Cn=0;var e=fa,n=pl,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=I.T,I.T=null;var a=re.p;re.p=2;var l=Et;Et|=4;try{up(n,e);var o=yd,d=yc(e.containerInfo),p=o.focusedElem,j=o.selectionRange;if(d!==p&&p&&p.ownerDocument&&gc(p.ownerDocument.documentElement,p)){if(j!==null&&Is(p)){var H=j.start,F=j.end;if(F===void 0&&(F=H),"selectionStart"in p)p.selectionStart=H,p.selectionEnd=Math.min(F,p.value.length);else{var te=p.ownerDocument||document,U=te&&te.defaultView||window;if(U.getSelection){var P=U.getSelection(),be=p.textContent.length,Le=Math.min(j.start,be),It=j.end===void 0?Le:Math.min(j.end,be);!P.extend&&Le>It&&(d=It,It=Le,Le=d);var B=fc(p,Le),D=fc(p,It);if(B&&D&&(P.rangeCount!==1||P.anchorNode!==B.node||P.anchorOffset!==B.offset||P.focusNode!==D.node||P.focusOffset!==D.offset)){var M=te.createRange();M.setStart(B.node,B.offset),P.removeAllRanges(),Le>It?(P.addRange(M),P.extend(D.node,D.offset)):(M.setEnd(D.node,D.offset),P.addRange(M))}}}}for(te=[],P=p;P=P.parentNode;)P.nodeType===1&&te.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<te.length;p++){var J=te[p];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}xs=!!gd,yd=gd=null}finally{Et=l,re.p=a,I.T=i}}e.current=n,Cn=2}}function Ep(){if(Cn===2){Cn=0;var e=fa,n=pl,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=I.T,I.T=null;var a=re.p;re.p=2;var l=Et;Et|=4;try{op(e,n.alternate,n)}finally{Et=l,re.p=a,I.T=i}}Cn=3}}function Np(){if(Cn===4||Cn===3){Cn=0,zi();var e=fa,n=pl,i=Ki,a=bp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Cn=5:(Cn=0,pl=fa=null,Mp(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(ha=null),je(i),n=n.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ot,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=I.T,l=re.p,re.p=2,I.T=null;try{for(var o=e.onRecoverableError,d=0;d<a.length;d++){var p=a[d];o(p.value,{componentStack:p.stack})}}finally{I.T=n,re.p=l}}(Ki&3)!==0&&os(),Ui(e),l=e.pendingLanes,(i&261930)!==0&&(l&42)!==0?e===id?eo++:(eo=0,id=e):eo=0,to(0)}}function Mp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Hl(n)))}function os(){return kp(),Ep(),Np(),Hp()}function Hp(){if(Cn!==5)return!1;var e=fa,n=td;td=0;var i=je(Ki),a=I.T,l=re.p;try{re.p=32>i?32:i,I.T=null,i=nd,nd=null;var o=fa,d=Ki;if(Cn=0,pl=fa=null,Ki=0,(Et&6)!==0)throw Error(u(331));var p=Et;if(Et|=4,gp(o.current),mp(o,o.current,d,i),Et=p,to(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ot,o)}catch{}return!0}finally{re.p=l,I.T=a,Mp(e,n)}}function Up(e,n,i){n=hi(i,n),n=Hr(e.stateNode,n,2),e=ra(e,n,2),e!==null&&(Tn(e,2),Ui(e))}function Ut(e,n,i){if(e.tag===3)Up(e,e,i);else for(;n!==null;){if(n.tag===3){Up(n,e,i);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ha===null||!ha.has(a))){e=hi(i,e),i=Ou(2),a=ra(n,i,2),a!==null&&(Lu(i,a,n,e),Tn(a,2),Ui(a));break}}n=n.return}}function od(e,n,i){var a=e.pingCache;if(a===null){a=e.pingCache=new df;var l=new Set;a.set(n,l)}else l=a.get(n),l===void 0&&(l=new Set,a.set(n,l));l.has(i)||(Jr=!0,l.add(i),e=hf.bind(null,e,n,i),n.then(e,e))}function hf(e,n,i){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Wt===e&&(yt&i)===i&&(pn===4||pn===3&&(yt&62914560)===yt&&300>rn()-es?(Et&2)===0&&ml(e,0):$r|=i,ul===yt&&(ul=0)),Ui(e)}function Op(e,n){n===0&&(n=Ri()),e=za(e,n),e!==null&&(Tn(e,n),Ui(e))}function ff(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Op(e,i)}function gf(e,n){var i=0;switch(e.tag){case 31:case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(u(314))}a!==null&&a.delete(n),Op(e,i)}function yf(e,n){return Ot(e,n)}var ss=null,fl=null,sd=!1,rs=!1,rd=!1,ya=0;function Ui(e){e!==fl&&e.next===null&&(fl===null?ss=fl=e:fl=fl.next=e),rs=!0,sd||(sd=!0,bf())}function to(e,n){if(!rd&&rs){rd=!0;do for(var i=!1,a=ss;a!==null;){if(e!==0){var l=a.pendingLanes;if(l===0)var o=0;else{var d=a.suspendedLanes,p=a.pingedLanes;o=(1<<31-dn(42|e)+1)-1,o&=l&~(d&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(i=!0,qp(a,o))}else o=yt,o=mn(a,a===Wt?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(o&3)===0||Ye(a,o)||(i=!0,qp(a,o));a=a.next}while(i);rd=!1}}function xf(){Lp()}function Lp(){rs=sd=!1;var e=0;ya!==0&&Rf()&&(e=ya);for(var n=rn(),i=null,a=ss;a!==null;){var l=a.next,o=Pp(a,n);o===0?(a.next=null,i===null?ss=l:i.next=l,l===null&&(fl=i)):(i=a,(e!==0||(o&3)!==0)&&(rs=!0)),a=l}Cn!==0&&Cn!==5||to(e),ya!==0&&(ya=0)}function Pp(e,n){for(var i=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var d=31-dn(o),p=1<<d,j=l[d];j===-1?((p&i)===0||(p&a)!==0)&&(l[d]=Si(p,n)):j<=n&&(e.expiredLanes|=p),o&=~p}if(n=Wt,i=yt,i=mn(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,i===0||e===n&&(Ht===2||Ht===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&wt(a),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ye(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(a!==null&&wt(a),je(i)){case 2:case 8:i=_;break;case 32:i=X;break;case 268435456:i=ke;break;default:i=X}return a=_p.bind(null,e),i=Ot(i,a),e.callbackPriority=n,e.callbackNode=i,n}return a!==null&&a!==null&&wt(a),e.callbackPriority=2,e.callbackNode=null,2}function _p(e,n){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(os()&&e.callbackNode!==i)return null;var a=yt;return a=mn(e,e===Wt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(jp(e,a,n),Pp(e,rn()),e.callbackNode!=null&&e.callbackNode===i?_p.bind(null,e):null)}function qp(e,n){if(os())return null;jp(e,n,!0)}function bf(){kf(function(){(Et&6)!==0?Ot(et,xf):Lp()})}function dd(){if(ya===0){var e=el;e===0&&(e=wn,wn<<=1,(wn&261888)===0&&(wn=256)),ya=e}return ya}function Ip(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:On(""+e)}function Gp(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function vf(e,n,i,a,l){if(n==="submit"&&i&&i.stateNode===l){var o=Ip((l[hn]||null).action),d=a.submitter;d&&(n=(n=d[hn]||null)?Ip(n.formAction):d.getAttribute("formAction"),n!==null&&(o=n,d=null));var p=new vo("action","action",null,a,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ya!==0){var j=d?Gp(l,d):new FormData(l);Rr(i,{pending:!0,data:j,method:l.method,action:o},null,j)}}else typeof o=="function"&&(p.preventDefault(),j=d?Gp(l,d):new FormData(l),Rr(i,{pending:!0,data:j,method:l.method,action:o},o,j))},currentTarget:l}]})}}for(var cd=0;cd<Vs.length;cd++){var ud=Vs[cd],jf=ud.toLowerCase(),Sf=ud[0].toUpperCase()+ud.slice(1);Ci(jf,"on"+Sf)}Ci(vc,"onAnimationEnd"),Ci(jc,"onAnimationIteration"),Ci(Sc,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Oh,"onTransitionRun"),Ci(Lh,"onTransitionStart"),Ci(Ph,"onTransitionCancel"),Ci(wc,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),Pe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(no));function Wp(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],l=a.event;a=a.listeners;e:{var o=void 0;if(n)for(var d=a.length-1;0<=d;d--){var p=a[d],j=p.instance,H=p.currentTarget;if(p=p.listener,j!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=H;try{o(l)}catch(F){wo(F)}l.currentTarget=null,o=j}else for(d=0;d<a.length;d++){if(p=a[d],j=p.instance,H=p.currentTarget,p=p.listener,j!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=H;try{o(l)}catch(F){wo(F)}l.currentTarget=null,o=j}}}}function mt(e,n){var i=n[Ve];i===void 0&&(i=n[Ve]=new Set);var a=e+"__bubble";i.has(a)||(Yp(n,e,2,!1),i.add(a))}function pd(e,n,i){var a=0;n&&(a|=4),Yp(i,e,a,n)}var ds="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[ds]){e[ds]=!0,v.forEach(function(i){i!=="selectionchange"&&(wf.has(i)||pd(i,!1,e),pd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ds]||(n[ds]=!0,pd("selectionchange",!1,n))}}function Yp(e,n,i,a){switch(vm(n)){case 2:var l=Kf;break;case 8:l=Jf;break;default:l=zd}i=l.bind(null,n,i,e),l=void 0,!Ns||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(n,i,{capture:!0,passive:l}):e.addEventListener(n,i,!0):l!==void 0?e.addEventListener(n,i,{passive:l}):e.addEventListener(n,i,!1)}function hd(e,n,i,a,l){var o=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var p=a.stateNode.containerInfo;if(p===l)break;if(d===4)for(d=a.return;d!==null;){var j=d.tag;if((j===3||j===4)&&d.stateNode.containerInfo===l)return;d=d.return}for(;p!==null;){if(d=Bi(p),d===null)return;if(j=d.tag,j===5||j===6||j===26||j===27){a=o=d;continue e}p=p.parentNode}}a=a.return}Zd(function(){var H=o,F=ks(i),te=[];e:{var U=Cc.get(e);if(U!==void 0){var P=vo,be=e;switch(e){case"keypress":if(xo(i)===0)break e;case"keydown":case"keyup":P=fh;break;case"focusin":be="focus",P=Os;break;case"focusout":be="blur",P=Os;break;case"beforeblur":case"afterblur":P=Os;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=xh;break;case vc:case jc:case Sc:P=oh;break;case wc:P=vh;break;case"scroll":case"scrollend":P=th;break;case"wheel":P=Sh;break;case"copy":case"cut":case"paste":P=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=tc;break;case"toggle":case"beforetoggle":P=Ch}var Le=(n&4)!==0,It=!Le&&(e==="scroll"||e==="scrollend"),B=Le?U!==null?U+"Capture":null:U;Le=[];for(var D=H,M;D!==null;){var J=D;if(M=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||M===null||B===null||(J=Cl(D,B),J!=null&&Le.push(io(D,J,M))),It)break;D=D.return}0<Le.length&&(U=new P(U,be,null,i,F),te.push({event:U,listeners:Le}))}}if((n&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",U&&i!==go&&(be=i.relatedTarget||i.fromElement)&&(Bi(be)||be[ui]))break e;if((P||U)&&(U=F.window===F?F:(U=F.ownerDocument)?U.defaultView||U.parentWindow:window,P?(be=i.relatedTarget||i.toElement,P=H,be=be?Bi(be):null,be!==null&&(It=f(be),Le=be.tag,be!==It||Le!==5&&Le!==27&&Le!==6)&&(be=null)):(P=null,be=H),P!==be)){if(Le=$d,J="onMouseLeave",B="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(Le=tc,J="onPointerLeave",B="onPointerEnter",D="pointer"),It=P==null?U:pi(P),M=be==null?U:pi(be),U=new Le(J,D+"leave",P,i,F),U.target=It,U.relatedTarget=M,J=null,Bi(F)===H&&(Le=new Le(B,D+"enter",be,i,F),Le.target=M,Le.relatedTarget=It,J=Le),It=J,P&&be)t:{for(Le=Cf,B=P,D=be,M=0,J=B;J;J=Le(J))M++;J=0;for(var Ne=D;Ne;Ne=Le(Ne))J++;for(;0<M-J;)B=Le(B),M--;for(;0<J-M;)D=Le(D),J--;for(;M--;){if(B===D||D!==null&&B===D.alternate){Le=B;break t}B=Le(B),D=Le(D)}Le=null}else Le=null;P!==null&&Vp(te,U,P,Le,!1),be!==null&&It!==null&&Vp(te,It,be,Le,!0)}}e:{if(U=H?pi(H):window,P=U.nodeName&&U.nodeName.toLowerCase(),P==="select"||P==="input"&&U.type==="file")var zt=dc;else if(sc(U))if(cc)zt=Mh;else{zt=Eh;var Ce=kh}else P=U.nodeName,!P||P.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?H&&Ln(H.elementType)&&(zt=dc):zt=Nh;if(zt&&(zt=zt(e,H))){rc(te,zt,i,F);break e}Ce&&Ce(e,U,H),e==="focusout"&&H&&U.type==="number"&&H.memoizedProps.value!=null&&ut(U,"number",U.value)}switch(Ce=H?pi(H):window,e){case"focusin":(sc(Ce)||Ce.contentEditable==="true")&&(Va=Ce,Gs=H,El=null);break;case"focusout":El=Gs=Va=null;break;case"mousedown":Ws=!0;break;case"contextmenu":case"mouseup":case"dragend":Ws=!1,xc(te,i,F);break;case"selectionchange":if(Uh)break;case"keydown":case"keyup":xc(te,i,F)}var Ze;if(Ps)e:{switch(e){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Ya?lc(e,i)&&(xt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(xt="onCompositionStart");xt&&(nc&&i.locale!=="ko"&&(Ya||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Ya&&(Ze=Kd()):(ta=F,Ms="value"in ta?ta.value:ta.textContent,Ya=!0)),Ce=cs(H,xt),0<Ce.length&&(xt=new ec(xt,e,null,i,F),te.push({event:xt,listeners:Ce}),Ze?xt.data=Ze:(Ze=oc(i),Ze!==null&&(xt.data=Ze)))),(Ze=Dh?Th(e,i):zh(e,i))&&(xt=cs(H,"onBeforeInput"),0<xt.length&&(Ce=new ec("onBeforeInput","beforeinput",null,i,F),te.push({event:Ce,listeners:xt}),Ce.data=Ze)),vf(te,e,H,i,F)}Wp(te,n)})}function io(e,n,i){return{instance:e,listener:n,currentTarget:i}}function cs(e,n){for(var i=n+"Capture",a=[];e!==null;){var l=e,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=Cl(e,i),l!=null&&a.unshift(io(e,l,o)),l=Cl(e,n),l!=null&&a.push(io(e,l,o))),e.tag===3)return a;e=e.return}return[]}function Cf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vp(e,n,i,a,l){for(var o=n._reactName,d=[];i!==null&&i!==a;){var p=i,j=p.alternate,H=p.stateNode;if(p=p.tag,j!==null&&j===a)break;p!==5&&p!==26&&p!==27||H===null||(j=H,l?(H=Cl(i,o),H!=null&&d.unshift(io(i,H,j))):l||(H=Cl(i,o),H!=null&&d.push(io(i,H,j)))),i=i.return}d.length!==0&&e.push({event:n,listeners:d})}var Af=/\r\n?/g,Df=/\u0000|\uFFFD/g;function Qp(e){return(typeof e=="string"?e:""+e).replace(Af,`
`).replace(Df,"")}function Fp(e,n){return n=Qp(n),Qp(e)===n}function qt(e,n,i,a,l,o){switch(i){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||Pt(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&Pt(e,""+a);break;case"className":he(e,"class",a);break;case"tabIndex":he(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":he(e,i,a);break;case"style":on(e,a,o);break;case"data":if(n!=="object"){he(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=On(""+a),e.setAttribute(i,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(i==="formAction"?(n!=="input"&&qt(e,n,"name",l.name,l,null),qt(e,n,"formEncType",l.formEncType,l,null),qt(e,n,"formMethod",l.formMethod,l,null),qt(e,n,"formTarget",l.formTarget,l,null)):(qt(e,n,"encType",l.encType,l,null),qt(e,n,"method",l.method,l,null),qt(e,n,"target",l.target,l,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=On(""+a),e.setAttribute(i,a);break;case"onClick":a!=null&&(e.onclick=wi);break;case"onScroll":a!=null&&mt("scroll",e);break;case"onScrollEnd":a!=null&&mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=i}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}i=On(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""+a):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":a===!0?e.setAttribute(i,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,a):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(i,a):e.removeAttribute(i);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(i):e.setAttribute(i,a);break;case"popover":mt("beforetoggle",e),mt("toggle",e),Y(e,"popover",a);break;case"xlinkActuate":le(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":le(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":le(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":le(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":le(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":le(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":le(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":le(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":le(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Y(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=wl.get(i)||i,Y(e,i,a))}}function fd(e,n,i,a,l,o){switch(i){case"style":on(e,a,o);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=i}}break;case"children":typeof a=="string"?Pt(e,a):(typeof a=="number"||typeof a=="bigint")&&Pt(e,""+a);break;case"onScroll":a!=null&&mt("scroll",e);break;case"onScrollEnd":a!=null&&mt("scrollend",e);break;case"onClick":a!=null&&(e.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oe.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(l=i.endsWith("Capture"),n=i.slice(2,l?i.length-7:void 0),o=e[hn]||null,o=o!=null?o[i]:null,typeof o=="function"&&e.removeEventListener(n,o,l),typeof a=="function")){typeof o!="function"&&o!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,a,l);break e}i in e?e[i]=a:a===!0?e.setAttribute(i,""):Y(e,i,a)}}}function Mn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",e),mt("load",e);var a=!1,l=!1,o;for(o in i)if(i.hasOwnProperty(o)){var d=i[o];if(d!=null)switch(o){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,n));default:qt(e,n,o,d,i,null)}}l&&qt(e,n,"srcSet",i.srcSet,i,null),a&&qt(e,n,"src",i.src,i,null);return;case"input":mt("invalid",e);var p=o=d=l=null,j=null,H=null;for(a in i)if(i.hasOwnProperty(a)){var F=i[a];if(F!=null)switch(a){case"name":l=F;break;case"type":d=F;break;case"checked":j=F;break;case"defaultChecked":H=F;break;case"value":o=F;break;case"defaultValue":p=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(u(137,n));break;default:qt(e,n,a,F,i,null)}}Bt(e,o,p,j,H,d,l,!1);return;case"select":mt("invalid",e),a=d=o=null;for(l in i)if(i.hasOwnProperty(l)&&(p=i[l],p!=null))switch(l){case"value":o=p;break;case"defaultValue":d=p;break;case"multiple":a=p;default:qt(e,n,l,p,i,null)}n=o,i=d,e.multiple=!!a,n!=null?kt(e,!!a,n,!1):i!=null&&kt(e,!!a,i,!0);return;case"textarea":mt("invalid",e),o=l=a=null;for(d in i)if(i.hasOwnProperty(d)&&(p=i[d],p!=null))switch(d){case"value":a=p;break;case"defaultValue":l=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(u(91));break;default:qt(e,n,d,p,i,null)}Lt(e,a,l,o);return;case"option":for(j in i)if(i.hasOwnProperty(j)&&(a=i[j],a!=null))switch(j){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:qt(e,n,j,a,i,null)}return;case"dialog":mt("beforetoggle",e),mt("toggle",e),mt("cancel",e),mt("close",e);break;case"iframe":case"object":mt("load",e);break;case"video":case"audio":for(a=0;a<no.length;a++)mt(no[a],e);break;case"image":mt("error",e),mt("load",e);break;case"details":mt("toggle",e);break;case"embed":case"source":case"link":mt("error",e),mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(a=i[H],a!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,n));default:qt(e,n,H,a,i,null)}return;default:if(Ln(n)){for(F in i)i.hasOwnProperty(F)&&(a=i[F],a!==void 0&&fd(e,n,F,a,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(a=i[p],a!=null&&qt(e,n,p,a,i,null))}function Tf(e,n,i,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,d=null,p=null,j=null,H=null,F=null;for(P in i){var te=i[P];if(i.hasOwnProperty(P)&&te!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":j=te;default:a.hasOwnProperty(P)||qt(e,n,P,null,a,te)}}for(var U in a){var P=a[U];if(te=i[U],a.hasOwnProperty(U)&&(P!=null||te!=null))switch(U){case"type":o=P;break;case"name":l=P;break;case"checked":H=P;break;case"defaultChecked":F=P;break;case"value":d=P;break;case"defaultValue":p=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(u(137,n));break;default:P!==te&&qt(e,n,U,P,a,te)}}ln(e,d,p,j,H,F,o,l);return;case"select":P=d=p=U=null;for(o in i)if(j=i[o],i.hasOwnProperty(o)&&j!=null)switch(o){case"value":break;case"multiple":P=j;default:a.hasOwnProperty(o)||qt(e,n,o,null,a,j)}for(l in a)if(o=a[l],j=i[l],a.hasOwnProperty(l)&&(o!=null||j!=null))switch(l){case"value":U=o;break;case"defaultValue":p=o;break;case"multiple":d=o;default:o!==j&&qt(e,n,l,o,a,j)}n=p,i=d,a=P,U!=null?kt(e,!!i,U,!1):!!a!=!!i&&(n!=null?kt(e,!!i,n,!0):kt(e,!!i,i?[]:"",!1));return;case"textarea":P=U=null;for(p in i)if(l=i[p],i.hasOwnProperty(p)&&l!=null&&!a.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:qt(e,n,p,null,a,l)}for(d in a)if(l=a[d],o=i[d],a.hasOwnProperty(d)&&(l!=null||o!=null))switch(d){case"value":U=l;break;case"defaultValue":P=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(u(91));break;default:l!==o&&qt(e,n,d,l,a,o)}Mt(e,U,P);return;case"option":for(var be in i)if(U=i[be],i.hasOwnProperty(be)&&U!=null&&!a.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:qt(e,n,be,null,a,U)}for(j in a)if(U=a[j],P=i[j],a.hasOwnProperty(j)&&U!==P&&(U!=null||P!=null))switch(j){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:qt(e,n,j,U,a,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in i)U=i[Le],i.hasOwnProperty(Le)&&U!=null&&!a.hasOwnProperty(Le)&&qt(e,n,Le,null,a,U);for(H in a)if(U=a[H],P=i[H],a.hasOwnProperty(H)&&U!==P&&(U!=null||P!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(u(137,n));break;default:qt(e,n,H,U,a,P)}return;default:if(Ln(n)){for(var It in i)U=i[It],i.hasOwnProperty(It)&&U!==void 0&&!a.hasOwnProperty(It)&&fd(e,n,It,void 0,a,U);for(F in a)U=a[F],P=i[F],!a.hasOwnProperty(F)||U===P||U===void 0&&P===void 0||fd(e,n,F,U,a,P);return}}for(var B in i)U=i[B],i.hasOwnProperty(B)&&U!=null&&!a.hasOwnProperty(B)&&qt(e,n,B,null,a,U);for(te in a)U=a[te],P=i[te],!a.hasOwnProperty(te)||U===P||U==null&&P==null||qt(e,n,te,U,a,P)}function Xp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zf(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),a=0;a<i.length;a++){var l=i[a],o=l.transferSize,d=l.initiatorType,p=l.duration;if(o&&p&&Xp(d)){for(d=0,p=l.responseEnd,a+=1;a<i.length;a++){var j=i[a],H=j.startTime;if(H>p)break;var F=j.transferSize,te=j.initiatorType;F&&Xp(te)&&(j=j.responseEnd,d+=F*(j<p?1:(p-H)/(j-H)))}if(--a,n+=8*(o+d)/(l.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gd=null,yd=null;function us(e){return e.nodeType===9?e:e.ownerDocument}function Zp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function xd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bd=null;function Rf(){var e=window.event;return e&&e.type==="popstate"?e===bd?!1:(bd=e,!0):(bd=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,kf=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(e){return $p.resolve(null).then(e).catch(Ef)}:Jp;function Ef(e){setTimeout(function(){throw e})}function xa(e){return e==="head"}function em(e,n){var i=n,a=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"||i==="/&"){if(a===0){e.removeChild(l),bl(n);return}a--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")a++;else if(i==="html")ao(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,ao(i);for(var o=i.firstChild;o;){var d=o.nextSibling,p=o.nodeName;o[Un]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&o.rel.toLowerCase()==="stylesheet"||i.removeChild(o),o=d}}else i==="body"&&ao(e.ownerDocument.body);i=l}while(i);bl(n)}function tm(e,n){var i=e;e=0;do{var a=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=a}while(i)}function vd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vd(i),Wn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Nf(e,n,i,a){for(;e.nodeType===1;){var l=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Un])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=bi(e.nextSibling),e===null)break}return null}function Mf(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bi(e.nextSibling),e===null))return null;return e}function nm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=bi(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Sd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Hf(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var a=function(){n(),i.removeEventListener("DOMContentLoaded",a)};i.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function bi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var wd=null;function im(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return bi(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function am(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function lm(e,n,i){switch(n=us(i),e){case"html":if(e=n.documentElement,!e)throw Error(u(452));return e;case"head":if(e=n.head,!e)throw Error(u(453));return e;case"body":if(e=n.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function ao(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Wn(e)}var vi=new Map,om=new Set;function ps(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=re.d;re.d={f:Uf,r:Of,D:Lf,C:Pf,L:_f,m:qf,X:Gf,S:If,M:Wf};function Uf(){var e=Ji.f(),n=is();return e||n}function Of(e){var n=ki(e);n!==null&&n.tag===5&&n.type==="form"?wu(n):Ji.r(e)}var gl=typeof document>"u"?null:document;function sm(e,n,i){var a=gl;if(a&&typeof n=="string"&&n){var l=_e(n);l='link[rel="'+e+'"][href="'+l+'"]',typeof i=="string"&&(l+='[crossorigin="'+i+'"]'),om.has(l)||(om.add(l),e={rel:e,crossOrigin:i,href:n},a.querySelector(l)===null&&(n=a.createElement("link"),Mn(n,"link",e),Q(n),a.head.appendChild(n)))}}function Lf(e){Ji.D(e),sm("dns-prefetch",e,null)}function Pf(e,n){Ji.C(e,n),sm("preconnect",e,n)}function _f(e,n,i){Ji.L(e,n,i);var a=gl;if(a&&e&&n){var l='link[rel="preload"][as="'+_e(n)+'"]';n==="image"&&i&&i.imageSrcSet?(l+='[imagesrcset="'+_e(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(l+='[imagesizes="'+_e(i.imageSizes)+'"]')):l+='[href="'+_e(e)+'"]';var o=l;switch(n){case"style":o=yl(e);break;case"script":o=xl(e)}vi.has(o)||(e=N({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),vi.set(o,e),a.querySelector(l)!==null||n==="style"&&a.querySelector(lo(o))||n==="script"&&a.querySelector(oo(o))||(n=a.createElement("link"),Mn(n,"link",e),Q(n),a.head.appendChild(n)))}}function qf(e,n){Ji.m(e,n);var i=gl;if(i&&e){var a=n&&typeof n.as=="string"?n.as:"script",l='link[rel="modulepreload"][as="'+_e(a)+'"][href="'+_e(e)+'"]',o=l;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=xl(e)}if(!vi.has(o)&&(e=N({rel:"modulepreload",href:e},n),vi.set(o,e),i.querySelector(l)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(oo(o)))return}a=i.createElement("link"),Mn(a,"link",e),Q(a),i.head.appendChild(a)}}}function If(e,n,i){Ji.S(e,n,i);var a=gl;if(a&&e){var l=Ei(a).hoistableStyles,o=yl(e);n=n||"default";var d=l.get(o);if(!d){var p={loading:0,preload:null};if(d=a.querySelector(lo(o)))p.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},i),(i=vi.get(o))&&Cd(e,i);var j=d=a.createElement("link");Q(j),Mn(j,"link",e),j._p=new Promise(function(H,F){j.onload=H,j.onerror=F}),j.addEventListener("load",function(){p.loading|=1}),j.addEventListener("error",function(){p.loading|=2}),p.loading|=4,ms(d,n,a)}d={type:"stylesheet",instance:d,count:1,state:p},l.set(o,d)}}}function Gf(e,n){Ji.X(e,n);var i=gl;if(i&&e){var a=Ei(i).hoistableScripts,l=xl(e),o=a.get(l);o||(o=i.querySelector(oo(l)),o||(e=N({src:e,async:!0},n),(n=vi.get(l))&&Ad(e,n),o=i.createElement("script"),Q(o),Mn(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function Wf(e,n){Ji.M(e,n);var i=gl;if(i&&e){var a=Ei(i).hoistableScripts,l=xl(e),o=a.get(l);o||(o=i.querySelector(oo(l)),o||(e=N({src:e,async:!0,type:"module"},n),(n=vi.get(l))&&Ad(e,n),o=i.createElement("script"),Q(o),Mn(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function rm(e,n,i,a){var l=(l=at.current)?ps(l):null;if(!l)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=yl(i.href),i=Ei(l).hoistableStyles,a=i.get(n),a||(a={type:"style",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=yl(i.href);var o=Ei(l).hoistableStyles,d=o.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,d),(o=l.querySelector(lo(e)))&&!o._p&&(d.instance=o,d.state.loading=5),vi.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},vi.set(e,i),o||Yf(l,e,i,d.state))),n&&a===null)throw Error(u(528,""));return d}if(n&&a!==null)throw Error(u(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xl(i),i=Ei(l).hoistableScripts,a=i.get(n),a||(a={type:"script",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function yl(e){return'href="'+_e(e)+'"'}function lo(e){return'link[rel="stylesheet"]['+e+"]"}function dm(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function Yf(e,n,i,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),Mn(n,"link",i),Q(n),e.head.appendChild(n))}function xl(e){return'[src="'+_e(e)+'"]'}function oo(e){return"script[async]"+e}function cm(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+_e(i.href)+'"]');if(a)return n.instance=a,Q(a),a;var l=N({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Q(a),Mn(a,"style",l),ms(a,i.precedence,e),n.instance=a;case"stylesheet":l=yl(i.href);var o=e.querySelector(lo(l));if(o)return n.state.loading|=4,n.instance=o,Q(o),o;a=dm(i),(l=vi.get(l))&&Cd(a,l),o=(e.ownerDocument||e).createElement("link"),Q(o);var d=o;return d._p=new Promise(function(p,j){d.onload=p,d.onerror=j}),Mn(o,"link",a),n.state.loading|=4,ms(o,i.precedence,e),n.instance=o;case"script":return o=xl(i.src),(l=e.querySelector(oo(o)))?(n.instance=l,Q(l),l):(a=i,(l=vi.get(o))&&(a=N({},i),Ad(a,l)),e=e.ownerDocument||e,l=e.createElement("script"),Q(l),Mn(l,"link",a),e.head.appendChild(l),n.instance=l);case"void":return null;default:throw Error(u(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,ms(a,i.precedence,e));return n.instance}function ms(e,n,i){for(var a=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=a.length?a[a.length-1]:null,o=l,d=0;d<a.length;d++){var p=a[d];if(p.dataset.precedence===n)o=p;else if(o!==l)break}o?o.parentNode.insertBefore(e,o.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Cd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ad(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var hs=null;function um(e,n,i){if(hs===null){var a=new Map,l=hs=new Map;l.set(i,a)}else l=hs,a=l.get(i),a||(a=new Map,l.set(i,a));if(a.has(e))return a;for(a.set(e,null),i=i.getElementsByTagName(e),l=0;l<i.length;l++){var o=i[l];if(!(o[Un]||o[Ft]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var d=o.getAttribute(n)||"";d=e+d;var p=a.get(d);p?p.push(o):a.set(d,[o])}}return a}function pm(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Vf(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function mm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qf(e,n,i,a){if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var l=yl(a.href),o=n.querySelector(lo(l));if(o){n=o._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=fs.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=o,Q(o);return}o=n.ownerDocument||n,a=dm(a),(l=vi.get(l))&&Cd(a,l),o=o.createElement("link"),Q(o);var d=o;d._p=new Promise(function(p,j){d.onload=p,d.onerror=j}),Mn(o,"link",a),i.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=fs.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Dd=0;function Ff(e,n){return e.stylesheets&&e.count===0&&ys(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var a=setTimeout(function(){if(e.stylesheets&&ys(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+n);0<e.imgBytes&&Dd===0&&(Dd=62500*zf());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ys(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Dd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(l)}}:null}function fs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ys(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gs=null;function ys(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gs=new Map,n.forEach(Xf,e),gs=null,fs.call(e))}function Xf(e,n){if(!(n.state.loading&4)){var i=gs.get(e);if(i)var a=i.get(null);else{i=new Map,gs.set(e,i);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var d=l[o];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(i.set(d.dataset.precedence,d),a=d)}a&&i.set(null,a)}l=n.instance,d=l.getAttribute("data-precedence"),o=i.get(d)||a,o===a&&i.set(null,l),i.set(d,l),this.count++,a=fs.bind(this),l.addEventListener("load",a),l.addEventListener("error",a),o?o.parentNode.insertBefore(l,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),n.state.loading|=4}}var so={$$typeof:S,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Zf(e,n,i,a,l,o,d,p,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=a,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function hm(e,n,i,a,l,o,d,p,j,H,F,te){return e=new Zf(e,n,i,d,j,H,F,te,p),n=1,o===!0&&(n|=24),o=ai(3,null,null,n),e.current=o,o.stateNode=e,n=lr(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:a,isDehydrated:i,cache:n},dr(o),e}function fm(e){return e?(e=Xa,e):Xa}function gm(e,n,i,a,l,o){l=fm(l),a.context===null?a.context=l:a.pendingContext=l,a=sa(n),a.payload={element:i},o=o===void 0?null:o,o!==null&&(a.callback=o),i=ra(e,a,n),i!==null&&(Zn(i,e,n),Pl(i,e,n))}function ym(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Td(e,n){ym(e,n),(e=e.alternate)&&ym(e,n)}function xm(e){if(e.tag===13||e.tag===31){var n=za(e,67108864);n!==null&&Zn(n,e,67108864),Td(e,67108864)}}function bm(e){if(e.tag===13||e.tag===31){var n=di();n=ie(n);var i=za(e,n);i!==null&&Zn(i,e,n),Td(e,n)}}var xs=!0;function Kf(e,n,i,a){var l=I.T;I.T=null;var o=re.p;try{re.p=2,zd(e,n,i,a)}finally{re.p=o,I.T=l}}function Jf(e,n,i,a){var l=I.T;I.T=null;var o=re.p;try{re.p=8,zd(e,n,i,a)}finally{re.p=o,I.T=l}}function zd(e,n,i,a){if(xs){var l=Rd(a);if(l===null)hd(e,n,a,bs,i),jm(e,a);else if(eg(l,e,n,i,a))a.stopPropagation();else if(jm(e,a),n&4&&-1<$f.indexOf(e)){for(;l!==null;){var o=ki(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var d=an(o.pendingLanes);if(d!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;d;){var j=1<<31-dn(d);p.entanglements[1]|=j,d&=~j}Ui(o),(Et&6)===0&&(ts=rn()+500,to(0))}}break;case 31:case 13:p=za(o,2),p!==null&&Zn(p,o,2),is(),Td(o,2)}if(o=Rd(a),o===null&&hd(e,n,a,bs,i),o===l)break;l=o}l!==null&&a.stopPropagation()}else hd(e,n,a,null,i)}}function Rd(e){return e=ks(e),Bd(e)}var bs=null;function Bd(e){if(bs=null,e=Bi(e),e!==null){var n=f(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=y(n),e!==null)return e;e=null}else if(i===31){if(e=b(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return bs=e,null}function vm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case et:return 2;case _:return 8;case X:case ge:return 32;case ke:return 268435456;default:return 32}default:return 32}}var kd=!1,ba=null,va=null,ja=null,ro=new Map,co=new Map,Sa=[],$f="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jm(e,n){switch(e){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":ro.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(n.pointerId)}}function uo(e,n,i,a,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:n,domEventName:i,eventSystemFlags:a,nativeEvent:o,targetContainers:[l]},n!==null&&(n=ki(n),n!==null&&xm(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),e)}function eg(e,n,i,a,l){switch(n){case"focusin":return ba=uo(ba,e,n,i,a,l),!0;case"dragenter":return va=uo(va,e,n,i,a,l),!0;case"mouseover":return ja=uo(ja,e,n,i,a,l),!0;case"pointerover":var o=l.pointerId;return ro.set(o,uo(ro.get(o)||null,e,n,i,a,l)),!0;case"gotpointercapture":return o=l.pointerId,co.set(o,uo(co.get(o)||null,e,n,i,a,l)),!0}return!1}function Sm(e){var n=Bi(e.target);if(n!==null){var i=f(n);if(i!==null){if(n=i.tag,n===13){if(n=y(i),n!==null){e.blockedOn=n,Dt(e.priority,function(){bm(i)});return}}else if(n===31){if(n=b(i),n!==null){e.blockedOn=n,Dt(e.priority,function(){bm(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Rd(e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);go=a,i.target.dispatchEvent(a),go=null}else return n=ki(i),n!==null&&xm(n),e.blockedOn=i,!1;n.shift()}return!0}function wm(e,n,i){vs(e)&&i.delete(n)}function tg(){kd=!1,ba!==null&&vs(ba)&&(ba=null),va!==null&&vs(va)&&(va=null),ja!==null&&vs(ja)&&(ja=null),ro.forEach(wm),co.forEach(wm)}function js(e,n){e.blockedOn===n&&(e.blockedOn=null,kd||(kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,tg)))}var Ss=null;function Cm(e){Ss!==e&&(Ss=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ss===e&&(Ss=null);for(var n=0;n<e.length;n+=3){var i=e[n],a=e[n+1],l=e[n+2];if(typeof a!="function"){if(Bd(a||i)===null)continue;break}var o=ki(i);o!==null&&(e.splice(n,3),n-=3,Rr(o,{pending:!0,data:l,method:i.method,action:a},a,l))}}))}function bl(e){function n(j){return js(j,e)}ba!==null&&js(ba,e),va!==null&&js(va,e),ja!==null&&js(ja,e),ro.forEach(n),co.forEach(n);for(var i=0;i<Sa.length;i++){var a=Sa[i];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Sa.length&&(i=Sa[0],i.blockedOn===null);)Sm(i),i.blockedOn===null&&Sa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(a=0;a<i.length;a+=3){var l=i[a],o=i[a+1],d=l[hn]||null;if(typeof o=="function")d||Cm(i);else if(d){var p=null;if(o&&o.hasAttribute("formAction")){if(l=o,d=o[hn]||null)p=d.formAction;else if(Bd(l)!==null)continue}else p=d.action;typeof p=="function"?i[a+1]=p:(i.splice(a,3),a-=3),Cm(i)}}}function Am(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(d){return l=d})},focusReset:"manual",scroll:"manual"})}function n(){l!==null&&(l(),l=null),a||setTimeout(i,20)}function i(){if(!a&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),l!==null&&(l(),l=null)}}}function Ed(e){this._internalRoot=e}ws.prototype.render=Ed.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(u(409));var i=n.current,a=di();gm(i,a,e,n,null,null)},ws.prototype.unmount=Ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;gm(e.current,2,null,e,null,null),is(),n[ui]=null}};function ws(e){this._internalRoot=e}ws.prototype.unstable_scheduleHydration=function(e){if(e){var n=Me();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Sa.length&&n!==0&&n<Sa[i].priority;i++);Sa.splice(i,0,e),i===0&&Sm(e)}};var Dm=r.version;if(Dm!=="19.2.1")throw Error(u(527,Dm,"19.2.1"));re.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=w(n),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var ng={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{ot=Cs.inject(ng),Nt=Cs}catch{}}return mo.createRoot=function(e,n){if(!g(e))throw Error(u(299));var i=!1,a="",l=Nu,o=Mu,d=Hu;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=hm(e,1,!1,null,null,i,a,null,l,o,d,Am),e[ui]=n.current,md(e),new Ed(n)},mo.hydrateRoot=function(e,n,i){if(!g(e))throw Error(u(299));var a=!1,l="",o=Nu,d=Mu,p=Hu,j=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(o=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(j=i.formState)),n=hm(e,1,!0,n,i??null,a,l,j,o,d,p,Am),n.context=fm(null),i=n.current,a=di(),a=ie(a),l=sa(a),l.callback=null,ra(i,l,a),i=a,n.current.lanes=i,Tn(n,i),Ui(n),e[ui]=n.current,md(e),new ws(n)},mo.version="19.2.1",mo}var Hm;function Eg(){if(Hm)return Md.exports;Hm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Md.exports=kg(),Md.exports}var Ng=Eg();const Mg=()=>t.jsxs("div",{style:ue.container,children:[t.jsx("div",{style:ue.hero,children:t.jsxs("div",{style:ue.heroContent,children:[t.jsxs("h1",{style:ue.heroTitle,children:[t.jsx("span",{style:ue.gradientText,children:"Healthcare"})," at Your Fingertips"]}),t.jsx("p",{style:ue.heroSubtitle,children:"Book appointments with top doctors and hospitals instantly. No registration required!"}),t.jsxs("div",{style:ue.ctaButtons,children:[t.jsxs(ci,{to:"/book",style:ue.primaryCta,children:[t.jsx("span",{style:{fontSize:"20px",marginRight:"10px"},children:""}),"Book Appointment Now"]}),t.jsx("a",{href:"#features",style:ue.secondaryCta,children:"Learn More "})]}),t.jsxs("div",{style:ue.statsBar,children:[t.jsxs("div",{style:ue.statItem,children:[t.jsx("div",{style:ue.statNumber,children:"1000+"}),t.jsx("div",{style:ue.statLabel,children:"Doctors"})]}),t.jsx("div",{style:ue.statDivider}),t.jsxs("div",{style:ue.statItem,children:[t.jsx("div",{style:ue.statNumber,children:"50+"}),t.jsx("div",{style:ue.statLabel,children:"Hospitals"})]}),t.jsx("div",{style:ue.statDivider}),t.jsxs("div",{style:ue.statItem,children:[t.jsx("div",{style:ue.statNumber,children:"10k+"}),t.jsx("div",{style:ue.statLabel,children:"Happy Patients"})]})]})]})}),t.jsxs("div",{id:"features",style:ue.featuresSection,children:[t.jsx("h2",{style:ue.sectionTitle,children:"Why Choose Us?"}),t.jsxs("div",{style:ue.featuresGrid,children:[t.jsxs("div",{style:ue.featureCard,children:[t.jsx("div",{style:{...ue.iconCircle,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:""}),t.jsx("h3",{style:ue.featureTitle,children:"Wide Network"}),t.jsx("p",{style:ue.featureText,children:"Access to 1000+ verified doctors and 50+ hospitals across multiple cities"})]}),t.jsxs("div",{style:ue.featureCard,children:[t.jsx("div",{style:{...ue.iconCircle,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:""}),t.jsx("h3",{style:ue.featureTitle,children:"Instant Booking"}),t.jsx("p",{style:ue.featureText,children:"Book appointments in seconds without any registration hassle"})]}),t.jsxs("div",{style:ue.featureCard,children:[t.jsx("div",{style:{...ue.iconCircle,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:""}),t.jsx("h3",{style:ue.featureTitle,children:"Secure Payments"}),t.jsx("p",{style:ue.featureText,children:"Safe and secure online payment with multiple payment options"})]}),t.jsxs("div",{style:ue.featureCard,children:[t.jsx("div",{style:{...ue.iconCircle,background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:""}),t.jsx("h3",{style:ue.featureTitle,children:"Easy Rescheduling"}),t.jsx("p",{style:ue.featureText,children:"Reschedule or cancel appointments easily with just a few clicks"})]})]})]}),t.jsxs("div",{style:ue.howItWorksSection,children:[t.jsx("h2",{style:ue.sectionTitle,children:"How It Works"}),t.jsxs("div",{style:ue.stepsContainer,children:[t.jsxs("div",{style:ue.stepCard,children:[t.jsx("div",{style:{...ue.stepNumber,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:"1"}),t.jsx("h3",{style:ue.stepTitle,children:"Choose Provider"}),t.jsx("p",{style:ue.stepText,children:"Search and select from our network of doctors and hospitals"})]}),t.jsx("div",{style:ue.stepArrow,children:""}),t.jsxs("div",{style:ue.stepCard,children:[t.jsx("div",{style:{...ue.stepNumber,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:"2"}),t.jsx("h3",{style:ue.stepTitle,children:"Select Date & Time"}),t.jsx("p",{style:ue.stepText,children:"Pick a convenient date and time slot that works for you"})]}),t.jsx("div",{style:ue.stepArrow,children:""}),t.jsxs("div",{style:ue.stepCard,children:[t.jsx("div",{style:{...ue.stepNumber,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:"3"}),t.jsx("h3",{style:ue.stepTitle,children:"Confirm & Pay"}),t.jsx("p",{style:ue.stepText,children:"Complete booking with secure payment and get confirmation"})]})]})]}),t.jsxs("div",{style:ue.providerSection,children:[t.jsxs("div",{style:ue.providerCard,children:[t.jsx("div",{style:ue.providerIcon,children:""}),t.jsx("h3",{style:ue.providerTitle,children:"Are you a Doctor?"}),t.jsx("p",{style:ue.providerText,children:"Join our platform and manage your appointments efficiently"}),t.jsxs("div",{style:ue.providerButtons,children:[t.jsx(ci,{to:"/login",style:ue.loginButton,children:"Login"}),t.jsx(ci,{to:"/register",style:ue.registerButton,children:"Register"})]})]}),t.jsxs("div",{style:ue.providerCard,children:[t.jsx("div",{style:ue.providerIcon,children:""}),t.jsx("h3",{style:ue.providerTitle,children:"Hospital?"}),t.jsx("p",{style:ue.providerText,children:"Digitize your hospital operations and reach more patients"}),t.jsxs("div",{style:ue.providerButtons,children:[t.jsx(ci,{to:"/login",style:ue.loginButton,children:"Login"}),t.jsx(ci,{to:"/register",style:ue.registerButton,children:"Register"})]})]})]}),!1,t.jsxs("div",{style:ue.footer,children:[t.jsx("p",{style:ue.footerText,children:" 2025 Souldoc. All rights reserved."}),t.jsxs("div",{style:ue.footerLinks,children:[t.jsx("a",{href:"/privacy",style:ue.footerLink,children:"Privacy Policy"}),t.jsx("span",{style:ue.footerDivider,children:""}),t.jsx("a",{href:"/terms",style:ue.footerLink,children:"Terms of Service"}),t.jsx("span",{style:ue.footerDivider,children:""}),t.jsx("a",{href:"mailto:pauljos@gmail.com",style:ue.footerLink,children:"Contact Us"})]})]}),t.jsx("style",{children:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0px);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                
                @keyframes pulse {
                    0%, 100% {
                        transform: scale(1);
                    }
                    50% {
                        transform: scale(1.05);
                    }
                }
            `})]}),ue={container:{minHeight:"100vh",background:"linear-gradient(to bottom, #f8f9fa, #ffffff)"},hero:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"80px 20px",textAlign:"center",position:"relative",overflow:"hidden"},heroContent:{maxWidth:"1200px",margin:"0 auto",position:"relative",zIndex:1,animation:"fadeInUp 0.8s ease-out"},heroTitle:{fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:"800",color:"white",marginBottom:"20px",lineHeight:"1.2"},gradientText:{background:"linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},heroSubtitle:{fontSize:"clamp(1rem, 2vw, 1.3rem)",color:"rgba(255, 255, 255, 0.9)",marginBottom:"40px",maxWidth:"700px",margin:"0 auto 40px",lineHeight:"1.6"},ctaButtons:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap",marginBottom:"60px"},primaryCta:{padding:"18px 40px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center"},secondaryCta:{padding:"18px 40px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},statsBar:{display:"flex",justifyContent:"center",alignItems:"center",gap:"40px",flexWrap:"wrap",padding:"30px",background:"rgba(255, 255, 255, 0.15)",borderRadius:"20px",backdropFilter:"blur(10px)",maxWidth:"800px",margin:"0 auto"},statItem:{textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"800",color:"white",marginBottom:"5px"},statLabel:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},statDivider:{width:"2px",height:"60px",background:"rgba(255, 255, 255, 0.3)"},featuresSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto"},sectionTitle:{fontSize:"clamp(2rem, 4vw, 2.5rem)",fontWeight:"700",textAlign:"center",marginBottom:"60px",color:"#333"},featuresGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"30px"},featureCard:{background:"white",padding:"40px 30px",borderRadius:"20px",textAlign:"center",boxShadow:"0 5px 20px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease",cursor:"pointer"},iconCircle:{width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",margin:"0 auto 20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.15)"},featureTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"15px",color:"#333"},featureText:{color:"#666",lineHeight:"1.6",fontSize:"0.95rem"},howItWorksSection:{padding:"80px 20px",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},stepsContainer:{maxWidth:"1200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",flexWrap:"wrap"},stepCard:{background:"white",padding:"30px",borderRadius:"20px",textAlign:"center",flex:"1",minWidth:"250px",maxWidth:"300px",boxShadow:"0 5px 20px rgba(0, 0, 0, 0.1)"},stepNumber:{width:"60px",height:"60px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",fontWeight:"700",color:"white",margin:"0 auto 20px"},stepTitle:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"10px",color:"#333"},stepText:{color:"#666",fontSize:"0.9rem",lineHeight:"1.5"},stepArrow:{fontSize:"2rem",color:"#667eea",fontWeight:"600"},providerSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"40px"},providerCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"50px 40px",borderRadius:"25px",textAlign:"center",color:"white",boxShadow:"0 10px 40px rgba(102, 126, 234, 0.3)"},providerIcon:{fontSize:"4rem",marginBottom:"20px",animation:"float 3s ease-in-out infinite"},providerTitle:{fontSize:"1.8rem",fontWeight:"700",marginBottom:"15px"},providerText:{fontSize:"1rem",opacity:.9,marginBottom:"30px",lineHeight:"1.6"},providerButtons:{display:"flex",gap:"15px",justifyContent:"center"},loginButton:{padding:"12px 30px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontWeight:"600",transition:"all 0.3s ease"},registerButton:{padding:"12px 30px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},footer:{background:"#2d3436",color:"white",padding:"40px 20px",textAlign:"center"},footerText:{margin:"0 0 15px 0",opacity:.8},footerLinks:{display:"flex",justifyContent:"center",gap:"15px",flexWrap:"wrap",alignItems:"center"},footerLink:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s"},footerDivider:{opacity:.5}};const Hg="type.googleapis.com/google.protobuf.Int64Value",Ug="type.googleapis.com/google.protobuf.UInt64Value";function Gm(s,r){const c={};for(const u in s)s.hasOwnProperty(u)&&(c[u]=r(s[u]));return c}function Ds(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(r=>Ds(r));if(typeof s=="function"||typeof s=="object")return Gm(s,r=>Ds(r));throw new Error("Data cannot be encoded in JSON: "+s)}function vl(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case Hg:case Ug:{const r=Number(s.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+s);return r}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(r=>vl(r)):typeof s=="function"||typeof s=="object"?Gm(s,r=>vl(r)):s}const Id="functions";const Um={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends xg{constructor(r,c,u){super(`${Id}/${r}`,c||""),this.details=u,Object.setPrototypeOf(this,$n.prototype)}}function Og(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ts(s,r){let c=Og(s),u=c,g;try{const f=r&&r.error;if(f){const y=f.status;if(typeof y=="string"){if(!Um[y])return new $n("internal","internal");c=Um[y],u=y}const b=f.message;typeof b=="string"&&(u=b),g=f.details,g!==void 0&&(g=vl(g))}}catch{}return c==="ok"?null:new $n(c,u,g)}class Lg{constructor(r,c,u,g){this.app=r,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,pg(r)&&r.settings.appCheckToken&&(this.serverAppAppCheckToken=r.settings.appCheckToken),this.auth=c.getImmediate({optional:!0}),this.messaging=u.getImmediate({optional:!0}),this.auth||c.get().then(f=>this.auth=f,()=>{}),this.messaging||u.get().then(f=>this.messaging=f,()=>{}),this.appCheck||g?.get().then(f=>this.appCheck=f,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(r){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const c=r?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return c.error?null:c.token}return null}async getContext(r){const c=await this.getAuthToken(),u=await this.getMessagingToken(),g=await this.getAppCheckToken(r);return{authToken:c,messagingToken:u,appCheckToken:g}}}const Pd="us-central1",Pg=/^data: (.*?)(?:\n|$)/;function _g(s){let r=null;return{promise:new Promise((c,u)=>{r=setTimeout(()=>{u(new $n("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{r&&clearTimeout(r)}}}class qg{constructor(r,c,u,g,f=Pd,y=(...b)=>fetch(...b)){this.app=r,this.fetchImpl=y,this.emulatorOrigin=null,this.contextProvider=new Lg(r,c,u,g),this.cancelAllRequests=new Promise(b=>{this.deleteService=()=>Promise.resolve(b())});try{const b=new URL(f);this.customDomain=b.origin+(b.pathname==="/"?"":b.pathname),this.region=Pd}catch{this.customDomain=null,this.region=f}}_delete(){return this.deleteService()}_url(r){const c=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${c}/${this.region}/${r}`:this.customDomain!==null?`${this.customDomain}/${r}`:`https://${this.region}-${c}.cloudfunctions.net/${r}`}}function Ig(s,r,c){const u=Im(r);s.emulatorOrigin=`http${u?"s":""}://${r}:${c}`,u&&(gg(s.emulatorOrigin+"/backends"),yg("Functions",!0))}function Gg(s,r,c){const u=g=>Yg(s,r,g,{});return u.stream=(g,f)=>Qg(s,r,g,f),u}function Wm(s){return s.emulatorOrigin&&Im(s.emulatorOrigin)?"include":void 0}async function Wg(s,r,c,u,g){c["Content-Type"]="application/json";let f;try{f=await u(s,{method:"POST",body:JSON.stringify(r),headers:c,credentials:Wm(g)})}catch{return{status:0,json:null}}let y=null;try{y=await f.json()}catch{}return{status:f.status,json:y}}async function Ym(s,r){const c={},u=await s.contextProvider.getContext(r.limitedUseAppCheckTokens);return u.authToken&&(c.Authorization="Bearer "+u.authToken),u.messagingToken&&(c["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(c["X-Firebase-AppCheck"]=u.appCheckToken),c}function Yg(s,r,c,u){const g=s._url(r);return Vg(s,g,c,u)}async function Vg(s,r,c,u){c=Ds(c);const g={data:c},f=await Ym(s,u),y=u.timeout||7e4,b=_g(y),A=await Promise.race([Wg(r,g,f,s.fetchImpl,s),b.promise,s.cancelAllRequests]);if(b.cancel(),!A)throw new $n("cancelled","Firebase Functions instance was deleted.");const w=Ts(A.status,A.json);if(w)throw w;if(!A.json)throw new $n("internal","Response is not valid JSON object.");let T=A.json.data;if(typeof T>"u"&&(T=A.json.result),typeof T>"u")throw new $n("internal","Response is missing data field.");return{data:vl(T)}}function Qg(s,r,c,u){const g=s._url(r);return Fg(s,g,c,u||{})}async function Fg(s,r,c,u){c=Ds(c);const g={data:c},f=await Ym(s,u);f["Content-Type"]="application/json",f.Accept="text/event-stream";let y;try{y=await s.fetchImpl(r,{method:"POST",body:JSON.stringify(g),headers:f,signal:u?.signal,credentials:Wm(s)})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const L=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}const $=Ts(0,null);return{data:Promise.reject($),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject($)}}}}}}let b,A;const w=new Promise((R,$)=>{b=R,A=$});u?.signal?.addEventListener("abort",()=>{const R=new $n("cancelled","Request was cancelled.");A(R)});const T=y.body.getReader(),N=Xg(T,b,A,u?.signal);return{stream:{[Symbol.asyncIterator](){const R=N.getReader();return{async next(){const{value:$,done:L}=await R.read();return{value:$,done:L}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:w}}function Xg(s,r,c,u){const g=(y,b)=>{const A=y.match(Pg);if(!A)return;const w=A[1];try{const T=JSON.parse(w);if("result"in T){r(vl(T.result));return}if("message"in T){b.enqueue(vl(T.message));return}if("error"in T){const N=Ts(0,T);b.error(N),c(N);return}}catch(T){if(T instanceof $n){b.error(T),c(T);return}}},f=new TextDecoder;return new ReadableStream({start(y){let b="";return A();async function A(){if(u?.aborted){const w=new $n("cancelled","Request was cancelled");return y.error(w),c(w),Promise.resolve()}try{const{value:w,done:T}=await s.read();if(T){b.trim()&&g(b.trim(),y),y.close();return}if(u?.aborted){const R=new $n("cancelled","Request was cancelled");y.error(R),c(R),await s.cancel();return}b+=f.decode(w,{stream:!0});const N=b.split(`
`);b=N.pop()||"";for(const R of N)R.trim()&&g(R.trim(),y);return A()}catch(w){const T=w instanceof $n?w:Ts(0,null);y.error(T),c(T)}}},cancel(){return s.cancel()}})}const Om="@firebase/functions",Lm="0.13.1";const Zg="auth-internal",Kg="app-check-internal",Jg="messaging-internal";function $g(s){const r=(c,{instanceIdentifier:u})=>{const g=c.getProvider("app").getImmediate(),f=c.getProvider(Zg),y=c.getProvider(Jg),b=c.getProvider(Kg);return new qg(g,f,y,b,u)};cg(new ug(Id,r,"PUBLIC").setMultipleInstances(!0)),Tm(Om,Lm,s),Tm(Om,Lm,"esm2020")}function Vm(s=mg(),r=Pd){const u=hg(qd(s),Id).getImmediate({identifier:r}),g=fg("functions");return g&&ey(u,...g),u}function ey(s,r,c){Ig(qd(s),r,c)}function Gd(s,r,c){return Gg(qd(s),r)}$g();const ty={apiKey:"AIzaSyD8M529DHrG1QBN9UKYexF0trTHrIzo5oM",authDomain:"docsapp-b7430.firebaseapp.com",projectId:"docsapp-b7430",storageBucket:"docsapp-b7430.firebasestorage.app",messagingSenderId:"1011149482238",appId:"1:1011149482238:web:89189afe319f87a6b6ddaf",measurementId:"G-CN15LYGF6F"},Wd=bg(ty),Ti=vg(Wd),V=jg(Wd),Yd=Vm(Wd),ny=Object.freeze(Object.defineProperty({__proto__:null,auth:Ti,db:V,functions:Yd},Symbol.toStringTag,{value:"Module"})),iy=async(s,r)=>{const c=Se(V,"invitations",s),u=await Gt(c);if(!u.exists())throw new Error("Invalid invitation code");const g=u.data();if(g.used)throw new Error("Invitation code already used");if(new Date(g.expiresAt)<new Date)throw new Error("Invitation code expired");await Zt(c,{used:!0,usedBy:r,usedAt:new Date().toISOString()});const f=Se(V,"users",r);await Zt(f,{hospitalId:g.hospitalId,hospitalName:g.hospitalName});const b=(await Gt(f)).data(),A=Se(V,"doctors",r);return await qn(A,{userId:r,hospitalId:g.hospitalId,name:b.displayName,email:b.email,specialization:b.specialization||"",createdAt:new Date().toISOString()}),g.hospitalId},Qm=async s=>{console.log("getHospitalDoctors called with hospitalId:",s);const r=xe(V,"users"),c=Oe(r,ye("hospitalId","==",s),ye("role","==","doctor")),g=(await Re(c)).docs.map(f=>({uid:f.id,id:f.id,...f.data()}));return console.log("Found doctors:",g),g},Fm=async s=>{const r=xe(V,"appointments"),c=Oe(r,ye("hospitalId","==",s));return(await Re(c)).docs.map(g=>({id:g.id,...g.data()}))},ay=async s=>{const r=xe(V,"appointments"),c=Oe(r,ye("doctorId","==",s));return(await Re(c)).docs.map(g=>({id:g.id,...g.data()}))},ly=async(s,r)=>{const c=Se(V,"users",s);await Zt(c,{isActive:r,updatedAt:new Date().toISOString()})},Xm=async(s,r)=>{const c=Se(V,"users",s);await Zt(c,{...r,updatedAt:new Date().toISOString()})},oy=async(s,r)=>{const c=Se(V,"users",s);await Zt(c,{hospitalId:null,isActive:!1,updatedAt:new Date().toISOString()})},Od=async(s,r)=>{const c=Se(V,"doctorAvailability",s);await qn(c,{doctorId:s,...r,updatedAt:new Date().toISOString()},{merge:!0})},Vd=async s=>{const r=Se(V,"doctorAvailability",s),c=await Gt(r);return c.exists()?c.data():{workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[]}},sy=async(s,r)=>{const c=Se(V,"doctorAvailability",s),u=await Gt(c);let g=[];u.exists()&&(g=u.data().blockedTimeSlots||[]),g.push({...r,id:`block_${Date.now()}`,createdAt:new Date().toISOString()}),await qn(c,{doctorId:s,blockedTimeSlots:g,updatedAt:new Date().toISOString()},{merge:!0})},ry=async(s,r)=>{const c=Se(V,"doctorAvailability",s),u=await Gt(c);if(u.exists()){const f=(u.data().blockedTimeSlots||[]).filter(y=>y.id!==r);await Zt(c,{blockedTimeSlots:f,updatedAt:new Date().toISOString()})}},dy=async s=>{const r=await Qm(s),c=await Fm(s),u=new Date().toISOString().split("T")[0],g=c.filter(b=>b.date===u),f=c.filter(b=>b.status==="completed"),y=f.reduce((b,A)=>b+(A.fee||0),0);return{totalDoctors:r.length,activeDoctors:r.filter(b=>b.isActive!==!1).length,totalAppointments:c.length,todayAppointments:g.length,completedAppointments:f.length,totalRevenue:y}},cy=async(s,r,c)=>{try{console.log("addNewDoctorToHospital called with:",{hospitalId:s,hospitalName:r,doctorData:c});const u=`doctor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=Se(V,"users",u),f={uid:u,displayName:c.displayName,email:c.email,phone:c.phone,specialization:c.specialization,consultationFee:c.consultationFee,role:"doctor",hospitalId:s,hospitalName:r,isActive:!0,createdAt:new Date().toISOString(),country:c.country||"",state:c.state||"",city:c.city||""};console.log("Creating doctor document with data:",f),await qn(g,f),console.log("Doctor document created successfully with ID:",u);const y=Se(V,"doctorAvailability",u);return await qn(y,{doctorId:u,workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[],updatedAt:new Date().toISOString()}),console.log("Doctor availability created successfully"),u}catch(u){throw console.error("Error in addNewDoctorToHospital:",u),u}},uy=async(s,r,c)=>{const u=`VISIT_${Date.now()}`,g=Se(V,"users",s,"visits",u);return await qn(g,{...c,doctorId:r,date:new Date().toISOString(),createdAt:new Date().toISOString()}),u},py=async(s,r,c)=>{const u=`RX_${Date.now()}`,g=Se(V,"users",s,"prescriptions",u);return await qn(g,{...c,doctorId:r,patientId:s,date:new Date().toISOString(),createdAt:new Date().toISOString()}),u},Zm=async(s,r,c,u=null,g={})=>{if(console.log("=== registerUser CALLED ==="),console.log("Email:",s,"Role:",u,"Name:",c),!r||!c)throw new Error("Name and password are required");if(u==="patient"){const y=g.phone;if(!y)throw new Error("Phone number is required for patient registration");const b=`patient_${y.replace(/\D/g,"")}@docsapp.local`;console.log("Patient registration with phone:",y),console.log("Generated email for Firebase:",b);try{const w=(await zm(Ti,b,r)).user;await Rm(w,{displayName:c});const T=Se(V,"users",w.uid),N={uid:w.uid,phone:y,displayName:c,role:"patient",createdAt:new Date().toISOString(),...g};return await qn(T,N),N}catch(A){throw console.error("Patient Registration Error:",A),A}}if(!s)throw new Error("Email is required for doctor/hospital registration");const f=String(s).trim().toLowerCase();if(console.log("Original email:",s),console.log("Cleaned email:",f),console.log("Email length:",f.length),!f.includes("@")||f.length<3)throw new Error("Please enter a valid email address");try{console.log("auth.js: Creating user with email and password...");const b=(await zm(Ti,f,r)).user;console.log("auth.js: User created, UID:",b.uid),console.log("auth.js: Updating user profile..."),await Rm(b,{displayName:c}),console.log("auth.js: Profile updated");let A=null;if(u==="hospital"){console.log("auth.js: Creating hospital document..."),A=`hospital_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const R=Se(V,"hospitals",A),$={id:A,name:c,email:f,ownerId:b.uid,enabled:!0,createdAt:new Date().toISOString(),...g};console.log("auth.js: Hospital data to save:",$);try{await qn(R,$),console.log(" auth.js: Hospital document created successfully with ID:",A)}catch(L){throw console.error(" auth.js: FAILED to create hospital document:",L),console.error("Error code:",L.code),console.error("Error message:",L.message),new Error(`Failed to create hospital: ${L.message}`)}}console.log("auth.js: Creating user document in Firestore...");const w=Se(V,"users",b.uid),T={uid:b.uid,email:f,displayName:c,createdAt:new Date().toISOString(),...A&&{hospitalId:A},...u&&{role:u},...g};console.log("auth.js: User data to save:",T);try{await qn(w,T),console.log(" auth.js: User document created successfully")}catch(R){throw console.error(" auth.js: FAILED to create user document:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),new Error(`Failed to create user profile: ${R.message}`)}await new Promise(R=>setTimeout(R,500));const N=await Gt(w);if(N.exists()?console.log("auth.js: Verified user document exists:",N.data()):console.error("auth.js: WARNING - User document not found after creation!"),u==="doctor"&&g.invitationCode){console.log("auth.js: Processing invitation code...");try{await iy(g.invitationCode,b.uid),console.log("auth.js: Doctor linked to hospital via invitation code")}catch(R){console.error("auth.js: Error using invitation code:",R)}}return console.log("auth.js: Registration complete, returning userData"),T}catch(y){throw console.error("Registration Error:",y),y}},my=async(s,r)=>{if(!s||!r)throw new Error("Email/Phone and password are required");const c=String(s).trim().toLowerCase(),u=/^[\d\s\-\+\(\)]+$/.test(c.replace(/\s/g,""));let g=c;if(u)g=`patient_${c.replace(/\D/g,"")}@docsapp.local`,console.log("Phone login detected, using email:",g);else if(!c.includes("@")||c.length<3)throw new Error("Please enter a valid email address or phone number");try{return(await Sg(Ti,g,r)).user}catch(f){throw console.error("Login Error:",f),f}},hy=async()=>Cg(Ti),fy=async s=>{console.log("getUserProfile: Fetching profile for UID:",s);try{const r=Se(V,"users",s),c=await Gt(r);if(c.exists())return console.log("getUserProfile: Document found by document ID:",c.data()),c.data();console.log("getUserProfile: Document not found by ID, querying by uid field...");const u=Oe(xe(V,"users"),ye("uid","==",s)),g=await Re(u);return g.empty?(console.warn("getUserProfile: No document found for UID:",s),null):(console.log("getUserProfile: Document found by query:",g.docs[0].data()),g.docs[0].data())}catch(r){throw console.error("getUserProfile: Error fetching document:",r),r}},gy=async s=>{try{const r={url:window.location.origin+"/login",handleCodeInApp:!1};return console.log("========================================"),console.log("PASSWORD RESET DIAGNOSTIC INFO:"),console.log("Email to reset:",s),console.log("Firebase Auth Domain:",Ti.config.authDomain),console.log("Firebase Project ID:",Ti.config.apiKey.includes("mock")?"MOCK PROJECT":"Real Project"),console.log("Redirect URL:",r.url),console.log("Current User:",Ti.currentUser?.email||"Not logged in"),console.log("========================================"),console.log("Attempting to send password reset email to:",s),await wg(Ti,s,r),console.log("========================================"),console.log(" SUCCESS: Password reset email sent"),console.log("From: noreply@"+Ti.config.authDomain),console.log("To:",s),console.log("Action: Check spam folder and wait 2-5 minutes"),console.log("========================================"),{success:!0,message:"Password reset email sent successfully"}}catch(r){console.error("========================================"),console.error(" ERROR: Password reset failed"),console.error("Error code:",r.code),console.error("Error message:",r.message),console.error("Full error:",r),console.error("========================================");let c="Failed to send password reset email.";throw r.code==="auth/user-not-found"?c="No account found with this email address.":r.code==="auth/invalid-email"?c="Invalid email address format.":r.code==="auth/too-many-requests"?c="Too many attempts. Please try again later.":(r.code==="auth/missing-android-pkg-name"||r.code==="auth/missing-continue-uri"||r.code==="auth/missing-ios-bundle-id"||r.code==="auth/invalid-continue-uri"||r.code==="auth/unauthorized-continue-uri")&&(c="Configuration error. Please contact support."),new Error(c)}},yy=()=>{const[s,r]=x.useState(""),[c,u]=x.useState(""),[g,f]=x.useState(""),[y,b]=x.useState(""),[A,w]=x.useState(!1),[T,N]=x.useState(""),[R,$]=x.useState(!1),[L,ce]=x.useState(""),[W,se]=x.useState(!1),[E,S]=x.useState(!1),ae=Sl(),Be=og();x.useEffect(()=>{Be.state?.message&&(b(Be.state.message),window.history.replaceState({},document.title))},[Be]);const rt=async De=>{De.preventDefault(),S(!0),f("");try{await my(s.trim(),c),ae("/dashboard")}catch{f("Failed to login. Please check your credentials.")}finally{S(!1)}},ve=async De=>{De.preventDefault(),$(!0),ce(""),f("");try{console.log("Requesting password reset for:",T.trim()),await gy(T.trim()),ce("Password reset email sent! Check your inbox and spam folder."),N(""),setTimeout(()=>{w(!1),ce("")},5e3)}catch(q){console.error("Password reset error:",q),f(q.message||"Failed to send reset email.")}finally{$(!1)}},K={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},card:{background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxWidth:"440px",width:"100%",overflow:"hidden",animation:"slideUp 0.5s ease-out"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2.5rem) clamp(1.25rem, 4vw, 2rem)",textAlign:"center",color:"white"},title:{margin:0,fontSize:"clamp(1.5rem, 5vw, 2rem)",fontWeight:"700",marginBottom:"0.5rem",letterSpacing:"-0.5px"},subtitle:{margin:0,fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",opacity:.95,fontWeight:"400"},body:{padding:"clamp(1.25rem, 4vw, 2rem)"},alert:{padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",animation:"fadeIn 0.3s ease-out",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},successAlert:{background:"#d1f4e0",color:"#0d6832",border:"1px solid #a7e9c3"},errorAlert:{background:"#fee",color:"#c81e1e",border:"1px solid #fcc"},infoBox:{background:"#f0f4ff",padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",color:"#4a5568",textAlign:"center",border:"1px solid #d6e0ff",lineHeight:"1.5"},form:{display:"flex",flexDirection:"column",gap:"clamp(1rem, 3vw, 1.25rem)"},inputGroup:{position:"relative"},label:{display:"block",marginBottom:"0.5rem",fontSize:"clamp(0.85rem, 2.5vw, 0.9rem)",fontWeight:"600",color:"#374151"},input:{width:"100%",padding:"clamp(0.7rem, 2vw, 0.875rem) clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",border:"2px solid #e5e7eb",borderRadius:"12px",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},passwordWrapper:{position:"relative"},eyeButton:{position:"absolute",right:"clamp(0.75rem, 2vw, 1rem)",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"clamp(1.1rem, 3vw, 1.25rem)",color:"#6b7280",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},forgotLink:{textAlign:"right",marginTop:"-0.5rem"},linkButton:{background:"none",border:"none",color:"#667eea",cursor:"pointer",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",fontWeight:"600",textDecoration:"none",padding:0},submitButton:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.95rem, 3vw, 1rem)",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",marginTop:"0.5rem"},submitButtonDisabled:{opacity:.6,cursor:"not-allowed",transform:"none"},divider:{display:"flex",alignItems:"center",textAlign:"center",margin:"clamp(1rem, 3vw, 1.5rem) 0",color:"#9ca3af",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)"},dividerLine:{flex:1,height:"1px",background:"#e5e7eb"},dividerText:{padding:"0 clamp(0.75rem, 2vw, 1rem)"},registerLink:{textAlign:"center",color:"#6b7280",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},link:{color:"#667eea",fontWeight:"600",textDecoration:"none"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"fadeIn 0.3s ease-out",backdropFilter:"blur(4px)"},modal:{background:"white",padding:"2rem",borderRadius:"20px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.4)",maxWidth:"440px",width:"90%",animation:"slideUp 0.3s ease-out"},modalTitle:{marginTop:0,fontSize:"1.75rem",fontWeight:"700",color:"#1f2937",marginBottom:"0.5rem"},modalText:{color:"#6b7280",fontSize:"0.95rem",marginBottom:"1.5rem",lineHeight:"1.6"},buttonGroup:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},primaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"},secondaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"#4b5563",background:"#f3f4f6",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"}};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
                    @keyframes slideUp {
                        from {
                            opacity: 0;
                            transform: translateY(30px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    input:focus {
                        border-color: #667eea !important;
                        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
                    }
                    button:hover:not(:disabled) {
                        transform: translateY(-2px);
                    }
                    button:active:not(:disabled) {
                        transform: translateY(0);
                    }
                    a:hover {
                        text-decoration: underline;
                    }
                `}),t.jsxs("div",{style:K.container,children:[t.jsxs("div",{style:K.card,children:[t.jsxs("div",{style:K.header,children:[t.jsx("h1",{style:K.title,children:"Welcome Back"}),t.jsx("p",{style:K.subtitle,children:"Sign in to your account"})]}),t.jsxs("div",{style:K.body,children:[y&&t.jsxs("div",{style:{...K.alert,...K.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:y})]}),g&&t.jsxs("div",{style:{...K.alert,...K.errorAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:g})]}),t.jsxs("div",{style:K.infoBox,children:[t.jsx("strong",{children:"For Doctors & Hospitals"}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:["Patients don't need to login. ",t.jsx(ci,{to:"/book",style:K.link,children:"Book appointment "})]})]}),t.jsxs("form",{onSubmit:rt,style:K.form,children:[t.jsxs("div",{style:K.inputGroup,children:[t.jsx("label",{style:K.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:s,onChange:De=>r(De.target.value),required:!0,style:K.input})]}),t.jsxs("div",{style:K.inputGroup,children:[t.jsx("label",{style:K.label,children:"Password"}),t.jsxs("div",{style:K.passwordWrapper,children:[t.jsx("input",{type:W?"text":"password",placeholder:"Enter your password",value:c,onChange:De=>u(De.target.value),required:!0,style:K.input}),t.jsx("button",{type:"button",onClick:()=>se(!W),style:K.eyeButton,"aria-label":W?"Hide password":"Show password",children:W?"":""})]})]}),t.jsx("div",{style:K.forgotLink,children:t.jsx("button",{type:"button",onClick:()=>w(!0),style:K.linkButton,children:"Forgot Password?"})}),t.jsx("button",{type:"submit",style:{...K.submitButton,...E?K.submitButtonDisabled:{}},disabled:E,children:E?" Signing in...":"Sign In"})]}),t.jsxs("div",{style:K.divider,children:[t.jsx("div",{style:K.dividerLine}),t.jsx("span",{style:K.dividerText,children:"or"}),t.jsx("div",{style:K.dividerLine})]}),t.jsxs("div",{style:K.registerLink,children:["Don't have an account? ",t.jsx(ci,{to:"/register",style:K.link,children:"Create Account"})]})]})]}),A&&t.jsx("div",{style:K.modalOverlay,onClick:()=>w(!1),children:t.jsxs("div",{style:K.modal,onClick:De=>De.stopPropagation(),children:[t.jsx("h3",{style:K.modalTitle,children:"Reset Password"}),t.jsx("p",{style:K.modalText,children:"Enter your email address and we'll send you a link to reset your password."}),L&&t.jsxs("div",{style:{...K.alert,...K.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"600"},children:"Email sent successfully!"}),t.jsx("small",{style:{display:"block",fontSize:"0.85rem",opacity:.9},children:" Check your spam folder if you don't see it within a few minutes"})]})]}),t.jsxs("form",{onSubmit:ve,style:K.form,children:[t.jsxs("div",{style:K.inputGroup,children:[t.jsx("label",{style:K.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:T,onChange:De=>N(De.target.value),required:!0,style:K.input})]}),t.jsxs("div",{style:K.buttonGroup,children:[t.jsx("button",{type:"submit",disabled:R,style:{...K.primaryButton,...R?K.submitButtonDisabled:{}},children:R?" Sending...":"Send Reset Link"}),t.jsx("button",{type:"button",onClick:()=>{w(!1),N(""),ce(""),f("")},style:K.secondaryButton,children:"Cancel"})]})]})]})})]})]})},Km=x.createContext(),Ca=()=>x.useContext(Km),xy=({children:s})=>{const[r,c]=x.useState(null),[u,g]=x.useState(null),[f,y]=x.useState(!0);x.useEffect(()=>Ag(Ti,async w=>{if(console.log("AuthContext: onAuthStateChanged fired, user:",w?.uid),c(w),y(!1),w){console.log("AuthContext: Fetching profile for user:",w.uid);try{const T=await fy(w.uid);console.log("AuthContext: Profile fetched:",T),g(T)}catch(T){console.error("AuthContext: Error fetching user profile:",T),g(null)}}else g(null)}),[]);const b={currentUser:r,userProfile:u,isAuthenticated:!!r,loading:f};return t.jsx(Km.Provider,{value:b,children:f?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.5rem"},children:"Loading..."}):s})},Kn={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)",display:"flex",alignItems:"center",justifyContent:"center"},card:{maxWidth:"500px",width:"100%",background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",overflow:"hidden"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1.25rem, 4vw, 2rem)"},input:{width:"100%",padding:"clamp(0.6rem, 2vw, 0.75rem)",border:"2px solid #e0e0e0",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",transition:"all 0.3s ease",boxSizing:"border-box"},button:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"none",borderRadius:"10px",fontSize:"clamp(0.95rem, 3vw, 1.1rem)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},infoBox:{padding:"clamp(0.75rem, 2.5vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",fontSize:"clamp(0.8rem, 2.5vw, 0.95rem)",lineHeight:"1.5"},roleCard:{padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"2px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"clamp(0.75rem, 2vw, 1rem)",marginBottom:"0.75rem"}},by=()=>{const[s,r]=x.useState({email:"",password:"",confirmPassword:"",name:"",role:"doctor"}),[c,u]=x.useState(""),[g,f]=x.useState(!1),[y,b]=x.useState(!1),A=Sl(),{isAuthenticated:w}=Ca();x.useEffect(()=>{w&&A("/dashboard",{replace:!0})},[w,A]);const T=R=>{r({...s,[R.target.name]:R.target.value})},N=async R=>{R.preventDefault(),f(!0),u("");const{email:$,password:L,confirmPassword:ce,name:W,role:se}=s;if(!$||!L||!ce||!W||!se){u("All fields are required"),f(!1);return}if(L!==ce){u("Passwords do not match"),f(!1);return}try{console.log("Register.jsx: Starting registration...");const E=await Zm($.trim(),L,W,se,{});console.log("Register.jsx: Registration completed successfully!",E),console.log("Register.jsx: Navigating to dashboard...");try{A("/dashboard",{replace:!0})}catch(S){console.warn("Register.jsx: navigate failed, falling back to hard redirect.",S),window.location.replace("/dashboard")}b(!0)}catch(E){console.error("Register.jsx: Registration error:",E);let S="Failed to register.";E.code==="auth/email-already-in-use"?S="This email is already registered. Please login instead or use a different email.":E.code==="auth/weak-password"?S="Password should be at least 6 characters.":E.code==="auth/invalid-email"?S="Invalid email address format.":E.message&&(S=E.message),u(S)}finally{f(!1)}};return t.jsx("div",{style:Kn.container,children:t.jsxs("div",{style:Kn.card,children:[t.jsxs("div",{style:Kn.header,children:[t.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700"},children:" Provider Registration"}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"Join our healthcare network"})]}),t.jsxs("div",{style:Kn.content,children:[t.jsxs("div",{style:{...Kn.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[t.jsx("strong",{children:"For Healthcare Providers Only"}),t.jsx("br",{}),"Patients don't need to register.",t.jsx(ci,{to:"/book",style:{color:"#1565c0",fontWeight:"600",marginLeft:"0.25rem"},children:"Book appointment directly "})]})]}),c&&t.jsxs("div",{style:{...Kn.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24",border:"2px solid #f5c6cb"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[c,c.includes("already registered")&&t.jsx("div",{style:{marginTop:"0.5rem"},children:t.jsx(ci,{to:"/login",style:{color:"#721c24",fontWeight:"600",textDecoration:"underline"},children:"Go to Login "})})]})]}),y&&t.jsxs("div",{style:{...Kn.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:["Registration successful! Redirecting...",t.jsx(ci,{to:"/dashboard",style:{color:"#155724",fontWeight:"600",marginLeft:"0.5rem"},children:"Go to Dashboard "})]})]}),t.jsxs("form",{onSubmit:N,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Full Name *"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter your full name",required:!0,value:s.name,onChange:T,style:Kn.input,onFocus:R=>R.target.style.borderColor="#667eea",onBlur:R=>R.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"I am registering as: *"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsxs("div",{style:{...Kn.roleCard,borderColor:s.role==="doctor"?"#667eea":"#e0e0e0",background:s.role==="doctor"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:s.role==="doctor"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>r({...s,role:"doctor"}),onMouseEnter:R=>{s.role!=="doctor"&&(R.currentTarget.style.borderColor="#667eea",R.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:R=>{s.role!=="doctor"&&(R.currentTarget.style.borderColor="#e0e0e0",R.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"doctor",checked:s.role==="doctor",onChange:T,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Doctor"})]})]}),t.jsxs("div",{style:{...Kn.roleCard,borderColor:s.role==="hospital"?"#667eea":"#e0e0e0",background:s.role==="hospital"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:s.role==="hospital"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>r({...s,role:"hospital"}),onMouseEnter:R=>{s.role!=="hospital"&&(R.currentTarget.style.borderColor="#667eea",R.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:R=>{s.role!=="hospital"&&(R.currentTarget.style.borderColor="#e0e0e0",R.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"hospital",checked:s.role==="hospital",onChange:T,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Hospital"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Email Address *"}),t.jsx("input",{name:"email",type:"email",placeholder:"your.email@example.com",required:!0,value:s.email,onChange:T,style:Kn.input,onFocus:R=>R.target.style.borderColor="#667eea",onBlur:R=>R.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Password *"}),t.jsx("input",{name:"password",type:"password",placeholder:"At least 6 characters",required:!0,value:s.password,onChange:T,style:Kn.input,onFocus:R=>R.target.style.borderColor="#667eea",onBlur:R=>R.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Confirm Password *"}),t.jsx("input",{name:"confirmPassword",type:"password",placeholder:"Re-enter your password",required:!0,value:s.confirmPassword,onChange:T,style:Kn.input,onFocus:R=>R.target.style.borderColor="#667eea",onBlur:R=>R.target.style.borderColor="#e0e0e0"})]}),t.jsx("button",{type:"submit",disabled:g,style:{...Kn.button,opacity:g?.7:1,cursor:g?"not-allowed":"pointer"},onMouseEnter:R=>{g||(R.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)"},children:g?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Registering..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Create Account"]})})]}),t.jsxs("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid #f0f0f0",textAlign:"center"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Already have an account?"}),t.jsx(ci,{to:"/login",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Login here "})]})]})]})})},vy="modulepreload",jy=function(s){return"/"+s},Pm={},zs=function(r,c,u){let g=Promise.resolve();if(c&&c.length>0){let A=function(w){return Promise.all(w.map(T=>Promise.resolve(T).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),b=y?.nonce||y?.getAttribute("nonce");g=A(c.map(w=>{if(w=jy(w),w in Pm)return;Pm[w]=!0;const T=w.endsWith(".css"),N=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${N}`))return;const R=document.createElement("link");if(R.rel=T?"stylesheet":vy,T||(R.as="script"),R.crossOrigin="",R.href=w,b&&R.setAttribute("nonce",b),document.head.appendChild(R),T)return new Promise(($,L)=>{R.addEventListener("load",$),R.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${w}`)))})}))}function f(y){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=y,window.dispatchEvent(b),!b.defaultPrevented)throw y}return g.then(y=>{for(const b of y||[])b.status==="rejected"&&f(b.reason);return r().catch(f)})},fo=(s,r)=>{if(!r||!r.rates)return{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2};const u=s&&(s.toLowerCase()==="india"||s.toLowerCase()==="in")?"INR":"GBP",g=r.rates[u];return g||{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},Sy=s=>({INR:"",GBP:"",USD:"$",EUR:""})[s]||s,qa=(s,r)=>{if(s.customRates&&s.customRates.appointmentCost)return{...s.customRates,currency:s.customRates.currency||s.currency||"USD",symbol:Sy(s.customRates.currency||s.currency||"USD")};const c=s.country||"default";return fo(c,r)},wy=async(s,r)=>{try{const c=xe(V,"healthRecords"),u=Oe(c,ye("patientId","==",s),ye("doctorId","==",r),Ia("createdAt","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data(),createdAt:f.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching health records:",c),c}},Cy=async(s,r)=>{try{const c=xe(V,"prescriptions"),u=Oe(c,ye("patientId","==",s),ye("doctorId","==",r),Ia("createdAt","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data(),createdAt:f.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching prescriptions:",c),c}},Ay=async(s,r)=>{try{const c=xe(V,"appointments"),u=Oe(c,ye("patientId","==",s),ye("doctorId","==",r),Ia("date","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data()}))}catch(c){throw console.error("Error fetching patient appointments:",c),c}},Dy=async(s,r,c,u=null)=>{try{const g=xe(V,"healthRecords"),f={patientId:s,doctorId:r,...c,createdAt:As.now(),updatedAt:As.now()};return u&&(f.hospitalId=u),(await ea(g,f)).id}catch(g){throw console.error("Error adding health record:",g),g}},Ty=async(s,r)=>{try{return(await Gd(Yd,"generateHealthSummary")({patientId:s,doctorId:r})).data}catch(c){throw console.error("Error generating health summary:",c),c}},zy=async(s,r)=>{try{const c=xe(V,"healthSummaries"),u=Oe(c,ye("patientId","==",s),ye("doctorId","==",r),Ia("generatedAt","desc")),g=await Re(u);if(!g.empty){const f=g.docs[0],y=f.data(),b=y.generatedAt?.toDate?.()||new Date,A=new Date(Date.now()-3600*1e3);if(b>A)return{id:f.id,...y,generatedAt:b}}return null}catch(c){return console.error("Error fetching cached summary:",c),null}},Ry=async(s,r)=>{try{const[c,u,g]=await Promise.all([wy(s,r),Cy(s,r),Ay(s,r)]);return{healthRecords:c,prescriptions:u,appointments:g}}catch(c){throw console.error("Error fetching comprehensive patient data:",c),c}},By=async(s,r)=>{try{console.log(" Searching hospital patients:",{searchTerm:s,hospitalId:r});const c=s.toLowerCase().trim(),u=xe(V,"appointments"),g=Oe(u,ye("hospitalId","==",r)),f=await Re(g);console.log(` Found ${f.size} appointments for hospital`);const y=new Map;f.forEach(A=>{const w=A.data(),T=(w.patientName||w.name||"").toLowerCase(),N=w.patientPhone||w.userPhone||w.phone||"",R=w.patientEmail||w.email||"",$=(w.id||A.id).toLowerCase(),L=w.patientId||w.userId||w.patientUid||w.patient_id||w.user_id||N||w.patientEmail||$,ce=T.includes(c)||N.includes(c)||$.includes(c);if(console.log("Checking appointment:",{patientName:T,patientPhone:N,patientId:L,matchesSearch:ce,bookingNumber:$}),ce)if(!y.has(L))y.set(L,{id:L,name:w.patientName||w.name||"Unknown",phone:N,email:R,lastAppointment:w.date,bookingNumber:A.id,totalAppointments:1,lastDoctorId:w.doctorId,lastDoctorName:w.doctorName||"Unknown"});else{const W=y.get(L);W.totalAppointments+=1,w.date>W.lastAppointment&&(W.lastAppointment=w.date,W.bookingNumber=A.id,W.lastDoctorId=w.doctorId,W.lastDoctorName=w.doctorName||"Unknown")}});const b=Array.from(y.values());return console.log(` Found ${b.length} unique patients matching search`),b}catch(c){throw console.error(" Error searching hospital patients:",c),c}},ky=async(s,r)=>{try{const c=xe(V,"healthRecords"),u=Oe(c,ye("patientId","==",s),ye("hospitalId","==",r),Ia("createdAt","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data(),createdAt:f.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching hospital patient health records:",c),c}},Ey=async(s,r)=>{try{const c=xe(V,"prescriptions"),u=Oe(c,ye("patientId","==",s),ye("hospitalId","==",r),Ia("createdAt","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data(),createdAt:f.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching hospital patient prescriptions:",c),c}},Ny=async(s,r)=>{try{const c=xe(V,"appointments"),u=Oe(c,ye("patientId","==",s),ye("hospitalId","==",r),Ia("date","desc"));return(await Re(u)).docs.map(f=>({id:f.id,...f.data()}))}catch(c){throw console.error("Error fetching hospital patient appointments:",c),c}},My=async(s,r)=>{try{const[c,u,g]=await Promise.all([ky(s,r),Ey(s,r),Ny(s,r)]);return{healthRecords:c,prescriptions:u,appointments:g}}catch(c){throw console.error("Error fetching comprehensive hospital patient data:",c),c}},Hy=async(s,r,c,u)=>{try{const g=[],f=xe(V,"healthRecords"),y=Oe(f,ye("patientId","==",s),ye("doctorId","==",r),ye("hospitalId","==",u)),b=await Re(y),A=xe(V,"prescriptions"),w=Oe(A,ye("patientId","==",s),ye("doctorId","==",r),ye("hospitalId","==",u)),T=await Re(w),N=b.docs.map(async $=>{const L=Se(V,"healthRecords",$.id);await Zt(L,{doctorId:c,transferredFrom:r,transferredAt:As.now()})}),R=T.docs.map(async $=>{const L=Se(V,"prescriptions",$.id);await Zt(L,{doctorId:c,transferredFrom:r,transferredAt:As.now()})});return await Promise.all([...N,...R]),{success:!0,recordsTransferred:b.size,prescriptionsTransferred:T.size}}catch(g){throw console.error("Error transferring patient records:",g),g}},Uy=async s=>{const r=Se(V,"patients",s),c=await Gt(r);return c.exists()?{id:c.id,...c.data()}:null},Oy=async s=>{s.replace(/[^\d]/g,"");const r=Oe(xe(V,"patients"),ye("phone","==",s)),c=await Re(r);if(!c.empty){const u=c.docs[0];return{id:u.id,...u.data()}}return null},Ly=async s=>{try{console.log(" Fetching patient details for ID:",s);let r=await Uy(s);if(r||(console.log(" Patient not found by ID, trying phone search..."),r=await Oy(s)),!r)return console.warn(" Patient not found by ID or phone:",s),{id:s,name:"Unknown Patient",phone:s,appointments:[],prescriptions:[]};console.log(" Patient found:",r);const c=r.phone||s;console.log(" Searching by phone:",c);const u=Oe(xe(V,"appointments"),ye("patientPhone","==",c)),f=(await Re(u)).docs.map(w=>({id:w.id,...w.data()})).sort((w,T)=>{const N=w.date?new Date(w.date):new Date(0);return(T.date?new Date(T.date):new Date(0))-N});console.log(` Found ${f.length} appointments`);const y=Oe(xe(V,"prescriptions"),ye("patientPhone","==",c)),A=(await Re(y)).docs.map(w=>({id:w.id,...w.data()})).sort((w,T)=>{const N=w.createdAt?new Date(w.createdAt):new Date(0);return(T.createdAt?new Date(T.createdAt):new Date(0))-N});return console.log(` Found ${A.length} prescriptions`),{...r,appointments:f,prescriptions:A}}catch(r){throw console.error(" Error in getPatientDetails:",r),r}},Py=async s=>{const r=xe(V,"patients"),c=await Re(r),u=s.toLowerCase();return c.docs.map(f=>({id:f.id,...f.data()})).filter(f=>f.name?.toLowerCase().includes(u)||f.phone?.includes(s)||f.dob?.includes(s))},_y=({patientId:s,doctorId:r,doctorName:c,appointment:u=null,onClose:g})=>{const[f,y]=x.useState("overview"),[b,A]=x.useState(null),[w,T]=x.useState(!0),[N,R]=x.useState(!1),[$,L]=x.useState(!!u),[ce,W]=x.useState(null),[se,E]=x.useState({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""}),[S,ae]=x.useState({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),Be=x.useRef(null),[rt,ve]=x.useState(!1),[K,De]=x.useState([]),[q,Fe]=x.useState("#000000"),[de,dt]=x.useState(2),[ht,Ke]=x.useState(!1),[I,re]=x.useState(""),fe=x.useRef(null);x.useEffect(()=>{Je(),qe()},[s]);const Je=async()=>{try{if(T(!0),console.log(" Loading patient data for ID:",s),!s)throw new Error("Patient ID is required");const k=await Ly(s);if(console.log(" Patient data loaded:",k),!k)throw new Error("Patient not found");A(k)}catch(k){console.error(" Error loading patient data:",k),We("Error loading patient data: "+k.message,"error"),A({id:s,name:"Unknown Patient",phone:"N/A",appointments:[],prescriptions:[],visits:[]})}finally{T(!1)}},qe=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const k=window.SpeechRecognition||window.webkitSpeechRecognition;fe.current=new k,fe.current.continuous=!0,fe.current.interimResults=!0,fe.current.lang="en-US",fe.current.onresult=Te=>{let He="";for(let Ge=Te.resultIndex;Ge<Te.results.length;Ge++){const ne=Te.results[Ge][0].transcript;Te.results[Ge].isFinal&&(He+=ne+" ")}re(Ge=>Ge+He)},fe.current.onerror=Te=>{console.error("Speech recognition error:",Te.error),Ke(!1)}}},Ae=()=>{ht?(fe.current?.stop(),Ke(!1)):(re(""),fe.current?.start(),Ke(!0))},We=(k,Te="success")=>{W({message:k,type:Te}),setTimeout(()=>W(null),3e3)},$e=k=>{const Te=Be.current,He=Te.getContext("2d"),Ge=Te.getBoundingClientRect(),ne=(k.clientX||k.touches?.[0]?.clientX)-Ge.left,St=(k.clientY||k.touches?.[0]?.clientY)-Ge.top;He.beginPath(),He.moveTo(ne,St),ve(!0),De(Ot=>[...Ot,Te.toDataURL()])},ft=k=>{if(!rt)return;const Te=Be.current,He=Te.getContext("2d"),Ge=Te.getBoundingClientRect(),ne=(k.clientX||k.touches?.[0]?.clientX)-Ge.left,St=(k.clientY||k.touches?.[0]?.clientY)-Ge.top;He.lineTo(ne,St),He.strokeStyle=q,He.lineWidth=de,He.lineCap="round",He.lineJoin="round",He.stroke()},Ie=()=>{ve(!1)},at=()=>{const k=Be.current;k.getContext("2d").clearRect(0,0,k.width,k.height),De([])},Dn=()=>{if(K.length>0){const k=Be.current,Te=k.getContext("2d"),He=K[K.length-1],Ge=new Image;Ge.src=He,Ge.onload=()=>{Te.clearRect(0,0,k.width,k.height),Te.drawImage(Ge,0,0)},De(ne=>ne.slice(0,-1))}},Qt=()=>{ae(k=>({...k,medicines:[...k.medicines,{name:"",dosage:"",frequency:"",duration:"",instructions:""}]}))},Kt=k=>{ae(Te=>({...Te,medicines:Te.medicines.filter((He,Ge)=>Ge!==k)}))},lt=(k,Te,He)=>{ae(Ge=>({...Ge,medicines:Ge.medicines.map((ne,St)=>St===k?{...ne,[Te]:He}:ne)}))},en=async()=>{try{await uy(s,r,se),We("Visit record saved successfully!"),R(!1),Je(),E({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""})}catch(k){We("Error saving visit: "+k.message,"error")}},At=async()=>{try{let k={...S,doctorName:c,handwrittenImage:S.inputMethod==="draw"?Be.current?.toDataURL():null,voiceTranscript:S.inputMethod==="voice"?I:null};await py(s,r,k),We("Prescription saved successfully!"),L(!1),Je(),ae({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),re(""),Be.current&&at()}catch(k){We("Error saving prescription: "+k.message,"error")}},tn=k=>{const Te=window.open("","","width=800,height=600"),He=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Prescription</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; }
          .header { text-align: center; border-bottom: 2px solid #11998e; padding-bottom: 20px; margin-bottom: 20px; }
          .header h1 { color: #11998e; margin: 0; }
          .patient-info, .prescription-info { margin: 20px 0; }
          .label { font-weight: bold; color: #666; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
          th { background-color: #11998e; color: white; }
          .footer { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; }
          .signature { margin-top: 60px; }
          .handwritten-image { max-width: 100%; border: 1px solid #ddd; margin: 20px 0; }
          @media print {
            body { margin: 0; }
            button { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1> Medical Prescription</h1>
          <p><strong>Dr. ${c}</strong></p>
          <p>Date: ${new Date(k.date).toLocaleDateString()}</p>
        </div>
        
        <div class="patient-info">
          <h3>Patient Information</h3>
          <p><span class="label">Name:</span> ${b.name}</p>
          <p><span class="label">Age:</span> ${b.age||"N/A"}</p>
          <p><span class="label">Gender:</span> ${b.gender||"N/A"}</p>
          <p><span class="label">Contact:</span> ${b.phone||b.email}</p>
        </div>
        
        <div class="prescription-info">
          <h3>Diagnosis</h3>
          <p>${k.diagnosis||"N/A"}</p>
        </div>
        
        ${k.handwrittenImage?`
          <div>
            <h3>Handwritten Prescription</h3>
            <img src="${k.handwrittenImage}" class="handwritten-image" alt="Handwritten Prescription" />
          </div>
        `:""}
        
        ${k.medicines&&k.medicines.length>0?`
          <div>
            <h3>Medications</h3>
            <table>
              <thead>
                <tr>
                  <th>Medicine</th>
                  <th>Dosage</th>
                  <th>Frequency</th>
                  <th>Duration</th>
                  <th>Instructions</th>
                </tr>
              </thead>
              <tbody>
                ${k.medicines.map(Ge=>`
                  <tr>
                    <td>${Ge.name}</td>
                    <td>${Ge.dosage}</td>
                    <td>${Ge.frequency}</td>
                    <td>${Ge.duration}</td>
                    <td>${Ge.instructions}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        `:""}
        
        ${k.additionalNotes?`
          <div>
            <h3>Additional Notes</h3>
            <p>${k.additionalNotes}</p>
          </div>
        `:""}
        
        ${k.voiceTranscript?`
          <div>
            <h3>Voice Notes</h3>
            <p>${k.voiceTranscript}</p>
          </div>
        `:""}
        
        <div class="footer">
          <div class="signature">
            <p>___________________________</p>
            <p><strong>Dr. ${c}</strong></p>
            <p>Digital Signature</p>
          </div>
        </div>
        
        <button onclick="window.print()" style="background: #11998e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Print Prescription</button>
      </body>
      </html>
    `;Te.document.write(He),Te.document.close()};return w?t.jsx("div",{style:Z.modalOverlay,children:t.jsx("div",{style:Z.modal,children:t.jsx("div",{style:Z.loadingSpinner,children:"Loading patient data..."})})}):b?t.jsx("div",{style:Z.modalOverlay,onClick:g,children:t.jsxs("div",{style:Z.modal,onClick:k=>k.stopPropagation(),children:[ce&&t.jsx("div",{style:{...Z.notification,background:ce.type==="error"?"#ff4444":"#11998e"},children:ce.message}),t.jsxs("div",{style:Z.modalHeader,children:[t.jsxs("div",{children:[t.jsxs("h2",{style:Z.modalTitle,children:["Patient Record: ",b.name]}),t.jsxs("p",{style:Z.modalSubtitle,children:["Age: ",b.age||"N/A"," | Gender: ",b.gender||"N/A"," | Blood Type: ",b.healthRecords?.bloodType||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:Z.primaryButton,onClick:()=>R(!0),children:" Add Visit"}),t.jsx("button",{style:Z.primaryButton,onClick:()=>L(!0),children:" New Prescription"}),t.jsx("button",{style:Z.closeButton,onClick:g,children:""})]})]}),u&&t.jsxs("div",{style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",margin:"0 1.5rem 1rem 1.5rem",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",marginBottom:"0.25rem"},children:" Active Consultation"}),t.jsxs("div",{style:{fontSize:"0.95rem",opacity:.9},children:[" ",u.date," |  ",u.timeSlot||u.time]})]}),t.jsx("button",{onClick:()=>L(!0),style:{padding:"0.75rem 1.5rem",background:"white",color:"#667eea",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",transition:"transform 0.2s"},onMouseOver:k=>k.currentTarget.style.transform="scale(1.05)",onMouseOut:k=>k.currentTarget.style.transform="scale(1)",children:" Add Prescription Now"})]}),t.jsx("div",{style:Z.tabs,children:["overview","prescriptions","visits","health"].map(k=>t.jsx("button",{style:{...Z.tab,...f===k?Z.activeTab:{}},onClick:()=>y(k),children:k.charAt(0).toUpperCase()+k.slice(1)},k))}),t.jsxs("div",{style:Z.modalBody,children:[f==="overview"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Patient Information"}),t.jsxs("div",{style:Z.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",b.email]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",b.phone||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",b.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",b.healthRecords?.bloodType||"N/A"]})]})]}),t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Recent Vitals"}),b.visits&&b.visits[0]?.vitals?t.jsxs("div",{style:Z.vitalsGrid,children:[t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Blood Pressure"}),t.jsx("div",{style:Z.vitalValue,children:b.visits[0].vitals.bloodPressure})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Temperature"}),t.jsx("div",{style:Z.vitalValue,children:b.visits[0].vitals.temperature})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Pulse"}),t.jsx("div",{style:Z.vitalValue,children:b.visits[0].vitals.pulse})]}),t.jsxs("div",{style:Z.vitalCard,children:[t.jsx("div",{style:Z.vitalLabel,children:"Weight"}),t.jsx("div",{style:Z.vitalValue,children:b.visits[0].vitals.weight})]})]}):t.jsx("p",{style:Z.noData,children:"No vital signs recorded yet"})]}),t.jsxs("div",{style:Z.section,children:[t.jsx("h3",{style:Z.sectionTitle,children:" Allergies & Conditions"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Allergies:"})," ",b.healthRecords?.allergies?.join(", ")||"None recorded"]}),t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",b.healthRecords?.chronicConditions?.join(", ")||"None recorded"]})]})]}),f==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Prescription History"}),b.prescriptions&&b.prescriptions.length>0?b.prescriptions.map((k,Te)=>t.jsxs("div",{style:Z.prescriptionCard,children:[t.jsxs("div",{style:Z.prescriptionHeader,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString(),t.jsx("br",{}),t.jsx("strong",{children:"Doctor:"})," ",k.doctorName||"N/A"]}),t.jsx("button",{style:Z.printButton,onClick:()=>tn(k),children:" Print"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.medicines&&k.medicines.length>0&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Medicines:"}),t.jsx("ul",{style:Z.medicineList,children:k.medicines.map((He,Ge)=>t.jsxs("li",{children:[He.name," - ",He.dosage," (",He.frequency,") for ",He.duration,He.instructions&&` - ${He.instructions}`]},Ge))})]}),k.handwrittenImage&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Handwritten Notes:"}),t.jsx("img",{src:k.handwrittenImage,style:Z.handwrittenPreview,alt:"Handwritten"})]}),k.additionalNotes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.additionalNotes]})]},Te)):t.jsx("p",{style:Z.noData,children:"No prescriptions recorded yet"})]}),f==="visits"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Visit History"}),b.visits&&b.visits.length>0?b.visits.map((k,Te)=>t.jsxs("div",{style:Z.visitCard,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",k.chiefComplaint]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.vitals&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Vitals:"})," BP: ",k.vitals.bloodPressure,", Temp: ",k.vitals.temperature,", Pulse: ",k.vitals.pulse]}),k.notes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.notes]})]},Te)):t.jsx("p",{style:Z.noData,children:"No visits recorded yet"})]}),f==="health"&&t.jsxs("div",{children:[t.jsx("h3",{style:Z.sectionTitle,children:" Health Records"}),t.jsxs("div",{style:Z.section,children:[t.jsxs("div",{style:Z.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",b.healthRecords?.bloodType||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Height:"})," ",b.healthRecords?.height||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",b.healthRecords?.weight||"N/A"]})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Current Medications:"}),t.jsx("p",{children:b.healthRecords?.medications?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Allergies:"}),t.jsx("p",{children:b.healthRecords?.allergies?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Chronic Conditions:"}),t.jsx("p",{children:b.healthRecords?.chronicConditions?.join(", ")||"None"})]})]})]})]}),N&&t.jsx("div",{style:Z.subModalOverlay,children:t.jsxs("div",{style:Z.subModal,children:[t.jsxs("div",{style:Z.modalHeader,children:[t.jsx("h3",{children:"Add Visit Record"}),t.jsx("button",{style:Z.closeButton,onClick:()=>R(!1),children:""})]}),t.jsxs("div",{style:Z.formBody,children:[t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Chief Complaint"}),t.jsx("input",{style:Z.input,value:se.chiefComplaint,onChange:k=>E({...se,chiefComplaint:k.target.value}),placeholder:"Patient's main concern"})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Diagnosis"}),t.jsx("input",{style:Z.input,value:se.diagnosis,onChange:k=>E({...se,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:Z.vitalsSection,children:[t.jsx("h4",{children:"Vital Signs"}),t.jsxs("div",{style:Z.vitalsInputGrid,children:[t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"BP"}),t.jsx("input",{style:Z.input,value:se.vitals.bloodPressure,onChange:k=>E({...se,vitals:{...se.vitals,bloodPressure:k.target.value}}),placeholder:"120/80"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Temp"}),t.jsx("input",{style:Z.input,value:se.vitals.temperature,onChange:k=>E({...se,vitals:{...se.vitals,temperature:k.target.value}}),placeholder:"98.6F"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Pulse"}),t.jsx("input",{style:Z.input,value:se.vitals.pulse,onChange:k=>E({...se,vitals:{...se.vitals,pulse:k.target.value}}),placeholder:"72 bpm"})]}),t.jsxs("div",{children:[t.jsx("label",{style:Z.label,children:"Weight"}),t.jsx("input",{style:Z.input,value:se.vitals.weight,onChange:k=>E({...se,vitals:{...se.vitals,weight:k.target.value}}),placeholder:"70 kg"})]})]})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Notes"}),t.jsx("textarea",{style:{...Z.input,minHeight:"100px"},value:se.notes,onChange:k=>E({...se,notes:k.target.value}),placeholder:"Additional observations"})]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Follow-up Date"}),t.jsx("input",{type:"date",style:Z.input,value:se.followUpDate,onChange:k=>E({...se,followUpDate:k.target.value})})]}),t.jsx("button",{style:Z.saveButton,onClick:en,children:"Save Visit Record"})]})]})}),$&&t.jsx("div",{style:Z.subModalOverlay,children:t.jsxs("div",{style:{...Z.subModal,maxWidth:"900px"},children:[t.jsxs("div",{style:Z.modalHeader,children:[t.jsx("h3",{children:"New Prescription"}),t.jsx("button",{style:Z.closeButton,onClick:()=>L(!1),children:""})]}),t.jsxs("div",{style:Z.formBody,children:[t.jsxs("div",{style:Z.inputMethodSelector,children:[t.jsx("button",{style:{...Z.methodButton,...S.inputMethod==="type"?Z.methodButtonActive:{}},onClick:()=>ae({...S,inputMethod:"type"}),children:" Type"}),t.jsx("button",{style:{...Z.methodButton,...S.inputMethod==="draw"?Z.methodButtonActive:{}},onClick:()=>ae({...S,inputMethod:"draw"}),children:" Draw/Write"}),t.jsx("button",{style:{...Z.methodButton,...S.inputMethod==="voice"?Z.methodButtonActive:{}},onClick:()=>ae({...S,inputMethod:"voice"}),children:" Voice"})]}),S.inputMethod==="type"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Diagnosis"}),t.jsx("input",{style:Z.input,value:S.diagnosis,onChange:k=>ae({...S,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:Z.medicinesSection,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h4",{children:"Medicines"}),t.jsx("button",{style:Z.addButton,onClick:Qt,children:" Add Medicine"})]}),S.medicines.map((k,Te)=>t.jsxs("div",{style:Z.medicineRow,children:[t.jsx("input",{style:{...Z.input,flex:2},placeholder:"Medicine name",value:k.name,onChange:He=>lt(Te,"name",He.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Dosage",value:k.dosage,onChange:He=>lt(Te,"dosage",He.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Frequency",value:k.frequency,onChange:He=>lt(Te,"frequency",He.target.value)}),t.jsx("input",{style:{...Z.input,flex:1},placeholder:"Duration",value:k.duration,onChange:He=>lt(Te,"duration",He.target.value)}),t.jsx("input",{style:{...Z.input,flex:2},placeholder:"Instructions",value:k.instructions,onChange:He=>lt(Te,"instructions",He.target.value)}),S.medicines.length>1&&t.jsx("button",{style:Z.removeButton,onClick:()=>Kt(Te),children:""})]},Te))]}),t.jsxs("div",{style:Z.formGroup,children:[t.jsx("label",{style:Z.label,children:"Additional Notes"}),t.jsx("textarea",{style:{...Z.input,minHeight:"80px"},value:S.additionalNotes,onChange:k=>ae({...S,additionalNotes:k.target.value}),placeholder:"Any additional instructions or notes"})]})]}),S.inputMethod==="draw"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.canvasControls,children:[t.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[t.jsx("label",{children:"Pen Color:"}),t.jsx("input",{type:"color",value:q,onChange:k=>Fe(k.target.value),style:Z.colorPicker}),t.jsx("label",{children:"Size:"}),t.jsx("input",{type:"range",min:"1",max:"10",value:de,onChange:k=>dt(k.target.value),style:Z.sizeSlider}),t.jsxs("span",{children:[de,"px"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:Z.canvasButton,onClick:Dn,children:" Undo"}),t.jsx("button",{style:Z.canvasButton,onClick:at,children:" Clear"})]})]}),t.jsx("canvas",{ref:Be,width:800,height:500,style:Z.canvas,onMouseDown:$e,onMouseMove:ft,onMouseUp:Ie,onMouseLeave:Ie,onTouchStart:$e,onTouchMove:ft,onTouchEnd:Ie}),t.jsx("p",{style:Z.canvasHint,children:" Use your mouse, stylus, or touch to write the prescription"})]}),S.inputMethod==="voice"&&t.jsxs("div",{children:[t.jsxs("div",{style:Z.voiceControls,children:[t.jsx("button",{style:{...Z.voiceButton,background:ht?"#ff4444":"#11998e"},onClick:Ae,children:ht?" Stop Recording":" Start Recording"}),ht&&t.jsxs("div",{style:Z.recordingIndicator,children:[t.jsx("span",{style:Z.recordingDot}),"Recording..."]})]}),t.jsxs("div",{style:Z.transcriptBox,children:[t.jsx("strong",{children:"Transcript:"}),t.jsx("div",{style:Z.transcript,children:I||"Speak to start transcription..."})]}),t.jsx("p",{style:Z.voiceHint,children:' Click "Start Recording" and speak clearly. The system will convert your speech to text.'})]}),t.jsx("button",{style:Z.saveButton,onClick:At,children:" Save Prescription"})]})]})})]})}):null},Z={modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},modal:{background:"white",borderRadius:"15px",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},modalHeader:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",padding:"20px 30px",display:"flex",justifyContent:"space-between",alignItems:"center"},modalTitle:{margin:0,fontSize:"24px",fontWeight:"600"},modalSubtitle:{margin:"5px 0 0 0",opacity:.9,fontSize:"14px"},closeButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"35px",height:"35px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s"},primaryButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},tabs:{display:"flex",borderBottom:"2px solid #e0e0e0",background:"#f8f9fa"},tab:{flex:1,padding:"15px",border:"none",background:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#666",transition:"all 0.3s"},activeTab:{color:"#11998e",borderBottom:"3px solid #11998e",fontWeight:"600"},modalBody:{padding:"30px",overflowY:"auto",flex:1},section:{marginBottom:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"10px"},sectionTitle:{margin:"0 0 15px 0",color:"#11998e",fontSize:"18px",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},vitalsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},vitalCard:{background:"white",padding:"15px",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},vitalLabel:{fontSize:"12px",color:"#666",marginBottom:"5px"},vitalValue:{fontSize:"20px",fontWeight:"600",color:"#11998e"},noData:{textAlign:"center",color:"#999",padding:"40px",fontStyle:"italic"},prescriptionCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},prescriptionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #e0e0e0"},printButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",transition:"all 0.3s"},medicineList:{marginTop:"10px",paddingLeft:"20px"},handwrittenPreview:{maxWidth:"100%",border:"1px solid #ddd",borderRadius:"5px",marginTop:"10px"},visitCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},loadingSpinner:{textAlign:"center",padding:"40px",color:"#11998e",fontSize:"18px"},notification:{position:"absolute",top:"20px",right:"20px",color:"white",padding:"15px 25px",borderRadius:"8px",zIndex:1001,animation:"slideIn 0.3s ease",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},subModalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1001},subModal:{background:"white",borderRadius:"15px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},formBody:{padding:"30px",overflowY:"auto"},formGroup:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"},vitalsSection:{marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},vitalsInputGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginTop:"15px"},saveButton:{width:"100%",padding:"15px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"all 0.3s",marginTop:"20px"},inputMethodSelector:{display:"flex",gap:"10px",marginBottom:"20px",padding:"10px",background:"#f8f9fa",borderRadius:"8px"},methodButton:{flex:1,padding:"12px",border:"2px solid #ddd",background:"white",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},methodButtonActive:{background:"#11998e",color:"white",borderColor:"#11998e"},medicinesSection:{marginBottom:"20px"},medicineRow:{display:"flex",gap:"10px",marginBottom:"10px",alignItems:"center"},addButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},removeButton:{background:"#ff4444",color:"white",border:"none",padding:"8px 12px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvas:{border:"2px solid #ddd",borderRadius:"8px",cursor:"crosshair",width:"100%",touchAction:"none",background:"white"},canvasControls:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},colorPicker:{width:"40px",height:"40px",border:"none",borderRadius:"5px",cursor:"pointer"},sizeSlider:{width:"100px"},canvasButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvasHint:{textAlign:"center",color:"#666",fontSize:"14px",marginTop:"10px",fontStyle:"italic"},voiceControls:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},voiceButton:{padding:"15px 30px",border:"none",borderRadius:"8px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s"},recordingIndicator:{display:"flex",alignItems:"center",gap:"10px",color:"#ff4444",fontWeight:"600"},recordingDot:{width:"12px",height:"12px",background:"#ff4444",borderRadius:"50%",animation:"pulse 1.5s infinite"},transcriptBox:{marginBottom:"20px"},transcript:{marginTop:"10px",padding:"20px",background:"white",border:"2px solid #ddd",borderRadius:"8px",minHeight:"150px",fontSize:"14px",lineHeight:"1.6",color:"#333"},voiceHint:{textAlign:"center",color:"#666",fontSize:"14px",fontStyle:"italic"}},Jm=({patientId:s,onClose:r,doctorId:c=null,doctorName:u=null,hospitalId:g=null,isHospitalView:f=!1})=>{const[y,b]=x.useState({healthRecords:[],prescriptions:[],appointments:[]}),[A,w]=x.useState(null),[T,N]=x.useState(!0),[R,$]=x.useState(null),[L,ce]=x.useState(!1),[W,se]=x.useState("summary"),[E,S]=x.useState(!1),[ae,Be]=x.useState({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""});x.useEffect(()=>{s&&(c||g)&&(rt(),c&&ve())},[s,c,g]);const rt=async()=>{N(!0);try{const q=f&&g?await My(s,g):await Ry(s,c);if(b(q),q.appointments&&q.appointments.length>0){const Fe=q.appointments[0];w({name:Fe.patientName,phone:Fe.patientPhone,email:Fe.patientEmail||"N/A"})}}catch(q){console.error("Error loading patient data:",q),alert("Failed to load patient data")}finally{N(!1)}},ve=async()=>{try{const q=await zy(s,c);q&&$(q.summary)}catch(q){console.error("Error loading cached summary:",q)}},K=async()=>{ce(!0);try{const q=await Ty(s,c);$(q.summary)}catch(q){console.error("Error generating AI summary:",q),alert("Failed to generate AI summary: "+q.message)}finally{ce(!1)}},De=async q=>{q.preventDefault();try{await Dy(s,c,{...ae,doctorName:u}),alert("Health record added successfully!"),S(!1),Be({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""}),await rt()}catch(Fe){console.error("Error adding health record:",Fe),alert("Failed to add health record")}};return T?t.jsx("div",{style:An.modal,onClick:r,children:t.jsx("div",{style:{...An.modalContent,maxWidth:"900px"},onClick:q=>q.stopPropagation(),children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Loading patient health records..."})]})})}):t.jsx("div",{style:An.modal,onClick:r,children:t.jsxs("div",{style:{...An.modalContent,maxWidth:"1000px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:q=>q.stopPropagation(),children:[t.jsx("div",{style:{borderBottom:"2px solid #11998e",paddingBottom:"1rem",marginBottom:"1rem"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Complete Health Records"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#666"},children:["Patient: ",t.jsx("strong",{children:A?.name||"Unknown"}),A?.phone&&` |  ${A.phone}`,A?.email&&` |  ${A.email}`]})]}),t.jsx("button",{onClick:r,style:{background:"#f5576c",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontWeight:"600"},children:" Close"})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:An.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#11998e"},children:y?.appointments?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Total Visits"})]}),t.jsxs("div",{style:An.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#667eea"},children:y?.prescriptions?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Prescriptions"})]}),t.jsxs("div",{style:An.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f5576c"},children:y?.healthRecords?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Health Records"})]}),t.jsxs("div",{style:An.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#38ef7d"},children:y?.appointments?.filter(q=>q.status==="completed").length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Completed"})]})]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"2px solid #e0e0e0"},children:["summary","appointments","prescriptions","records"].map(q=>t.jsx("button",{onClick:()=>se(q),style:{padding:"0.75rem 1.5rem",background:W===q?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"transparent",color:W===q?"white":"#666",border:"none",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",textTransform:"capitalize"},children:q},q))}),t.jsxs("div",{style:{flex:1,overflow:"auto",padding:"0.5rem"},children:[W==="summary"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" AI-Powered Health Summary"}),t.jsx("button",{onClick:K,disabled:L,style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:L?"not-allowed":"pointer",fontWeight:"600",opacity:L?.6:1},children:L?" Generating...":" Generate AI Summary"})]}),R?t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",border:"2px solid #667eea",whiteSpace:"pre-wrap",lineHeight:"1.8"},children:R}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:'Click "Generate AI Summary" to get an AI-powered comprehensive health analysis'})]})]}),W==="appointments"&&t.jsxs("div",{children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Appointment History"}),y?.appointments.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No appointments found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:y?.appointments.map(q=>t.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("strong",{style:{color:"#11998e"},children:[" ",q.date," at ",q.time]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:q.status==="completed"?"#38ef7d":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:q.status})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[" ",q.hospitalName||q.doctorName]}),q.reason&&t.jsxs("div",{children:[" ",q.reason]})]})]},q.id))})]}),W==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Prescription History"}),y?.prescriptions.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No prescriptions found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:y?.prescriptions.map(q=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #11998e"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#11998e"},children:[" ",q.prescriptionDate||"Date N/A"]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",q.diagnosis]}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Medications:"}),t.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:q.medications?.map((Fe,de)=>t.jsxs("li",{children:[Fe.name," - ",Fe.dosage||"N/A"," | ",Fe.frequency||"N/A"," | ",Fe.duration||"N/A"]},de))})]}),q.instructions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Instructions:"})," ",q.instructions]}),q.tests&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Tests:"})," ",q.tests]})]})]},q.id))})]}),W==="records"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" Detailed Health Records"}),t.jsx("button",{onClick:()=>S(!E),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:E?" Cancel":" Add New Record"})]}),E&&t.jsxs("form",{onSubmit:De,style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",marginBottom:"1.5rem",border:"2px solid #11998e"},children:[t.jsx("h4",{style:{marginTop:0,color:"#11998e"},children:" Add Health Record"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Chief Complaint *",value:ae.chiefComplaint,onChange:q=>Be({...ae,chiefComplaint:q.target.value}),style:An.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Blood Pressure (e.g., 120/80)",value:ae.bloodPressure,onChange:q=>Be({...ae,bloodPressure:q.target.value}),style:An.input}),t.jsx("input",{type:"text",placeholder:"Heart Rate (bpm)",value:ae.heartRate,onChange:q=>Be({...ae,heartRate:q.target.value}),style:An.input}),t.jsx("input",{type:"text",placeholder:"Temperature (F/C)",value:ae.temperature,onChange:q=>Be({...ae,temperature:q.target.value}),style:An.input}),t.jsx("input",{type:"text",placeholder:"Weight",value:ae.weight,onChange:q=>Be({...ae,weight:q.target.value}),style:An.input}),t.jsx("input",{type:"text",placeholder:"Height",value:ae.height,onChange:q=>Be({...ae,height:q.target.value}),style:An.input})]}),t.jsx("textarea",{placeholder:"Symptoms",value:ae.symptoms,onChange:q=>Be({...ae,symptoms:q.target.value}),style:{...An.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Observations",value:ae.observations,onChange:q=>Be({...ae,observations:q.target.value}),style:{...An.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Allergies",value:ae.allergies,onChange:q=>Be({...ae,allergies:q.target.value}),style:{...An.input,marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Chronic Conditions",value:ae.chronicConditions,onChange:q=>Be({...ae,chronicConditions:q.target.value}),style:{...An.input,marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Additional Notes",value:ae.notes,onChange:q=>Be({...ae,notes:q.target.value}),style:{...An.input,minHeight:"80px",marginTop:"1rem"}}),t.jsx("button",{type:"submit",style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",width:"100%"},children:" Save Health Record"})]}),y?.healthRecords?.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No detailed health records yet. Add one using the button above."}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:y?.healthRecords?.map(q=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #667eea"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#667eea"},children:[" ",q.createdAt?new Date(q.createdAt).toLocaleDateString():"N/A"," | Dr. ",q.doctorName||u]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",q.chiefComplaint]}),q.bloodPressure&&t.jsxs("div",{children:[t.jsx("strong",{children:"BP:"})," ",q.bloodPressure]}),q.heartRate&&t.jsxs("div",{children:[t.jsx("strong",{children:"Heart Rate:"})," ",q.heartRate," bpm"]}),q.temperature&&t.jsxs("div",{children:[t.jsx("strong",{children:"Temperature:"})," ",q.temperature]}),q.weight&&t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",q.weight]}),q.symptoms&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Symptoms:"})," ",q.symptoms]}),q.observations&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Observations:"})," ",q.observations]}),q.allergies&&t.jsxs("div",{style:{marginTop:"0.5rem",color:"#f5576c"},children:[t.jsx("strong",{children:" Allergies:"})," ",q.allergies]}),q.chronicConditions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",q.chronicConditions]}),q.notes&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Notes:"})," ",q.notes]})]})]},q.id))})]})]})]})})},An={modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},modalContent:{background:"white",borderRadius:"15px",padding:"2rem",width:"100%",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},statBox:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",textAlign:"center",border:"1px solid #e0e0e0"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"1rem",boxSizing:"border-box"}},Jn="/assets/billing_qr-D9aYMsrW.png",$m=({doctorId:s=null,doctorProfile:r=null,isHospitalView:c=!1})=>{const{currentUser:u,userProfile:g}=Ca(),f=s||u?.uid,y=r||g,[b,A]=x.useState("overview"),[w,T]=x.useState(!1),[N,R]=x.useState([]),[$,L]=x.useState({}),[ce,W]=x.useState({}),[se,E]=x.useState(!0),[S,ae]=x.useState(null),[Be,rt]=x.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[ve,K]=x.useState(""),[De,q]=x.useState([]),[Fe,de]=x.useState(!1),[dt,ht]=x.useState(!1),[Ke,I]=x.useState(null),[re,fe]=x.useState(!1),[Je,qe]=x.useState(!1),[Ae,We]=x.useState(null),[$e,ft]=x.useState(!1),[Ie,at]=x.useState(null),[Dn,Qt]=x.useState(new Date().toISOString().split("T")[0]),[Kt,lt]=x.useState(!1),[en,At]=x.useState(!1),[tn,k]=x.useState(""),[Te,He]=x.useState([]),[Ge,ne]=x.useState(!1),[St,Ot]=x.useState({displayName:"",specialization:"",consultationFee:"",phone:"",country:"",state:"",city:"",address:""}),[wt,jn]=x.useState({date:new Date().toISOString().split("T")[0],startTime:"12:00",endTime:"13:00",reason:"Lunch Break"}),[zi,rn]=x.useState(!1),[Sn,et]=x.useState({slotDuration:30,workingDays:[1,2,3,4,5],dayWiseHours:{1:{enabled:!0,start:"09:00",end:"17:00"},2:{enabled:!0,start:"09:00",end:"17:00"},3:{enabled:!0,start:"09:00",end:"17:00"},4:{enabled:!0,start:"09:00",end:"17:00"},5:{enabled:!0,start:"09:00",end:"17:00"},6:{enabled:!1,start:"09:00",end:"17:00"},7:{enabled:!1,start:"09:00",end:"17:00"}}}),[_,X]=x.useState(!1),[ge,ke]=x.useState({date:new Date().toISOString().split("T")[0],reason:""}),[me,Ee]=x.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[ot,Nt]=x.useState(null);x.useEffect(()=>{const h=window.matchMedia("(max-width: 480px)"),z=Y=>T(Y.matches);return T(h.matches),h.addEventListener?h.addEventListener("change",z):h.addListener(z),()=>{h.removeEventListener?h.removeEventListener("change",z):h.removeListener(z)}},[]);const[Ue,dn]=x.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[ji,In]=x.useState(""),[ei,wn]=x.useState(!1),[nn,gt]=x.useState(!1),[an,mn]=x.useState(""),[Ye,Si]=x.useState(!1),[Ri,ti]=x.useState(null);x.useEffect(()=>{const h=new Image;h.src=Jn,h.onload=()=>{try{const z=document.createElement("canvas");z.width=h.width,z.height=h.height;const Y=z.getContext("2d");Y.drawImage(h,0,0);const le=Y.getImageData(0,0,z.width,z.height).data;let pe=z.width,tt=z.height,we=0,ze=0;const st=250;for(let kt=0;kt<z.height;kt++)for(let Mt=0;Mt<z.width;Mt++){const Lt=(kt*z.width+Mt)*4,Pt=le[Lt],Rn=le[Lt+1],cn=le[Lt+2];le[Lt+3]>10&&!(Pt>st&&Rn>st&&cn>st)&&(Mt<pe&&(pe=Mt),kt<tt&&(tt=kt),Mt>we&&(we=Mt),kt>ze&&(ze=kt))}if(pe>we||tt>ze){ti(Jn);return}const bt=Math.max(8,Math.floor(Math.min(z.width,z.height)*.02));pe=Math.max(0,pe-bt),tt=Math.max(0,tt-bt),we=Math.min(z.width,we+bt),ze=Math.min(z.height,ze+bt);const vt=we-pe+1,_e=ze-tt+1,ln=document.createElement("canvas");ln.width=vt,ln.height=_e,ln.getContext("2d").drawImage(z,pe,tt,vt,_e,0,0,vt,_e);const ut=ln.toDataURL("image/png");ti(ut)}catch(z){console.error("QR crop failed",z),ti(Jn)}},h.onerror=()=>ti(Jn)},[Jn]),x.useEffect(()=>{f&&Tn()},[f]),x.useEffect(()=>{y&&Ot({displayName:y.displayName||"",specialization:y.specialization||"",consultationFee:y.consultationFee||"",phone:y.phone||"",country:y.country||"",state:y.state||"",city:y.city||"",address:y.address||""})},[y]),x.useEffect(()=>{b==="usage"&&f&&!y?.hospitalId&&ie()},[b,f,y?.hospitalId]),x.useEffect(()=>{b==="billing"&&f&&!y?.hospitalId&&je()},[b,f,y?.hospitalId]);const Tn=async()=>{E(!0);try{const[h,z]=await Promise.all([ay(f),Vd(f)]);console.log(" Dashboard Data Loaded:",{appointmentsCount:h.length,appointments:h,sampleAppointment:h[0]});const Y=await Promise.all(h.map(async ze=>{if(ze.patientName&&ze.patientPhone)return ze;const st=ze.patientId||ze.userId||ze.patientUid;if(st)try{const bt=Se(V,"users",st),vt=await Gt(bt);if(vt.exists()){const _e=vt.data();return{...ze,patientId:st,patientName:_e.displayName||_e.name||_e.email,patientPhone:_e.phone||_e.phoneNumber||"N/A",patientEmail:_e.email}}}catch(bt){console.error("Error fetching patient data for:",st,bt)}return ze}));console.log(" Enriched Appointments:",{originalCount:h.length,enrichedCount:Y.length,sampleEnriched:Y[0]}),R(Y),L(z);const he=new Date().toISOString().split("T")[0],le=Y.filter(ze=>ze.date===he),pe=Y.filter(ze=>ze.status==="completed"),tt=Y.filter(ze=>ze.prescriptionId).length,we=new Set(Y.map(ze=>ze.patientId||ze.userId||ze.patientUid||ze.patientPhone||ze.userPhone).filter(ze=>ze));console.log(" Calculated Stats:",{totalAppointments:Y.length,uniquePatientIds:Array.from(we),patientCount:we.size}),W({totalAppointments:Y.length,todayAppointments:le.length,completedAppointments:pe.length,prescriptionCount:tt,patientCount:we.size})}catch(h){console.error("Error loading dashboard data:",h),Ct("Error loading data","error")}finally{E(!1)}},Ct=(h,z="success")=>{Nt({message:h,type:z}),setTimeout(()=>Nt(null),3e3)};x.useEffect(()=>{const h=new Date,z=h.getFullYear(),Y=String(h.getMonth()+1).padStart(2,"0");K(`${z}-${Y}`)},[]),x.useEffect(()=>{b==="payments"&&ve&&f&&C()},[b,ve,f]);const C=async()=>{try{console.log(" Loading payment data for doctor:",f,"Month:",ve),E(!0),console.log(" Loading billing config...");const h=Se(V,"config","billing"),z=await Gt(h),Y=z.exists()?z.data():Be;z.exists()?(console.log(" Billing config loaded:",z.data()),rt(Y)):console.log(" No billing config found"),console.log(" Loading doctor profile...");const he=Se(V,"users",f),pe=(await Gt(he)).data();if(console.log(" Doctor profile loaded:",pe),pe.hospitalId){console.log(" Hospital-affiliated doctor, payments managed by hospital"),ae({isHospitalDoctor:!0,message:"Your payments are managed by your hospital"});return}console.log(" Loading appointments...");const tt=xe(V,"appointments"),we=Oe(tt,ye("doctorId","==",f)),ze=await Re(we),st=[],bt=`${ve}-01`,vt=O(ve);console.log(" Filtering appointments between",bt,"and",vt),ze.forEach(Bn=>{const On=Bn.data();On.date&&On.date>=bt&&On.date<vt&&st.push({id:Bn.id,...On})}),console.log(` Found ${st.length} appointments for ${ve}`),console.log(" Loading prescriptions...");const _e=xe(V,"prescriptions"),ln=Oe(_e,ye("doctorId","==",f)),Bt=await Re(ln),ut=[];Bt.forEach(Bn=>{const On=Bn.data();On.createdAt&&On.createdAt.startsWith(ve)&&ut.push({id:Bn.id,...On})}),console.log(` Found ${ut.length} prescriptions for ${ve}`),q(ut),console.log(" Calculating cost (doctor pays for app usage)...");const kt=y?.country||pe?.country||"default",Mt=qa({country:kt,customRates:pe.customRates},Y),Lt=pe.pricingModel||"full",Pt=pe.discountPercentage||0;console.log(" Doctor country:",kt),console.log(" Using rates:",Mt),console.log(" Pricing model:",Lt,Pt+"% discount");let Rn=st.length*(Mt.appointmentCost||0),cn=ut.length*(Mt.prescriptionCost||0),on=Rn+cn;if(Lt==="free")Rn=0,cn=0,on=0;else if(Lt==="reduced"){const Bn=Pt/100;Rn=Rn*(1-Bn),cn=cn*(1-Bn),on=on*(1-Bn)}const Ln=pe.paidAmount||0,wl=Math.max(0,on-Ln);console.log(" Cost breakdown:",{appointments:st.length,appointmentCost:Rn,prescriptions:ut.length,prescriptionCost:cn,totalCost:on,paid:Ln,pending:wl,pricingModel:Lt,discountPercentage:Pt}),ae({appointments:st.length,prescriptions:ut.length,appointmentCost:Rn,prescriptionCost:cn,totalCost:on,pricingModel:Lt,discountPercentage:Pt,paid:Ln,pending:wl,rates:Mt,currency:Mt.currency||"GBP",symbol:Mt.symbol||"",country:y?.country||pe?.country||"default",bankDetails:pe.bankDetails||{},upiId:pe.upiId||"",lastPaymentDate:pe.lastPaymentDate,lastPaymentAmount:pe.lastPaymentAmount}),console.log(" Payment info set successfully")}catch(h){console.error(" Error loading payment data:",h),Ct("Error loading payment data: "+h.message,"error"),ae({error:h.message})}finally{E(!1)}},O=h=>{const[z,Y]=h.split("-").map(Number),he=Y===12?1:Y+1;return`${Y===12?z+1:z}-${String(he).padStart(2,"0")}-01`},G=h=>{console.log(" Getting payment methods for country:",h);const z=[];return h==="India"||h==="IN"?z.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):h==="United States"||h==="US"||h==="USA"?z.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):h==="United Kingdom"||h==="UK"||h==="GB"?z.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):h==="Canada"||h==="CA"?z.push("PayPal","Stripe","Interac","Bank Transfer","Check"):h==="Australia"||h==="AU"?z.push("PayPal","Stripe","BPAY","Bank Transfer"):z.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",z),z},ie=async()=>{try{E(!0),console.log(" Loading usage data for doctor:",f);let h={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const Bt=Se(V,"config","billing"),ut=await Gt(Bt);ut.exists()&&(h=ut.data(),rt(h))}catch(Bt){console.warn("Config not found, using defaults:",Bt)}const z=Se(V,"users",f),Y=await Gt(z);if(!Y.exists())throw new Error("Doctor profile not found");const he=Y.data(),le=xe(V,"appointments"),pe=Oe(le,ye("doctorId","==",f)),we=(await Re(pe)).docs.map(Bt=>({id:Bt.id,...Bt.data()})),ze=xe(V,"prescriptions"),st=Oe(ze,ye("doctorId","==",f)),vt=(await Re(st)).docs.map(Bt=>({id:Bt.id,...Bt.data()})),_e=y?.country||he?.country||"default",ln=qa({country:_e,customRates:he?.customRates},h);ae({totalAppointments:we.length,totalPrescriptions:vt.length,appointmentsByMonth:Me(we),prescriptionsByMonth:Me(vt),pricingModel:he?.pricingModel||"full",discountPercentage:he?.discountPercentage||0,currency:ln.currency||"GBP",symbol:ln.symbol||"",rates:ln})}catch(h){console.error("Error loading usage data:",h),Ct("Error loading usage data","error")}finally{E(!1)}},je=async()=>{try{E(!0),console.log(" Loading billing data for doctor:",f);let h={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const on=Se(V,"config","billing"),Ln=await Gt(on);Ln.exists()&&(h=Ln.data(),rt(h))}catch(on){console.warn("Config not found, using defaults:",on)}const z=Se(V,"users",f),Y=await Gt(z);if(!Y.exists())throw new Error("Doctor profile not found");const he=Y.data(),le=xe(V,"appointments"),pe=Oe(le,ye("doctorId","==",f)),we=(await Re(pe)).size,ze=xe(V,"prescriptions"),st=Oe(ze,ye("doctorId","==",f)),vt=(await Re(st)).size;let _e=[];try{const on=xe(V,"payments"),Ln=Oe(on,ye("doctorId","==",f));_e=(await Re(Ln)).docs.map(Bn=>({id:Bn.id,...Bn.data()})).sort((Bn,On)=>{const wi=Bn.createdAt?new Date(Bn.createdAt):new Date(0);return(On.createdAt?new Date(On.createdAt):new Date(0))-wi})}catch(on){console.warn("No payment history found:",on)}const ln=y?.country||he?.country||"default",Bt=qa({country:ln,customRates:he?.customRates},h),ut=he?.pricingModel||"full",kt=he?.discountPercentage||0;let Mt=we*(Bt.appointmentCost||0),Lt=vt*(Bt.prescriptionCost||0),Pt=Mt+Lt;if(ut==="free")Mt=0,Lt=0,Pt=0;else if(ut==="reduced"){const on=kt/100;Mt=Mt*(1-on),Lt=Lt*(1-on),Pt=Pt*(1-on)}const Rn=_e.reduce((on,Ln)=>on+(Ln.status==="completed"&&Ln.amount||0),0),cn=Math.max(0,Pt-Rn);dn({totalAppointments:we,totalPrescriptions:vt,appointmentCost:Mt,prescriptionCost:Lt,totalCost:Pt,totalPaid:Rn,pendingAmount:cn,paymentHistory:_e}),ae({totalAppointments:we,totalPrescriptions:vt,appointmentCost:Mt,prescriptionCost:Lt,totalCost:Pt,paid:Rn,pending:cn,pricingModel:ut,discountPercentage:kt,rates:Bt,currency:Bt.currency||"GBP",symbol:Bt.symbol||"",country:y?.country||he?.country||"default",paymentHistory:_e,paymentDetails:h.paymentDetails||{},countryInstructions:h.countrySpecificInstructions||{}}),console.log(" Billing data loaded successfully")}catch(h){console.error("Error loading billing data:",h),Ct("Error loading billing data","error")}finally{E(!1)}},Me=h=>{const z={};return h.forEach(Y=>{const he=Y.date||Y.createdAt||"";if(he){const le=he.substring(0,7);z[le]=(z[le]||0)+1}}),z},Dt=async h=>{if(h.preventDefault(),!an){Ct("Please select a payment method","error");return}const z=parseFloat(ji);if(!z||z<=0){Ct("Please enter a valid amount","error");return}if(z>Ue.pendingAmount){Ct("Amount cannot exceed pending balance","error");return}try{gt(!0);const Y={doctorId:f,doctorName:y.displayName,amount:z,currency:S.currency,paymentMethod:an,status:"pending",createdAt:new Date().toISOString(),createdBy:u.uid,type:"partial",description:`Partial payment for app usage - ${Ue.totalAppointments} appointments, ${Ue.totalPrescriptions} prescriptions`},he=xe(V,"payments");await ea(he,Y),Ct("Payment request submitted successfully! Admin will verify and process.","success"),wn(!1),In(""),mn(""),je()}catch(Y){console.error("Error processing payment:",Y),Ct("Failed to process payment","error")}finally{gt(!1)}},Xe=()=>{In(""),mn(""),wn(!0)},Ft=async h=>{h.preventDefault();try{await Xm(f,St),Ct("Profile updated successfully!"),de(!1),c||window.location.reload()}catch(z){console.error("Error updating profile:",z),Ct("Failed to update profile","error")}},hn=async h=>{h.preventDefault();try{const z=N.filter(Y=>Y.date===wt.date&&Y.time>=wt.startTime&&Y.time<wt.endTime&&Y.status!=="cancelled"&&Y.status!=="completed");if(z.length>0){const Y=z.map(le=>`${le.patientName||le.userName} at ${le.time}`).join(", "),he=` WARNING: You have ${z.length} appointment(s) during this time:

${Y}

You should cancel or reschedule these appointments before blocking this time. Do you still want to block this time?`;if(!window.confirm(he))return}await sy(f,wt),z.length>0?Ct(`Time blocked. Please contact ${z.length} patient(s) to reschedule!`,"error"):Ct("Time blocked successfully!"),ht(!1),Tn()}catch(z){console.error("Error blocking time:",z),Ct("Failed to block time","error")}},ui=async h=>{try{await ry(f,h),Ct("Time unblocked successfully!"),Tn()}catch(z){console.error("Error unblocking time:",z),Ct("Failed to unblock time","error")}},Ve=async h=>{h.preventDefault();try{const z=Object.keys(Sn.dayWiseHours).filter(pe=>Sn.dayWiseHours[pe].enabled).map(pe=>parseInt(pe)),Y=Object.values(Sn.dayWiseHours).filter(pe=>pe.enabled),he=Y.length>0?{start:Y[0].start,end:Y[0].end}:{start:"09:00",end:"17:00"},le={...$,slotDuration:Sn.slotDuration,workingDays:z,workingHours:he,dayWiseHours:Sn.dayWiseHours};await Od(f,le),L(le),Ct("Availability settings updated successfully!"),rn(!1),Tn()}catch(z){console.error("Error updating slot config:",z),Ct("Failed to update availability settings","error")}},ni=async h=>{h.preventDefault();try{const z=N.filter(he=>he.date===ge.date&&he.status!=="cancelled"&&he.status!=="completed");if(z.length>0){const he=z.map(pe=>pe.patientName||pe.userName).join(", "),le=` WARNING: You have ${z.length} appointment(s) scheduled on ${ge.date}.

Patients: ${he}

You should cancel or reschedule these appointments before marking this date as leave. Do you still want to mark this date as absent?`;if(!window.confirm(le))return}const Y={...$,unavailableDates:[...$.unavailableDates||[],{date:ge.date,reason:ge.reason,id:Date.now().toString()}]};await Od(f,Y),L(Y),z.length>0?Ct(`Date marked as absent. Please contact ${z.length} patient(s) to reschedule!`,"error"):Ct("Date marked as absent successfully!"),X(!1),ke({date:new Date().toISOString().split("T")[0],reason:""}),Tn()}catch(z){console.error("Error marking absent:",z),Ct("Failed to mark date as absent","error")}},Tt=async h=>{try{const z={...$,unavailableDates:($.unavailableDates||[]).filter(Y=>Y.id!==h)};await Od(f,z),L(z),Ct("Absent date removed successfully!"),Tn()}catch(z){console.error("Error removing absent date:",z),Ct("Failed to remove absent date","error")}},Gn=h=>{et(z=>({...z,dayWiseHours:{...z.dayWiseHours,[h]:{...z.dayWiseHours[h],enabled:!z.dayWiseHours[h].enabled}}}))},Un=(h,z,Y)=>{et(he=>({...he,dayWiseHours:{...he.dayWiseHours,[h]:{...he.dayWiseHours[h],[z]:Y}}}))},Wn=h=>{We(h),Ee({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),qe(!0)},Bi=()=>{Ee(h=>({...h,medications:[...h.medications,{name:"",dosage:"",frequency:"",duration:""}]}))},ki=h=>{Ee(z=>({...z,medications:z.medications.filter((Y,he)=>he!==h)}))},pi=(h,z,Y)=>{Ee(he=>({...he,medications:he.medications.map((le,pe)=>pe===h?{...le,[z]:Y}:le)}))},Ei=async h=>{h.preventDefault();try{const z={appointmentId:Ae.id,patientId:Ae.patientId||"",patientName:Ae.patientName,patientPhone:Ae.patientPhone,doctorId:f,doctorName:y.displayName,hospitalId:y.hospitalId||"",diagnosis:me.diagnosis,medications:me.medications.filter(le=>le.name),tests:me.tests,instructions:me.instructions,followUpDate:me.followUpDate,prescribedDate:new Date().toISOString(),prescribedBy:f},Y=await ea(xe(V,"prescriptions"),z),he=Se(V,"appointments",Ae.id);await Zt(he,{status:"completed",prescriptionId:Y.id,completedAt:new Date().toISOString()}),Ct("Prescription saved successfully!"),qe(!1),Tn()}catch(z){console.error("Error saving prescription:",z),Ct("Failed to save prescription","error")}},Q=async()=>{if(!tn.trim()){He([]);return}ne(!0);try{console.log("Searching for patients:",tn);const h=await Py(tn);console.log("Search results:",h);const z=h.map(Y=>({id:Y.id,patientId:Y.id,phone:Y.phone,name:Y.name,dob:Y.dob,age:Y.age,gender:Y.gender}));He(z),z.length===0&&Ct("No patients found","error")}catch(h){console.error("Error searching patients:",h),Ct("Failed to search patients","error")}finally{ne(!1)}},v=h=>{const z=N.find(Y=>Y.patientName===h.patient&&(Y.time===h.time||Y.appointmentTime===h.time)&&(Y.date===Ie.date||Y.appointmentDate===Ie.date)||Y.id===h.appointmentId);z?(We(z),At(!0)):(We({id:h.appointmentId,patientName:h.patient,patientPhone:h.phone,patientId:h.patientId,date:Ie.date,time:h.time,status:h.status||"confirmed"}),At(!0))},oe=()=>{Ae&&Ae.patientId&&(I(Ae.patientId),lt(!0),At(!1))},Pe=()=>{Ae&&(At(!1),Wn(Ae))},ct=async h=>{try{const z=Xt($,h),Y=xe(V,"appointments"),he=Oe(Y,ye("doctorId","==",f),ye("date","==",h)),pe=(await Re(he)).docs.map(tt=>{const we=tt.data();return{time:we.time||we.appointmentTime,patient:we.patientName,phone:we.patientPhone,patientId:we.patientId,appointmentId:tt.id,status:we.status}});at({date:h,slots:z,bookedSlots:pe}),ft(!0)}catch(z){console.error("Error viewing slots:",z),Ct("Failed to load slots","error")}},Xt=(h,z)=>{if(!h||!z)return[];const{workingHours:Y,slotDuration:he,workingDays:le,unavailableDates:pe,blockedTimeSlots:tt}=h;if(pe&&pe.some(Mt=>Mt.date===z))return[];const we=new Date(z).getDay(),ze=we===0?7:we;if(!le||!le.includes(ze))return[];const st=[],[bt,vt]=(Y?.start||"09:00").split(":").map(Number),[_e,ln]=(Y?.end||"17:00").split(":").map(Number);let Bt=bt*60+vt;const ut=_e*60+ln,kt=he||30;for(;Bt<ut;){const Mt=Math.floor(Bt/60),Lt=Bt%60,Pt=`${String(Mt).padStart(2,"0")}:${String(Lt).padStart(2,"0")}`;tt&&tt.some(cn=>cn.date===z&&(cn.time===Pt||cn.startTime&&cn.endTime&&Pt>=cn.startTime&&Pt<cn.endTime))||st.push(Pt),Bt+=kt}return st},ee={container:{minHeight:"100vh",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",padding:"2rem"},header:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"15px",padding:"1.5rem",color:"white",boxShadow:"0 8px 32px rgba(17, 153, 142, 0.3)",transition:"transform 0.3s ease"},tabContainer:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},tab:{padding:"0.75rem 1.5rem",borderRadius:"10px",border:"none",background:"rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s ease"},activeTab:{background:"white",color:"#11998e"},card:{background:"white",borderRadius:"15px",padding:"1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",marginBottom:"1.5rem"},appointmentCard:{background:"white",borderRadius:"15px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",borderLeft:"4px solid #11998e",transition:"transform 0.3s ease"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},primaryButton:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},secondaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},dangerButton:{background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},modalContent:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},input:{width:"100%",padding:"0.75rem",borderRadius:"10px",border:"2px solid #e0e0e0",fontSize:"1rem",marginBottom:"1rem",transition:"border-color 0.3s ease"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"10px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease"}};return se||!f||!y?t.jsx("div",{style:ee.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:ee.container,children:[ot&&t.jsx("div",{style:{...ee.notification,background:ot.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:ot.message}),t.jsxs("div",{style:ee.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" Dr. ",y?.displayName||"Doctor Dashboard"]}),t.jsxs("p",{style:{margin:0,color:"#666"},children:[y?.specialization||"Medical Professional","  Consultation Fee: $",y?.consultationFee||"Not set"]})]}),t.jsxs("div",{style:ee.statsGrid,children:[t.jsxs("div",{style:ee.statCard,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ce.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...ee.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ce.completedAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Completed"})]}),t.jsxs("div",{style:{...ee.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ce.patientCount||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Patients"})]}),t.jsxs("div",{style:{...ee.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:ce.completedAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Consultations Done"})]})]}),t.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:t.jsx("button",{style:{...ee.button,background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",color:"white"},onClick:()=>de(!0),children:" Update Profile"})}),t.jsx("div",{style:ee.tabContainer,children:w?t.jsx("select",{value:b,onChange:h=>A(h.target.value),style:{padding:"0.5rem",borderRadius:"8px",fontSize:"1rem"},"aria-label":"Select dashboard tab",children:["overview","appointments","availability","patients",...y?.hospitalId?[]:["usage","billing"]].map(h=>t.jsx("option",{value:h,children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}):["overview","appointments","availability","patients",...y?.hospitalId?[]:["usage","billing"]].map(h=>t.jsx("button",{style:{...ee.tab,...b===h?ee.activeTab:{}},onClick:()=>A(h),children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}),b==="appointments"&&t.jsxs("div",{style:ee.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Your Appointments"}),N.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:N.map(h=>t.jsx("div",{style:{...ee.appointmentCard,borderLeft:`4px solid ${h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsxs("strong",{style:{fontSize:"1.1rem",color:"#333"},children:[" ",h.patientName]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:h.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Date:"})," ",h.date||h.appointmentDate]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",h.time||h.appointmentTime]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",h.patientPhone]}),h.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",h.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.status!=="completed"&&t.jsx("button",{onClick:()=>Wn(h),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),t.jsx("button",{onClick:()=>{console.log("=== View Record Clicked ==="),console.log("Full appointment data:",h),console.log("Available fields:",Object.keys(h));const z=h.patientId||h.userId||h.patientUid||h.patient_id||h.user_id||h.patientPhone||h.userPhone||h.patientEmail||h.email||h.patientName;if(console.log("Extracted Patient ID:",z),console.log("Doctor ID:",f),console.log("Doctor Name:",y?.displayName||y?.name),!z){const Y=`Patient ID not found in appointment data.

Available fields: ${Object.keys(h).join(", ")}

Please check the console for full appointment data.`;alert(Y),console.error("Cannot find patient ID. Appointment structure:",h);return}console.log(" Opening modal with patient ID:",z),I(z),fe(!0)},style:{padding:"0.6rem 1.2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Patient Records"})]})]})},h.id))})]}),b==="availability"&&t.jsxs("div",{style:ee.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Manage Availability"}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{et({slotDuration:$.slotDuration||30,dayWiseHours:{1:{enabled:$.workingDays?.includes(1),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},2:{enabled:$.workingDays?.includes(2),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},3:{enabled:$.workingDays?.includes(3),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},4:{enabled:$.workingDays?.includes(4),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},5:{enabled:$.workingDays?.includes(5),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},6:{enabled:$.workingDays?.includes(6),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"},7:{enabled:$.workingDays?.includes(7),start:$.workingHours?.start||"09:00",end:$.workingHours?.end||"17:00"}}}),rn(!0)},style:{...ee.button,...ee.primaryButton},children:" Configure Slots & Hours"}),t.jsx("button",{style:{...ee.button,...ee.secondaryButton},onClick:()=>ht(!0),children:" Block Time"}),t.jsx("button",{style:{...ee.button,background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white"},onClick:()=>X(!0),children:" Mark Leave/Absent"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{color:"#333",marginTop:0},children:" View Slots for a Date"}),t.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("input",{type:"date",value:Dn,onChange:h=>Qt(h.target.value),style:{...ee.input,marginBottom:0,flex:"1",minWidth:"200px"}}),t.jsx("button",{onClick:()=>ct(Dn),style:{...ee.button,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:" View Slots"})]})]}),Ie&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{children:[" Slots for ",Ie.date]}),t.jsx("button",{onClick:()=>at(null),style:{padding:"0.5rem 1rem",background:"#e0e0e0",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"Close"})]}),Ie.slots.length===0?t.jsx("div",{style:{padding:"2rem",background:$.unavailableDates?.some(h=>h.date===Ie.date)?"#fff3cd":"#fee",borderRadius:"10px",textAlign:"center",color:$.unavailableDates?.some(h=>h.date===Ie.date)?"#856404":"#c33",border:$.unavailableDates?.some(h=>h.date===Ie.date)?"2px solid #ffc107":"2px solid #f5c6cb"},children:$.unavailableDates?.some(h=>h.date===Ie.date)?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"Doctor is on Leave"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:$.unavailableDates.find(h=>h.date===Ie.date)?.reason||"No appointments can be booked on this date"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"No Working Slots Available"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:"This is not a working day"})]})}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem"},children:Ie.slots.map(h=>{const z=Ie.bookedSlots.find(Y=>Y.time===h);return t.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",border:z?"2px solid #38ef7d":"2px solid #e0e0e0",background:z?"linear-gradient(135deg, rgba(17, 153, 142, 0.1) 0%, rgba(56, 239, 125, 0.1) 100%)":"white",textAlign:"center",cursor:z?"pointer":"default",transition:"all 0.3s ease",position:"relative"},onClick:()=>z&&v(z),onMouseEnter:Y=>{z&&(Y.currentTarget.style.transform="translateY(-4px)",Y.currentTarget.style.boxShadow="0 4px 12px rgba(17, 153, 142, 0.3)")},onMouseLeave:Y=>{z&&(Y.currentTarget.style.transform="translateY(0)",Y.currentTarget.style.boxShadow="none")},children:[t.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:z?"#11998e":"#333",marginBottom:"0.5rem"},children:[" ",h]}),z?t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#38ef7d",color:"white",borderRadius:"5px",marginBottom:"0.5rem",fontWeight:"600"},children:"BOOKED"}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",color:"#333"},children:[" ",z.patient]}),t.jsxs("div",{style:{fontSize:"0.8rem"},children:[" ",z.phone]})]}),t.jsx("div",{style:{fontSize:"0.7rem",color:"#11998e",fontWeight:"600",marginTop:"0.5rem",padding:"0.3rem",background:"rgba(17, 153, 142, 0.1)",borderRadius:"4px"},children:"Click for records"})]}):t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#e0e0e0",color:"#666",borderRadius:"5px",fontWeight:"600"},children:"AVAILABLE"})]},h)})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{style:{color:"#333"},children:" Current Configuration"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Slot Duration"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"700"},children:[$.slotDuration||30," min"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Working Hours"}),t.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"700"},children:[$.workingHours?.start||"09:00"," - ",$.workingHours?.end||"17:00"]})]})]})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{style:{color:"#333"},children:" Working Days"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"1rem"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((h,z)=>t.jsx("div",{style:{padding:"0.75rem 1.5rem",borderRadius:"10px",background:$.workingDays?.includes(z+1)?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"#e0e0e0",color:$.workingDays?.includes(z+1)?"white":"#666",fontWeight:"600",fontSize:"1rem"},children:h},h))})]}),$.blockedTimeSlots&&$.blockedTimeSlots.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Blocked Time Slots"}),$.blockedTimeSlots.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date})," | ",h.startTime," - ",h.endTime,t.jsx("br",{}),t.jsx("small",{children:h.reason})]}),t.jsx("button",{style:{...ee.button,...ee.dangerButton},onClick:()=>ui(h.id),children:"Unblock"})]},h.id))]}),$.unavailableDates&&$.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Absent Dates"}),$.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#ffe5e5",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffcccc"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("small",{children:h.reason})]})]}),t.jsx("button",{style:{...ee.button,...ee.dangerButton},onClick:()=>Tt(h.id),children:"Remove"})]},h.id))]})]}),b==="patients"&&t.jsxs("div",{style:ee.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" My Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and manage your patient records and prescriptions"}),t.jsx("div",{style:{marginBottom:"2rem"},children:t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by name, phone, or patient ID...",value:tn,onChange:h=>k(h.target.value),onKeyPress:h=>h.key==="Enter"&&Q(),style:{...ee.input,flex:1}}),t.jsx("button",{onClick:Q,disabled:Ge,style:{...ee.button,minWidth:"120px",background:Ge?"#ccc":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:Ge?" Searching...":" Search"})]})}),Te.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",marginBottom:"1rem"},children:["Search Results (",Te.length,")"]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:Te.map(h=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #667eea"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},children:[" ",h.name]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem"},children:[" ",h.phone,h.email&&t.jsxs(t.Fragment,{children:[" |  ",h.email]})]})]}),t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Search ==="),console.log("Patient:",h),console.log("Patient ID:",h.id),!h.id){alert("Patient ID not found");return}I(h.id),fe(!0),console.log("Modal state updated")},style:ee.button,children:" View Records"})]})},h.id))}),t.jsx("button",{onClick:()=>He([]),style:{...ee.button,marginTop:"1rem",background:"#e0e0e0",color:"#333"},children:"Clear Search Results"})]}),t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"All My Patients"}),(()=>{console.log("Patients Tab - Total appointments:",N.length),console.log("Patients Tab - Appointments data:",N);const h={};N.forEach(le=>{const pe=le.patientId||le.userId||le.patientUid,tt=le.patientPhone||le.userPhone,we=pe||tt,ze=le.patientName||le.userName||"Unknown Patient";if(console.log("Processing appointment:",{id:le.id,actualUserId:pe,patientKey:we,patientName:ze,patientPhone:tt}),we&&!h[we]&&(h[we]={id:we,userId:pe,name:ze,phone:tt||"N/A",appointments:[],lastVisit:le.date,completedVisits:0,upcomingVisits:0}),we){h[we].appointments.push(le),le.status==="completed"&&h[we].completedVisits++;const st=new Date().toISOString().split("T")[0];le.date>=st&&le.status!=="completed"&&le.status!=="cancelled"&&h[we].upcomingVisits++,le.date>h[we].lastVisit&&(h[we].lastVisit=le.date)}});const z=Object.values(h);console.log("Patients Tab - Unique patients found:",z.length),console.log("Patients Tab - Patients list:",z);const he=z.sort((le,pe)=>new Date(pe.lastVisit)-new Date(le.lastVisit)).slice(0,5);return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#11998e"},children:["Total: ",z.length," ",z.length===1?"Patient":"Patients"]}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.25rem"},children:["Showing ",Math.min(5,z.length)," most recent ",z.length>5?"(use search to find others)":""]})]}),he.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),N.length>0?t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#e74c3c"},children:t.jsxs("strong",{children:["Found ",N.length," appointments but no patient data!"]})}),t.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"1rem"},children:"This means appointments don't have patient information (patientId, patientName, patientPhone)."}),t.jsx("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",textAlign:"left",maxWidth:"600px",margin:"0 auto"},children:t.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"#856404"},children:[t.jsx("strong",{children:"Check browser console for details:"}),t.jsx("br",{}),"- Open Developer Tools (F12)",t.jsx("br",{}),'- Look for "Patients Tab" logs',t.jsx("br",{}),"- Check what fields are in your appointments"]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"No patients yet"}),t.jsx("p",{style:{fontSize:"0.9rem"},children:"Patients will appear here after they book appointments with you"})]})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:he.map(le=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:t.jsxs("strong",{style:{fontSize:"1.2rem",color:"#333"},children:[" ",le.name]})}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.8"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",le.phone]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Last Visit:"})," ",le.lastVisit]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Completed Visits:"})," ",le.completedVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Upcoming Visits:"})," ",le.upcomingVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Total Appointments:"})," ",le.appointments.length]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Patient List ==="),console.log("Patient:",le),console.log("Patient ID:",le.id),!le.id){alert("Patient ID not found");return}I(le.id),fe(!0),console.log("Modal state updated")},style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Records"}),le.upcomingVisits>0&&le.appointments.filter(pe=>pe.date>=new Date().toISOString().split("T")[0]&&pe.status!=="completed").slice(0,1).map(pe=>t.jsx("button",{onClick:()=>Wn(pe),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"},pe.id))]})]})},le.id))})]})})()]}),b==="payments"&&t.jsxs("div",{style:ee.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Payments & Earnings"}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("label",{style:{fontWeight:"600",marginRight:"1rem"},children:"Select Month:"}),t.jsx("input",{type:"month",value:ve,onChange:h=>K(h.target.value),style:ee.input})]}),S?.isHospitalDoctor?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#667eea"},children:"Hospital-Affiliated Doctor"}),t.jsx("p",{style:{color:"#666"},children:S.message}),t.jsx("p",{style:{color:"#999",marginTop:"1rem"},children:"All your payments are processed and managed by your hospital administration."})]}):S?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:S.pricingModel==="free"?"#e8f5e9":S.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:S.pricingModel==="free"?"#2e7d32":S.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[S.pricingModel==="free"&&" Free + Ads",S.pricingModel==="reduced"&&` Reduced Rate (${S.discountPercentage}% off)`,S.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[S.pricingModel==="free"&&"You use the app completely FREE! Ad revenue funds your access.",S.pricingModel==="reduced"&&`You get ${S.discountPercentage}% discount on all fees. Ads help reduce your costs.`,S.pricingModel==="full"&&"Premium tier with no ads. You pay standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Cost (App Usage)"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[S.symbol,S.totalCost.toFixed(2)]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Due Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[S.symbol,S.pending.toFixed(2)]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[S.symbol,S.paid.toFixed(2)]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown (App Usage)"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",S.appointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[S.symbol,S.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",S.prescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[S.symbol,S.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[S.symbol,S.rates.appointmentCost]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[S.symbol,S.rates.prescriptionCost]})]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),S.countryInstructions?.[S.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",S.country," users:"]})," ",S.countryInstructions[S.country]]}),S.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:S.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:S.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",S.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:S.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",S.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",S.paymentDetails.wise.swift]})]})]}),S.country==="India"&&S.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:S.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:S.paymentDetails.upi.upiId})]})})]}),S.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:S.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:S.paymentDetails.paypal.email})]})})]}),S.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:S.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",S.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",S.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:S.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",S.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:S.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",S.paymentDetails.bankTransfer.swift]})]})]}),!S.paymentDetails?.wise?.enabled&&!S.paymentDetails?.upi?.enabled&&!S.paymentDetails?.paypal?.enabled&&!S.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Doctor ID (",t.jsx("strong",{children:user?.uid}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:Ri||Jn,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>Si(!0)})})}),Ye&&t.jsx("div",{onClick:()=>Si(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:Ri||Jn,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})}),S.lastPaymentDate&&t.jsxs("div",{style:{background:"#e8f5e9",borderRadius:"10px",padding:"1.5rem",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32"},children:" Last Payment Made"}),t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[S.symbol,S.lastPaymentAmount?.toFixed(2)||"0.00"]}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem",marginTop:"0.25rem"},children:new Date(S.lastPaymentDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Need help with payments?"})," Contact the admin for payment processing and bank detail updates."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment data..."})]})]}),b==="usage"&&t.jsxs("div",{style:ee.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Usage Statistics"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#666"},children:"View Month:"}),t.jsxs("select",{value:ve||"all",onChange:h=>K(h.target.value==="all"?"":h.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"2px solid #667eea",fontSize:"1rem",fontWeight:"600",color:"#667eea",cursor:"pointer",background:"white"},children:[t.jsx("option",{value:"all",children:" All Time"}),S?.appointmentsByMonth&&Object.keys(S.appointmentsByMonth).sort().reverse().map(h=>t.jsx("option",{value:h,children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})},h))]})]})]}),se?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]}):S?t.jsxs(t.Fragment,{children:[ve&&ve!=="all"&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:" Viewing: "}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(ve+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's usage)"})]}),t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:S.pricingModel==="free"?"#4caf50":S.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[S.pricingModel==="free"&&" FREE PLAN",S.pricingModel==="reduced"&&` DISCOUNTED (${S.discountPercentage}% OFF)`,S.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"10px",border:"2px solid #4caf50"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[ve&&ve!=="all"?"Month":"Total"," Appointments"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#2e7d32"},children:ve&&ve!=="all"?S.appointmentsByMonth?.[ve]||0:S.totalAppointments||0})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e3f2fd",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[ve&&ve!=="all"?"Month":"Total"," Prescriptions"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1565c0"},children:ve&&ve!=="all"?S.prescriptionsByMonth?.[ve]||0:S.totalPrescriptions||0})]})]}),S.appointmentsByMonth&&Object.keys(S.appointmentsByMonth).length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Object.entries(S.appointmentsByMonth).sort(([h],[z])=>z.localeCompare(h)).map(([h,z])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",borderBottom:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{fontWeight:"500"},children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[z," appointments, ",S.prescriptionsByMonth?.[h]||0," prescriptions"]})]},h))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Note:"})," This is a read-only view of your cumulative usage statistics. For billing and payments, please check the Billing tab."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No usage data available yet."})]})]}),b==="billing"&&t.jsxs("div",{style:ee.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Payments"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#666"},children:"View Month:"}),t.jsxs("select",{value:ve||"all",onChange:h=>K(h.target.value==="all"?"":h.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"2px solid #667eea",fontSize:"1rem",fontWeight:"600",color:"#667eea",cursor:"pointer",background:"white"},children:[t.jsx("option",{value:"all",children:" All Time"}),S?.appointmentsByMonth&&Object.keys(S.appointmentsByMonth).sort().reverse().map(h=>t.jsx("option",{value:h,children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})},h))]})]})]}),se?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]}):Ue?t.jsx(t.Fragment,{children:(()=>{const h=ve&&ve!=="all";if(h){const z=S?.appointmentsByMonth?.[ve]||0,Y=S?.prescriptionsByMonth?.[ve]||0;z*(S?.rates?.appointmentCost||0),Y*(S?.rates?.prescriptionCost||0),(Ue.paymentHistory?.filter(le=>le.createdAt&&le.createdAt.startsWith(ve)&&le.status==="completed")||[]).reduce((le,pe)=>le+(pe.amount||0),0)}return t.jsxs(t.Fragment,{children:[h&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:" Viewing: "}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(ve+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's data)"})]}),t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:S?.pricingModel==="free"?"#4caf50":S?.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[S?.pricingModel==="free"&&" FREE PLAN",S?.pricingModel==="reduced"&&` DISCOUNTED (${S.discountPercentage}% OFF)`,S?.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Total Cost"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[S?.symbol,Ue.totalCost?.toFixed(2)||"0.00"]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All time usage charges"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(56, 239, 125, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Paid So Far"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[S?.symbol,Ue.totalPaid?.toFixed(2)||"0.00"]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[Ue.paymentHistory?.length||0," payment(s) made"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:Ue.pendingAmount>0?"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)":"linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)",borderRadius:"12px",color:"white",boxShadow:Ue.pendingAmount>0?"0 4px 12px rgba(245, 87, 108, 0.3)":"0 4px 12px rgba(76, 175, 80, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:Ue.pendingAmount>0?" Pending":" All Paid"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[S?.symbol,Ue.pendingAmount?.toFixed(2)||"0.00"]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:Ue.pendingAmount>0?"Amount due":"No pending balance"})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown (All Time)"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[" Appointments (",Ue.totalAppointments,"  ",S?.symbol,S?.rates?.appointmentCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[S?.symbol,Ue.appointmentCost?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[" Prescriptions (",Ue.totalPrescriptions,"  ",S?.symbol,S?.rates?.prescriptionCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[S?.symbol,Ue.prescriptionCost?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#667eea",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Cost"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[S?.symbol,Ue.totalCost?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#4caf50",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Paid"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[S?.symbol,Ue.totalPaid?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:Ue.pendingAmount>0?"#ff5252":"#38ef7d",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Pending Balance"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[S?.symbol,Ue.pendingAmount?.toFixed(2)||"0.00"]})]})]}),Ue.pendingAmount>0&&S?.pricingModel!=="free"&&t.jsx("button",{onClick:Xe,style:{...ee.button,...ee.primaryButton,width:"100%",marginTop:"1rem",padding:"1rem",fontSize:"1.1rem"},children:" Make Payment"})]}),S?.appointmentsByMonth&&Object.keys(S.appointmentsByMonth).length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white",borderRadius:"8px",overflow:"hidden"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#667eea",color:"white"},children:[t.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Month"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Appointments"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Prescriptions"}),t.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Total Cost"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Status"})]})}),t.jsx("tbody",{children:Object.keys(S.appointmentsByMonth).sort().reverse().map(z=>{const Y=S.appointmentsByMonth[z]||0,he=S.prescriptionsByMonth?.[z]||0,le=Y*(S.rates?.appointmentCost||0)+he*(S.rates?.prescriptionCost||0),we=(Ue.paymentHistory?.filter(ze=>ze.createdAt&&ze.createdAt.startsWith(z)&&ze.status==="completed")||[]).reduce((ze,st)=>ze+(st.amount||0),0)>=le;return t.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[t.jsx("td",{style:{padding:"1rem",fontWeight:"600"},children:new Date(z+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:Y}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:he}),t.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:[S.symbol,le.toFixed(2)]}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600",background:we?"#e8f5e9":"#fff3e0",color:we?"#2e7d32":"#e65100"},children:we?" Paid":" Pending"})})]},z)})})]})})]}),Ue.paymentHistory&&Ue.paymentHistory.length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Payment History"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Ue.paymentHistory.map(z=>t.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",background:"white",borderRadius:"8px",borderLeft:`4px solid ${z.status==="completed"?"#4caf50":z.status==="pending"?"#ff9800":"#f44336"}`},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[z.currency," ",z.amount?.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[" ",new Date(z.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.jsxs("div",{children:[" ",z.paymentMethod]}),z.description&&t.jsxs("div",{children:[" ",z.description]})]})]}),t.jsx("div",{children:t.jsxs("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:z.status==="completed"?"#4caf50":z.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[z.status==="completed"&&" Verified",z.status==="pending"&&" Pending Verification",z.status==="failed"&&" Rejected"]})})]})},z.id))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Payment Process:"})," Submit your payment details below. Admin will verify and approve your payment. Once verified, your pending balance will be updated."]})})]})})()}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No billing data available yet."})]})]}),b==="overview"&&t.jsxs("div",{style:ee.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#11998e"},children:"Today's Schedule"}),t.jsxs("p",{children:["Appointments: ",t.jsx("strong",{children:ce.todayAppointments||0})]}),t.jsxs("p",{children:["Status: ",t.jsx("strong",{style:{color:"#38ef7d"},children:"Active"})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:"Performance"}),t.jsxs("p",{children:["Total Appointments: ",t.jsx("strong",{children:ce.totalAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[ce.totalAppointments?Math.round(ce.completedAppointments/ce.totalAppointments*100):0,"%"]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#f5576c"},children:"Patient Care"}),t.jsxs("p",{children:["Total Patients: ",t.jsx("strong",{children:ce.patientCount||0})]}),t.jsxs("p",{children:["Rating: ",t.jsx("strong",{children:" 5.0"})]})]})]})]}),Fe&&t.jsx("div",{style:ee.modal,onClick:()=>de(!1),children:t.jsxs("div",{style:ee.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Update Profile"}),t.jsxs("form",{onSubmit:Ft,children:[t.jsx("input",{type:"text",placeholder:"Full Name",value:St.displayName,onChange:h=>Ot({...St,displayName:h.target.value}),style:ee.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization",value:St.specialization,onChange:h=>Ot({...St,specialization:h.target.value}),style:ee.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee",value:St.consultationFee,onChange:h=>Ot({...St,consultationFee:h.target.value}),style:ee.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number",value:St.phone,onChange:h=>Ot({...St,phone:h.target.value}),style:ee.input,required:!0}),t.jsx("div",{style:{margin:"1.5rem 0 1rem 0",paddingTop:"1rem",borderTop:"2px solid #e0e0e0"},children:t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#667eea",fontSize:"1.1rem"},children:" Clinic/Practice Address"})}),t.jsx("input",{type:"text",placeholder:"Country",value:St.country,onChange:h=>Ot({...St,country:h.target.value}),style:ee.input}),t.jsx("input",{type:"text",placeholder:"State/Province",value:St.state,onChange:h=>Ot({...St,state:h.target.value}),style:ee.input}),t.jsx("input",{type:"text",placeholder:"City",value:St.city,onChange:h=>Ot({...St,city:h.target.value}),style:ee.input}),t.jsx("textarea",{placeholder:"Full Address (Street, Building, etc.)",value:St.address,onChange:h=>Ot({...St,address:h.target.value}),style:{...ee.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...ee.button,...ee.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>de(!1),style:{...ee.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),dt&&t.jsx("div",{style:ee.modal,onClick:()=>ht(!1),children:t.jsxs("div",{style:ee.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Block Time Slot"}),t.jsxs("form",{onSubmit:hn,children:[t.jsx("input",{type:"date",value:wt.date,onChange:h=>jn({...wt,date:h.target.value}),style:ee.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:wt.startTime,onChange:h=>jn({...wt,startTime:h.target.value}),style:{...ee.input,marginBottom:0},required:!0}),t.jsx("input",{type:"time",value:wt.endTime,onChange:h=>jn({...wt,endTime:h.target.value}),style:{...ee.input,marginBottom:0},required:!0})]}),t.jsx("input",{type:"text",placeholder:"Reason (e.g., Lunch Break, Meeting)",value:wt.reason,onChange:h=>jn({...wt,reason:h.target.value}),style:ee.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...ee.button,...ee.dangerButton,flex:1},children:"Block Time"}),t.jsx("button",{type:"button",onClick:()=>ht(!1),style:{...ee.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),zi&&t.jsx("div",{style:ee.modal,onClick:()=>rn(!1),children:t.jsxs("div",{style:{...ee.modalContent,maxWidth:"800px",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Configure Slots & Working Hours"}),t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Set your slot duration and configure working hours for each day of the week"}),t.jsxs("form",{onSubmit:Ve,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:Sn.slotDuration,onChange:h=>et({...Sn,slotDuration:parseInt(h.target.value)}),style:ee.input,required:!0,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",color:"#333"},children:"Working Days & Hours"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((h,z)=>{const Y=z+1,he=Sn.dayWiseHours[Y];return t.jsx("div",{style:{padding:"1rem",background:he.enabled?"#f0f9ff":"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:`2px solid ${he.enabled?"#11998e":"#e0e0e0"}`},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("div",{style:{flex:"0 0 120px"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:he.enabled,onChange:()=>Gn(Y),style:{width:"18px",height:"18px",cursor:"pointer"}}),t.jsx("span",{style:{fontWeight:"600",color:he.enabled?"#11998e":"#666"},children:h})]})}),he.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{flex:"1",minWidth:"120px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"Start Time"}),t.jsx("input",{type:"time",value:he.start,onChange:le=>Un(Y,"start",le.target.value),style:{...ee.input,marginBottom:0,padding:"0.5rem"},required:!0})]}),t.jsxs("div",{style:{flex:"1",minWidth:"120px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"End Time"}),t.jsx("input",{type:"time",value:he.end,onChange:le=>Un(Y,"end",le.target.value),style:{...ee.input,marginBottom:0,padding:"0.5rem"},required:!0})]})]})]})},Y)})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...ee.button,...ee.primaryButton,flex:1},children:"Save Configuration"}),t.jsx("button",{type:"button",onClick:()=>rn(!1),style:{...ee.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),_&&t.jsx("div",{style:ee.modal,onClick:()=>X(!1),children:t.jsxs("div",{style:ee.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Mark Absent Date"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Mark specific dates when you won't be available for appointments"}),$.unavailableDates&&$.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("h4",{style:{color:"#333",marginBottom:"0.75rem"},children:"Current Absent Dates:"}),$.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"0.75rem",background:"#fff3cd",borderRadius:"8px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffc107"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:h.reason})]}),t.jsx("button",{type:"button",onClick:()=>Tt(h.id),style:{padding:"0.4rem 0.8rem",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]},h.id))]}),t.jsxs("form",{onSubmit:ni,children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Select Date"}),t.jsx("input",{type:"date",value:ge.date,min:new Date().toISOString().split("T")[0],onChange:h=>ke({...ge,date:h.target.value}),style:ee.input,required:!0})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Reason (optional)"}),t.jsx("input",{type:"text",placeholder:"e.g., Vacation, Personal Day, Conference",value:ge.reason,onChange:h=>ke({...ge,reason:h.target.value}),style:ee.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...ee.button,...ee.dangerButton,flex:1},children:"Mark Absent"}),t.jsx("button",{type:"button",onClick:()=>X(!1),style:{...ee.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),console.log("=== MODAL RENDER CHECK ===",{showPatientModal:re,selectedPatient:Ke,effectiveDoctorId:f,doctorName:y?.displayName||y?.name}),re&&Ke&&t.jsx(_y,{patientId:Ke,doctorId:f,doctorName:y?.displayName||y?.name,onClose:()=>{console.log("Closing PatientRecordModal"),fe(!1),I(null),Tn()}}),Je&&Ae&&t.jsx("div",{style:ee.modal,onClick:()=>qe(!1),children:t.jsxs("div",{style:{...ee.modalContent,maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",Ae.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",Ae.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",Ae.date||Ae.appointmentDate," at ",Ae.time||Ae.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:Ei,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:me.diagnosis,onChange:h=>Ee({...me,diagnosis:h.target.value}),style:{...ee.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:Bi,style:{padding:"0.4rem 0.8rem",background:"#11998e",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),me.medications.map((h,z)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:h.name,onChange:Y=>pi(z,"name",Y.target.value),style:{...ee.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:h.dosage,onChange:Y=>pi(z,"dosage",Y.target.value),style:ee.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:h.frequency,onChange:Y=>pi(z,"frequency",Y.target.value),style:ee.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:h.duration,onChange:Y=>pi(z,"duration",Y.target.value),style:ee.input}),me.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>ki(z),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},z))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:me.tests,onChange:h=>Ee({...me,tests:h.target.value}),style:{...ee.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:me.instructions,onChange:h=>Ee({...me,instructions:h.target.value}),style:{...ee.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:me.followUpDate,onChange:h=>Ee({...me,followUpDate:h.target.value}),min:new Date().toISOString().split("T")[0],style:ee.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...ee.button,...ee.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>qe(!1),style:{...ee.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes pulse {
                    0%, 100% {
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.5;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #11998e;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `}),en&&Ae&&t.jsx("div",{style:ee.modal,onClick:()=>At(!1),children:t.jsxs("div",{style:{...ee.modalContent,maxWidth:"500px"},onClick:h=>h.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:[" Patient: ",Ae.patientName]}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",marginBottom:"1.5rem"},children:t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:" Date:"})," ",Ae.date||Ae.appointmentDate]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Time:"})," ",Ae.time||Ae.appointmentTime]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Phone:"})," ",Ae.patientPhone]}),Ae.reason&&t.jsxs("div",{children:[t.jsx("strong",{children:" Reason:"})," ",Ae.reason]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"white",borderRadius:"8px",border:"2px solid #11998e"},children:[t.jsx("strong",{style:{color:"#11998e"},children:"Status:"})," ",Ae.status||"pending"]})]})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("button",{onClick:oe,style:{padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" View Complete Health Records"}),Ae.status!=="completed"&&t.jsx("button",{onClick:Pe,style:{padding:"1rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Add Prescription"}),Ae.status==="completed"&&t.jsx("div",{style:{padding:"1rem",background:"#38ef7d",color:"white",borderRadius:"10px",textAlign:"center",fontSize:"1rem",fontWeight:"600"},children:" Consultation Completed"}),t.jsx("button",{onClick:()=>At(!1),style:{padding:"1rem",background:"#e0e0e0",color:"#333",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Close"})]})]})}),ei&&t.jsx("div",{style:ee.modal,onClick:()=>wn(!1),children:t.jsxs("div",{style:{...ee.modalContent,maxWidth:"600px"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Submit your payment details. Admin will verify and update your account balance."}),t.jsxs("form",{onSubmit:Dt,children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff3e0",borderRadius:"10px",border:"2px solid #ff9800"},children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#e65100",marginBottom:"0.25rem"},children:"Total Pending Balance:"}),t.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#e65100"},children:[S?.symbol,Ue?.pendingAmount?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:["Payment Amount (",S?.symbol,")"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ue?.pendingAmount||0,value:ji,onChange:h=>In(h.target.value),style:ee.input,placeholder:"Enter amount",required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>In((Ue?.pendingAmount*.5).toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#1976d2"},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>In(Ue?.pendingAmount?.toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#2e7d32"},children:"Full Amount"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Payment Method"}),t.jsxs("select",{value:an,onChange:h=>mn(h.target.value),style:ee.input,required:!0,children:[t.jsx("option",{value:"",children:"Select payment method"}),G(S?.country||"US").map(h=>t.jsx("option",{value:h,children:h},h))]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",fontSize:"0.9rem",color:"#1565c0"},children:[t.jsx("strong",{children:" Payment Process:"}),t.jsx("br",{}),"1. Submit payment details below",t.jsx("br",{}),"2. Admin will verify your payment",t.jsx("br",{}),"3. Your balance will be updated once verified"]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:nn,style:{...ee.button,...ee.primaryButton,flex:1,opacity:nn?.6:1,cursor:nn?"not-allowed":"pointer"},children:nn?"Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>wn(!1),disabled:nn,style:{...ee.button,background:"#e0e0e0",flex:1,opacity:nn?.6:1,cursor:nn?"not-allowed":"pointer"},children:"Cancel"})]})]})]})}),Kt&&Ke&&t.jsx(Jm,{patientId:Ke,onClose:()=>{lt(!1),I(null)},doctorId:f,doctorName:y?.displayName})]})},qy=()=>{const{currentUser:s,userProfile:r}=Ca(),[c,u]=x.useState("overview"),[g,f]=x.useState([]),[y,b]=x.useState([]),[A,w]=x.useState({}),[T,N]=x.useState(!0),[R,$]=x.useState(null),[L,ce]=x.useState(!1),[W,se]=x.useState(null),[E,S]=x.useState(""),[ae,Be]=x.useState([]),[rt,ve]=x.useState(!1),[K,De]=x.useState(null),[q,Fe]=x.useState(!1),[de,dt]=x.useState(!1),[ht,Ke]=x.useState({patientId:"",fromDoctorId:"",toDoctorId:""}),[I,re]=x.useState(!1),[fe,Je]=x.useState(!1),[qe,Ae]=x.useState(!1),[We,$e]=x.useState(!1),[ft,Ie]=x.useState(!1),[at,Dn]=x.useState(null),[Qt,Kt]=x.useState({displayName:"",email:"",specialization:"",consultationFee:"",phone:""}),[lt,en]=x.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[At,tn]=x.useState(null),[k,Te]=x.useState({}),[He,Ge]=x.useState(null),[ne,St]=x.useState(null),[Ot,wt]=x.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:2e3},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:20}}}),[jn,zi]=x.useState(""),[rn,Sn]=x.useState([]),[et,_]=x.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[X,ge]=x.useState(""),[ke,me]=x.useState(!1),[Ee,ot]=x.useState(!1),[Nt,Ue]=x.useState(""),[dn,ji]=x.useState(!1),[In,ei]=x.useState(null);x.useEffect(()=>{const v=new Image;v.src=Jn,v.onload=()=>{try{const oe=document.createElement("canvas");oe.width=v.width,oe.height=v.height;const Pe=oe.getContext("2d");Pe.drawImage(v,0,0);const Xt=Pe.getImageData(0,0,oe.width,oe.height).data;let ee=oe.width,h=oe.height,z=0,Y=0;const he=250;for(let bt=0;bt<oe.height;bt++)for(let vt=0;vt<oe.width;vt++){const _e=(bt*oe.width+vt)*4,ln=Xt[_e],Bt=Xt[_e+1],ut=Xt[_e+2];Xt[_e+3]>10&&!(ln>he&&Bt>he&&ut>he)&&(vt<ee&&(ee=vt),bt<h&&(h=bt),vt>z&&(z=vt),bt>Y&&(Y=bt))}if(ee>z||h>Y){ei(Jn);return}const le=Math.max(8,Math.floor(Math.min(oe.width,oe.height)*.02));ee=Math.max(0,ee-le),h=Math.max(0,h-le),z=Math.min(oe.width,z+le),Y=Math.min(oe.height,Y+le);const pe=z-ee+1,tt=Y-h+1,we=document.createElement("canvas");we.width=pe,we.height=tt,we.getContext("2d").drawImage(oe,ee,h,pe,tt,0,0,pe,tt);const st=we.toDataURL("image/png");ei(st)}catch(oe){console.error("QR crop failed",oe),ei(Jn)}},v.onerror=()=>ei(Jn)},[Jn]);const[wn,nn]=x.useState(!1),[gt,an]=x.useState({displayName:"",country:"",state:"",city:"",address:"",phone:""});x.useEffect(()=>{s?.uid&&r?.hospitalId&&mn()},[s,r]);const mn=async()=>{N(!0);try{const[v,oe,Pe]=await Promise.all([Qm(r.hospitalId),Fm(r.hospitalId),dy(r.hospitalId)]);f(v),b(oe),w(Pe)}catch(v){console.error("Error loading dashboard data:",v),Ye("Error loading data","error")}finally{N(!1)}},Ye=(v,oe="success")=>{Ge({message:v,type:oe}),setTimeout(()=>Ge(null),3e3)};x.useEffect(()=>{const v=new Date,oe=v.getFullYear(),Pe=String(v.getMonth()+1).padStart(2,"0");zi(`${oe}-${Pe}`)},[]),x.useEffect(()=>{c==="usage"&&r?.hospitalId&&Si()},[c,r?.hospitalId]),x.useEffect(()=>{c==="billing"&&r?.hospitalId&&Ri()},[c,r?.hospitalId]);const Si=async()=>{try{N(!0),console.log(" Loading usage data for hospital:",r.hospitalId);const v=Se(V,"config","billing"),oe=await Gt(v);oe.exists()&&wt(oe.data());const Pe=Se(V,"hospitals",r.hospitalId),ct=await Gt(Pe);if(!ct.exists()){Ye("Hospital profile not found","error");return}const Xt=ct.data(),ee=xe(V,"appointments"),h=Oe(ee,ye("hospitalId","==",r.hospitalId)),Y=(await Re(h)).docs.map(st=>({id:st.id,...st.data()})),he=xe(V,"prescriptions"),le=Oe(he,ye("hospitalId","==",r.hospitalId)),tt=(await Re(le)).docs.map(st=>({id:st.id,...st.data()})),we=Xt?.country||r?.country||"default",ze=fo(we,Ot);St({totalAppointments:Y.length,totalPrescriptions:tt.length,appointmentsByMonth:ti(Y),prescriptionsByMonth:ti(tt),pricingModel:Xt?.pricingModel||"full",discountPercentage:Xt?.discountPercentage||0,currency:ze.currency,symbol:ze.symbol})}catch(v){console.error("Error loading usage data:",v),Ye("Error loading usage data","error")}finally{N(!1)}},Ri=async()=>{try{N(!0),console.log(" Loading billing data for hospital:",r.hospitalId);let v={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const ut=Se(V,"config","billing"),kt=await Gt(ut);kt.exists()&&(v=kt.data(),wt(v))}catch(ut){console.warn("Config not found, using defaults:",ut)}const oe=Se(V,"hospitals",r.hospitalId),Pe=await Gt(oe);if(!Pe.exists()){Ye("Hospital profile not found","error");return}const ct=Pe.data(),Xt=qa(ct,Ot),ee=xe(V,"appointments"),h=Oe(ee,ye("hospitalId","==",r.hospitalId)),Y=(await Re(h)).size,he=xe(V,"prescriptions"),le=Oe(he,ye("hospitalId","==",r.hospitalId)),tt=(await Re(le)).size;let we=[];try{const ut=xe(V,"payments"),kt=Oe(ut,ye("hospitalId","==",r.hospitalId));we=(await Re(kt)).docs.map(Lt=>({id:Lt.id,...Lt.data()})).sort((Lt,Pt)=>{const Rn=Lt.createdAt?new Date(Lt.createdAt):new Date(0);return(Pt.createdAt?new Date(Pt.createdAt):new Date(0))-Rn})}catch(ut){console.warn("No payment history found:",ut)}const ze=ct?.pricingModel||"full",st=ct?.discountPercentage||0;let bt=Y*(Xt.appointmentCost||0),vt=tt*(Xt.prescriptionCost||0),_e=bt+vt;if(ze==="free")bt=0,vt=0,_e=0;else if(ze==="reduced"){const ut=st/100;bt=bt*(1-ut),vt=vt*(1-ut),_e=_e*(1-ut)}const ln=we.reduce((ut,kt)=>ut+(kt.status==="completed"&&kt.amount||0),0),Bt=Math.max(0,_e-ln);_({totalAppointments:Y,totalPrescriptions:tt,appointmentCost:bt,prescriptionCost:vt,totalCost:_e,totalPaid:ln,pendingAmount:Bt,paymentHistory:we}),St({totalAppointments:Y,totalPrescriptions:tt,appointmentCost:bt,prescriptionCost:vt,totalCost:_e,paid:ln,pending:Bt,pricingModel:ze,discountPercentage:st,rates:Xt,currency:Xt.currency,symbol:Xt.symbol,country:ct?.country||r?.country||"default",bankDetails:ct?.bankDetails||{},upiId:ct?.upiId||"",lastPaymentDate:we[0]?.createdAt||ct?.lastPaymentDate,lastPaymentAmount:we[0]?.amount||ct?.lastPaymentAmount,doctorCount:g.length,paymentHistory:we,paymentDetails:v.paymentDetails||{},countryInstructions:v.countrySpecificInstructions||{}}),console.log(" Billing data loaded successfully")}catch(v){console.error("Error loading billing data:",v),Ye("Error loading billing data","error")}finally{N(!1)}},ti=v=>{const oe={};return v.forEach(Pe=>{const ct=Pe.date||Pe.createdAt||"";if(ct){const Xt=ct.substring(0,7);oe[Xt]=(oe[Xt]||0)+1}}),oe},Tn=v=>{console.log(" Getting payment methods for country:",v);const oe=[];return v==="India"||v==="IN"?oe.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):v==="United States"||v==="US"||v==="USA"?oe.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):v==="United Kingdom"||v==="UK"||v==="GB"?oe.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):v==="Canada"||v==="CA"?oe.push("PayPal","Stripe","Interac","Bank Transfer","Check"):v==="Australia"||v==="AU"?oe.push("PayPal","Stripe","BPAY","Bank Transfer"):oe.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",oe),oe},Ct=async v=>{if(v.preventDefault(),!Nt){Ye("Please select a payment method","error");return}const oe=parseFloat(X);if(!oe||oe<=0){Ye("Please enter a valid amount","error");return}if(oe>et.pendingAmount){Ye("Amount cannot exceed pending balance","error");return}try{ot(!0);const Pe={hospitalId:r.hospitalId,hospitalName:r.displayName,amount:oe,currency:ne.currency,paymentMethod:Nt,status:"pending",createdAt:new Date().toISOString(),createdBy:s.uid,type:"partial",description:`Partial payment for hospital app usage - ${et.totalAppointments} appointments, ${et.totalPrescriptions} prescriptions`},ct=xe(V,"payments");await ea(ct,Pe),Ye("Payment request submitted successfully! Admin will verify and process.","success"),me(!1),ge(""),Ue(""),Ri()}catch(Pe){console.error("Error processing payment:",Pe),Ye("Failed to process payment","error")}finally{ot(!1)}},C=()=>{ge(""),Ue(""),me(!0)},O=async v=>{v.preventDefault();try{if(console.log("Adding doctor with data:",Qt),console.log("Hospital ID:",r.hospitalId),console.log("Hospital Name:",r.displayName),!r.hospitalId){Ye("Hospital ID not found. Please contact support.","error");return}await cy(r.hospitalId,r.displayName,Qt),Ye("Doctor added successfully!"),re(!1),Kt({displayName:"",email:"",specialization:"",consultationFee:"",phone:""}),mn()}catch(oe){console.error("Error adding doctor:",oe),Ye("Failed to add doctor: "+(oe.message||"Unknown error"),"error")}},G=v=>{Dn(v),en({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),Ie(!0)},ie=()=>{en({...lt,medications:[...lt.medications,{name:"",dosage:"",frequency:"",duration:""}]})},je=(v,oe,Pe)=>{const ct=[...lt.medications];ct[v][oe]=Pe,en({...lt,medications:ct})},Me=v=>{const oe=lt.medications.filter((Pe,ct)=>ct!==v);en({...lt,medications:oe})},Dt=async v=>{v.preventDefault();try{const{db:oe}=await zs(async()=>{const{db:Y}=await Promise.resolve().then(()=>ny);return{db:Y}},void 0),{doc:Pe,updateDoc:ct,setDoc:Xt,collection:ee}=await zs(async()=>{const{doc:Y,updateDoc:he,setDoc:le,collection:pe}=await import("./firebase-Culp_hMH.js").then(tt=>tt.E);return{doc:Y,updateDoc:he,setDoc:le,collection:pe}},[]),h=Pe(ee(oe,"prescriptions"));await Xt(h,{appointmentId:at.id,patientName:at.patientName,patientPhone:at.patientPhone,doctorName:at.doctorName,hospitalId:r.hospitalId,hospitalName:r.displayName,...lt,createdAt:new Date().toISOString(),createdBy:s.uid});const z=Pe(oe,"appointments",at.id);await ct(z,{status:"completed",prescriptionId:h.id,completedAt:new Date().toISOString()}),Ye("Prescription saved successfully!"),Ie(!1),Dn(null),mn()}catch(oe){console.error("Error saving prescription:",oe),Ye("Failed to save prescription","error")}},Xe=async v=>{v.preventDefault();try{await Xm(At.uid,{displayName:At.displayName,specialization:At.specialization,consultationFee:At.consultationFee,phone:At.phone}),Ye("Doctor updated successfully!"),Je(!1),tn(null),mn()}catch(oe){console.error("Error updating doctor:",oe),Ye("Failed to update doctor","error")}},Ft=async(v,oe)=>{try{await ly(v,!oe),Ye(`Doctor ${oe?"disabled":"enabled"} successfully!`),mn()}catch(Pe){console.error("Error toggling doctor status:",Pe),Ye("Failed to update status","error")}},hn=async v=>{if(window.confirm("Are you sure you want to remove this doctor?"))try{await oy(v,r.hospitalId),Ye("Doctor removed successfully!"),mn()}catch(oe){console.error("Error deleting doctor:",oe),Ye("Failed to remove doctor","error")}},ui=async()=>{try{await Te(R.uid,k),Ye("Availability updated successfully!"),Ae(!1)}catch(v){console.error("Error saving availability:",v),Ye("Failed to update availability","error")}},Ve=async v=>{$(v);try{const oe=await Vd(v.uid);Te(oe),Ae(!0)}catch(oe){console.error("Error loading availability:",oe),Ye("Failed to load availability","error")}},ni=v=>{tn({...v}),Je(!0)},Tt=v=>{se(v),ce(!0)},Gn=async v=>{v.preventDefault();try{const oe=Se(V,"users",s.uid);if(await Zt(oe,{displayName:gt.displayName,country:gt.country,state:gt.state,city:gt.city,address:gt.address,phone:gt.phone,updatedAt:new Date().toISOString()}),r?.hospitalId){const Pe=Se(V,"hospitals",r.hospitalId);await Zt(Pe,{name:gt.displayName,country:gt.country,state:gt.state,city:gt.city,address:gt.address,updatedAt:new Date().toISOString()})}Ye("Hospital profile updated successfully!"),nn(!1),setTimeout(()=>window.location.reload(),1e3)}catch(oe){console.error("Error updating hospital profile:",oe),Ye("Failed to update profile","error")}},Un=()=>{an({displayName:r?.displayName||"",country:r?.country||"",state:r?.state||"",city:r?.city||"",address:r?.address||"",phone:r?.phone||""}),nn(!0)},Wn=async()=>{if(!E.trim()){Be([]);return}ve(!0);try{const v=await By(E,r.hospitalId);Be(v),v.length===0&&Ye("No patients found","error")}catch(v){console.error("Error searching patients:",v),Ye("Failed to search patients","error")}finally{ve(!1)}},Bi=v=>{De(v),Fe(!0),Be([]),S("")},ki=v=>{Ke({patientId:v.id,patientName:v.name,fromDoctorId:v.lastDoctorId,fromDoctorName:v.lastDoctorName,toDoctorId:""}),dt(!0)},pi=async v=>{if(v.preventDefault(),!ht.toDoctorId){Ye("Please select a doctor to transfer to","error");return}try{const oe=await Hy(ht.patientId,ht.fromDoctorId,ht.toDoctorId,r.hospitalId);Ye(`Successfully transferred ${oe.recordsTransferred} health records and ${oe.prescriptionsTransferred} prescriptions`,"success"),dt(!1),Ke({patientId:"",fromDoctorId:"",toDoctorId:""})}catch(oe){console.error("Error transferring records:",oe),Ye("Failed to transfer records","error")}},Ei=()=>{ce(!1),se(null),mn()};if(L&&W)return t.jsxs("div",{children:[t.jsxs("div",{style:{background:"white",padding:"1rem 2rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("button",{onClick:Ei,style:{padding:"0.5rem 1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Back to Hospital Dashboard"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Viewing Dashboard for:"}),t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#333"},children:["Dr. ",W.displayName," - ",W.specialization]})]})]}),t.jsx($m,{doctorId:W.uid,doctorProfile:W,isHospitalView:!0})]});const Q={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},header:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"15px",padding:"1.5rem",color:"white",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",transition:"transform 0.3s ease, box-shadow 0.3s ease"},tabContainer:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},tab:{padding:"0.75rem 1.5rem",borderRadius:"10px",border:"none",background:"rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s ease"},activeTab:{background:"white",color:"#667eea",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},card:{background:"white",borderRadius:"15px",padding:"1.5rem",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",marginBottom:"1.5rem"},doctorCard:{background:"white",borderRadius:"15px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",transition:"transform 0.3s ease, box-shadow 0.3s ease",border:"2px solid transparent"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},successButton:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},dangerButton:{background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white"},warningButton:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},modalContent:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},input:{width:"100%",padding:"0.75rem",borderRadius:"10px",border:"2px solid #e0e0e0",fontSize:"1rem",marginBottom:"1rem",transition:"border-color 0.3s ease"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"10px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease"}};return T||!s||!r?.hospitalId?t.jsx("div",{style:Q.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{className:"spinner",style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:Q.container,children:[He&&t.jsx("div",{style:{...Q.notification,background:He.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:He.message}),t.jsxs("div",{style:Q.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" ",r?.displayName||"Hospital Dashboard"]}),t.jsx("p",{style:{margin:0,color:"#666"},children:"Welcome back! Manage your hospital operations efficiently."})]}),t.jsxs("div",{style:Q.statsGrid,children:[t.jsxs("div",{style:Q.statCard,children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:A.totalDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Doctors"})]}),t.jsxs("div",{style:{...Q.statCard,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:A.activeDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"})]}),t.jsxs("div",{style:{...Q.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:A.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...Q.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:A.totalAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"})]})]}),t.jsx("div",{style:Q.tabContainer,children:typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width:480px)").matches?t.jsx("select",{value:c,onChange:v=>u(v.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select hospital tab",children:[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("option",{value:v.id,children:v.label},v.id))}):[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("button",{style:{...Q.tab,...c===v.id?Q.activeTab:{}},onClick:()=>u(v.id),children:v.label},v.id))}),c==="doctors"&&t.jsxs("div",{style:Q.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Manage Doctors"}),t.jsx("button",{style:{...Q.button,...Q.primaryButton},onClick:()=>re(!0),children:"+ Add New Doctor"})]}),g.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No doctors yet. Add your first doctor to get started!"})]}):g.map(v=>t.jsx("div",{style:Q.doctorCard,children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[t.jsxs("h3",{style:{margin:"0 0 0.5rem 0",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.displayName,v.isActive===!1&&t.jsx("span",{style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",background:"#ff4444",color:"white",borderRadius:"5px"},children:"Disabled"})]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Specialization:"})," ",v.specialization||"N/A"]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Consultation Fee:"})," $",v.consultationFee||"N/A"]}),t.jsxs("p",{style:{margin:"0",color:"#666"},children:[t.jsx("strong",{children:"Phone:"})," ",v.phone||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{style:{...Q.button,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontWeight:"600"},onClick:()=>Tt(v),children:" View Dashboard"}),t.jsx("button",{style:{...Q.button,...Q.primaryButton},onClick:()=>ni(v),children:" Edit"}),t.jsx("button",{style:{...Q.button,...Q.successButton},onClick:()=>Ve(v),children:" Availability"}),t.jsx("button",{style:{...Q.button,...v.isActive===!1?Q.successButton:Q.warningButton},onClick:()=>Ft(v.uid,v.isActive!==!1),children:v.isActive===!1?" Enable":" Disable"}),t.jsx("button",{style:{...Q.button,...Q.dangerButton},onClick:()=>hn(v.uid),children:" Delete"})]})]})},v.uid))]}),c==="appointments"&&t.jsxs("div",{style:Q.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Appointments & Prescriptions"}),y.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:y.map(v=>t.jsx("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",borderLeft:`4px solid ${v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#f5576c"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsx("strong",{style:{fontSize:"1.1rem",color:"#333"},children:v.patientName}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:v.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Doctor:"})," ",v.doctorName]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Date:"})," ",v.appointmentDate||v.date]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",v.appointmentTime||v.time]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",v.patientPhone]}),v.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",v.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.status!=="completed"&&t.jsx("button",{onClick:()=>G(v),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),v.status==="completed"&&v.prescriptionId&&t.jsx("div",{style:{padding:"0.5rem 1rem",background:"#38ef7d",color:"white",borderRadius:"8px",fontSize:"0.85rem",textAlign:"center",fontWeight:"600"},children:" Prescribed"})]})]})},v.id))})]}),c==="usage"&&t.jsxs("div",{style:Q.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" App Usage Statistics"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"View your hospital's app usage metrics (appointments and prescriptions)"}),ne?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:ne.pricingModel==="free"?"#e8f5e9":ne.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:ne.pricingModel==="free"?"#2e7d32":ne.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[ne.pricingModel==="free"&&" Free + Ads",ne.pricingModel==="reduced"&&` Reduced Rate (${ne.discountPercentage}% off)`,ne.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[ne.pricingModel==="free"&&"Your hospital uses the app completely FREE! Ad revenue funds your access.",ne.pricingModel==="reduced"&&`Your hospital gets ${ne.discountPercentage}% discount on all fees. Ads help reduce your costs.`,ne.pricingModel==="full"&&"Premium tier with no ads. Your hospital pays standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:ne.totalAppointments}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Prescriptions"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"}}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:g.length}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Using the platform"})]})]}),ne.appointmentsByMonth&&Object.keys(ne.appointmentsByMonth).length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Monthly Breakdown"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Object.entries(ne.appointmentsByMonth).sort((v,oe)=>oe[0].localeCompare(v[0])).slice(0,12).map(([v,oe])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"6px",marginBottom:"0.5rem"},children:[t.jsx("span",{style:{fontWeight:"600"},children:new Date(v+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[oe," ",oe===1?"appointment":"appointments"]})]},v))})]}),t.jsxs("div",{style:{background:"#e3f2fd",borderRadius:"10px",padding:"1.5rem",border:"2px solid #2196f3"},children:[t.jsx("h3",{style:{marginTop:0,color:"#1976d2"},children:" About Usage Tracking"}),t.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#424242",lineHeight:"1.8"},children:[t.jsx("li",{children:"All appointments and prescriptions are tracked cumulatively"}),t.jsx("li",{children:"Usage metrics help understand your hospital's platform engagement"}),t.jsx("li",{children:"Billing is calculated based on total usage (see Billing tab)"})]})]})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]})]}),c==="billing"&&t.jsxs("div",{style:Q.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Payments"}),et.pendingAmount>0&&t.jsx("button",{onClick:C,style:{...Q.button,...Q.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem"},children:" Make Payment"})]}),ne?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:ne.pricingModel==="free"?"#e8f5e9":ne.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:ne.pricingModel==="free"?"#2e7d32":ne.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[ne.pricingModel==="free"&&" Free + Ads",ne.pricingModel==="reduced"&&` Reduced Rate (${ne.discountPercentage}% off)`,ne.pricingModel==="full"&&" Full Rate"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total App Usage Cost"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[ne.symbol,et.totalCost.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[et.totalAppointments," appointments + ",et.totalPrescriptions," prescriptions"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Pending Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[ne.symbol,et.pendingAmount.toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Amount due"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[ne.symbol,et.totalPaid.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[et.paymentHistory.length," payment",et.paymentHistory.length!==1?"s":""]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",et.totalAppointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[ne.symbol,et.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",et.totalPrescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[ne.symbol,et.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[ne.symbol,ne.rates?.appointmentCost||0]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[ne.symbol,ne.rates?.prescriptionCost||0]})]})]})]}),et.paymentHistory.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Payment History"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:et.paymentHistory.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",marginBottom:"0.75rem",borderLeft:`4px solid ${v.status==="completed"?"#4caf50":v.status==="pending"?"#ff9800":"#f44336"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[ne.symbol,v.amount.toFixed(2)]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",background:v.status==="completed"?"#e8f5e9":v.status==="pending"?"#fff3e0":"#ffebee",color:v.status==="completed"?"#2e7d32":v.status==="pending"?"#e65100":"#c62828"},children:v.status.toUpperCase()})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:["Method: ",v.paymentMethod]}),t.jsxs("div",{children:["Date: ",new Date(v.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),v.description&&t.jsxs("div",{children:["Note: ",v.description]})]})]},v.id))})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),ne.countryInstructions?.[ne.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",ne.country," users:"]})," ",ne.countryInstructions[ne.country]]}),ne.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:ne.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:ne.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",ne.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:ne.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",ne.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",ne.paymentDetails.wise.swift]})]})]}),ne.country==="India"&&ne.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:ne.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:ne.paymentDetails.upi.upiId})]})})]}),ne.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:ne.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:ne.paymentDetails.paypal.email})]})})]}),ne.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:ne.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",ne.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",ne.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:ne.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",ne.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:ne.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",ne.paymentDetails.bankTransfer.swift]})]})]}),!ne.paymentDetails?.wise?.enabled&&!ne.paymentDetails?.upi?.enabled&&!ne.paymentDetails?.paypal?.enabled&&!ne.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Hospital ID (",t.jsx("strong",{children:r?.hospitalId}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:In||Jn,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>ji(!0)})})}),dn&&t.jsx("div",{onClick:()=>ji(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:In||Jn,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]})]}),c==="overview"&&t.jsxs("div",{style:Q.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:" Doctor Summary"}),t.jsxs("p",{children:["Total Doctors: ",t.jsx("strong",{children:A.totalDoctors||0})]}),t.jsxs("p",{children:["Active Doctors: ",t.jsx("strong",{children:A.activeDoctors||0})]}),t.jsxs("p",{children:["Inactive Doctors: ",t.jsx("strong",{children:(A.totalDoctors||0)-(A.activeDoctors||0)})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#38ef7d"},children:" Appointments"}),t.jsxs("p",{children:["Today: ",t.jsx("strong",{children:A.todayAppointments||0})]}),t.jsxs("p",{children:["Total: ",t.jsx("strong",{children:A.totalAppointments||0})]}),t.jsxs("p",{children:["Completed: ",t.jsx("strong",{children:A.completedAppointments||0})]}),t.jsxs("p",{children:["Pending: ",t.jsx("strong",{children:A.pendingAppointments||0})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#fa709a"},children:" Status Breakdown"}),t.jsxs("p",{children:["Confirmed: ",t.jsx("strong",{children:A.confirmedAppointments||0})]}),t.jsxs("p",{children:["Cancelled: ",t.jsx("strong",{children:A.cancelledAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[A.totalAppointments?Math.round(A.completedAppointments/A.totalAppointments*100):0,"%"]})]})]})]})]}),c==="patients"&&t.jsxs("div",{style:Q.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Hospital Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and view all patients who have visited your hospital across all doctors"}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by patient name or booking number...",value:E,onChange:v=>S(v.target.value),onKeyPress:v=>v.key==="Enter"&&Wn(),style:{...Q.input,flex:1}}),t.jsx("button",{onClick:Wn,disabled:rt,style:{...Q.button,...Q.primaryButton,minWidth:"120px"},children:rt?" Searching...":" Search"})]}),ae.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1rem",maxHeight:"400px",overflowY:"auto"},children:[t.jsxs("h4",{style:{marginTop:0,color:"#333"},children:["Found ",ae.length," patient",ae.length!==1?"s":""]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:ae.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",border:"2px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[" ",v.name]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",v.phone]}),t.jsxs("div",{children:[" Last Visit: ",v.lastAppointment]}),t.jsxs("div",{children:[" Last Seen by: Dr. ",v.lastDoctorName]}),t.jsxs("div",{children:[" Total Visits: ",v.totalAppointments]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>Bi(v.id),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" View Full History"}),t.jsx("button",{onClick:()=>ki(v),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" Transfer Records"})]})]},v.id))})]})]}),ae.length===0&&!rt&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Search for Patients"}),t.jsx("p",{children:"Enter a patient name or booking number to view their complete medical history across all your doctors."}),t.jsxs("p",{style:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Use Cases:"}),t.jsx("br",{})," View patient history when doctor is unavailable",t.jsx("br",{})," Transfer records when doctor leaves the hospital",t.jsx("br",{})," Access complete patient data across all departments"]})]})]}),c==="analytics"&&t.jsxs("div",{style:Q.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Analytics & Reports"}),t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Advanced analytics coming soon!"}),t.jsx("p",{children:"View detailed reports, charts, and insights about your hospital performance."})]})]}),c==="settings"&&t.jsxs("div",{style:Q.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Hospital Settings"}),t.jsx("button",{onClick:Un,style:{...Q.button,...Q.primaryButton},children:" Edit Profile"})]}),t.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea",marginBottom:"1rem"},children:" Hospital Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Hospital Name"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.displayName||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Email"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.email||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Phone"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.phone||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#38ef7d",marginBottom:"1rem"},children:" Address Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Country"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.country||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"State/Province"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.state||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"City"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.city||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Address"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.address||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"12px",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32",marginBottom:"1rem"},children:" Account Status"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Account Active"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Profile Verified"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsxs("span",{children:["Hospital ID: ",r?.hospitalId||"Not set"]})]})]})]})]})]}),I&&t.jsx("div",{style:Q.modal,onClick:()=>re(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Add New Doctor"}),t.jsxs("form",{onSubmit:O,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:Qt.displayName,onChange:v=>Kt({...Qt,displayName:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"email",placeholder:"Email (optional)",value:Qt.email,onChange:v=>Kt({...Qt,email:v.target.value}),style:Q.input}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:Qt.specialization,onChange:v=>Kt({...Qt,specialization:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:Qt.consultationFee,onChange:v=>Kt({...Qt,consultationFee:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:Qt.phone,onChange:v=>Kt({...Qt,phone:v.target.value}),style:Q.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Q.button,...Q.primaryButton,flex:1},children:"Add Doctor"}),t.jsx("button",{type:"button",onClick:()=>re(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),fe&&At&&t.jsx("div",{style:Q.modal,onClick:()=>Je(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Edit Doctor"}),t.jsxs("form",{onSubmit:Xe,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:At.displayName,onChange:v=>tn({...At,displayName:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:At.specialization,onChange:v=>tn({...At,specialization:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:At.consultationFee,onChange:v=>tn({...At,consultationFee:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:At.phone,onChange:v=>tn({...At,phone:v.target.value}),style:Q.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Q.button,...Q.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>Je(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),qe&&R&&t.jsx("div",{style:Q.modal,onClick:()=>Ae(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333"},children:["Manage Availability - ",R.displayName]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Hours"}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:k.workingHours?.start||"09:00",onChange:v=>Te({...k,workingHours:{...k.workingHours,start:v.target.value}}),style:{...Q.input,marginBottom:0}}),t.jsx("input",{type:"time",value:k.workingHours?.end||"17:00",onChange:v=>Te({...k,workingHours:{...k.workingHours,end:v.target.value}}),style:{...Q.input,marginBottom:0}})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:k.slotDuration||30,onChange:v=>Te({...k,slotDuration:parseInt(v.target.value)}),style:Q.input,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Days"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((v,oe)=>{const Pe=oe+1,ct=k.workingDays?.includes(Pe);return t.jsx("button",{type:"button",onClick:()=>{const Xt=k.workingDays||[],ee=ct?Xt.filter(h=>h!==Pe):[...Xt,Pe];Te({...k,workingDays:ee})},style:{...Q.button,background:ct?"#667eea":"#e0e0e0",color:ct?"white":"#666"},children:v},v)})})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[t.jsx("button",{type:"button",onClick:ui,style:{...Q.button,...Q.primaryButton,flex:1},children:"Save Availability"}),t.jsx("button",{type:"button",onClick:()=>Ae(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})}),ft&&at&&t.jsx("div",{style:Q.modal,onClick:()=>Ie(!1),children:t.jsxs("div",{style:{...Q.modalContent,maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #667eea",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",at.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",at.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",at.appointmentDate," at ",at.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:Dt,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:lt.diagnosis,onChange:v=>en({...lt,diagnosis:v.target.value}),style:{...Q.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:ie,style:{padding:"0.4rem 0.8rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),lt.medications.map((v,oe)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:v.name,onChange:Pe=>je(oe,"name",Pe.target.value),style:{...Q.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:v.dosage,onChange:Pe=>je(oe,"dosage",Pe.target.value),style:Q.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:v.frequency,onChange:Pe=>je(oe,"frequency",Pe.target.value),style:Q.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:v.duration,onChange:Pe=>je(oe,"duration",Pe.target.value),style:Q.input}),lt.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>Me(oe),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},oe))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:lt.tests,onChange:v=>en({...lt,tests:v.target.value}),style:{...Q.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:lt.instructions,onChange:v=>en({...lt,instructions:v.target.value}),style:{...Q.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:lt.followUpDate,onChange:v=>en({...lt,followUpDate:v.target.value}),min:new Date().toISOString().split("T")[0],style:Q.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...Q.button,...Q.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>Ie(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),de&&t.jsx("div",{style:Q.modal,onClick:()=>dt(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Transfer Patient Records"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Patient: ",ht.patientName]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Current Doctor: Dr. ",ht.fromDoctorName]})]}),t.jsxs("form",{onSubmit:pi,children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Transfer To Doctor: *"}),t.jsxs("select",{value:ht.toDoctorId,onChange:v=>Ke({...ht,toDoctorId:v.target.value}),style:{...Q.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select a doctor..."}),g.filter(v=>v.uid!==ht.fromDoctorId&&v.isActive).map(v=>t.jsxs("option",{value:v.uid,children:["Dr. ",v.displayName," - ",v.specialization]},v.uid))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This will transfer all health records and prescriptions from the current doctor to the selected doctor. The original records will be marked as transferred."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Q.button,...Q.primaryButton,flex:1},children:" Transfer Records"}),t.jsx("button",{type:"button",onClick:()=>dt(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),ke&&t.jsx("div",{style:Q.modal,onClick:()=>me(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsxs("div",{style:{background:"#f0f7ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:"Total Pending:"}),t.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",marginLeft:"0.5rem",color:"#1976d2"},children:[ne?.currency," ",et.pendingAmount.toFixed(2)]})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[et.totalAppointments," appointments + ",et.totalPrescriptions," prescriptions"]})]}),t.jsxs("form",{onSubmit:Ct,children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:["Payment Amount (",ne?.currency,") *"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:et.pendingAmount,placeholder:`Enter amount (max: ${et.pendingAmount.toFixed(2)})`,value:X,onChange:v=>ge(v.target.value),style:Q.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("button",{type:"button",onClick:()=>ge((et.pendingAmount/2).toFixed(2)),style:{padding:"0.5rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>ge(et.pendingAmount.toFixed(2)),style:{padding:"0.5rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"Pay Full"})]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method *"}),t.jsxs("select",{value:Nt,onChange:v=>Ue(v.target.value),style:{...Q.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select payment method..."}),Tn(ne?.country||"US").map(v=>t.jsx("option",{value:v,children:v},v))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"}),' After submitting, your payment will be marked as "pending" and will be verified by the admin. Once verified, it will be marked as "completed" and reflected in your balance.']}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Ee,style:{...Q.button,...Q.primaryButton,flex:1,opacity:Ee?.6:1,cursor:Ee?"not-allowed":"pointer"},children:Ee?" Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>me(!1),disabled:Ee,style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),wn&&t.jsx("div",{style:Q.modal,onClick:()=>nn(!1),children:t.jsxs("div",{style:Q.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Edit Hospital Profile"}),t.jsxs("form",{onSubmit:Gn,children:[t.jsx("input",{type:"text",placeholder:"Hospital Name *",value:gt.displayName,onChange:v=>an({...gt,displayName:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:gt.phone,onChange:v=>an({...gt,phone:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Country *",value:gt.country,onChange:v=>an({...gt,country:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"text",placeholder:"State/Province *",value:gt.state,onChange:v=>an({...gt,state:v.target.value}),style:Q.input,required:!0}),t.jsx("input",{type:"text",placeholder:"City *",value:gt.city,onChange:v=>an({...gt,city:v.target.value}),style:Q.input,required:!0}),t.jsx("textarea",{placeholder:"Full Address",value:gt.address,onChange:v=>an({...gt,address:v.target.value}),style:{...Q.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{background:"#e3f2fd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This information will be visible to patients when they book appointments with your hospital's doctors."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Q.button,...Q.primaryButton,flex:1},children:" Save Changes"}),t.jsx("button",{type:"button",onClick:()=>nn(!1),style:{...Q.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),q&&K&&t.jsx(Jm,{patientId:K,onClose:()=>{Fe(!1),De(null)},hospitalId:r?.hospitalId,isHospitalView:!0}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #667eea;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]})},Iy=async()=>(await Re(xe(V,"doctors"))).docs.map(r=>({id:r.id,...r.data()})),Gy=async(s,r)=>{const c=`${s}_${r}`,u=Se(V,"doctor_slots",c),g=await Gt(u);return g.exists()?g.data().slots:[]},Wy=async(s,r,c,u)=>(await Gd(Yd,"createAppointment")({doctorId:s,date:r,time:c,paymentId:u})).data;var jl;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(jl||(jl={}));class Ld extends Error{constructor(r,c,u){super(r),this.message=r,this.code=c,this.data=u}}const Yy=s=>{var r,c;return s?.androidBridge?"android":!((c=(r=s?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||c===void 0)&&c.bridge?"ios":"web"},Vy=s=>{const r=s.CapacitorCustomPlatform||null,c=s.Capacitor||{},u=c.Plugins=c.Plugins||{},g=()=>r!==null?r.name:Yy(s),f=()=>g()!=="web",y=N=>{const R=w.get(N);return!!(R?.platforms.has(g())||b(N))},b=N=>{var R;return(R=c.PluginHeaders)===null||R===void 0?void 0:R.find($=>$.name===N)},A=N=>s.console.error(N),w=new Map,T=(N,R={})=>{const $=w.get(N);if($)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),$.proxy;const L=g(),ce=b(N);let W;const se=async()=>(!W&&L in R?W=typeof R[L]=="function"?W=await R[L]():W=R[L]:r!==null&&!W&&"web"in R&&(W=typeof R.web=="function"?W=await R.web():W=R.web),W),E=(K,De)=>{var q,Fe;if(ce){const de=ce?.methods.find(dt=>De===dt.name);if(de)return de.rtype==="promise"?dt=>c.nativePromise(N,De.toString(),dt):(dt,ht)=>c.nativeCallback(N,De.toString(),dt,ht);if(K)return(q=K[De])===null||q===void 0?void 0:q.bind(K)}else{if(K)return(Fe=K[De])===null||Fe===void 0?void 0:Fe.bind(K);throw new Ld(`"${N}" plugin is not implemented on ${L}`,jl.Unimplemented)}},S=K=>{let De;const q=(...Fe)=>{const de=se().then(dt=>{const ht=E(dt,K);if(ht){const Ke=ht(...Fe);return De=Ke?.remove,Ke}else throw new Ld(`"${N}.${K}()" is not implemented on ${L}`,jl.Unimplemented)});return K==="addListener"&&(de.remove=async()=>De()),de};return q.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(q,"name",{value:K,writable:!1,configurable:!1}),q},ae=S("addListener"),Be=S("removeListener"),rt=(K,De)=>{const q=ae({eventName:K},De),Fe=async()=>{const dt=await q;Be({eventName:K,callbackId:dt},De)},de=new Promise(dt=>q.then(()=>dt({remove:Fe})));return de.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Fe()},de},ve=new Proxy({},{get(K,De){switch(De){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return ce?rt:ae;case"removeListener":return Be;default:return S(De)}}});return u[N]=ve,w.set(N,{name:N,proxy:ve,platforms:new Set([...Object.keys(R),...ce?[L]:[]])}),ve};return c.convertFileSrc||(c.convertFileSrc=N=>N),c.getPlatform=g,c.handleError=A,c.isNativePlatform=f,c.isPluginAvailable=y,c.registerPlugin=T,c.Exception=Ld,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c},Qy=s=>s.Capacitor=Vy(s),Rs=Qy(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Qd=Rs.registerPlugin;class Fd{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,c){let u=!1;this.listeners[r]||(this.listeners[r]=[],u=!0),this.listeners[r].push(c);const f=this.windowListeners[r];f&&!f.registered&&this.addWindowListener(f),u&&this.sendRetainedArgumentsForEvent(r);const y=async()=>this.removeListener(r,c);return Promise.resolve({remove:y})}async removeAllListeners(){this.listeners={};for(const r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}}notifyListeners(r,c,u){const g=this.listeners[r];if(!g){if(u){let f=this.retainedEventArguments[r];f||(f=[]),f.push(c),this.retainedEventArguments[r]=f}return}g.forEach(f=>f(c))}hasListeners(r){var c;return!!(!((c=this.listeners[r])===null||c===void 0)&&c.length)}registerWindowListener(r,c){this.windowListeners[c]={registered:!1,windowEventName:r,pluginEventName:c,handler:u=>{this.notifyListeners(c,u)}}}unimplemented(r="not implemented"){return new Rs.Exception(r,jl.Unimplemented)}unavailable(r="not available"){return new Rs.Exception(r,jl.Unavailable)}async removeListener(r,c){const u=this.listeners[r];if(!u)return;const g=u.indexOf(c);this.listeners[r].splice(g,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const c=this.retainedEventArguments[r];c&&(delete this.retainedEventArguments[r],c.forEach(u=>{this.notifyListeners(r,u)}))}}const _m=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),qm=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Fy extends Fd{async getCookies(){const r=document.cookie,c={};return r.split(";").forEach(u=>{if(u.length<=0)return;let[g,f]=u.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");g=qm(g).trim(),f=qm(f).trim(),c[g]=f}),c}async setCookie(r){try{const c=_m(r.key),u=_m(r.value),g=`; expires=${(r.expires||"").replace("expires=","")}`,f=(r.path||"/").replace("path=",""),y=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${c}=${u||""}${g}; path=${f}; ${y};`}catch(c){return Promise.reject(c)}}async deleteCookie(r){try{document.cookie=`${r.key}=; Max-Age=0`}catch(c){return Promise.reject(c)}}async clearCookies(){try{const r=document.cookie.split(";")||[];for(const c of r)document.cookie=c.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}}async clearAllCookies(){try{await this.clearCookies()}catch(r){return Promise.reject(r)}}}Qd("CapacitorCookies",{web:()=>new Fy});const Xy=async s=>new Promise((r,c)=>{const u=new FileReader;u.onload=()=>{const g=u.result;r(g.indexOf(",")>=0?g.split(",")[1]:g)},u.onerror=g=>c(g),u.readAsDataURL(s)}),Zy=(s={})=>{const r=Object.keys(s);return Object.keys(s).map(g=>g.toLocaleLowerCase()).reduce((g,f,y)=>(g[f]=s[r[y]],g),{})},Ky=(s,r=!0)=>s?Object.entries(s).reduce((u,g)=>{const[f,y]=g;let b,A;return Array.isArray(y)?(A="",y.forEach(w=>{b=r?encodeURIComponent(w):w,A+=`${f}=${b}&`}),A.slice(0,-1)):(b=r?encodeURIComponent(y):y,A=`${f}=${b}`),`${u}&${A}`},"").substr(1):null,Jy=(s,r={})=>{const c=Object.assign({method:s.method||"GET",headers:s.headers},r),g=Zy(s.headers)["content-type"]||"";if(typeof s.data=="string")c.body=s.data;else if(g.includes("application/x-www-form-urlencoded")){const f=new URLSearchParams;for(const[y,b]of Object.entries(s.data||{}))f.set(y,b);c.body=f.toString()}else if(g.includes("multipart/form-data")||s.data instanceof FormData){const f=new FormData;if(s.data instanceof FormData)s.data.forEach((b,A)=>{f.append(A,b)});else for(const b of Object.keys(s.data))f.append(b,s.data[b]);c.body=f;const y=new Headers(c.headers);y.delete("content-type"),c.headers=y}else(g.includes("application/json")||typeof s.data=="object")&&(c.body=JSON.stringify(s.data));return c};class $y extends Fd{async request(r){const c=Jy(r,r.webFetchExtra),u=Ky(r.params,r.shouldEncodeUrlParams),g=u?`${r.url}?${u}`:r.url,f=await fetch(g,c),y=f.headers.get("content-type")||"";let{responseType:b="text"}=f.ok?r:{};y.includes("application/json")&&(b="json");let A,w;switch(b){case"arraybuffer":case"blob":w=await f.blob(),A=await Xy(w);break;case"json":A=await f.json();break;case"document":case"text":default:A=await f.text()}const T={};return f.headers.forEach((N,R)=>{T[R]=N}),{data:A,headers:T,status:f.status,url:f.url}}async get(r){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))}async post(r){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))}async put(r){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))}async patch(r){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))}async delete(r){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))}}Qd("CapacitorHttp",{web:()=>new $y});class e0 extends Fd{constructor(){super()}async echo(r){return console.log("ECHO",r),r}async open(r){return console.log(r),new Promise((c,u)=>{var g,f,y=r;y.handler=function(T){console.log(T.razorpay_payment_id),c({response:T})},y["modal.ondismiss"]=function(){u(JSON.stringify({code:2,description:"Payment Canceled by User"}))};var b=0;y.hasOwnProperty("retry")&&y.retry.enabled===!0&&(b=y.retry.max_count);var A=document.getElementsByTagName("script")[0],w=document.createElement("script");w.id="rzp-jssdk",w.setAttribute("src","https://checkout.razorpay.com/v1/checkout.js"),(g=A.parentNode)===null||g===void 0||g.appendChild(w),w.addEventListener("load",()=>{try{f=new window.Razorpay(y),f.open(),f.on("payment.failed",T=>{var N;b=b-1,b<0&&(console.log(T),(N=A.parentNode)===null||N===void 0||N.removeChild(w),u(T.error))})}catch(T){u({response:T})}})})}}const eh=Qd("Checkout",{web:()=>zs(()=>Promise.resolve().then(()=>t0),void 0).then(s=>new s.CheckoutWeb)}),t0=Object.freeze(Object.defineProperty({__proto__:null,Checkout:eh,CheckoutWeb:e0},Symbol.toStringTag,{value:"Module"})),n0=async(s,r)=>{console.log("Initializing payment of "+s,r);const c="rzp_test_1234567890";if(Rs.isNativePlatform())try{const u={key:c,amount:(s*100).toString(),name:"Appointment App",description:"Consultation Fee",prefill:{email:"test@example.com",contact:"9999999999"},theme:{color:"#4f46e5"}};return{success:!0,paymentId:(await eh.open(u)).response.razorpay_payment_id,amount:s,timestamp:new Date().toISOString(),method:"native-razorpay"}}catch(u){throw console.error("Native Payment Failed",u),new Error("Native Payment Failed: "+u.message)}else return new Promise((u,g)=>{setTimeout(()=>{u({success:!0,paymentId:"pay_web_"+Math.random().toString(36).substr(2,9),amount:s,timestamp:new Date().toISOString(),method:"web-mock"})},1500)})},i0=()=>{const{currentUser:s}=Ca(),[r,c]=x.useState([]),[u,g]=x.useState(null),[f,y]=x.useState(!1),[b,A]=x.useState([]),[w,T]=x.useState(new Date().toISOString().split("T")[0]),[N,R]=x.useState(!1);x.useEffect(()=>{$()},[]);const $=async()=>{try{const E=await Iy();c(E)}catch(E){console.error(E)}},L=async E=>{g(E),y(!0),await ce(E.id,w)},ce=async(E,S)=>{R(!0),A([]);try{const ae=await Gy(E,S);A(ae||[])}catch(ae){console.error(ae)}R(!1)},W=E=>{const S=E.target.value;T(S),u&&ce(u.id,S)},se=async E=>{if(window.confirm(`Book appointment with ${u.name} at ${E.time}? Fees: ${u.consultationFee}`)){R(!0);try{const S=await n0(u.consultationFee,{doctorId:u.id,patientId:s.uid});await Wy(u.id,w,E.time,S.paymentId),alert(`Booking Confirmed! Payment ID: ${S.paymentId}`),ce(u.id,w)}catch(S){console.error(S),alert("Booking Failed: "+S.message)}R(!1)}};return t.jsx("div",{style:{padding:"1rem"},children:f?t.jsxs("div",{children:[t.jsx("button",{onClick:()=>y(!1),style:{marginBottom:"1rem",background:"none",border:"none",color:"var(--color-text-muted)",cursor:"pointer"},children:" Back to Doctors"}),t.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"},children:[t.jsxs("h3",{style:{marginTop:0},children:["Book with ",u.name||u.displayName]}),t.jsxs("label",{style:{display:"block",marginBottom:"1rem"},children:["Select Date:",t.jsx("input",{type:"date",value:w,onChange:W,style:{marginLeft:"0.5rem",padding:"0.5rem"}})]}),N?t.jsx("p",{children:"Loading slots..."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem"},children:b.length===0?t.jsx("p",{children:"No slots available for this date."}):b.map((E,S)=>t.jsx("button",{disabled:E.isBooked,onClick:()=>!E.isBooked&&se(E),style:{padding:"0.75rem",background:E.isBooked?"#e2e8f0":"var(--color-bg-card)",border:E.isBooked?"none":"1px solid var(--color-primary)",color:E.isBooked?"#94a3b8":"var(--color-primary)",cursor:E.isBooked?"not-allowed":"pointer",borderRadius:"var(--radius-md)"},children:E.time},S))})]})]}):t.jsxs("div",{children:[t.jsx("h3",{children:"Available Doctors"}),t.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:r.map(E=>t.jsxs("div",{style:{padding:"1.5rem",background:"white",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",transition:"transform 0.2s"},children:[t.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--color-primary)"},children:E.name||E.displayName}),t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"var(--color-text-muted)"},children:E.specialization}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[t.jsxs("span",{style:{fontWeight:600},children:["",E.consultationFee]}),t.jsx("button",{onClick:()=>L(E),style:{padding:"0.5rem 1rem",background:"var(--color-secondary)",color:"white",border:"none",borderRadius:"var(--radius-full)"},children:"Book Now"})]}),E.hospitalName&&t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",color:"#888"},children:["@",E.hospitalName]})]},E.id))})]})})},a0=({showNotification:s})=>{const[r,c]=x.useState(!1),[u,g]=x.useState(null),[f,y]=x.useState([]),[b,A]=x.useState("all"),[w,T]=x.useState("");x.useEffect(()=>{N()},[]);const N=async()=>{try{c(!0);const W=Se(V,"config","ads"),se=await Gt(W);se.exists()?g(se.data()):g({enabled:!1,adProvider:"google",googleAdSenseId:"",bookingPageAdsEnabled:!1,adPlacements:{bookingPage:!1,doctorDashboard:!1,hospitalDashboard:!1}});const E=xe(V,"users"),S=Oe(E,ye("role","==","doctor")),ae=Oe(E,ye("role","==","hospital")),[Be,rt]=await Promise.all([Re(S),Re(ae)]),ve=[];Be.forEach(K=>{const De=K.data();ve.push({id:K.id,...De,type:"doctor",adsEnabled:De.adsEnabled||!1,pricingModel:De.pricingModel||"full",discountPercentage:De.discountPercentage||0})}),rt.forEach(K=>{const De=K.data();ve.push({id:K.id,...De,type:"hospital",adsEnabled:De.adsEnabled||!1,pricingModel:De.pricingModel||"full",discountPercentage:De.discountPercentage||0})}),y(ve)}catch(W){console.error("Error loading ads data:",W),s?.("Error loading ads configuration","error")}finally{c(!1)}},R=async()=>{try{c(!0);const W=Se(V,"config","ads");await Zt(W,u),s?.("Global ad configuration saved successfully","success")}catch(W){console.error("Error saving config:",W),s?.("Error saving configuration","error")}finally{c(!1)}},$=async(W,se)=>{try{const E=Se(V,"users",W);await Zt(E,{adsEnabled:!se}),y(S=>S.map(ae=>ae.id===W?{...ae,adsEnabled:!se}:ae)),s?.("Ad settings updated","success")}catch(E){console.error("Error updating entity ads:",E),s?.("Error updating ad settings","error")}},L=async(W,se,E=0)=>{try{const S=Se(V,"users",W);await Zt(S,{pricingModel:se,discountPercentage:se==="reduced"?E:0}),y(ae=>ae.map(Be=>Be.id===W?{...Be,pricingModel:se,discountPercentage:E}:Be)),s?.("Pricing model updated","success")}catch(S){console.error("Error updating pricing:",S),s?.("Error updating pricing model","error")}},ce=f.filter(W=>b==="doctors"?W.type==="doctor":b==="hospitals"?W.type==="hospital":!0).filter(W=>{if(!w)return!0;const se=w.toLowerCase();return W.name?.toLowerCase().includes(se)||W.email?.toLowerCase().includes(se)});return r&&!u?t.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading ads configuration..."}):t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{style:{marginBottom:"10px"},children:" Ads Management"}),t.jsx("p",{style:{color:"#666",marginBottom:"30px"},children:"Configure ads to monetize your platform. Providers use the app for free, and ads generate revenue for you."}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",marginBottom:"30px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Global Ad Settings"}),t.jsxs("div",{style:{display:"grid",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:u?.enabled||!1,onChange:W=>g({...u,enabled:W.target.checked}),style:{width:"20px",height:"20px",marginRight:"10px"}}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"500"},children:"Enable Ads System Globally"})]}),t.jsx("div",{style:{padding:"6px 12px",background:"#e3f2fd",borderRadius:"20px",fontSize:"13px",color:"#1976d2",fontWeight:"500"},children:"100% Revenue to Platform"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Google AdSense Publisher ID"}),t.jsx("input",{type:"text",placeholder:"ca-pub-xxxxxxxxxxxxxxxx",value:u?.googleAdSenseId||"",onChange:W=>g({...u,googleAdSenseId:W.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Get this from your Google AdSense account"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:" Revenue Model Options"}),t.jsxs("div",{style:{padding:"15px",background:"#f0f7ff",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"14px",marginBottom:"12px",fontWeight:"600",color:"#1976d2"},children:" Flexible Pricing Options"}),t.jsxs("div",{style:{display:"grid",gap:"10px",fontSize:"13px",color:"#555"},children:[t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Full Rate:"})," Providers pay standard app usage fees (no ads)"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Reduced Rate:"})," Providers pay discounted fees + see ads in dashboard"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Free with Ads:"})," Providers pay nothing but see ads in dashboard (you make money from ads)"]})]}),t.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"#fff3cd",borderRadius:"6px",fontSize:"12px",color:"#856404"},children:[t.jsx("strong",{children:"Note:"})," Configure each provider's pricing model individually below. Booking page ads are shown to patients regardless of provider's pricing model."]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"500"},children:" Ad Placement Locations"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.bookingPage||!1,onChange:W=>g({...u,adPlacements:{...u?.adPlacements,bookingPage:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Booking Page (Global - All Users)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Shows ads on the appointment booking page for all patients"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.doctorDashboard||!1,onChange:W=>g({...u,adPlacements:{...u?.adPlacements,doctorDashboard:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Doctor Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on doctor dashboards (control per-doctor below)"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.hospitalDashboard||!1,onChange:W=>g({...u,adPlacements:{...u?.adPlacements,hospitalDashboard:W.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Hospital Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on hospital dashboards (control per-hospital below)"})]})]})]}),t.jsx("button",{onClick:R,disabled:r,style:{padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:r?"not-allowed":"pointer",width:"fit-content"},children:r?"Saving...":"Save Global Settings"})]})]}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Configure Pricing & Ads Per Provider"}),t.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px"},children:"Set individual pricing models and ad settings for each doctor/hospital. Mix and match based on their preferences."}),t.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:w,onChange:W=>T(W.target.value),style:{flex:1,minWidth:"250px",padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsxs("select",{value:b,onChange:W=>A(W.target.value),style:{padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",cursor:"pointer"},children:[t.jsx("option",{value:"all",children:"All Providers"}),t.jsx("option",{value:"doctors",children:"Doctors Only"}),t.jsx("option",{value:"hospitals",children:"Hospitals Only"})]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Type"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Email"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Pricing Model"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Ads"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Actions"})]})}),t.jsx("tbody",{children:ce.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"},children:"No providers found"})}):ce.map(W=>t.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[t.jsx("td",{style:{padding:"12px"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:W.type==="doctor"?"#e3f2fd":"#f3e5f5",color:W.type==="doctor"?"#1976d2":"#7b1fa2"},children:W.type==="doctor"?" Doctor":" Hospital"})}),t.jsx("td",{style:{padding:"12px",fontWeight:"500"},children:W.name||"N/A"}),t.jsx("td",{style:{padding:"12px",color:"#666"},children:W.email||"N/A"}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsxs("select",{value:W.pricingModel||"full",onChange:se=>{const E=se.target.value;if(E==="reduced"){const S=prompt("Enter discount percentage (0-100):",W.discountPercentage||"50");S!==null&&L(W.id,E,parseInt(S)||50)}else L(W.id,E)},style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #ddd",fontSize:"13px",fontWeight:"600",cursor:"pointer",background:W.pricingModel==="free"?"#e8f5e9":W.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:W.pricingModel==="free"?"#2e7d32":W.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[t.jsx("option",{value:"full",children:" Full Rate"}),t.jsxs("option",{value:"reduced",children:[" Reduced (",W.discountPercentage||0,"% off)"]}),t.jsx("option",{value:"free",children:" Free + Ads"})]})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:W.adsEnabled?"#c8e6c9":"#ffcdd2",color:W.adsEnabled?"#2e7d32":"#c62828"},children:W.adsEnabled?" ON":" OFF"})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("button",{onClick:()=>$(W.id,W.adsEnabled),style:{padding:"6px 16px",background:W.adsEnabled?"#f44336":"#4caf50",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"600",cursor:"pointer"},children:W.adsEnabled?"Disable Ads":"Enable Ads"})})]},W.id))})]})})]}),t.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e8f5e9",borderRadius:"8px",border:"1px solid #4caf50"},children:[t.jsx("h4",{style:{marginTop:0,color:"#2e7d32"},children:" How Pricing Models Work"}),t.jsxs("div",{style:{display:"grid",gap:"15px",marginBottom:0},children:[t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#1976d2",marginBottom:"5px"},children:" Full Rate (No Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"100% of app usage fees"}),t.jsx("br",{})," No ads shown in their dashboard",t.jsx("br",{})," Premium experience",t.jsx("br",{})," Calculated: appointments  rate + prescriptions  rate"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#e65100",marginBottom:"5px"},children:" Reduced Rate (With Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"discounted fees"})," (you set %)",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads)",t.jsx("br",{})," Win-win: Lower cost for them, ad revenue for you",t.jsx("br",{})," Calculated: (appointments  rate + prescriptions  rate)  (1 - discount%)"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#2e7d32",marginBottom:"5px"},children:" Free + Ads"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"$0"})," app usage fees",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads only)",t.jsx("br",{})," Great for small clinics or new sign-ups",t.jsx("br",{})," Calculated: $0 cost to provider, 100% ad revenue to you"]})]})]})]}),t.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[t.jsx("h4",{style:{marginTop:0,color:"#856404"},children:" Configuration Steps"}),t.jsxs("ol",{style:{marginBottom:0,color:"#856404",lineHeight:"1.8",fontSize:"14px"},children:[t.jsxs("li",{children:["Create a Google AdSense account at ",t.jsx("a",{href:"https://www.google.com/adsense",target:"_blank",rel:"noopener noreferrer",children:"google.com/adsense"})]}),t.jsx("li",{children:'Get your Publisher ID (starts with "ca-pub-")'}),t.jsx("li",{children:"Add the AdSense code to your website's HTML head section"}),t.jsx("li",{children:"Enable ads globally and configure placements above"}),t.jsx("li",{children:"For each provider, choose their pricing model:"}),t.jsxs("ul",{style:{marginTop:"5px",marginBottom:"5px"},children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Full Rate:"})," Disable ads, they pay full price"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Reduced Rate:"})," Enable ads, set discount %, they pay less"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Free + Ads:"})," Enable ads, they pay nothing"]})]}),t.jsx("li",{children:"Booking page ads will show to all patients regardless of pricing model"})]})]})]})},l0=()=>{const[s,r]=x.useState("overview"),[c,u]=x.useState(!1),[g,f]=x.useState(""),[y,b]=x.useState(null),[A,w]=x.useState(!1),[T,N]=x.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[R,$]=x.useState([]),[L,ce]=x.useState([]),[W,se]=x.useState([]),[E,S]=x.useState([]),[ae,Be]=x.useState(""),[rt,ve]=x.useState([]),[K,De]=x.useState([]),[q,Fe]=x.useState(!1),[de,dt]=x.useState(null),[ht,Ke]=x.useState(!1),[I,re]=x.useState(""),[fe,Je]=x.useState(""),[qe,Ae]=x.useState("all"),[We,$e]=x.useState("all"),[ft,Ie]=x.useState(null),[at,Dn]=x.useState({appointmentCost:"",prescriptionCost:""}),[Qt,Kt]=x.useState(!1),[lt,en]=x.useState(""),[At,tn]=x.useState(!1),[k,Te]=x.useState(null);x.useEffect(()=>{const C=window.matchMedia("(max-width: 480px)"),O=G=>w(G.matches);return w(C.matches),C.addEventListener?C.addEventListener("change",O):C.addListener(O),()=>{C.removeEventListener?C.removeEventListener("change",O):C.removeListener(O)}},[]);const[He,Ge]=x.useState(!1),[ne,St]=x.useState(null),[Ot,wt]=x.useState(!1);x.useEffect(()=>{const C=new Date,O=C.getFullYear(),G=String(C.getMonth()+1).padStart(2,"0");Be(`${O}-${G}`)},[]),x.useEffect(()=>{(async()=>{try{await zi(),await rn()}catch(O){console.error("Error initializing dashboard:",O),f("Failed to initialize dashboard. Please refresh the page.")}})()},[]),x.useEffect(()=>{if(ae&&s==="payments")try{wn()}catch(C){console.error("Error calculating payments:",C)}},[ae,s]),x.useEffect(()=>{s==="payment-requests"&&ge()},[s]),x.useEffect(()=>{if(y){const C=setTimeout(()=>b(null),3e3);return()=>clearTimeout(C)}},[y]);const jn=(C,O="success")=>{b({message:C,type:O})},zi=async()=>{try{const C=Se(V,"config","billing"),O=await Gt(C);O.exists()&&N(O.data())}catch(C){console.error("Error loading config:",C)}},rn=async()=>{u(!0);try{await Promise.all([Sn(),et(),_(),X()])}catch(C){console.error("Error loading data:",C),f("Failed to load data. Please refresh.")}finally{u(!1)}},Sn=async()=>{try{const C=xe(V,"users"),O=Oe(C,ye("role","==","doctor")),G=await Re(O),ie=[];G.forEach(je=>{const Me=je.data();Me.hospitalId||ie.push({id:je.id,uid:je.id,...Me})}),console.log(" Individual Doctors loaded:",ie.length),$(ie)}catch(C){console.error("Error loading individual doctors:",C)}},et=async()=>{try{const C=xe(V,"hospitals"),O=await Re(C),G=[];O.forEach(je=>{G.push({id:je.id,...je.data()})});const ie=xe(V,"users");for(const je of G){const Me=Oe(ie,ye("role","==","doctor"),ye("hospitalId","==",je.id)),Dt=await Re(Me);je.doctorCount=Dt.size}console.log(" Hospitals loaded:",G.length),ce(G)}catch(C){console.error("Error loading hospitals:",C)}},_=async()=>{try{const C=xe(V,"appointments"),O=await Re(C),G=[];O.forEach(ie=>{const je={id:ie.id,...ie.data()};G.push(je)}),console.log(" Appointments loaded:",G.length),G.length>0&&console.log(" Sample appointment data:",G[0]),se(G)}catch(C){console.error("Error loading appointments:",C)}},X=async()=>{try{const C=xe(V,"prescriptions"),O=await Re(C),G=[];O.forEach(ie=>{const je={id:ie.id,...ie.data()};G.push(je)}),console.log(" Prescriptions loaded:",G.length),G.length>0&&console.log(" Sample prescription data:",G[0]),S(G)}catch(C){console.error("Error loading prescriptions:",C)}},ge=async()=>{try{Fe(!0),console.log(" Loading payment requests...");const C=xe(V,"payments"),O=await Re(C);console.log(" Payment requests snapshot size:",O.size);const G=[];O.forEach(ie=>{const je={id:ie.id,...ie.data()};console.log("Payment document:",je),G.push(je)}),G.sort((ie,je)=>{const Me=ie.createdAt?new Date(ie.createdAt):new Date(0);return(je.createdAt?new Date(je.createdAt):new Date(0))-Me}),console.log(" Payment requests loaded successfully:",G.length),De(G),Fe(!1)}catch(C){console.error(" Error loading payment requests:",C),console.error("Error code:",C.code),console.error("Error message:",C.message),De([]),Fe(!1),C.code!=="permission-denied"&&C.code!=="not-found"&&jn("Error: "+C.message,"error")}},ke=async()=>{try{u(!0);const C=Se(V,"config","billing");await Zt(C,{...T,updatedAt:new Date().toISOString()}),alert(" Global configuration updated successfully!")}catch{try{const O=Se(V,"config","billing");await qn(O,{...T,updatedAt:new Date().toISOString()}),alert(" Global configuration created successfully!")}catch(O){console.error("Error saving config:",O),f("Failed to save configuration.")}}finally{u(!1)}},me=(C,O)=>{Ie({...C,type:O}),Dn({appointmentCost:C.customRates?.appointmentCost||"",prescriptionCost:C.customRates?.prescriptionCost||""})},Ee=async()=>{if(ft)try{u(!0);const C=ft.type==="doctor"?"users":"hospitals",O=Se(V,C,ft.id),G={};at.appointmentCost&&(G.appointmentCost=parseFloat(at.appointmentCost)),at.prescriptionCost&&(G.prescriptionCost=parseFloat(at.prescriptionCost)),await Zt(O,{customRates:Object.keys(G).length>0?G:null}),ft.type==="doctor"?await Sn():await et(),Ie(null),alert(" Custom rates updated successfully!")}catch(C){console.error("Error saving custom rates:",C),f("Failed to save custom rates.")}finally{u(!1)}},ot=async C=>{if(confirm(`Verify payment of ${C.currency} ${C.amount?.toFixed(2)} from ${C.hospitalName||C.doctorName}?`))try{u(!0);const O=Se(V,"payments",C.id);await Zt(O,{status:"completed",verifiedAt:new Date().toISOString(),verifiedBy:"admin"}),jn(" Payment verified successfully!","success"),await ge(),(s==="payments"||s==="billing-overview")&&wn()}catch(O){console.error("Error verifying payment:",O),jn("Failed to verify payment","error")}finally{u(!1)}},Nt=async C=>{const O=prompt("Enter rejection reason (optional):");if(O!==null)try{u(!0);const G=Se(V,"payments",C.id);await Zt(G,{status:"failed",rejectedAt:new Date().toISOString(),rejectedBy:"admin",rejectionReason:O||"No reason provided"}),jn(" Payment rejected","success"),await ge()}catch(G){console.error("Error rejecting payment:",G),jn("Failed to reject payment","error")}finally{u(!1)}},Ue=C=>{dt(C),Ke(!0)},dn=(C,O,G)=>{Te({entity:C,type:O,...G}),tn(!0)},ji=async()=>{if(!k||k.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${T.currency} ${k.pending.toFixed(2)} as paid for ${k.entity.name||k.entity.displayName}?`))try{u(!0);const O=k.type==="doctor"?"users":"hospitals",G=Se(V,O,k.entity.id),je=(k.entity.paidAmount||0)+k.pending;await Zt(G,{paidAmount:je,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:k.pending}),await ea(xe(V,"paymentHistory"),{entityType:k.type,entityId:k.entity.id,amount:k.pending,month:ae,paidAt:new Date().toISOString()}),await an(k.entity,k.type,ae),alert(" Payment marked as paid!"),tn(!1),k.type==="doctor"?await Sn():await et(),await _(),await X()}catch(O){console.error(" Error marking payment from modal:",O),console.error("Error details:",O.message,O.code),alert(`Failed to mark payment as paid: ${O.message||"Unknown error"}`),f(`Failed to mark payment as paid: ${O.message||"Unknown error"}`)}finally{u(!1)}},In=async()=>{if(!lt||!lt.includes("@")){alert("Please enter a valid email address");return}if(window.confirm(`Create new admin account for: ${lt}?

The user must register with this email first, then you can set their role to admin.`))try{u(!0);const O=xe(V,"users"),G=Oe(O,ye("email","==",lt)),ie=await Re(G);if(ie.empty){alert(" User not found. The user must register first before being made an admin.");return}const je=ie.docs[0],Me=Se(V,"users",je.id);await Zt(Me,{role:"admin"}),alert(` User ${lt} is now an admin!`),Kt(!1),en("")}catch(O){console.error("Error creating admin:",O),f(O.message),f("Failed to save custom rates.")}finally{u(!1)}},ei=async(C,O,G)=>{const ie=!O,je=ie?"enable":"disable";if(console.log(" Toggling provider status:",{providerId:C,currentStatus:O,newStatus:ie,providerType:G}),!!window.confirm(`Are you sure you want to ${je} this ${G}?

${ie?"They will appear in the booking system.":"They will be hidden from the booking system."}`))try{u(!0);const Dt=G==="doctor"?"users":"hospitals",Xe=Se(V,Dt,C);console.log(" Updating document:",Dt,C),await Zt(Xe,{enabled:ie,lastStatusChange:new Date().toISOString()}),console.log(" Successfully updated status"),jn(` ${G==="doctor"?"Doctor":"Hospital"} ${je}d successfully!`,"success"),G==="doctor"?await Sn():await et()}catch(Dt){console.error(` Error toggling ${G} status:`,Dt),console.error("Error details:",Dt.code,Dt.message),jn(` Failed to ${je} ${G}: ${Dt.message||"Permission denied"}`,"error")}finally{u(!1)}},wn=()=>{if(console.log(" Calculating payments for:",ae),!ae||!R||!L||!W||!E){console.log(" Skipping payment calculation - data not ready");return}const C=[];R.forEach(O=>{const G=nn(O,"doctor",ae);C.push({type:"doctor",entity:O,...G})}),L.forEach(O=>{const G=nn(O,"hospital",ae);C.push({type:"hospital",entity:O,...G})}),console.log(" Payment data calculated:",C.length),ve(C)},nn=(C,O,G)=>{console.log(" Calculating billing for:",{type:O,entityId:C.id,entityName:C.name||C.displayName,month:G,totalAppointments:W.length,totalPrescriptions:E.length});const ie=W.filter(Ve=>{const ni=O==="doctor"?Ve.doctorId===C.uid&&!Ve.hospitalId:Ve.hospitalId===C.id;let Tt=Ve.date||Ve.appointmentDate||Ve.createdAt||Ve.timestamp;Tt&&typeof Tt=="object"&&Tt.toDate&&(Tt=Tt.toDate().toISOString().split("T")[0]),Tt&&typeof Tt=="string"&&(Tt=Tt.substring(0,7));const Gn=Tt&&Tt===G,Un=Ve.paymentStatus==="paid",Wn=!Ve.paymentStatus||Ve.paymentStatus==="unpaid"||Ve.paymentStatus!=="paid";return console.log("  Checking appointment:",{aptId:Ve.id,doctorId:Ve.doctorId,hospitalId:Ve.hospitalId,date:Ve.date,appointmentDate:Ve.appointmentDate,createdAt:Ve.createdAt,extractedDate:Tt,month:G,paymentStatus:Ve.paymentStatus,isPaid:Un,isUnpaid:Wn,matchesEntity:ni,matchesMonth:Gn,included:ni&&Gn&&Wn}),ni&&Gn&&Wn}),je=E.filter(Ve=>{const ni=O==="doctor"?Ve.doctorId===C.uid&&!Ve.hospitalId:Ve.hospitalId===C.id;let Tt=Ve.createdAt||Ve.date||Ve.prescriptionDate||Ve.timestamp;Tt&&typeof Tt=="object"&&Tt.toDate&&(Tt=Tt.toDate().toISOString().split("T")[0]),Tt&&typeof Tt=="string"&&(Tt=Tt.substring(0,7));const Gn=Tt&&Tt===G,Un=!Ve.paymentStatus||Ve.paymentStatus==="unpaid"||Ve.paymentStatus!=="paid";return console.log("  Checking prescription:",{prescId:Ve.id,doctorId:Ve.doctorId,hospitalId:Ve.hospitalId,createdAt:Ve.createdAt,extractedDate:Tt,month:G,paymentStatus:Ve.paymentStatus,matchesEntity:ni,matchesMonth:Gn,isUnpaid:Un,included:ni&&Gn&&Un}),ni&&Gn&&Un});console.log("  Result:",{appointments:ie.length,prescriptions:je.length});const Me=qa(C,T);console.log("  Using rates:",Me);const Dt=ie.length*(Me.appointmentCost||0),Xe=je.length*(Me.prescriptionCost||0),Ft=Dt+Xe,hn=C.paidAmount||0,ui=Ft-hn;return{appointments:ie.length,prescriptions:je.length,appointmentRevenue:Dt,prescriptionRevenue:Xe,totalRevenue:Ft,paid:hn,pending:Math.max(0,ui),currency:Me.currency,symbol:Me.symbol}},gt=async C=>{if(C.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${T.currency} ${C.pending.toFixed(2)} as paid for ${C.entity.name||C.entity.displayName}?`))try{u(!0);const G=C.type==="doctor"?"users":"hospitals",ie=Se(V,G,C.entity.id),Me=(C.entity.paidAmount||0)+C.pending;await Zt(ie,{paidAmount:Me,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:C.pending}),await ea(xe(V,"paymentHistory"),{entityType:C.type,entityId:C.entity.id,amount:C.pending,month:ae,paidAt:new Date().toISOString()}),await an(C.entity,C.type,ae),alert(" Payment marked as paid!"),C.type==="doctor"?await Sn():await et(),await _(),await X()}catch(G){console.error(" Error marking payment:",G),console.error("Error details:",G.message,G.code),alert(`Failed to mark payment as paid: ${G.message||"Unknown error"}`),f(`Failed to mark payment as paid: ${G.message||"Unknown error"}`)}finally{u(!1)}},an=async(C,O,G)=>{try{console.log(" Marking items as paid for:",{entity:C.name||C.displayName,type:O,month:G});const ie=W.filter(Me=>{const Dt=O==="doctor"?Me.doctorId===C.uid&&!Me.hospitalId:Me.hospitalId===C.id;let Xe=Me.date||Me.appointmentDate||Me.createdAt||Me.timestamp;return Xe&&typeof Xe=="object"&&Xe.toDate&&(Xe=Xe.toDate().toISOString().split("T")[0]),Xe&&typeof Xe=="string"&&(Xe=Xe.substring(0,7)),Dt&&(Xe&&Xe===G)&&Me.paymentStatus!=="paid"}),je=E.filter(Me=>{const Dt=O==="doctor"?Me.doctorId===C.uid&&!Me.hospitalId:Me.hospitalId===C.id;let Xe=Me.createdAt||Me.date||Me.prescriptionDate||Me.timestamp;return Xe&&typeof Xe=="object"&&Xe.toDate&&(Xe=Xe.toDate().toISOString().split("T")[0]),Xe&&typeof Xe=="string"&&(Xe=Xe.substring(0,7)),Dt&&(Xe&&Xe===G)&&Me.paymentStatus!=="paid"});console.log(` Found ${ie.length} appointments and ${je.length} prescriptions to mark as paid`);for(const Me of ie)try{const Dt=Se(V,"appointments",Me.id);await Zt(Dt,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:G}),console.log(` Marked appointment ${Me.id} as paid`)}catch(Dt){console.error(` Error marking appointment ${Me.id} as paid:`,Dt)}for(const Me of je)try{const Dt=Se(V,"prescriptions",Me.id);await Zt(Dt,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:G}),console.log(` Marked prescription ${Me.id} as paid`)}catch(Dt){console.error(` Error marking prescription ${Me.id} as paid:`,Dt)}console.log(` Marked ${ie.length} appointments and ${je.length} prescriptions as paid`)}catch(ie){throw console.error("Error marking items as paid:",ie),ie}},mn=async C=>{try{let O=null,G=null;if(C.doctorId){const ie=Se(V,"users",C.doctorId),je=await Gt(ie);je.exists()&&(O={id:je.id,...je.data()})}if(C.hospitalId){const ie=Se(V,"hospitals",C.hospitalId),je=await Gt(ie);je.exists()&&(G={id:je.id,...je.data()})}St({...C,doctorInfo:O,hospitalInfo:G}),Ge(!0)}catch(O){console.error("Error loading appointment details:",O),jn(" Failed to load appointment details","error")}},Ye=()=>{if(!W||!E)return t.jsx("div",{style:m.loading,children:"Loading overview data..."});const C=W.filter(G=>G.paymentStatus!=="paid"),O=E.filter(G=>G.paymentStatus!=="paid");return t.jsxs("div",{style:m.overview,children:[t.jsx("h2",{children:" System Overview"}),t.jsxs("div",{style:m.statsGrid,children:[t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:R?.length||0}),t.jsx("div",{style:m.statLabel,children:"Individual Doctors"})]}),t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:L?.length||0}),t.jsx("div",{style:m.statLabel,children:"Hospitals"})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>r("payments"),children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:W?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Appointments"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[C?.length||0," unpaid"]})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>r("payments"),children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:E?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Prescriptions"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[O?.length||0," unpaid"]})]})]}),t.jsxs("div",{style:m.recentSection,children:[t.jsxs("div",{style:m.recentHeader,children:[t.jsx("h3",{children:" Recent Appointments"}),t.jsxs("label",{style:m.toggleLabel,children:[t.jsx("input",{type:"checkbox",checked:Ot,onChange:G=>wt(G.target.checked)}),t.jsx("span",{style:{marginLeft:"0.5rem"},children:"Show paid items"})]})]}),t.jsxs("div",{style:m.tableContainer,children:[t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Patient"}),t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:(Ot?W:C).slice(0,10).map(G=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:G.date||"N/A"}),t.jsx("td",{style:m.td,children:G.patientName||"N/A"}),t.jsx("td",{style:m.td,children:G.doctorName||"N/A"}),t.jsx("td",{style:m.td,children:G.hospitalName||"N/A"}),t.jsx("td",{style:m.td,children:G.status||"pending"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:G.paymentStatus==="paid"?"#27ae60":"#e74c3c",color:"white"},children:G.paymentStatus==="paid"?" Paid":" Unpaid"})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>mn(G),style:m.viewButton,children:" View Details"})})]},G.id))})]}),(Ot?W:C).length===0&&t.jsx("div",{style:m.emptyState,children:"No appointments found"})]})]}),t.jsxs("div",{style:m.infoBox,children:[t.jsx("h3",{children:" How This System Works"}),t.jsxs("ul",{style:m.infoList,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Individual Doctors:"})," Billed separately per appointment & prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Hospital Doctors:"})," All billing aggregated at hospital level"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Custom Rates:"})," Override global rates per doctor or hospital"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Monthly Tracking:"})," View and manage payments by month"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Payment Status:"})," Once paid, appointments/prescriptions are marked and hidden from billing"]})]})]}),t.jsxs("div",{style:m.adminSection,children:[t.jsx("h3",{children:" Admin Management"}),t.jsx("p",{style:m.subtitle,children:"Create new admin users"}),t.jsx("button",{onClick:()=>Kt(!0),style:m.createAdminButton,children:" Create New Admin"})]})]})},Si=()=>t.jsxs("div",{style:m.configSection,children:[t.jsx("h2",{children:" Multi-Currency Configuration"}),t.jsx("p",{style:m.subtitle,children:"Set rates for different currencies. Currency is auto-selected based on doctor/hospital country."}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Currency Logic:"})," India  INR, All others  GBP"]}),T.rates?t.jsxs("div",{style:m.configForm,children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#fff3e0",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#e65100"},children:" INR (India)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:T.rates.INR?.appointmentCost||500,onChange:C=>N({...T,rates:{...T.rates,INR:{...T.rates.INR,appointmentCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"500"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:T.rates.INR?.prescriptionCost||200,onChange:C=>N({...T,rates:{...T.rates,INR:{...T.rates.INR,prescriptionCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"200"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#e8f5e9",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#2e7d32"},children:" GBP (Default)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:T.rates.GBP?.appointmentCost||5,onChange:C=>N({...T,rates:{...T.rates,GBP:{...T.rates.GBP,appointmentCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"5"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:T.rates.GBP?.prescriptionCost||2,onChange:C=>N({...T,rates:{...T.rates,GBP:{...T.rates.GBP,prescriptionCost:parseFloat(C.target.value)||0}}}),style:m.input,placeholder:"2"})]})]}),t.jsx("button",{onClick:ke,style:m.saveButton,disabled:c,children:c?"Saving...":" Save Multi-Currency Configuration"})]}):t.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[t.jsx("p",{style:{marginBottom:"1rem",color:"#666"},children:"Multi-currency not configured yet. Click below to set it up."}),t.jsx("button",{onClick:()=>window.location.href="/setup-multi-currency",style:{...m.saveButton,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:" Setup Multi-Currency"})]})]}),Ri=()=>{if(!R)return t.jsx("div",{style:m.loading,children:"Loading doctors..."});const C=R.filter(O=>{const G=I.toLowerCase(),ie=!I||O.displayName?.toLowerCase().includes(G)||O.email?.toLowerCase().includes(G)||O.specialization?.toLowerCase().includes(G)||O.city?.toLowerCase().includes(G),je=O.enabled!==!1;return ie&&(qe==="all"||qe==="enabled"&&je||qe==="disabled"&&!je)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Individual Doctors (",R?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Doctors not affiliated with any hospital"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search doctors by name, email, specialization, location...",value:I,onChange:O=>re(O.target.value),style:m.searchInput}),t.jsxs("select",{value:qe,onChange:O=>Ae(O.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Doctors (",R?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",R?.filter(O=>O.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",R?.filter(O=>O.enabled===!1).length||0,")"]})]})]}),C.length===0?t.jsx("div",{style:m.emptyState,children:I||qe!=="all"?"No doctors match your search/filter criteria":"No individual doctors found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Name"}),t.jsx("th",{style:m.th,children:"Specialization"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(O=>{const G=nn(O,"doctor",ae),ie=O.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:ie?"#27ae60":"#e74c3c",color:"white"},children:ie?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:O.displayName||"N/A"}),t.jsx("td",{style:m.td,children:O.specialization||"N/A"}),t.jsx("td",{style:m.td,children:O.city?`${O.city}, ${O.country}`:"N/A"}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.appointmentCost||G.appointmentRevenue/Math.max(G.appointments,1),O.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.prescriptionCost||G.prescriptionRevenue/Math.max(G.prescriptions,1),O.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:G.pending>0?"#e74c3c":"#27ae60"},children:[G.symbol,G.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>ei(O.id,ie,"doctor"),style:{...m.toggleButton,backgroundColor:ie?"#e74c3c":"#27ae60"},children:ie?" Disable":" Enable"}),t.jsx("button",{onClick:()=>me(O,"doctor"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>dn(O,"doctor",G),style:m.viewButton,children:" View Payment"})]})})]},O.id)})})]})})]})},ti=()=>{if(!L)return t.jsx("div",{style:m.loading,children:"Loading hospitals..."});const C=L.filter(O=>{const G=fe.toLowerCase(),ie=!fe||O.name?.toLowerCase().includes(G)||O.email?.toLowerCase().includes(G)||O.city?.toLowerCase().includes(G),je=O.enabled!==!1;return ie&&(We==="all"||We==="enabled"&&je||We==="disabled"&&!je)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Hospitals (",L?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Hospital billing includes all affiliated doctors"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search hospitals by name, email, location...",value:fe,onChange:O=>Je(O.target.value),style:m.searchInput}),t.jsxs("select",{value:We,onChange:O=>$e(O.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Hospitals (",L?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",L?.filter(O=>O.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",L?.filter(O=>O.enabled===!1).length||0,")"]})]})]}),C.length===0?t.jsx("div",{style:m.emptyState,children:fe||We!=="all"?"No hospitals match your search/filter criteria":"No hospitals found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Hospital Name"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Doctors Count"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(O=>{const G=nn(O,"hospital",ae),ie=O.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:ie?"#27ae60":"#e74c3c",color:"white"},children:ie?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:O.name||"N/A"}),t.jsx("td",{style:m.td,children:O.city?`${O.city}, ${O.country}`:"N/A"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:m.doctorCount,children:O.doctorCount||0})}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.appointmentCost||G.appointmentRevenue/Math.max(G.appointments,1),O.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[G.symbol,O.customRates?.prescriptionCost||G.prescriptionRevenue/Math.max(G.prescriptions,1),O.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:G.pending>0?"#e74c3c":"#27ae60"},children:[G.symbol,G.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>ei(O.id,ie,"hospital"),style:{...m.toggleButton,backgroundColor:ie?"#e74c3c":"#27ae60"},children:ie?" Disable":" Enable"}),t.jsx("button",{onClick:()=>me(O,"hospital"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>dn(O,"hospital",G),style:m.viewButton,children:" View Payment"})]})})]},O.id)})})]})})]})},Tn=()=>t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Tracking"}),t.jsxs("div",{style:m.monthSelector,children:[t.jsx("label",{style:m.label,children:"Select Month:"}),t.jsx("input",{type:"month",value:ae,onChange:C=>Be(C.target.value),style:m.input})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Individual Doctors"}),rt.filter(C=>C.type==="doctor").length===0?t.jsx("div",{style:m.emptyState,children:"No individual doctor payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:rt.filter(C=>C.type==="doctor").map(C=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:C.entity.displayName}),t.jsx("td",{style:m.td,children:C.appointments}),t.jsx("td",{style:m.td,children:C.prescriptions}),t.jsxs("td",{style:m.td,children:[T.currency," ",C.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[T.currency," ",C.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:C.pending>0?"#e74c3c":"#27ae60"},children:[T.currency," ",C.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>gt(C),style:m.payButton,disabled:C.pending<=0,children:" Mark Paid"})})]},C.entity.id))})]})})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Hospitals"}),rt.filter(C=>C.type==="hospital").length===0?t.jsx("div",{style:m.emptyState,children:"No hospital payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:rt.filter(C=>C.type==="hospital").map(C=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:C.entity.name}),t.jsx("td",{style:m.td,children:C.appointments}),t.jsx("td",{style:m.td,children:C.prescriptions}),t.jsxs("td",{style:m.td,children:[T.currency," ",C.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[T.currency," ",C.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:C.pending>0?"#e74c3c":"#27ae60"},children:[T.currency," ",C.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>gt(C),style:m.payButton,disabled:C.pending<=0,children:" Mark Paid"})})]},C.entity.id))})]})})]})]}),Ct=()=>{const C=K.filter(ie=>ie.status==="pending"),O=K.filter(ie=>ie.status==="completed"),G=K.filter(ie=>ie.status==="failed");return t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Requests"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Review and verify payment submissions from hospitals and individual doctors"}),q?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment requests..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#ff9800",marginBottom:"1rem"},children:[" Pending Verification (",C.length,")"]}),C.length===0?t.jsx("div",{style:m.emptyState,children:" No pending payment requests"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Payment Type"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:C.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("strong",{children:ie.hospitalName||ie.doctorName})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ie.hospitalId?"#e3f2fd":"#f3e5f5",color:ie.hospitalId?"#1976d2":"#7b1fa2",fontSize:"0.85rem",fontWeight:"600"},children:ie.hospitalId?" Hospital":" Doctor"})}),t.jsx("td",{style:m.td,children:t.jsxs("strong",{style:{color:"#2e7d32",fontSize:"1.1rem"},children:[ie.currency," ",ie.amount?.toFixed(2)]})}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ie.type==="full"?"#e8f5e9":"#fff3e0",color:ie.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:ie.type==="full"?"Full Payment":"Partial Payment"})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>Ue(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#2196f3"},children:" View"}),t.jsx("button",{onClick:()=>ot(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#4caf50"},children:" Verify"}),t.jsx("button",{onClick:()=>Nt(ie),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#f44336"},children:" Reject"})]})})]},ie.id))})]})})]}),t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#4caf50",marginBottom:"1rem"},children:[" Verified Payments (",O.length,")"]}),O.length===0?t.jsx("div",{style:m.emptyState,children:"No verified payments yet"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Verified"})]})}),t.jsx("tbody",{children:O.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:ie.hospitalName||ie.doctorName}),t.jsx("td",{style:m.td,children:ie.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[ie.currency," ",ie.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:ie.verifiedAt?new Date(ie.verifiedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]},ie.id))})]})})]}),G.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{style:{color:"#f44336",marginBottom:"1rem"},children:[" Rejected Payments (",G.length,")"]}),t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Rejected"}),t.jsx("th",{style:m.th,children:"Reason"})]})}),t.jsx("tbody",{children:G.map(ie=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:ie.hospitalName||ie.doctorName}),t.jsx("td",{style:m.td,children:ie.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[ie.currency," ",ie.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:ie.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(ie.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:ie.rejectedAt?new Date(ie.rejectedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}),t.jsx("td",{style:m.td,children:ie.rejectionReason||"N/A"})]},ie.id))})]})})]})]})]})};return t.jsxs("div",{style:m.container,children:[y&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"15px 25px",borderRadius:"10px",background:y.type==="error"?"#f44336":"#4caf50",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e4,animation:"slideIn 0.3s ease-out"},children:y.message}),t.jsxs("div",{style:m.header,children:[t.jsx("h1",{style:m.title,children:" Admin Dashboard - Billing System"}),g&&t.jsx("div",{style:m.error,children:g})]}),t.jsx("div",{style:m.tabs,children:A?t.jsx("select",{value:s,onChange:C=>r(C.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select admin tab",children:["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(C=>t.jsx("option",{value:C,children:C==="overview"?"Overview":C.charAt(0).toUpperCase()+C.slice(1)},C))}):["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(C=>t.jsxs("button",{onClick:()=>r(C),style:{...m.tab,...s===C?m.activeTab:{}},children:[C==="overview"&&" Overview",C==="config"&&" Config",C==="doctors"&&" Doctors",C==="hospitals"&&" Hospitals",C==="billing-overview"&&" Billing Overview",C==="payment-requests"&&" Payment Requests",C==="ads"&&" Ads & Pricing"]},C))}),t.jsxs("div",{style:m.content,children:[c&&t.jsx("div",{style:m.loading,children:"Loading..."}),s==="overview"&&Ye(),s==="config"&&Si(),s==="doctors"&&Ri(),s==="hospitals"&&ti(),(s==="payments"||s==="billing-overview")&&Tn(),s==="payment-requests"&&Ct(),s==="ads"&&t.jsx(a0,{showNotification:jn})]}),ft&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Edit Custom Rates"}),t.jsx("p",{style:m.modalSubtitle,children:ft.type==="doctor"?`Doctor: ${ft.displayName}`:`Hospital: ${ft.name}`}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Appointment Cost (leave empty for global rate: ",T.currency," ",T.appointmentCost,")"]}),t.jsx("input",{type:"number",value:at.appointmentCost,onChange:C=>Dn({...at,appointmentCost:C.target.value}),style:m.input,placeholder:`Global: ${T.appointmentCost}`})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Prescription Cost (leave empty for global rate: ",T.currency," ",T.prescriptionCost,")"]}),t.jsx("input",{type:"number",value:at.prescriptionCost,onChange:C=>Dn({...at,prescriptionCost:C.target.value}),style:m.input,placeholder:`Global: ${T.prescriptionCost}`})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:Ee,style:m.saveButton,children:" Save"}),t.jsx("button",{onClick:()=>Ie(null),style:m.cancelButton,children:" Cancel"})]})]})}),At&&k&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Details"}),t.jsx("p",{style:m.modalSubtitle,children:k.type==="doctor"?`Doctor: ${k.entity.displayName}`:`Hospital: ${k.entity.name}`}),t.jsxs("p",{style:m.modalSubtitle,children:["Month: ",ae]}),t.jsxs("div",{style:m.paymentDetails,children:[t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Appointments:"}),t.jsxs("span",{children:[k.appointments,"  ",T.currency," ",k.appointmentRevenue/(k.appointments||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[T.currency," ",k.appointmentRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Prescriptions:"}),t.jsxs("span",{children:[k.prescriptions,"  ",T.currency," ",k.prescriptionRevenue/(k.prescriptions||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[T.currency," ",k.prescriptionRevenue.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold"},children:"Total Revenue:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.2rem",color:"#667eea"},children:[T.currency," ",k.totalRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Already Paid:"}),t.jsx("span",{}),t.jsxs("span",{style:{color:"#27ae60"},children:[T.currency," ",k.paid.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Pending:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.3rem",color:k.pending>0?"#e74c3c":"#27ae60"},children:[T.currency," ",k.pending.toFixed(2)]})]})]}),t.jsxs("div",{style:m.modalActions,children:[k.pending>0&&t.jsx("button",{onClick:ji,style:m.saveButton,children:" Mark as Paid"}),t.jsx("button",{onClick:()=>tn(!1),style:m.cancelButton,children:" Close"})]})]})}),Qt&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Create New Admin"}),t.jsx("p",{style:m.modalSubtitle,children:"Enter the email of the user you want to make an admin. The user must be registered first."}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:"User Email"}),t.jsx("input",{type:"email",value:lt,onChange:C=>en(C.target.value),style:m.input,placeholder:"user@example.com"})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:In,style:m.saveButton,children:" Make Admin"}),t.jsx("button",{onClick:()=>{Kt(!1),en("")},style:m.cancelButton,children:" Cancel"})]})]})}),He&&ne&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Patient Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:ne.patientName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:ne.patientEmail||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Phone:"}),t.jsx("span",{children:ne.patientPhone||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Doctor Information"}),ne.doctorInfo?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:ne.doctorInfo.displayName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:ne.doctorInfo.email||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Specialization:"}),t.jsx("span",{children:ne.doctorInfo.specialization||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:ne.hospitalId?"#3498db":"#9b59b6"},children:ne.hospitalId?" Hospital Doctor":" Individual Doctor"})]})]}):t.jsx("div",{children:"Doctor information not available"})]}),ne.hospitalInfo&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Hospital Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:ne.hospitalInfo.name||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Location:"}),t.jsx("span",{children:ne.hospitalInfo.city?`${ne.hospitalInfo.city}, ${ne.hospitalInfo.country}`:"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:ne.hospitalInfo.email||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Date:"}),t.jsx("span",{children:ne.date||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Time:"}),t.jsx("span",{children:ne.time||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsx("span",{children:ne.status||"pending"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Status:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:ne.paymentStatus==="paid"?"#27ae60":"#e74c3c"},children:ne.paymentStatus==="paid"?" Paid":" Unpaid"})]}),ne.paymentStatus==="paid"&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Paid At:"}),t.jsx("span",{children:new Date(ne.paidAt).toLocaleString()})]})]})]}),t.jsx("div",{style:m.modalActions,children:t.jsx("button",{onClick:()=>Ge(!1),style:m.cancelButton,children:" Close"})})]})}),ht&&de&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Request Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Entity Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:t.jsx("strong",{children:de.hospitalName||de.doctorName})})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:de.hospitalId?"#3498db":"#9b59b6"},children:de.hospitalId?" Hospital":" Individual Doctor"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Payment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Amount:"}),t.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#2e7d32"},children:[de.currency," ",de.amount?.toFixed(2)]})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Method:"}),t.jsx("span",{children:de.paymentMethod})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Type:"}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:de.type==="full"?"#e8f5e9":"#fff3e0",color:de.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:de.type==="full"?"Full Payment":"Partial Payment"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:de.status==="completed"?"#4caf50":de.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[de.status==="completed"&&" Verified",de.status==="pending"&&" Pending",de.status==="failed"&&" Rejected"]})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Timeline"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Submitted:"}),t.jsx("span",{children:new Date(de.createdAt).toLocaleString()})]}),de.verifiedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Verified:"}),t.jsx("span",{children:new Date(de.verifiedAt).toLocaleString()})]}),de.rejectedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Rejected:"}),t.jsx("span",{children:new Date(de.rejectedAt).toLocaleString()})]})]}),de.description&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Description"}),t.jsx("p",{style:{margin:0,color:"#666"},children:de.description})]}),de.rejectionReason&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Rejection Reason"}),t.jsx("p",{style:{margin:0,color:"#e74c3c"},children:de.rejectionReason})]})]}),t.jsxs("div",{style:m.modalActions,children:[de.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{Ke(!1),ot(de)},style:{...m.saveButton,background:"#4caf50"},children:" Verify Payment"}),t.jsx("button",{onClick:()=>{Ke(!1),Nt(de)},style:{...m.saveButton,background:"#f44336"},children:" Reject Payment"})]}),t.jsx("button",{onClick:()=>{Ke(!1),dt(null)},style:m.cancelButton,children:"Close"})]})]})})]})},m={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",color:"white",textAlign:"center",marginBottom:"1rem"},error:{background:"#e74c3c",color:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},tabs:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},tab:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",background:"rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s"},activeTab:{background:"white",color:"#667eea",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)"},content:{background:"white",borderRadius:"12px",padding:"2rem",minHeight:"500px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},loading:{textAlign:"center",padding:"2rem",fontSize:"1.2rem",color:"#667eea"},overview:{},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",color:"white"},statIcon:{fontSize:"2.5rem",marginBottom:"0.5rem"},statValue:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},statLabel:{fontSize:"0.9rem",opacity:.9},infoBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},infoList:{lineHeight:"1.8",marginLeft:"1.5rem"},section:{},subtitle:{color:"#666",marginBottom:"1.5rem"},searchContainer:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},searchInput:{flex:"1 1 300px",padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},filterSelect:{padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",background:"white",cursor:"pointer",minWidth:"200px"},statusBadge:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600"},toggleButton:{color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"opacity 0.3s"},configSection:{},configForm:{maxWidth:"600px"},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},saveButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},tableContainer:{overflowX:"auto",marginTop:"1rem"},table:{width:"100%",borderCollapse:"collapse"},th:{background:"#667eea",color:"white",padding:"1rem",textAlign:"left",fontWeight:"600"},tr:{borderBottom:"1px solid #e0e0e0"},td:{padding:"1rem"},customBadge:{display:"inline-block",marginLeft:"0.5rem",padding:"0.25rem 0.5rem",background:"#f39c12",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},doctorCount:{display:"inline-block",padding:"0.25rem 0.75rem",background:"#3498db",color:"white",borderRadius:"12px",fontWeight:"600"},editButton:{background:"#3498db",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},emptyState:{textAlign:"center",padding:"3rem",color:"#999",fontSize:"1.1rem"},monthSelector:{marginBottom:"2rem",display:"flex",alignItems:"center",gap:"1rem"},paymentSection:{marginBottom:"3rem"},pending:{fontWeight:"bold",fontSize:"1.1rem"},payButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},modalSubtitle:{color:"#666",marginBottom:"1.5rem"},modalActions:{display:"flex",gap:"1rem",marginTop:"1.5rem"},cancelButton:{background:"#e74c3c",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},adminSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},createAdminButton:{background:"#667eea",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s",marginTop:"1rem"},viewButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},paymentDetails:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"1rem"},paymentRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",padding:"0.75rem 0",fontSize:"0.95rem"},recentSection:{marginTop:"2rem"},recentHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},toggleLabel:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.95rem"},detailsGrid:{display:"grid",gridTemplateColumns:"1fr",gap:"1.5rem",marginTop:"1rem"},detailSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1rem"},detailRow:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #e0e0e0"},detailLabel:{fontWeight:"600",color:"#666"}},o0=()=>{const{userProfile:s,currentUser:r,loading:c}=Ca(),u=Sl(),[g,f]=x.useState(!1),[y,b]=x.useState({displayName:"",role:"",specialization:"",phone:"",country:"",state:"",city:"",address:""}),[A,w]=x.useState(!1);x.useEffect(()=>{console.log("Dashboard useEffect:",{currentUser:r?.uid,userProfile:s,loading:c,hasRole:s?.role});const L=()=>!s||!s.role||!s.phone?!0:s.role==="doctor"?!s.specialization||!s.country||!s.state||!s.city:s.role==="hospital"?!s.country||!s.state||!s.city||!s.address:!1;if(r){if(!s){console.log("Dashboard: Waiting for userProfile to load...");return}L()?(w(!0),b({displayName:s.displayName||r.displayName||r.email||"",role:s.role||"",specialization:s.specialization||"",phone:s.phone||"",country:s.country||"",state:s.state||"",city:s.city||"",address:s.address||""})):w(!1)}},[s,r,c]);const T=async L=>{L.preventDefault(),f(!0);try{const ce=Se(V,"users",r.uid),W={uid:r.uid,email:r.email,displayName:y.displayName,role:y.role,phone:y.phone,updatedAt:new Date().toISOString(),...y.role==="doctor"&&{specialization:y.specialization,country:y.country,state:y.state,city:y.city,address:y.address},...y.role==="hospital"&&{country:y.country,state:y.state,city:y.city,address:y.address}};if(await qn(ce,W,{merge:!0}),y.role==="hospital"&&s?.hospitalId){console.log("Updating hospital document with location...");const se=Se(V,"hospitals",s.hospitalId);await qn(se,{name:y.displayName,country:y.country,state:y.state,city:y.city,address:y.address,phone:y.phone,enabled:!0,updatedAt:new Date().toISOString()},{merge:!0}),console.log("Hospital document updated successfully")}window.location.reload()}catch(ce){console.error("Error creating profile:",ce),alert("Failed to create profile: "+ce.message)}f(!1)},N=L=>{b({...y,[L.target.name]:L.target.value})},R=s?.role==="admin";x.useEffect(()=>{console.log("Dashboard render state:",{hasCurrentUser:!!r,hasUserProfile:!!s,userRole:s?.role,isAdmin:R,loading:c})},[r,s,R,c]);const $=async()=>{await hy(),u("/login")};return t.jsxs("div",{style:{padding:"2rem"},children:[t.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h1",{children:"Dashboard"}),t.jsx("button",{onClick:$,style:{padding:"0.5rem 1rem",background:"var(--color-text-muted)",color:"white",border:"none",borderRadius:"var(--radius-md)"},children:"Logout"})]}),s?A?t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto"},children:[t.jsx("h2",{style:{marginTop:0},children:"Complete Your Profile"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Please provide additional information to complete your profile setup."}),y.role?t.jsxs("form",{onSubmit:T,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"displayName",type:"text",placeholder:"Full Name *",required:!0,value:y.displayName,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsxs("div",{style:{padding:"0.75rem",background:"#f0f0f0",borderRadius:"var(--radius-md)",border:"1px solid #ddd"},children:[t.jsx("strong",{children:"Account Type:"})," ",y.role?y.role==="doctor"?"Individual Doctor":y.role==="hospital"?"Hospital":y.role==="patient"?"Patient":y.role==="admin"?"Administrator":y.role:"Loading..."]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:y.phone,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),(y.role==="doctor"||y.role==="hospital")&&t.jsxs(t.Fragment,{children:[y.role==="doctor"&&t.jsx("input",{name:"specialization",type:"text",placeholder:"Specialization (e.g. Cardiologist) *",required:!0,value:y.specialization,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"country",type:"text",placeholder:"Country *",required:!0,value:y.country,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"state",type:"text",placeholder:"State/Province *",required:!0,value:y.state,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"city",type:"text",placeholder:"City *",required:!0,value:y.city,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"address",type:"text",placeholder:y.role==="doctor"?"Clinic Address":"Hospital Address",value:y.address,onChange:N,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}})]}),t.jsx("button",{type:"submit",disabled:g,style:{padding:"0.75rem",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:g?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:g?"Creating Profile...":"Complete Profile"})]}):t.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"Loading your account information..."})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"1.5rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[t.jsxs("h2",{style:{marginTop:0},children:["Welcome, ",s?.displayName||r?.email]}),s?.role&&t.jsxs("p",{children:["Role: ",R?"Admin":s.role]}),s?.role==="patient"&&t.jsx(i0,{}),s?.role==="doctor"&&t.jsx($m,{}),s?.role==="hospital"&&t.jsx(qy,{}),R&&t.jsx(l0,{})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[t.jsx("h2",{style:{marginTop:0},children:"Loading Your Profile..."}),t.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Please wait while we load your account information."}),t.jsx("p",{style:{color:"#999",fontSize:"0.9rem"},children:"If this takes more than a few seconds, please try refreshing the page."}),t.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:"Refresh Page"})]})]})},s0=async s=>{const r=xe(V,"appointments");if(s.doctorId&&s.date&&s.time){const g=Se(V,"doctors",s.doctorId),f=await Gt(g);if(f.exists()){const b=f.data().availability||{};if(b.unavailableDates&&b.unavailableDates.length>0&&b.unavailableDates.some(w=>w.date===s.date)){const w=b.unavailableDates.find(T=>T.date===s.date);throw new Error(`Doctor is on leave on ${s.date}. Reason: ${w.reason||"Not available"}`)}if(b.blockedTimeSlots&&b.blockedTimeSlots.length>0&&b.blockedTimeSlots.some(w=>w.date!==s.date?!1:w.time===s.time?!0:w.startTime&&w.endTime?s.time>=w.startTime&&s.time<w.endTime:!1)){const w=b.blockedTimeSlots.find(T=>T.date===s.date&&(T.time===s.time||T.startTime&&T.endTime&&s.time>=T.startTime&&s.time<T.endTime));throw new Error(`This time slot is blocked. Reason: ${w.reason||"Not available"}`)}}}const c={...s,status:"pending",createdAt:new Date().toISOString(),timestamp:Dg()};return{id:(await ea(r,c)).id,...c}},r0=async s=>{const r=xe(V,"appointments"),c=Oe(r,ye("patientPhone","==",s));return(await Re(c)).docs.map(g=>({id:g.id,...g.data()}))},Bs=async(s={})=>{console.log(" getHospitals called with filters:",s);try{const r=xe(V,"hospitals");let c=Oe(r);s.country&&(c=Oe(c,ye("country","==",s.country)),console.log("   Filtering by country:",s.country)),s.state&&(c=Oe(c,ye("state","==",s.state)),console.log("   Filtering by state:",s.state)),s.city&&(c=Oe(c,ye("city","==",s.city)),console.log("   Filtering by city:",s.city)),console.log("   Executing Firestore query...");const u=await Re(c);console.log(`   Query returned ${u.size} documents`);const g=[];return u.forEach(f=>{const y={id:f.id,...f.data()};y.enabled!==!1?(console.log("   Hospital found (enabled):",y.name||y.id),g.push(y)):console.log("   Hospital skipped (disabled):",y.name||y.id)}),console.log(` getHospitals returning ${g.length} enabled hospitals`),g}catch(r){throw console.error(" Error fetching hospitals:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),r}},_d=async(s={})=>{try{const r=xe(V,"users");let c=Oe(r,ye("role","==","doctor"));s.country&&(c=Oe(c,ye("country","==",s.country))),s.state&&(c=Oe(c,ye("state","==",s.state))),s.city&&(c=Oe(c,ye("city","==",s.city))),s.specialization&&(c=Oe(c,ye("specialization","==",s.specialization)));const u=await Re(c),g=[];return u.forEach(f=>{const y={id:f.id,...f.data()};y.enabled!==!1&&g.push(y)}),console.log(` getDoctors returning ${g.length} enabled doctors`),g}catch(r){throw console.error("Error fetching doctors:",r),r}},d0=async()=>{try{const s=new Map;(await Re(xe(V,"hospitals"))).forEach(f=>{const y=f.data();if(y.country&&y.state&&y.city){s.has(y.country)||s.set(y.country,new Map);const b=s.get(y.country);b.has(y.state)||b.set(y.state,new Set),b.get(y.state).add(y.city)}});const c=Oe(xe(V,"users"),ye("role","==","doctor"));(await Re(c)).forEach(f=>{const y=f.data();if(y.country&&y.state&&y.city){s.has(y.country)||s.set(y.country,new Map);const b=s.get(y.country);b.has(y.state)||b.set(y.state,new Set),b.get(y.state).add(y.city)}});const g={};return s.forEach((f,y)=>{g[y]={},f.forEach((b,A)=>{g[y][A]=Array.from(b).sort()})}),{countries:Array.from(s.keys()).sort(),structured:g}}catch(s){throw console.error("Error fetching locations:",s),s}},c0=async(s,r="all")=>{try{console.log(" searchProvidersByName called:",{searchTerm:s,providerType:r,searchTermLower:s.toLowerCase()});const c=[],u=s.toLowerCase();if(r==="all"||r==="hospital"){console.log(" Searching hospitals collection...");const g=await Re(xe(V,"hospitals"));console.log(" Total hospitals in database:",g.size),g.forEach(f=>{const y={id:f.id,...f.data()},b=y.name||"";console.log(" Checking hospital:",{id:f.id,name:b,nameLower:b.toLowerCase(),searchLower:u,enabled:y.enabled!==!1,matches:b.toLowerCase().includes(u)}),y.enabled!==!1&&b&&b.toLowerCase().includes(u)&&(console.log(" Hospital matched:",b),c.push({...y,type:"hospital"}))}),console.log(" Hospitals matched:",c.filter(f=>f.type==="hospital").length)}if(r==="all"||r==="doctor"){console.log(" Searching doctors collection...");const g=Oe(xe(V,"users"),ye("role","==","doctor")),f=await Re(g);console.log(" Total doctors in database:",f.size),f.forEach(y=>{const b={id:y.id,...y.data()},A=b.displayName||"";console.log(" Checking doctor:",{id:y.id,name:A,nameLower:A.toLowerCase(),searchLower:u,enabled:b.enabled!==!1,matches:A.toLowerCase().includes(u)}),b.enabled!==!1&&A.toLowerCase().includes(u)&&(console.log(" Doctor matched:",A),c.push({...b,type:"doctor"}))}),console.log(" Doctors matched:",c.filter(y=>y.type==="doctor").length)}return console.log(" searchProvidersByName final results:",{totalResults:c.length,results:c.map(g=>({id:g.id,name:g.name||g.displayName,type:g.type}))}),c}catch(c){throw console.error(" Error searching providers:",c),c}},u0=async s=>{try{const r=xe(V,"users"),c=Oe(r,ye("role","==","doctor"),ye("hospitalId","==",s)),u=await Re(c),g=[];return u.forEach(f=>{const y={id:f.id,uid:f.id,...f.data()};y.enabled!==!1&&g.push(y)}),console.log(` getDoctorsByHospital returning ${g.length} enabled doctors for hospital ${s}`),g}catch(r){throw console.error("Error fetching hospital doctors:",r),r}},p0=async s=>{try{const{patientPhone:r,patientName:c,appointmentDate:u,appointmentTime:g,hospitalName:f,doctorName:y}=s,b=`Hi ${c}, your appointment is confirmed for ${u} at ${g} with Dr. ${y}${f?` at ${f}`:""}. Thank you for choosing us!`,A=xe(V,"notifications");return await ea(A,{type:"sms",to:r,message:b,status:"pending",appointmentData:{patientName:c,appointmentDate:u,appointmentTime:g,hospitalName:f,doctorName:y},createdAt:new Date().toISOString()}),console.log("SMS notification queued successfully"),{success:!0}}catch(r){return console.error("Error queuing SMS notification:",r),{success:!1,error:r.message}}},m0=async s=>{try{const{patientEmail:r,patientName:c,appointmentDate:u,appointmentTime:g,hospitalName:f,doctorName:y,reason:b}=s;if(!r)return console.log("No email provided, skipping email notification"),{success:!1,error:"No email provided"};const A=xe(V,"notifications");return await ea(A,{type:"email",to:r,subject:"Appointment Confirmation",html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e0e0e0; border-radius: 10px;">
                    <h2 style="color: #667eea;">Appointment Confirmed! </h2>
                    <p>Dear ${c},</p>
                    <p>Your appointment has been successfully booked.</p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h3 style="margin-top: 0; color: #333;">Appointment Details</h3>
                        <p><strong>Date:</strong> ${u}</p>
                        <p><strong>Time:</strong> ${g}</p>
                        <p><strong>Doctor:</strong> Dr. ${y}</p>
                        ${f?`<p><strong>Hospital:</strong> ${f}</p>`:""}
                        ${b?`<p><strong>Reason:</strong> ${b}</p>`:""}
                    </div>
                    
                    <p>Please arrive 10 minutes before your scheduled time.</p>
                    <p>If you need to reschedule or cancel, please contact us as soon as possible.</p>
                    
                    <p style="margin-top: 30px;">Best regards,<br/>Healthcare Team</p>
                </div>
            `,status:"pending",appointmentData:{patientName:c,patientEmail:r,appointmentDate:u,appointmentTime:g,hospitalName:f,doctorName:y,reason:b},createdAt:new Date().toISOString()}),console.log("Email notification queued successfully"),{success:!0}}catch(r){return console.error("Error queuing email notification:",r),{success:!1,error:r.message}}},nt={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)"},mainCard:{maxWidth:"1200px",margin:"0 auto",background:"white",borderRadius:"clamp(10px, 2vw, 20px)",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",overflow:"hidden"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1rem, 3vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1rem, 3vw, 2rem)",display:"grid",gap:"clamp(1rem, 2vw, 2rem)",gridTemplateColumns:"1fr"},twoColumn:{gridTemplateColumns:"1fr"},infoBox:{padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",marginBottom:"1rem",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},input:{padding:"clamp(0.6rem, 2vw, 0.75rem)",border:"2px solid #e0e0e0",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",transition:"all 0.3s ease",width:"100%",boxSizing:"border-box"},button:{padding:"clamp(0.75rem, 2vw, 1rem) clamp(1rem, 3vw, 1.5rem)",border:"none",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",boxSizing:"border-box"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},secondaryButton:{background:"#f1f3f5",color:"#495057",border:"2px solid #e0e0e0"},card:{background:"white",borderRadius:"clamp(10px, 2vw, 15px)",padding:"clamp(1rem, 2.5vw, 1.5rem)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid #f0f0f0"},providerCard:{background:"#f8f9fa",borderRadius:"clamp(10px, 2vw, 15px)",padding:"clamp(1rem, 2.5vw, 1.5rem)",border:"2px solid #e9ecef",position:"relative",top:"0"},sectionTitle:{fontSize:"clamp(1rem, 3.5vw, 1.2rem)",fontWeight:"600",color:"#333",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},historyCard:{background:"white",borderRadius:"10px",padding:"clamp(0.75rem, 2vw, 1rem)",border:"2px solid #e9ecef",cursor:"pointer",transition:"all 0.3s ease",marginBottom:"0.75rem"}},h0=()=>{const[s,r]=x.useState({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:"",state:"",city:""}),[c,u]=x.useState(!1),[g,f]=x.useState(null),[y,b]=x.useState(""),[A,w]=x.useState(!1),[T,N]=x.useState({countries:[],structured:{}}),[R,$]=x.useState([]),[L,ce]=x.useState([]),[W,se]=x.useState([]),[E,S]=x.useState([]),[ae,Be]=x.useState(!1),[rt,ve]=x.useState(!1),[K,De]=x.useState("location"),[q,Fe]=x.useState(""),[de,dt]=x.useState(null),[ht,Ke]=x.useState(null),[I,re]=x.useState(!0),[fe,Je]=x.useState(null),[qe,Ae]=x.useState([]),[We,$e]=x.useState(!1),[ft,Ie]=x.useState(!1),[at,Dn]=x.useState(window.innerWidth),[Qt,Kt]=x.useState([]),[lt,en]=x.useState(!1),[At,tn]=x.useState(""),[k,Te]=x.useState(null);x.useEffect(()=>{const _=()=>Dn(window.innerWidth);return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const He=at<768,Ge=at>=768&&at<1024,ne=at>=1024,St=()=>He?"1fr":"repeat(2, 1fr)";x.useEffect(()=>{(async()=>{re(!0);try{if("geolocation"in navigator)navigator.geolocation.getCurrentPosition(async X=>{const{latitude:ge,longitude:ke}=X.coords;console.log("User coordinates:",ge,ke);try{const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ge}&lon=${ke}&accept-language=en`)).json();console.log("Geocoding response:",Ee);const ot={country:Ee.address?.country||"India",state:Ee.address?.state||"",city:Ee.address?.city||Ee.address?.town||Ee.address?.village||""};Je(ot),r(Nt=>({...Nt,country:ot.country,state:ot.state,city:ot.city})),console.log("User location set:",ot)}catch(me){console.error("Geocoding error:",me);const Ee=Ot();r(ot=>({...ot,country:Ee}))}re(!1)},X=>{console.warn("Geolocation error:",X.message);const ge=Ot();r(ke=>({...ke,country:ge})),re(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0});else{const X=Ot();r(ge=>({...ge,country:X})),re(!1)}}catch(X){console.error("Error getting location:",X);const ge=Ot();r(ke=>({...ke,country:ge})),re(!1)}})()},[]);const Ot=()=>{try{const _=navigator.language||navigator.userLanguage;console.log("Browser language:",_);const X=Intl.DateTimeFormat().resolvedOptions().timeZone;return console.log("Timezone:",X),X.includes("Kolkata")||X.includes("Mumbai")||X.includes("Delhi")?"India":X.includes("New_York")||X.includes("Los_Angeles")||X.includes("Chicago")?"United States":X.includes("London")?"United Kingdom":X.includes("Dubai")?"United Arab Emirates":X.includes("Singapore")?"Singapore":X.includes("Tokyo")?"Japan":X.includes("Shanghai")||X.includes("Hong_Kong")?"China":X.includes("Sydney")||X.includes("Melbourne")?"Australia":_.startsWith("en-IN")?"India":_.startsWith("en-US")?"United States":_.startsWith("en-GB")?"United Kingdom":_.startsWith("ar")?"United Arab Emirates":"India"}catch(_){return console.error("Error detecting country from browser:",_),"India"}};x.useEffect(()=>{(async()=>{try{console.log("BookAppointment: Loading locations...");const X=await d0();console.log("BookAppointment: Locations loaded:",X),N(X),(!X.countries||X.countries.length===0)&&(console.warn("BookAppointment: No locations found in database!"),b("No healthcare providers found in the database. Please register hospitals or doctors first."))}catch(X){console.error("BookAppointment: Error loading locations:",X),b("Failed to load locations. Please check your connection and try again.")}})()},[]),x.useEffect(()=>{if(s.country&&T.structured[s.country]){const _=Object.keys(T.structured[s.country]).sort();$(_),s.state&&!_.includes(s.state)&&r(X=>({...X,state:"",city:""}))}else $([]),ce([])},[s.country,T.structured]),x.useEffect(()=>{if(s.country&&s.state&&T.structured[s.country]?.[s.state]){const _=T.structured[s.country][s.state];ce(_),s.city&&!_.includes(s.city)&&r(X=>({...X,city:""}))}else ce([])},[s.country,s.state,T.structured]),x.useEffect(()=>{const X=setTimeout(async()=>{if(s.phone.replace(/\D/g,"").length>=10){$e(!0);try{const ke=await r0(s.phone);if(ke.length>0){Ae(ke),Ie(!0);const me=ke.sort((Ee,ot)=>new Date(ot.createdAt)-new Date(Ee.createdAt))[0];me.patientName&&!s.patientName&&r(Ee=>({...Ee,patientName:me.patientName,email:me.patientEmail||Ee.email}))}else Ae([]),Ie(!1)}catch(ke){console.error("Error fetching appointment history:",ke)}finally{$e(!1)}}else Ae([]),Ie(!1)},500);return()=>clearTimeout(X)},[s.phone]),x.useEffect(()=>{(async()=>{if(K!=="name"){if(!s.country){se([]);return}console.log("BookAppointment: Loading providers...",{providerType:s.providerType,country:s.country,state:s.state,city:s.city}),Be(!0),b("");try{const X={country:s.country,...s.state&&{state:s.state},...s.city&&{city:s.city}};console.log("BookAppointment: Applying filters:",X);let ge=[];s.providerType==="hospital"?(ge=await Bs(X),console.log("BookAppointment: Hospitals loaded:",ge.length),console.log("BookAppointment: Hospital details:",ge)):(ge=await _d(X),console.log("BookAppointment: Doctors loaded:",ge.length),console.log("BookAppointment: Doctor details:",ge)),se(ge),ge.length===0&&(console.warn("BookAppointment: No providers found for filters:",X),console.warn("BookAppointment: Please check if your hospital has these exact location fields:",X))}catch(X){console.error("BookAppointment: Error loading providers:",X),b("Failed to load providers. Please try again.")}finally{Be(!1)}}})()},[s.country,s.state,s.city,s.providerType,K]),x.useEffect(()=>{const X=setTimeout(async()=>{if(console.log(" BookAppointment Search Effect Triggered:",{searchMode:K,searchName:q,providerType:s.providerType,searchNameTrimmed:q.trim(),searchNameLength:q.length}),K!=="name"||!q.trim()){K==="name"&&(console.log(" Clearing providers (empty search)"),se([]));return}if(q.length<2){console.log(" Search name too short, waiting for more characters...");return}console.log(" BookAppointment: Searching by name:",q,"Type:",s.providerType),Be(!0),b("");try{const ge=await c0(q,s.providerType);console.log(" BookAppointment: Search results:",ge.length,ge),se(ge),ge.length===0&&console.warn(" BookAppointment: No providers found matching:",q)}catch(ge){console.error(" BookAppointment: Error searching providers:",ge),b("Failed to search providers. Please try again.")}finally{Be(!1)}},300);return()=>clearTimeout(X)},[q,s.providerType,K]);const wt=_=>{const{name:X,value:ge}=_.target;if(r({...s,[X]:ge}),X==="country")r(ke=>({...ke,state:"",city:"",providerId:"",hospitalId:"",doctorId:""})),se([]),S([]),dt(null),Ke(null);else if(X==="state")r(ke=>({...ke,city:"",providerId:"",hospitalId:"",doctorId:""})),S([]),dt(null),Ke(null);else if(X==="city"||X==="providerType")r(ke=>({...ke,providerId:"",hospitalId:"",doctorId:""})),S([]),dt(null),Ke(null);else if(X==="providerId"){const ke=W.find(me=>s.providerType==="hospital"?me.id===ge:me.uid===ge||me.id===ge);console.log("Provider selected:",{value:ge,provider:ke,providerType:s.providerType}),dt(ke||null),s.providerType==="hospital"&&ge?(r(me=>({...me,hospitalId:ge,doctorId:""})),Ke(ke),jn(ge)):(r(me=>({...me,hospitalId:"",doctorId:ge})),S([]),Ke(null))}else if(X==="doctorId"){const ke=E.find(me=>me.uid===ge||me.id===ge);ke&&dt({...ht,selectedDoctor:ke})}},jn=async _=>{ve(!0);try{console.log("Loading doctors for hospital:",_);const X=await u0(_);console.log("Hospital doctors loaded:",X),S(X)}catch(X){console.error("Error loading hospital doctors:",X),b("Failed to load doctors for this hospital.")}finally{ve(!1)}},zi=_=>{console.log(" Search mode changed to:",_),De(_),r(X=>({...X,providerId:""})),se([]),dt(null),Fe("")},rn=async _=>{try{const X=!!_.hospitalId;if(r(ge=>({...ge,providerType:X?"hospital":"doctor",providerId:X?_.hospitalId:_.doctorId})),X){const ke=(await Bs({})).find(me=>me.id===_.hospitalId);ke&&(se([ke]),dt(ke),r(me=>({...me,country:ke.country||me.country,state:ke.state||me.state,city:ke.city||me.city})))}else{const ke=(await _d({})).find(me=>me.uid===_.doctorId);ke&&(se([ke]),dt(ke),r(me=>({...me,country:ke.country||me.country,state:ke.state||me.state,city:ke.city||me.city})))}Ie(!1)}catch(X){console.error("Error selecting previous provider:",X),b("Failed to load previous provider details.")}},Sn=(_,X)=>{if(!_||!X)return[];const{workingHours:ge,slotDuration:ke,workingDays:me,unavailableDates:Ee,blockedTimeSlots:ot}=_,Nt=new Date(X).getDay();if(!me.includes(Nt))return[];if(Ee&&Ee.includes(X))return[];const Ue=[],[dn,ji]=ge.start.split(":").map(Number),[In,ei]=ge.end.split(":").map(Number);let wn=dn*60+ji;const nn=In*60+ei;for(;wn<nn;){const gt=Math.floor(wn/60),an=wn%60,mn=`${String(gt).padStart(2,"0")}:${String(an).padStart(2,"0")}`;ot&&ot.some(Si=>Si.date===X&&Si.time===mn)||Ue.push(mn),wn+=ke}return Ue};x.useEffect(()=>{(async()=>{if(!s.doctorId||!s.appointmentDate){Kt([]),tn("");return}en(!0),tn("");try{console.log("Fetching slots for doctor:",s.doctorId,"date:",s.appointmentDate);const X=await Vd(s.doctorId);console.log("Doctor availability:",X),Te(X);const ge=Sn(X,s.appointmentDate);console.log("Generated slots:",ge);const ke=xe(V,"appointments"),me=Oe(ke,ye("doctorId","==",s.doctorId),ye("appointmentDate","==",s.appointmentDate),ye("status","in",["pending","confirmed"])),ot=(await Re(me)).docs.map(Ue=>Ue.data().appointmentTime);console.log("Booked times:",ot);const Nt=ge.filter(Ue=>!ot.includes(Ue));console.log("Available slots:",Nt),Kt(Nt)}catch(X){console.error("Error fetching time slots:",X),tn(`Failed to load slots: ${X.message}`),Kt([])}finally{en(!1)}})()},[s.doctorId,s.appointmentDate]);const et=async _=>{_.preventDefault(),w(!0),b(""),u(!1);try{if(console.log("Booking appointment...",s),!s.patientName||!s.phone||!s.dob)throw new Error("Name, phone number, and date of birth are required");if(s.providerType==="hospital"){if(!s.hospitalId)throw new Error("Please select a hospital");if(!s.doctorId)throw new Error("Please select a doctor from the hospital")}else if(!s.doctorId)throw new Error("Please select a doctor");console.log("Checking slot availability before booking...");const X=xe(V,"appointments"),ge=Oe(X,ye("doctorId","==",s.doctorId),ye("appointmentDate","==",s.appointmentDate),ye("appointmentTime","==",s.appointmentTime),ye("status","in",["pending","confirmed"]));if(!(await Re(ge)).empty)throw new Error("This time slot is no longer available. Please select a different time.");const me={patientName:s.patientName,patientPhone:s.phone,patientDob:s.dob,patientEmail:s.email||null,appointmentDate:s.appointmentDate,appointmentTime:s.appointmentTime,reason:s.reason,status:"pending",country:s.country,state:s.state,city:s.city};if(s.providerType==="hospital"){me.hospitalId=s.hospitalId,me.hospitalName=ht?.name||"",me.doctorId=s.doctorId;const Ee=E.find(ot=>(ot.uid||ot.id)===s.doctorId);Ee&&(me.doctorName=Ee.displayName||Ee.name,me.specialization=Ee.specialization)}else{const Ee=W.find(ot=>(ot.uid||ot.id)===s.doctorId);if(!Ee)throw new Error("Selected doctor not found");me.doctorId=Ee.uid||Ee.id,me.doctorName=Ee.displayName||Ee.name,me.specialization=Ee.specialization,Ee.hospitalId&&(me.hospitalId=Ee.hospitalId,me.hospitalName=Ee.hospitalName||"")}await s0(me),console.log("Appointment booked successfully!"),Promise.all([p0(me),m0(me)]).then(([Ee,ot])=>{console.log("SMS result:",Ee),console.log("Email result:",ot)}).catch(Ee=>{console.error("Notification error (non-blocking):",Ee)}),f(me),u(!0),b(""),console.log(" Success state set:",{success:!0,bookedAppointment:me}),window.scrollTo({top:0,behavior:"smooth"}),r({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:fe?.country||Ot(),state:fe?.state||"",city:fe?.city||""}),se([]),S([]),dt(null),Ke(null),Fe(""),Ae([]),Ie(!1),window.scrollTo({top:0,behavior:"smooth"})}catch(X){console.error("Error booking appointment:",X),b(X.message||"Failed to book appointment. Please try again.")}finally{w(!1)}};return t.jsx("div",{style:nt.container,children:t.jsxs("div",{style:nt.mainCard,children:[t.jsxs("div",{style:nt.header,children:[t.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700"},children:" Book an Appointment"}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,fontSize:"1rem"},children:"No registration required! Just fill in your details to book."})]}),t.jsxs("div",{style:{...nt.content,...de&&ne?nt.twoColumn:{}},children:[t.jsxs("div",{children:[I&&t.jsxs("div",{style:{...nt.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Detecting your location to show nearby providers..."})]}),fe&&!I&&t.jsxs("div",{style:{...nt.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("span",{children:["Location detected: ",fe.city&&`${fe.city}, `,fe.state,", ",fe.country]})]}),c&&g&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",border:"2px solid #28a745",borderRadius:"15px",padding:"clamp(1.25rem, 3vw, 2rem)",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(40, 167, 69, 0.2)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid #28a745"},children:[t.jsx("span",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},children:""}),t.jsxs("div",{children:[t.jsx("h3",{style:{margin:0,color:"#155724",fontSize:"clamp(1.2rem, 4vw, 1.8rem)",fontWeight:"700"},children:"Appointment Confirmed!"}),t.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"#155724",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",opacity:.8},children:"Your booking has been successfully confirmed"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"1rem"},children:[t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"PATIENT"}),t.jsx("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:g.patientName}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",g.patientPhone]})]}),t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DATE & TIME"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",new Date(g.appointmentDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",g.appointmentTime]})]}),g.doctorName&&t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DOCTOR"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",g.doctorName]}),g.specialization&&t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:g.specialization})]}),g.hospitalName?t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"HOSPITAL"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",g.hospitalName]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",g.city,", ",g.state]})]}):t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"LOCATION"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",g.city,", ",g.state]}),t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:g.country})]})]}),t.jsxs("div",{style:{marginTop:"1.5rem",padding:"clamp(0.85rem, 2vw, 1rem)",background:"rgba(255, 255, 255, 0.5)",borderRadius:"10px",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",color:"#155724",lineHeight:"1.6"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:[" Confirmation sent to: ",g.patientEmail]}),t.jsx("div",{style:{opacity:.8},children:" We'll send you an SMS confirmation shortly. Please arrive 10 minutes before your appointment time."})]}),t.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("button",{type:"button",onClick:()=>{u(!1),f(null)},style:{...nt.button,...nt.primaryButton,flex:"1 1 200px"},children:" Book Another Appointment"}),t.jsx(ci,{to:"/",style:{...nt.button,...nt.secondaryButton,flex:"1 1 200px",textDecoration:"none",background:"white",border:"2px solid #28a745",color:"#155724"},children:" Go to Home"})]})]}),y&&t.jsxs("div",{style:{...nt.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:y})]}),!c&&t.jsxs("form",{onSubmit:et,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{style:nt.card,children:[t.jsxs("div",{style:nt.sectionTitle,children:[t.jsx("span",{children:""})," Personal Information"]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"patientName",type:"text",placeholder:"Full Name *",required:!0,value:s.patientName,onChange:wt,style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"dob",type:"date",placeholder:"Date of Birth *",required:!0,value:s.dob,onChange:wt,max:new Date().toISOString().split("T")[0],style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"}),t.jsx("small",{style:{color:"#666",fontSize:"0.8rem",display:"block",marginTop:"0.25rem"},children:" Date of Birth (Required for patient records)"})]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:s.phone,onChange:wt,style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"}),We&&t.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"-0.5rem"},children:" Checking previous appointments..."}),t.jsx("input",{name:"email",type:"email",placeholder:"Email (optional)",value:s.email,onChange:wt,style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"})]})]}),ft&&qe.length>0&&t.jsxs("div",{style:nt.card,children:[t.jsxs("div",{style:nt.sectionTitle,children:[t.jsx("span",{children:""})," Previous Appointments",t.jsx("span",{style:{marginLeft:"auto",background:"#667eea",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:qe.length})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",maxHeight:"300px",overflowY:"auto"},children:qe.slice(0,5).map(_=>t.jsx("div",{style:nt.historyCard,onClick:()=>rn(_),onMouseEnter:X=>{X.currentTarget.style.borderColor="#667eea",X.currentTarget.style.transform="translateX(5px)",X.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.2)"},onMouseLeave:X=>{X.currentTarget.style.borderColor="#e9ecef",X.currentTarget.style.transform="translateX(0)",X.currentTarget.style.boxShadow="none"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1rem",color:"#333"},children:_.hospitalName||_.doctorName}),_.specialization&&t.jsx("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem",color:"#666"},children:_.specialization}),t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.85rem",color:"#999"},children:[new Date(_.appointmentDate).toLocaleDateString()," ",t.jsx("span",{style:{textTransform:"capitalize",color:_.status==="completed"?"#28a745":"#ffc107",marginLeft:"0.25rem"},children:_.status})]})]}),t.jsx("span",{style:{fontSize:"0.85rem",color:"#667eea",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"1rem"},children:"Book Again "})]})},_.id))}),t.jsx("button",{type:"button",onClick:()=>Ie(!1),style:{marginTop:"0.75rem",padding:"0.5rem",background:"transparent",border:"none",color:"#666",fontSize:"0.9rem",cursor:"pointer",textDecoration:"underline"},children:"Hide history"})]}),t.jsxs("div",{style:nt.card,children:[t.jsxs("div",{style:nt.sectionTitle,children:[t.jsx("span",{children:""})," Find Hospital or Doctor"]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>zi("location"),style:{...nt.button,flex:1,background:K==="location"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:K==="location"?"white":"#666",boxShadow:K==="location"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Location"}),t.jsx("button",{type:"button",onClick:()=>zi("name"),style:{...nt.button,flex:1,background:K==="name"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:K==="name"?"white":"#666",boxShadow:K==="name"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Name"})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{fontSize:"0.95rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Book with:"}),t.jsxs("select",{name:"providerType",value:s.providerType,onChange:wt,style:{...nt.input,cursor:"pointer"},children:[t.jsx("option",{value:"hospital",children:" Hospital"}),t.jsx("option",{value:"doctor",children:" Doctor"})]})]}),K==="name"?t.jsx("input",{type:"text",placeholder:`Search ${s.providerType==="hospital"?"hospital":"doctor"} by name...`,value:q,onChange:_=>Fe(_.target.value),style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("select",{name:"country",value:s.country,onChange:wt,required:!0,style:nt.input,children:[t.jsx("option",{value:"",children:"Select Country *"}),T.countries.map(_=>t.jsx("option",{value:_,children:_},_))]}),t.jsxs("select",{name:"state",value:s.state,onChange:wt,required:K==="location",disabled:!s.country||R.length===0,style:nt.input,children:[t.jsx("option",{value:"",children:s.country?R.length===0?"No states available":"Select State/Province *":"Select country first"}),R.map(_=>t.jsx("option",{value:_,children:_},_))]}),t.jsxs("select",{name:"city",value:s.city,onChange:wt,disabled:!s.state||L.length===0,style:nt.input,children:[t.jsx("option",{value:"",children:s.state?L.length===0?"No cities available":"Select City (optional)":"Select state first"}),L.map(_=>t.jsx("option",{value:_,children:_},_))]})]}),t.jsxs("div",{style:{marginTop:"1rem"},children:[W.length>0&&t.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem",background:"#e8f5e9",padding:"0.5rem",borderRadius:"5px"},children:[" Found ",W.length," ",s.providerType==="hospital"?"hospital(s)":"doctor(s)"]}),t.jsxs("select",{name:"providerId",value:s.providerId,onChange:wt,required:!0,disabled:ae||K==="location"&&!s.country||K==="name"&&q.length<2,style:nt.input,children:[t.jsx("option",{value:"",children:ae?" Loading...":`Select ${s.providerType==="hospital"?"Hospital":"Doctor"} *`}),W.map(_=>{const X=s.providerType==="hospital"?_.id:_.uid||_.id,ge=_.name||_.displayName||"Unnamed Provider";return console.log("Rendering provider option:",{id:X,name:ge,provider:_}),t.jsxs("option",{value:X,children:[ge,_.specialization&&` - ${_.specialization}`,_.city&&` (${_.city})`]},X)})]}),W.length===0&&(K==="location"&&s.state||K==="name"&&q.length>=2)&&!ae&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["No ",s.providerType==="hospital"?"hospitals":"doctors"," found. Try a different ",K==="location"?"location":"search term","."]})]})]}),s.providerType==="hospital"&&s.hospitalId&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsxs("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:["Select Doctor at ",ht?.name," *"]}),t.jsxs("select",{name:"doctorId",value:s.doctorId,onChange:wt,required:!0,disabled:rt,style:nt.input,children:[t.jsx("option",{value:"",children:rt?" Loading doctors...":"Select a doctor *"}),E.map(_=>t.jsxs("option",{value:_.id||_.uid,children:[_.displayName||_.name,_.specialization&&` - ${_.specialization}`]},_.id||_.uid))]}),E.length===0&&!rt&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"No doctors available at this hospital yet. The hospital needs to add doctors to their staff."})]})]})]}),t.jsxs("div",{style:nt.card,children:[t.jsxs("div",{style:nt.sectionTitle,children:[t.jsx("span",{children:""})," Appointment Details"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:St(),gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Date *"}),t.jsx("input",{name:"appointmentDate",type:"date",required:!0,value:s.appointmentDate,onChange:wt,min:new Date().toISOString().split("T")[0],style:nt.input,onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Time Slot *"}),s.doctorId?s.appointmentDate?At?t.jsxs("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem",border:"1px solid #fcc"},children:[" ",At]}):lt?t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#667eea",fontSize:"0.9rem",textAlign:"center"},children:"Loading available slots..."}):Qt.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem"},children:"No available slots for this date. Please select another date."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"0.75rem",marginTop:"0.5rem"},children:Qt.map(_=>t.jsxs("button",{type:"button",onClick:()=>r(X=>({...X,appointmentTime:_})),style:{padding:"0.75rem",borderRadius:"8px",border:s.appointmentTime===_?"2px solid #667eea":"2px solid #e0e0e0",background:s.appointmentTime===_?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"white",color:s.appointmentTime===_?"#667eea":"#333",fontWeight:s.appointmentTime===_?"600":"500",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",boxShadow:s.appointmentTime===_?"0 2px 8px rgba(102, 126, 234, 0.3)":"none"},onMouseEnter:X=>{s.appointmentTime!==_&&(X.target.style.borderColor="#667eea",X.target.style.background="#f8f9fa")},onMouseLeave:X=>{s.appointmentTime!==_&&(X.target.style.borderColor="#e0e0e0",X.target.style.background="white")},children:[" ",_]},_))}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a date to view available time slots"}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a doctor first to view available time slots"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Reason for visit (optional)"}),t.jsx("textarea",{name:"reason",placeholder:"Describe your symptoms or reason for visit...",value:s.reason,onChange:wt,rows:"4",style:{...nt.input,resize:"vertical",fontFamily:"inherit"},onFocus:_=>_.target.style.borderColor="#667eea",onBlur:_=>_.target.style.borderColor="#e0e0e0"})]})]}),t.jsx("button",{type:"submit",disabled:A,style:{...nt.button,...nt.primaryButton,opacity:A?.7:1,cursor:A?"not-allowed":"pointer",fontSize:"1.1rem",padding:"1rem"},onMouseEnter:_=>{A||(_.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)"},children:A?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Booking..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Book Appointment"]})}),t.jsxs("div",{style:{textAlign:"center",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",marginTop:"1rem"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Are you a doctor or hospital?"}),t.jsx(ci,{to:"/register",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Register here "})]})]})]}),de&&t.jsxs("div",{style:nt.providerCard,children:[t.jsxs("div",{style:nt.sectionTitle,children:[t.jsx("span",{children:""})," Selected Provider"]}),t.jsxs("div",{style:{marginTop:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontWeight:"700",fontSize:"1.3rem",marginBottom:"0.75rem",color:"#667eea",lineHeight:"1.3"},children:de.name||de.displayName}),de.specialization&&t.jsx("div",{style:{display:"inline-block",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0.4rem 0.9rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:de.specialization})]}),(de.email||de.phone)&&t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Contact"}),de.email&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{wordBreak:"break-word"},children:de.email})]}),de.phone&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:de.phone})]})]}),t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Address"}),t.jsxs("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:"1.6",color:"#555"},children:[de.address&&t.jsxs(t.Fragment,{children:[de.address,t.jsx("br",{})]}),de.city&&t.jsxs(t.Fragment,{children:[de.city,", "]}),de.state&&t.jsxs(t.Fragment,{children:[de.state,t.jsx("br",{})]}),de.country||"N/A"]})]})]})]})]})]})})},f0=()=>{const[s,r]=x.useState({email:"",password:"",name:"Admin",setupKey:""}),[c,u]=x.useState(""),[g,f]=x.useState(!1),[y,b]=x.useState(!1),A=Sl(),{currentUser:w,userProfile:T}=Ca();x.useEffect(()=>{w?T?.role!=="admin"&&A("/dashboard"):A("/")},[w,T,A]);const N=async R=>{R.preventDefault(),b(!0),u("");try{const $=Vm(),ce=await Gd($,"createSecureAdmin")({email:s.email,password:s.password,name:s.name,setupKey:s.setupKey});f(!0),r({email:"",password:"",name:"Admin",setupKey:""}),setTimeout(()=>{A(w?"/dashboard":"/login")},2e3)}catch($){console.error("Error creating admin:",$),u($.message||"Failed to create admin user. Check your setup key and try again."),b(!1)}};return t.jsx("div",{style:Yt.container,children:t.jsxs("div",{style:Yt.card,children:[t.jsxs("div",{style:Yt.header,children:[t.jsx("div",{style:Yt.icon,children:""}),t.jsx("h2",{style:Yt.title,children:"Setup Admin User"})]}),t.jsxs("div",{style:Yt.warningBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"SECURITY NOTICE"}),t.jsxs("p",{style:{margin:0,fontSize:"0.9rem",lineHeight:"1.5"},children:["This is a protected operation. You need the admin setup key from your Firebase Functions config.",w&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("strong",{children:"Note:"})," As an admin, you can create additional admin accounts."]})]})]}),g&&t.jsxs("div",{style:Yt.successBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),"Admin user created successfully! Redirecting..."]}),c&&t.jsxs("div",{style:Yt.errorBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),c]}),t.jsxs("form",{onSubmit:N,style:Yt.form,children:[t.jsxs("div",{style:Yt.inputGroup,children:[t.jsx("label",{style:Yt.label,children:"Admin Name"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter admin name",required:!0,value:s.name,onChange:R=>r({...s,name:R.target.value}),style:Yt.input})]}),t.jsxs("div",{style:Yt.inputGroup,children:[t.jsx("label",{style:Yt.label,children:"Admin Email"}),t.jsx("input",{name:"email",type:"email",placeholder:"admin@example.com",required:!0,value:s.email,onChange:R=>r({...s,email:R.target.value}),style:Yt.input})]}),t.jsxs("div",{style:Yt.inputGroup,children:[t.jsx("label",{style:Yt.label,children:"Password"}),t.jsx("input",{name:"password",type:"password",placeholder:"Minimum 8 characters",required:!0,minLength:"8",value:s.password,onChange:R=>r({...s,password:R.target.value}),style:Yt.input})]}),t.jsxs("div",{style:Yt.inputGroup,children:[t.jsx("label",{style:Yt.label,children:"Admin Setup Key "}),t.jsx("input",{name:"setupKey",type:"password",placeholder:"Enter setup key from Firebase config",required:!0,value:s.setupKey,onChange:R=>r({...s,setupKey:R.target.value}),style:Yt.input}),t.jsx("small",{style:Yt.hint,children:"Get this from: firebase functions:config:get admin.setup_key"})]}),t.jsx("button",{type:"submit",disabled:y,style:{...Yt.button,opacity:y?.7:1,cursor:y?"not-allowed":"pointer"},children:y?" Creating Admin...":" Create Admin User"})]}),t.jsxs("div",{style:Yt.infoBox,children:[t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:"#333"},children:" Setup Instructions"}),t.jsxs("ol",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",lineHeight:"1.8",fontSize:"0.9rem"},children:[t.jsxs("li",{children:["Set the setup key: ",t.jsx("code",{style:Yt.code,children:'firebase functions:config:set admin.setup_key="YOUR_SECRET_KEY"'})]}),t.jsxs("li",{children:["Deploy functions: ",t.jsx("code",{style:Yt.code,children:"firebase deploy --only functions"})]}),t.jsx("li",{children:"Enter admin details and setup key above"}),t.jsxs("li",{children:[t.jsx("strong",{children:"After creating first admin:"})," Set ",t.jsx("code",{style:Yt.code,children:"VITE_ENABLE_ADMIN_SETUP=false"})]}),t.jsx("li",{children:"Existing admins can create more admins without this page"})]})]})]})})},Yt={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{maxWidth:"550px",width:"100%",background:"white",borderRadius:"20px",padding:"2.5rem",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},header:{textAlign:"center",marginBottom:"2rem"},icon:{fontSize:"3rem",marginBottom:"0.5rem"},title:{margin:0,color:"#333",fontSize:"1.8rem"},warningBox:{padding:"1.5rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"12px",marginBottom:"1.5rem",textAlign:"center",color:"#856404"},successBox:{padding:"1rem",background:"#d4edda",color:"#155724",borderRadius:"12px",marginBottom:"1rem",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"500"},errorBox:{padding:"1rem",background:"#f8d7da",color:"#721c24",borderRadius:"12px",marginBottom:"1rem",display:"flex",alignItems:"center",fontSize:"0.95rem"},form:{display:"flex",flexDirection:"column",gap:"1.25rem",marginBottom:"1.5rem"},inputGroup:{display:"flex",flexDirection:"column",gap:"0.5rem"},label:{fontSize:"0.9rem",fontWeight:"600",color:"#555"},input:{padding:"0.875rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"10px",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit"},hint:{fontSize:"0.8rem",color:"#888",fontStyle:"italic"},button:{padding:"1rem",fontSize:"1rem",fontWeight:"600",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",marginTop:"0.5rem",transition:"transform 0.2s, box-shadow 0.2s"},infoBox:{padding:"1.25rem",background:"#f8f9fa",borderRadius:"12px",fontSize:"0.9rem",color:"#666",border:"1px solid #dee2e6"},code:{background:"#e9ecef",padding:"0.2rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem",fontFamily:"monospace",color:"#495057"}},g0=()=>{const[s,r]=x.useState(!1),[c,u]=x.useState(!1),[g,f]=x.useState(""),y=async()=>{try{r(!0),f(""),console.log(" Creating billing configuration...");const b=Se(V,"config","billing");await qn(b,{currency:"USD",appointmentCost:50,prescriptionCost:20,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log(" Billing configuration created!"),u(!0)}catch(b){console.error(" Error:",b),f(b.message)}finally{r(!1)}};return t.jsx("div",{style:Hn.container,children:t.jsxs("div",{style:Hn.card,children:[t.jsx("h1",{style:Hn.title,children:" Setup Billing Configuration"}),c?t.jsxs("div",{style:Hn.successBox,children:[t.jsx("div",{style:Hn.successIcon,children:""}),t.jsx("h2",{style:Hn.successTitle,children:"Configuration Created!"}),t.jsx("p",{style:Hn.successText,children:"The billing configuration has been successfully created."}),t.jsx("p",{style:Hn.successText,children:"You can now access the Admin Dashboard to manage billing."}),t.jsx("button",{onClick:()=>window.location.href="/dashboard",style:Hn.button,children:"Go to Dashboard"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:Hn.description,children:"This will create the global billing configuration with default values:"}),t.jsxs("div",{style:Hn.configBox,children:[t.jsxs("div",{style:Hn.configItem,children:[t.jsx("strong",{children:"Currency:"})," USD"]}),t.jsxs("div",{style:Hn.configItem,children:[t.jsx("strong",{children:"Appointment Cost:"})," $50"]}),t.jsxs("div",{style:Hn.configItem,children:[t.jsx("strong",{children:"Prescription Cost:"})," $20"]})]}),t.jsx("p",{style:Hn.note,children:" You can modify these values later from the Admin Dashboard > Config tab"}),g&&t.jsxs("div",{style:Hn.error,children:[" Error: ",g]}),t.jsx("button",{onClick:y,disabled:s,style:Hn.button,children:s?"Creating...":" Create Billing Config"})]})]})})},Hn={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"3rem",maxWidth:"600px",width:"100%",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},title:{fontSize:"2rem",color:"#333",marginBottom:"1.5rem",textAlign:"center"},description:{fontSize:"1.1rem",color:"#666",marginBottom:"1.5rem",lineHeight:"1.6"},configBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem"},configItem:{padding:"0.5rem 0",fontSize:"1.1rem",color:"#333"},note:{background:"#e3f2fd",borderLeft:"4px solid #2196f3",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#1976d2"},error:{background:"#ffebee",borderLeft:"4px solid #f44336",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#c62828"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"transform 0.3s"},successBox:{textAlign:"center"},successIcon:{fontSize:"4rem",marginBottom:"1rem"},successTitle:{fontSize:"1.8rem",color:"#27ae60",marginBottom:"1rem"},successText:{fontSize:"1.1rem",color:"#666",marginBottom:"1rem",lineHeight:"1.6"}},y0=()=>{const[s,r]=x.useState(!1),[c,u]=x.useState(""),g=Sl(),f=async()=>{try{r(!0),u("Setting up multi-currency configuration...");const y=Se(V,"config","billing"),b=await Gt(y),w={...b.exists()?b.data():{},rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},updatedAt:new Date().toISOString()};await qn(y,w,{merge:!0}),u(" Multi-currency configuration updated successfully!"),setTimeout(()=>{g("/dashboard")},2e3)}catch(y){console.error("Error setting up multi-currency:",y),u(" Error: "+y.message)}finally{r(!1)}};return t.jsx("div",{style:$i.container,children:t.jsxs("div",{style:$i.card,children:[t.jsx("h1",{style:$i.title,children:" Multi-Currency Setup"}),t.jsxs("div",{style:$i.info,children:[t.jsx("h3",{children:"This will configure your billing system with:"}),t.jsxs("ul",{style:$i.list,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"INR ()"})," - For India: 500/appointment, 200/prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"GBP ()"})," - For all other countries: 5/appointment, 2/prescription"]})]}),t.jsxs("div",{style:$i.note,children:[t.jsx("strong",{children:" Note:"})," Currency is automatically selected based on the doctor/hospital's country field. Payment gateways will handle currency conversion if needed."]})]}),c&&t.jsx("div",{style:{...$i.message,backgroundColor:c.includes("")?"#d4edda":"#f8d7da",color:c.includes("")?"#155724":"#721c24"},children:c}),t.jsx("button",{onClick:f,disabled:s,style:{...$i.button,opacity:s?.6:1,cursor:s?"not-allowed":"pointer"},children:s?"Setting up...":" Setup Multi-Currency"}),t.jsx("button",{onClick:()=>g("/dashboard"),style:$i.backButton,children:" Back to Dashboard"})]})})},$i={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"600px",width:"100%",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},title:{color:"#667eea",marginBottom:"1.5rem",textAlign:"center"},info:{marginBottom:"2rem"},list:{marginLeft:"1.5rem",marginTop:"1rem",lineHeight:"2"},note:{marginTop:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},message:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",textAlign:"center",fontWeight:"500"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},backButton:{width:"100%",padding:"0.75rem",background:"#f5f5f5",color:"#666",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"}},x0=()=>{const[s,r]=x.useState(null),[c,u]=x.useState([]),[g,f]=x.useState([]),[y,b]=x.useState(!0);x.useEffect(()=>{A()},[]);const A=async()=>{try{const w=Se(V,"config","billing"),T=await Gt(w),N=T.exists()?T.data():null;r(N);const R=Oe(xe(V,"users"),ye("role","==","doctor")),L=(await Re(R)).docs.map(se=>({id:se.id,...se.data()}));u(L.slice(0,5));const W=(await Re(xe(V,"hospitals"))).docs.map(se=>({id:se.id,...se.data()}));f(W.slice(0,5)),b(!1)}catch(w){console.error("Error loading data:",w),b(!1)}};return y?t.jsx("div",{style:Vt.container,children:"Loading..."}):t.jsxs("div",{style:Vt.container,children:[t.jsx("h1",{style:Vt.title,children:" Currency Debug Tool"}),t.jsxs("div",{style:Vt.section,children:[t.jsx("h2",{children:" Global Config"}),t.jsx("pre",{style:Vt.code,children:JSON.stringify(s,null,2)}),!s?.rates&&t.jsxs("div",{style:Vt.warning,children:[" ",t.jsx("strong",{children:"No multi-currency rates found!"}),t.jsx("br",{}),"Go to ",t.jsx("a",{href:"/setup-multi-currency",children:"/setup-multi-currency"})," to set it up."]})]}),t.jsxs("div",{style:Vt.section,children:[t.jsx("h2",{children:" Sample Doctors (First 5)"}),c.map(w=>{const T=qa(w,s);return t.jsxs("div",{style:Vt.card,children:[t.jsxs("div",{style:Vt.cardHeader,children:[t.jsx("strong",{children:w.displayName||"No Name"}),t.jsx("span",{style:Vt.badge,children:w.country||" No Country"})]}),t.jsxs("div",{style:Vt.cardBody,children:[t.jsxs("div",{children:["Email: ",w.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:w.country||" NOT SET"})]}),t.jsxs("div",{style:Vt.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",T.currency," ",T.symbol,t.jsx("br",{}),"Appointment: ",T.symbol,T.appointmentCost,t.jsx("br",{}),"Prescription: ",T.symbol,T.prescriptionCost]}),w.customRates&&t.jsx("div",{style:Vt.customBadge,children:"Has Custom Rates"})]})]},w.id)})]}),t.jsxs("div",{style:Vt.section,children:[t.jsx("h2",{children:" Sample Hospitals (First 5)"}),g.map(w=>{const T=qa(w,s);return t.jsxs("div",{style:Vt.card,children:[t.jsxs("div",{style:Vt.cardHeader,children:[t.jsx("strong",{children:w.name||"No Name"}),t.jsx("span",{style:Vt.badge,children:w.country||" No Country"})]}),t.jsxs("div",{style:Vt.cardBody,children:[t.jsxs("div",{children:["Email: ",w.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:w.country||" NOT SET"})]}),t.jsxs("div",{style:Vt.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",T.currency," ",T.symbol,t.jsx("br",{}),"Appointment: ",T.symbol,T.appointmentCost,t.jsx("br",{}),"Prescription: ",T.symbol,T.prescriptionCost]}),w.customRates&&t.jsx("div",{style:Vt.customBadge,children:"Has Custom Rates"})]})]},w.id)})]}),t.jsxs("div",{style:Vt.section,children:[t.jsx("h2",{children:" Test Cases"}),t.jsxs("div",{style:Vt.testCase,children:[t.jsx("strong",{children:"Test: India"}),t.jsx("pre",{style:Vt.code,children:JSON.stringify(fo("India",s),null,2)})]}),t.jsxs("div",{style:Vt.testCase,children:[t.jsx("strong",{children:"Test: United Kingdom"}),t.jsx("pre",{style:Vt.code,children:JSON.stringify(fo("United Kingdom",s),null,2)})]}),t.jsxs("div",{style:Vt.testCase,children:[t.jsx("strong",{children:"Test: USA"}),t.jsx("pre",{style:Vt.code,children:JSON.stringify(fo("USA",s),null,2)})]})]})]})},Vt={container:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"system-ui, -apple-system, sans-serif"},title:{color:"#667eea",marginBottom:"2rem"},section:{marginBottom:"3rem",background:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},code:{background:"#f5f5f5",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"0.9rem"},warning:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},card:{marginBottom:"1rem",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden"},cardHeader:{padding:"1rem",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},cardBody:{padding:"1rem"},badge:{padding:"0.25rem 0.75rem",background:"#667eea",color:"white",borderRadius:"12px",fontSize:"0.85rem"},ratesBox:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},customBadge:{marginTop:"0.5rem",padding:"0.5rem",background:"#fff3e0",borderRadius:"4px",fontSize:"0.85rem",color:"#e65100"},testCase:{marginBottom:"1rem"}},b0=()=>{const{currentUser:s,userProfile:r}=Ca(),c=Sl(),[u,g]=x.useState(!1),[f,y]=x.useState(null),b=(T,N="success")=>{y({message:T,type:N}),setTimeout(()=>y(null),3e3)},A=()=>{s?.uid&&(navigator.clipboard.writeText(s.uid),g(!0),b("UID copied to clipboard!"),setTimeout(()=>g(!1),2e3))},w=()=>{s?.email&&(navigator.clipboard.writeText(s.email),b("Email copied to clipboard!"))};return s?t.jsxs("div",{style:it.container,children:[f&&t.jsx("div",{style:{...it.notification,background:f.type==="success"?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)"},children:f.message}),t.jsxs("div",{style:it.header,children:[t.jsx("button",{onClick:()=>c("/dashboard"),style:it.backButton,children:" Back to Dashboard"}),t.jsx("h1",{style:{margin:0,fontSize:"clamp(1.5rem, 4vw, 2.5rem)"},children:" My Profile Information"})]}),t.jsxs("div",{style:it.card,children:[t.jsxs("div",{style:it.cardHeader,children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" User Details"}),t.jsx("span",{style:it.roleBadge,children:r?.role?.toUpperCase()||"USER"})]}),t.jsxs("div",{style:it.infoGrid,children:[t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"User ID (UID)"})]}),t.jsx("div",{style:it.infoValue,children:t.jsx("code",{style:it.code,children:s.uid})}),t.jsx("button",{onClick:A,style:{...it.button,...it.copyButton,background:u?"#38ef7d":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u?" Copied!":" Copy UID"})]}),t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Address"})]}),t.jsx("div",{style:it.infoValue,children:s.email||"No email provided"}),s.email&&t.jsx("button",{onClick:w,style:{...it.button,...it.copyButton},children:" Copy Email"})]}),t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Display Name"})]}),t.jsx("div",{style:it.infoValue,children:r?.displayName||"Not set"})]}),r?.phone&&t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Phone Number"})]}),t.jsx("div",{style:it.infoValue,children:r.phone})]}),r?.hospitalId&&t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Hospital ID"})]}),t.jsx("div",{style:it.infoValue,children:t.jsx("code",{style:it.code,children:r.hospitalId})})]}),s.metadata?.creationTime&&t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Account Created"})]}),t.jsx("div",{style:it.infoValue,children:new Date(s.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{style:it.infoCard,children:[t.jsxs("div",{style:it.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Verification"})]}),t.jsx("div",{style:it.infoValue,children:t.jsx("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:s.emailVerified?"#38ef7d":"#ffa502",color:"white",fontSize:"0.9rem",fontWeight:"600"},children:s.emailVerified?" Verified":" Not Verified"})})]})]}),t.jsxs("div",{style:it.infoBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#333"},children:"What is UID?"}),t.jsx("p",{style:{margin:0,color:"#666",lineHeight:"1.6"},children:"Your User ID (UID) is a unique identifier assigned to your account. It's used internally by the system to manage your data securely. You might need this when contacting support or for administrative purposes."})]})]}),t.jsx("style",{children:`
                @keyframes slideDown {
                    from {
                        transform: translateY(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]}):t.jsx("div",{style:it.container,children:t.jsx("div",{style:it.card,children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),t.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Authentication Required"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Please log in to view your user information"}),t.jsx("button",{onClick:()=>c("/login"),style:{...it.button,...it.primaryButton},children:"Go to Login"})]})})})},it={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1rem, 3vw, 2rem)",position:"relative"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 2rem",borderRadius:"10px",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,animation:"slideDown 0.3s ease"},header:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1rem, 3vw, 2rem)",marginBottom:"2rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"1rem"},backButton:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",alignSelf:"flex-start",transition:"all 0.3s ease"},card:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1.5rem, 3vw, 2.5rem)",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e0e0e0",flexWrap:"wrap",gap:"1rem"},roleBadge:{padding:"0.5rem 1.5rem",borderRadius:"20px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontSize:"0.9rem",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},infoCard:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"15px",padding:"1.5rem",border:"2px solid #e0e0e0",transition:"all 0.3s ease"},infoLabel:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",color:"#666",fontSize:"0.9rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"1.1rem",color:"#333",fontWeight:"500",marginBottom:"1rem",wordBreak:"break-all"},code:{background:"#f5f5f5",padding:"0.5rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.9rem",display:"block"},button:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.3s ease",width:"100%"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},copyButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},infoBox:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"15px",padding:"2rem",textAlign:"center",border:"2px solid #667eea"}};async function v0(){console.log(" Starting hospital role migration...");try{const s=await Re(xe(V,"hospitals"));console.log(` Found ${s.size} hospitals`);let r=0,c=0,u=0;for(const g of s.docs){const f=g.data(),y=f.ownerId;if(!y){console.log(`  Hospital ${g.id} has no ownerId, skipping`),u++;continue}console.log(`
 Processing hospital: ${f.name} (${g.id})`),console.log(`   Owner UID: ${y}`);const b=Se(V,"users",y),A=await Gt(b);if(!A.exists()){console.log(` User document not found for UID: ${y}`),u++;continue}const w=A.data();console.log(`   Current role: ${w.role||"MISSING"}`),w.role==="hospital"?(console.log(" Already has correct role"),c++):(console.log(" Updating role to 'hospital'..."),await Zt(b,{role:"hospital",hospitalId:g.id}),console.log(" Role updated successfully!"),r++)}return console.log(`
`+"=".repeat(50)),console.log(" MIGRATION SUMMARY:"),console.log("=".repeat(50)),console.log(` Fixed: ${r}`),console.log(`  Already correct: ${c}`),console.log(` Errors: ${u}`),console.log(` Total processed: ${s.size}`),console.log("=".repeat(50)),{success:!0,fixed:r,alreadyCorrect:c,errors:u,total:s.size}}catch(s){return console.error(" Migration failed:",s),{success:!1,error:s.message}}}const j0=()=>{const[s,r]=x.useState([]),[c,u]=x.useState([]),[g,f]=x.useState([]),[y,b]=x.useState(!0),[A,w]=x.useState(null),[T,N]=x.useState(!1);x.useEffect(()=>{R()},[]);const R=async()=>{try{const L=await Re(xe(V,"hospitals")),ce=[];L.forEach(ae=>{ce.push({id:ae.id,...ae.data()})}),r(ce),console.log(" Hospitals collection:",ce);const W=await Re(Oe(xe(V,"users"),ye("role","==","hospital"))),se=[];W.forEach(ae=>{se.push({id:ae.id,...ae.data()})}),f(se),console.log(" Hospital users:",se);const E=await _d({});u(E),console.log(" Doctors:",E);const S=await Bs({});console.log(" getHospitals() result:",S)}catch(L){console.error("Error loading data:",L)}finally{b(!1)}},$=async()=>{if(confirm('This will update all hospital users to have role="hospital". Continue?')){N(!0),w(null);try{const L=await v0();w(L),await R()}catch(L){console.error("Migration error:",L),w({success:!1,error:L.message})}finally{N(!1)}}};return y?t.jsx("div",{style:{padding:"2rem"},children:"Loading database data..."}):t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace"},children:[t.jsx("h1",{children:" Database Debug Page"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginTop:0},children:" Fix Hospital Roles"}),t.jsx("p",{children:"If hospitals are not showing up when booking, click this button to fix their roles:"}),t.jsx("button",{onClick:$,disabled:T,style:{padding:"0.75rem 1.5rem",background:T?"#ccc":"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:T?"not-allowed":"pointer"},children:T?" Fixing...":" Fix Hospital Roles Now"}),A&&t.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:A.success?"#d4edda":"#f8d7da",borderRadius:"8px"},children:A.success?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Complete!"})}),t.jsxs("div",{children:["Fixed: ",A.fixed]}),t.jsxs("div",{children:["Already correct: ",A.alreadyCorrect]}),t.jsxs("div",{children:["Errors: ",A.errors]}),t.jsxs("div",{children:["Total: ",A.total]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Failed"})}),t.jsx("div",{children:A.error})]})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospitals Collection (",s.length,")"]}),s.length===0?t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[" No hospitals found in 'hospitals' collection",t.jsx("br",{}),t.jsx("strong",{children:"Problem:"})," Hospitals are not being saved during registration!"]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:s.map(L=>t.jsxs("div",{style:{padding:"1rem",background:"#e8f5e9",borderRadius:"8px",border:"2px solid #4caf50"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",L.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",L.name||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",L.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",L.country||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",L.state||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",L.city||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",L.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",L.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Owner ID:"})," ",L.ownerId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",L.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",L.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",L.city||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",L.address||"N/A"]})]},L.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospital Users (role='hospital') (",g.length,")"]}),g.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No users with role='hospital' found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:g.map(L=>t.jsxs("div",{style:{padding:"1rem",background:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",L.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",L.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",L.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Role:"})," ",L.role]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",L.hospitalId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",L.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",L.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",L.city||"N/A"]})]},L.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Doctors (",c.length,")"]}),c.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No doctors found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:c.map(L=>t.jsxs("div",{style:{padding:"1rem",background:"#f3e5f5",borderRadius:"8px",border:"2px solid #9c27b0"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",L.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",L.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",L.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Specialization:"})," ",L.specialization||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",L.hospitalId||"Independent"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",L.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",L.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",L.city||"N/A"]})]},L.id))})]}),t.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f5f5f5",borderRadius:"8px"},children:[t.jsx("h3",{children:" Summary"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Hospitals in 'hospitals' collection: ",t.jsx("strong",{children:s.length})]}),t.jsxs("li",{children:["Users with role='hospital': ",t.jsx("strong",{children:g.length})]}),t.jsxs("li",{children:["Doctors: ",t.jsx("strong",{children:c.length})]})]}),t.jsx("h3",{children:" What to Check"}),t.jsxs("ol",{style:{lineHeight:"1.8"},children:[t.jsx("li",{children:"If hospitals collection is empty, registration is not creating hospital documents"}),t.jsx("li",{children:"If hospitalUsers is empty, users aren't getting role='hospital' during registration"}),t.jsx("li",{children:"Check if hospital documents have location fields (country, state, city)"}),t.jsx("li",{children:"The BookAppointment page filters by location, so missing location = won't show up"})]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Solution:"})," If hospitals have no location data:",t.jsx("br",{}),"1. Go to Firebase Console  Firestore  hospitals collection",t.jsx("br",{}),"2. Edit each hospital document and add: country, state, city",t.jsx("br",{}),"3. OR re-register the hospital with complete profile"]})]}),t.jsx("button",{onClick:R,style:{marginTop:"2rem",padding:"1rem 2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Refresh Data"})]})},S0=()=>{const[s,r]=x.useState(null),[c,u]=x.useState(!1),g=async()=>{u(!0),r(`Starting test...
`);const f=`test_hospital_${Date.now()}@test.com`,y="TestPass123!",b=`Test Hospital ${Date.now()}`;try{r(E=>E+`
 Test 1: Registering hospital...`),r(E=>E+`
   Email: ${f}`),r(E=>E+`
   Name: ${b}`);const A=await Zm(f,y,b,"hospital",{country:"Test Country",state:"Test State",city:"Test City",address:"Test Address"});r(E=>E+`
 Registration successful!`),r(E=>E+`
   User UID: ${A.uid}`),r(E=>E+`
   Hospital ID: ${A.hospitalId||"NOT SET"}`),await new Promise(E=>setTimeout(E,2e3)),r(E=>E+`

 Test 2: Checking hospitals collection...`);const w=await Re(xe(V,"hospitals"));r(E=>E+`
   Found ${w.size} hospitals`);let T=!1;w.forEach(E=>{const S=E.data();r(ae=>ae+`
   - ${S.name} (${E.id})`),S.email===f&&(T=!0,r(ae=>ae+"  OUR TEST HOSPITAL "))}),T||r(E=>E+`
 Our test hospital NOT found in hospitals collection!`),r(E=>E+`

 Test 3: Checking users collection...`),r(E=>E+`
   Looking for user: ${A.uid}`);const{doc:N,getDoc:R}=await zs(async()=>{const{doc:E,getDoc:S}=await import("./firebase-Culp_hMH.js").then(ae=>ae.E);return{doc:E,getDoc:S}},[]),$=N(V,"users",A.uid),L=await R($);let ce=!1;if(L.exists()){ce=!0;const E=L.data();r(S=>S+`
    Found user: ${E.displayName} (${L.id})`),r(S=>S+`
     Email: ${E.email}`),r(S=>S+`
     Role: ${E.role||"NOT SET"} ${E.role==="hospital"?"":""}`),r(S=>S+`
     HospitalID: ${E.hospitalId||"NOT SET"}`)}else r(E=>E+`
 User document not found!`);ce||r(E=>E+`
 Our test user NOT found in users collection!`),r(E=>E+`

 Test 4: Testing getHospitals() function...`);const W=await Bs({});r(E=>E+`
   getHospitals() returned ${W.length} hospitals`);const se=W.find(E=>E.email===f);r(se?E=>E+`
 Our test hospital found via getHospitals()!`:E=>E+`
 Our test hospital NOT found via getHospitals()!`),r(E=>E+`

`+"=".repeat(50)),T&&ce&&se?r(E=>E+`
 ALL TESTS PASSED - Hospital registration is working!`):(r(E=>E+`
 SOME TESTS FAILED - There is an issue with registration`),T||r(E=>E+`
   - Hospital not in hospitals collection`),ce||r(E=>E+`
   - User not in users collection`),se||r(E=>E+`
   - getHospitals() not returning hospital`)),r(E=>E+`
`+"=".repeat(50))}catch(A){r(w=>w+`

 ERROR: ${A.message}`),r(w=>w+`
   Code: ${A.code||"N/A"}`),r(w=>w+`
   Stack: ${A.stack}`),console.error("Test error:",A)}finally{u(!1)}};return t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[t.jsx("h1",{children:" Hospital Registration Test"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("p",{children:t.jsx("strong",{children:"This test will:"})}),t.jsxs("ol",{children:[t.jsx("li",{children:"Register a new test hospital"}),t.jsx("li",{children:"Check if it appears in hospitals collection"}),t.jsx("li",{children:"Check if user has correct role in users collection"}),t.jsx("li",{children:"Test if getHospitals() returns it"})]}),t.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#666"},children:[t.jsx("strong",{children:"Note:"})," This will create a real test hospital in your database. You can delete it later from Firebase Console if needed."]})]}),t.jsx("button",{onClick:g,disabled:c,style:{padding:"1rem 2rem",background:c?"#ccc":"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:c?"not-allowed":"pointer",marginBottom:"2rem"},children:c?" Running Tests...":" Run Test"}),s&&t.jsx("div",{style:{padding:"1.5rem",background:"#1e1e1e",color:"#00ff00",borderRadius:"8px",fontSize:"0.9rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"Consolas, Monaco, monospace",maxHeight:"600px",overflow:"auto"},children:s})]})},w0=()=>{const[s,r]=x.useState([]),[c,u]=x.useState(!1),[g,f]=x.useState(""),y=async()=>{u(!0);try{const A=await Re(xe(V,"hospitals")),w=[];A.forEach(T=>{w.push({id:T.id,...T.data()})}),r(w),f(`Loaded ${w.length} hospitals`)}catch(A){f(`Error: ${A.message}`)}finally{u(!1)}},b=async(A,w)=>{try{await Zt(Se(V,"hospitals",A),{country:w.country,state:w.state,city:w.city,address:w.address||""}),f(T=>T+`
 Updated ${A}`),await y()}catch(T){f(N=>N+`
 Failed ${A}: ${T.message}`)}};return t.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[t.jsx("h1",{children:" Fix Hospital Locations"}),t.jsx("button",{onClick:y,disabled:c,style:{padding:"1rem 2rem",background:"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:c?"not-allowed":"pointer",marginBottom:"2rem"},children:c?"Loading...":" Load Hospitals"}),g&&t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"2rem",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:g}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:s.map(A=>{const w=A.country&&A.state&&A.city;return t.jsxs("div",{style:{padding:"1.5rem",background:w?"#e8f5e9":"#fff3cd",border:`2px solid ${w?"#4caf50":"#ffc107"}`,borderRadius:"12px"},children:[t.jsxs("h3",{style:{marginTop:0},children:[w?"":""," ",A.name]}),t.jsxs("div",{style:{marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",A.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",A.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",A.country||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",A.state||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",A.city||t.jsx("span",{style:{color:"red"},children:" MISSING"})]})]}),!w&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsx("h4",{children:"Add Location:"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsx("input",{type:"text",placeholder:"Country",id:`country-${A.id}`,defaultValue:A.country||"",style:ho.input}),t.jsx("input",{type:"text",placeholder:"State",id:`state-${A.id}`,defaultValue:A.state||"",style:ho.input}),t.jsx("input",{type:"text",placeholder:"City",id:`city-${A.id}`,defaultValue:A.city||"",style:ho.input}),t.jsx("input",{type:"text",placeholder:"Address (optional)",id:`address-${A.id}`,defaultValue:A.address||"",style:ho.input}),t.jsx("button",{onClick:()=>{const T=document.getElementById(`country-${A.id}`).value,N=document.getElementById(`state-${A.id}`).value,R=document.getElementById(`city-${A.id}`).value,$=document.getElementById(`address-${A.id}`).value;if(!T||!N||!R){alert("Country, State, and City are required!");return}b(A.id,{country:T,state:N,city:R,address:$})},style:ho.button,children:" Save Location"})]})]})]},A.id)})})]})},ho={input:{padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem"},button:{padding:"0.75rem 1.5rem",background:"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"}},C0=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Privacy Policy"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'This Privacy Policy describes how Souldoc ("we", "us", or "our") collects, uses, and shares personal information when you use our services. We are committed to protecting your privacy and will handle your personal information in accordance with applicable laws.'}),t.jsx("h2",{children:"Information We Collect"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Account information (name, email, phone) when you register or book appointments."}),t.jsx("li",{children:"Appointment and payment history."}),t.jsx("li",{children:"Device and usage information (IP address, browser, logs) to improve service quality."})]}),t.jsx("h2",{children:"How We Use Information"}),t.jsx("p",{children:"We use the information to provide, maintain, and improve our services, process transactions, communicate with you, and for fraud prevention."}),t.jsx("h2",{children:"Sharing and Disclosure"}),t.jsx("p",{children:"We may share information with service providers, payment processors, and when required by law. We do not sell personal information."}),t.jsx("h2",{children:"Data Security"}),t.jsx("p",{children:"We maintain reasonable administrative and technical safeguards to protect personal information. However, no method of transmission over the Internet is completely secure."}),t.jsx("h2",{children:"Your Rights"}),t.jsxs("p",{children:["You may access, correct, or request deletion of your personal information. To do so, contact us at ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]}),t.jsx("h2",{children:"Changes"}),t.jsx("p",{children:"We may update this policy from time to time. We will post any changes on this page with a revised date."})]}),A0=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Terms of Service"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'These Terms of Service ("Terms") govern your access to and use of Souldoc (the "Service"). By using the Service you agree to these Terms.'}),t.jsx("h2",{children:"Use of the Service"}),t.jsx("p",{children:"You may use the Service only in compliance with these Terms and all applicable laws. You must provide accurate information during registration and booking."}),t.jsx("h2",{children:"Payments"}),t.jsx("p",{children:"Payments processed through the Service are subject to our billing policies. We may use third-party payment processors; their terms will also apply."}),t.jsx("h2",{children:"Intellectual Property"}),t.jsx("p",{children:"All content, trademarks, and software provided on the Service are the property of Souldoc or its licensors."}),t.jsx("h2",{children:"Limitation of Liability"}),t.jsx("p",{children:"To the maximum extent permitted by law, Souldoc will not be liable for any indirect, incidental, or consequential damages arising from your use of the Service."}),t.jsx("h2",{children:"Governing Law"}),t.jsx("p",{children:"These Terms are governed by the laws of the jurisdiction in which the company operates. Any disputes will be resolved under those laws."}),t.jsx("h2",{children:"Contact"}),t.jsxs("p",{children:["Questions about these Terms should be sent to ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]})]}),D0=({children:s})=>{const{isAuthenticated:r,loading:c}=Ca();return c?t.jsx("div",{children:"Loading..."}):r?s:t.jsx(dg,{to:"/login"})};function T0(){return t.jsx(sg,{children:t.jsxs(rg,{children:[t.jsx(_n,{path:"/",element:t.jsx(Mg,{})}),t.jsx(_n,{path:"/book",element:t.jsx(h0,{})}),t.jsx(_n,{path:"/login",element:t.jsx(yy,{})}),t.jsx(_n,{path:"/register",element:t.jsx(by,{})}),t.jsx(_n,{path:"/setup-admin",element:t.jsx(f0,{})}),t.jsx(_n,{path:"/setup-billing",element:t.jsx(g0,{})}),t.jsx(_n,{path:"/setup-multi-currency",element:t.jsx(y0,{})}),t.jsx(_n,{path:"/debug-currency",element:t.jsx(x0,{})}),t.jsx(_n,{path:"/privacy",element:t.jsx(C0,{})}),t.jsx(_n,{path:"/terms",element:t.jsx(A0,{})}),t.jsx(_n,{path:"/get-my-uid",element:t.jsx(b0,{})}),t.jsx(_n,{path:"/debug-database",element:t.jsx(j0,{})}),t.jsx(_n,{path:"/test-hospital",element:t.jsx(S0,{})}),t.jsx(_n,{path:"/fix-hospitals",element:t.jsx(w0,{})}),t.jsx(_n,{path:"/dashboard",element:t.jsx(D0,{children:t.jsx(o0,{})})})]})})}Ng.createRoot(document.getElementById("root")).render(t.jsx(x.StrictMode,{children:t.jsx(xy,{children:t.jsx(T0,{})})}));
