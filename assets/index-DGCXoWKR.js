import{r as mg,a as hg,L as bi,b,u as Il,c as fg,B as gg,R as yg,d as Xn,N as xg}from"./react-vendor-Dqf2LXFM.js";import{_ as bg,C as vg,r as Mm,a as jg,g as Sg,b as wg,c as Jd,d as Cg,i as Zm,p as Ag,u as Dg,F as Tg,e as zg,f as Bg,h as Rg,j as Re,k as Yt,l as ve,q as Ce,w as le,m as Oe,n as si,o as Us,s as Os,t as Wt,v as Zn,x as kg,y as Eg,z as Hm,A as Um,B as Ng,D as Mg,E as Hg,G as ca,T as Ls,H as ua,I as Qd,J as Ug}from"./firebase-p-DgfaJy.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const y of f)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&u(g)}).observe(document,{childList:!0,subtree:!0});function c(f){const y={};return f.integrity&&(y.integrity=f.integrity),f.referrerPolicy&&(y.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?y.credentials="include":f.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function u(f){if(f.ep)return;f.ep=!0;const y=c(f);fetch(f.href,y)}})();var qd={exports:{}},zo={};var Om;function Og(){if(Om)return zo;Om=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(u,f,y){var g=null;if(y!==void 0&&(g=""+y),f.key!==void 0&&(g=""+f.key),"key"in f){y={};for(var x in f)x!=="key"&&(y[x]=f[x])}else y=f;return f=y.ref,{$$typeof:s,type:u,key:g,ref:f!==void 0?f:null,props:y}}return zo.Fragment=r,zo.jsx=c,zo.jsxs=c,zo}var Lm;function Lg(){return Lm||(Lm=1,qd.exports=Og()),qd.exports}var t=Lg(),Gd={exports:{}},Bo={},Wd={exports:{}},Yd={};var Pm;function Pg(){return Pm||(Pm=1,(function(s){function r(q,se){var me=q.length;q.push(se);e:for(;0<me;){var Fe=me-1>>>1,Ze=q[Fe];if(0<f(Ze,se))q[Fe]=se,q[me]=Ze,me=Fe;else break e}}function c(q){return q.length===0?null:q[0]}function u(q){if(q.length===0)return null;var se=q[0],me=q.pop();if(me!==se){q[0]=me;e:for(var Fe=0,Ze=q.length,gt=Ze>>>1;Fe<gt;){var ye=2*(Fe+1)-1,_e=q[ye],yt=ye+1,kt=q[yt];if(0>f(_e,me))yt<Ze&&0>f(kt,_e)?(q[Fe]=kt,q[yt]=me,Fe=yt):(q[Fe]=_e,q[ye]=me,Fe=ye);else if(yt<Ze&&0>f(kt,me))q[Fe]=kt,q[yt]=me,Fe=yt;else break e}}return se}function f(q,se){var me=q.sortIndex-se.sortIndex;return me!==0?me:q.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;s.unstable_now=function(){return y.now()}}else{var g=Date,x=g.now();s.unstable_now=function(){return g.now()-x}}var j=[],D=[],A=1,M=null,C=3,oe=!1,R=!1,pe=!1,_=!1,ce=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function w(q){for(var se=c(D);se!==null;){if(se.callback===null)u(D);else if(se.startTime<=q)u(D),se.sortIndex=se.expirationTime,r(j,se);else break;se=c(D)}}function ke(q){if(pe=!1,w(q),!R)if(c(j)!==null)R=!0,pt||(pt=!0,ue());else{var se=c(D);se!==null&&at(ke,se.startTime-q)}}var pt=!1,mt=-1,P=5,Ae=-1;function Y(){return _?!0:!(s.unstable_now()-Ae<P)}function $e(){if(_=!1,pt){var q=s.unstable_now();Ae=q;var se=!0;try{e:{R=!1,pe&&(pe=!1,N(mt),mt=-1),oe=!0;var me=C;try{t:{for(w(q),M=c(j);M!==null&&!(M.expirationTime>q&&Y());){var Fe=M.callback;if(typeof Fe=="function"){M.callback=null,C=M.priorityLevel;var Ze=Fe(M.expirationTime<=q);if(q=s.unstable_now(),typeof Ze=="function"){M.callback=Ze,w(q),se=!0;break t}M===c(j)&&u(j),w(q)}else u(j);M=c(j)}if(M!==null)se=!0;else{var gt=c(D);gt!==null&&at(ke,gt.startTime-q),se=!1}}break e}finally{M=null,C=me,oe=!1}se=void 0}}finally{se?ue():pt=!1}}}var ue;if(typeof ie=="function")ue=function(){ie($e)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,ht=Qe.port2;Qe.port1.onmessage=$e,ue=function(){ht.postMessage(null)}}else ue=function(){ce($e,0)};function at(q,se){mt=ce(function(){q(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(q){switch(C){case 1:case 2:case 3:var se=3;break;default:se=C}var me=C;C=se;try{return q()}finally{C=me}},s.unstable_requestPaint=function(){_=!0},s.unstable_runWithPriority=function(q,se){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var me=C;C=q;try{return se()}finally{C=me}},s.unstable_scheduleCallback=function(q,se,me){var Fe=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Fe+me:Fe):me=Fe,q){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=me+Ze,q={id:A++,callback:se,priorityLevel:q,startTime:me,expirationTime:Ze,sortIndex:-1},me>Fe?(q.sortIndex=me,r(D,q),c(j)===null&&q===c(D)&&(pe?(N(mt),mt=-1):pe=!0,at(ke,me-Fe))):(q.sortIndex=Ze,r(j,q),R||oe||(R=!0,pt||(pt=!0,ue()))),q},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(q){var se=C;return function(){var me=C;C=se;try{return q.apply(this,arguments)}finally{C=me}}}})(Yd)),Yd}var Im;function Ig(){return Im||(Im=1,Wd.exports=Pg()),Wd.exports}var _m;function _g(){if(_m)return Bo;_m=1;var s=Ig(),r=mg(),c=hg();function u(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function g(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function j(e){if(y(e)!==e)throw Error(u(188))}function D(e){var n=e.alternate;if(!n){if(n=y(e),n===null)throw Error(u(188));return n!==e?null:e}for(var i=e,a=n;;){var l=i.return;if(l===null)break;var o=l.alternate;if(o===null){if(a=l.return,a!==null){i=a;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===i)return j(l),e;if(o===a)return j(l),n;o=o.sibling}throw Error(u(188))}if(i.return!==a.return)i=l,a=o;else{for(var d=!1,p=l.child;p;){if(p===i){d=!0,i=l,a=o;break}if(p===a){d=!0,a=l,i=o;break}p=p.sibling}if(!d){for(p=o.child;p;){if(p===i){d=!0,i=o,a=l;break}if(p===a){d=!0,a=o,i=l;break}p=p.sibling}if(!d)throw Error(u(189))}}if(i.alternate!==a)throw Error(u(190))}if(i.tag!==3)throw Error(u(188));return i.stateNode.current===i?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var M=Object.assign,C=Symbol.for("react.element"),oe=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),Ae=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),$e=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=$e&&e[$e]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pe:return"Fragment";case ce:return"Profiler";case _:return"StrictMode";case ke:return"Suspense";case pt:return"SuspenseList";case Ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case ie:return e.displayName||"Context";case N:return(e._context.displayName||"Context")+".Consumer";case w:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mt:return n=e.displayName||null,n!==null?n:ht(e.type)||"Memo";case P:n=e._payload,e=e._init;try{return ht(e(n))}catch{}}return null}var at=Array.isArray,q=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Fe=[],Ze=-1;function gt(e){return{current:e}}function ye(e){0>Ze||(e.current=Fe[Ze],Fe[Ze]=null,Ze--)}function _e(e,n){Ze++,Fe[Ze]=e.current,e.current=n}var yt=gt(null),kt=gt(null),Ke=gt(null),bn=gt(null);function Ft(e,n){switch(_e(Ke,n),_e(kt,e),_e(yt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?im(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=im(n),e=am(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(yt),_e(yt,e)}function pn(){ye(yt),ye(kt),ye(Ke)}function vt(e){e.memoizedState!==null&&_e(bn,e);var n=yt.current,i=am(n,e.type);n!==i&&(_e(kt,e),_e(yt,i))}function ln(e){kt.current===e&&(ye(yt),ye(kt)),bn.current===e&&(ye(bn),Co._currentValue=me)}var Tt,Et;function k(e){if(Tt===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Tt=n&&n[1]||"",Et=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+Et}var Te=!1;function fe(e,n){if(!e||Te)return"";Te=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(G){var L=G}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(G){L=G}e.call(ee.prototype)}}else{try{throw Error()}catch(G){L=G}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(G){if(G&&L&&typeof G.stack=="string")return[G.stack,L.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=a.DetermineComponentFrameRoot(),d=o[0],p=o[1];if(d&&p){var S=d.split(`
`),U=p.split(`
`);for(l=a=0;a<S.length&&!S[a].includes("DetermineComponentFrameRoot");)a++;for(;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;if(a===S.length||l===U.length)for(a=S.length-1,l=U.length-1;1<=a&&0<=l&&S[a]!==U[l];)l--;for(;1<=a&&0<=l;a--,l--)if(S[a]!==U[l]){if(a!==1||l!==1)do if(a--,l--,0>l||S[a]!==U[l]){var Q=`
`+S[a].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=a&&0<=l);break}}}finally{Te=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?k(i):""}function Ve(e,n){switch(e.tag){case 26:case 27:case 5:return k(e.type);case 16:return k("Lazy");case 13:return e.child!==n&&n!==null?k("Suspense Fallback"):k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return fe(e.type,!1);case 11:return fe(e.type.render,!1);case 1:return fe(e.type,!0);case 31:return k("Activity");default:return""}}function qe(e){try{var n="",i=null;do n+=Ve(e,i),i=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var kn=Object.prototype.hasOwnProperty,re=s.unstable_scheduleCallback,Kn=s.unstable_cancelCallback,An=s.unstable_shouldYield,vi=s.unstable_requestPaint,qt=s.unstable_now,$t=s.unstable_getCurrentPriorityLevel,rt=s.unstable_ImmediatePriority,Jn=s.unstable_UserBlockingPriority,At=s.unstable_NormalPriority,on=s.unstable_LowPriority,mn=s.unstable_IdlePriority,O=s.log,$=s.unstable_setDisableYieldValue,xe=null,he=null;function ge(e){if(typeof O=="function"&&$(e),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(xe,e)}catch{}}var Ee=Math.clz32?Math.clz32:En,xt=Math.log,hn=Math.LN2;function En(e){return e>>>=0,e===0?32:31-(xt(e)/hn|0)|0}var Nt=256,Vt=262144,Hn=4194304;function Dn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ge(e,n,i){var a=e.pendingLanes;if(a===0)return 0;var l=0,o=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var p=a&134217727;return p!==0?(a=p&~o,a!==0?l=Dn(a):(d&=p,d!==0?l=Dn(d):i||(i=p&~e,i!==0&&(l=Dn(i))))):(p=a&~o,p!==0?l=Dn(p):d!==0?l=Dn(d):i||(i=a&~e,i!==0&&(l=Dn(i)))),l===0?0:n!==0&&n!==l&&(n&o)===0&&(o=l&-l,i=n&-n,o>=i||o===32&&(i&4194048)!==0)?n:l}function Nn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function jt(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sn(){var e=Hn;return Hn<<=1,(Hn&62914560)===0&&(Hn=4194304),e}function Mt(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Ye(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function di(e,n,i,a,l,o){var d=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,S=e.expirationTimes,U=e.hiddenUpdates;for(i=d&~i;0<i;){var Q=31-Ee(i),ee=1<<Q;p[Q]=0,S[Q]=-1;var L=U[Q];if(L!==null)for(U[Q]=null,Q=0;Q<L.length;Q++){var G=L[Q];G!==null&&(G.lane&=-536870913)}i&=~ee}a!==0&&T(e,a,0),o!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=o&~(d&~n))}function T(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-Ee(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|i&261930}function I(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var a=31-Ee(i),l=1<<a;l&n|e[a]&n&&(e[a]|=n),i&=~l}}function F(e,n){var i=n&-n;return i=(i&42)!==0?1:te(i),(i&(e.suspendedLanes|n))!==0?0:i}function te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function He(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Tm(e.type))}function it(e,n){var i=se.p;try{return se.p=e,n()}finally{se.p=i}}var be=Math.random().toString(36).slice(2),zt="__reactFiber$"+be,fn="__reactProps$"+be,ci="__reactContainer$"+be,We="__reactEvents$"+be,Wn="__reactListeners$"+be,St="__reactHandles$"+be,$n="__reactResources$"+be,Yn="__reactMarker$"+be;function ki(e){delete e[zt],delete e[fn],delete e[We],delete e[Wn],delete e[St]}function Ii(e){var n=e[zt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[ci]||i[zt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=um(e);e!==null;){if(i=e[zt])return i;e=um(e)}return n}e=i,i=e.parentNode}return null}function _i(e){if(e=e[zt]||e[ci]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function qi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(u(33))}function Ei(e){var n=e[$n];return n||(n=e[$n]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rn(e){e[Yn]=!0}var pa=new Set,il={};function Ni(e,n){Z(e,n),Z(e+"Capture",n)}function Z(e,n){for(il[e]=n,e=0;e<n.length;e++)pa.add(n[e])}var v=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ae={},Le={};function Qt(e){return kn.call(Le,e)?!0:kn.call(ae,e)?!1:v.test(e)?Le[e]=!0:(ae[e]=!0,!1)}function Xt(e,n,i){if(Qt(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function dn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Ht(e,n,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+a)}}function W(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function h(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function B(e,n,i){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,o=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(d){i=""+d,o.call(this,d)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function X(e){if(!e._valueTracker){var n=h(e)?"checked":"value";e._valueTracker=B(e,n,""+e[n])}}function de(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),a="";return e&&(a=h(e)?e.checked?"true":"false":e.value),e=a,e!==i?(n.setValue(e),!0):!1}function ne(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var je=/[\n"\\]/g;function Be(e){return e.replace(je,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Pe(e,n,i,a,l,o,d,p){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),n!=null?d==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+W(n)):e.value!==""+W(n)&&(e.value=""+W(n)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),n!=null?lt(e,d,W(n)):i!=null?lt(e,d,W(i)):a!=null&&e.removeAttribute("value"),l==null&&o!=null&&(e.defaultChecked=!!o),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+W(p):e.removeAttribute("name")}function dt(e,n,i,a,l,o,d,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),n!=null||i!=null){if(!(o!=="submit"&&o!=="reset"||n!=null)){X(e);return}i=i!=null?""+W(i):"",n=n!=null?""+W(n):i,p||n===e.value||(e.value=n),e.defaultValue=n}a=a??l,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=p?e.checked:!!a,e.defaultChecked=!!a,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),X(e)}function lt(e,n,i){n==="number"&&ne(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ne(e,n,i,a){if(e=e.options,n){n={};for(var l=0;l<i.length;l++)n["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=n.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&a&&(e[i].defaultSelected=!0)}else{for(i=""+W(i),n=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}n!==null||e[l].disabled||(n=e[l])}n!==null&&(n.selected=!0)}}function et(e,n,i){if(n!=null&&(n=""+W(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+W(i):""}function bt(e,n,i,a){if(n==null){if(a!=null){if(i!=null)throw Error(u(92));if(at(a)){if(1<a.length)throw Error(u(93));a=a[0]}i=a}i==null&&(i=""),n=i}i=W(n),e.defaultValue=i,a=e.textContent,a===i&&a!==""&&a!==null&&(e.value=a),X(e)}function Gt(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var en=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tn(e,n,i){var a=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,i):typeof i!="number"||i===0||en.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Un(e,n,i){if(n!=null&&typeof n!="object")throw Error(u(62));if(e=e.style,i!=null){for(var a in i)!i.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var l in n)a=n[l],n.hasOwnProperty(l)&&i[l]!==a&&Tn(e,l,a)}else for(var o in n)n.hasOwnProperty(o)&&Tn(e,o,n[o])}function vn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(e){return ui.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function tn(){}var ei=null;function Gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fn=null,Zt=null;function Si(e){var n=_i(e);if(n&&(e=n.stateNode)){var i=e[fn]||null;e:switch(e=n.stateNode,n.type){case"input":if(Pe(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Be(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var a=i[n];if(a!==e&&a.form===e.form){var l=a[fn]||null;if(!l)throw Error(u(90));Pe(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(n=0;n<i.length;n++)a=i[n],a.form===e.form&&de(a)}break e;case"textarea":et(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Ne(e,!!i.multiple,n,!1)}}}var _a=!1;function ma(e,n,i){if(_a)return e(n,i);_a=!0;try{var a=e(n);return a}finally{if(_a=!1,(Fn!==null||Zt!==null)&&(hs(),Fn&&(n=Fn,e=Zt,Zt=Fn=null,Si(n),e)))for(n=0;n<e.length;n++)Si(e[n])}}function Mi(e,n){var i=e.stateNode;if(i===null)return null;var a=i[fn]||null;if(a===null)return null;i=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(u(231,n,typeof i));return i}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(Vn)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){ha=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{ha=!1}var Hi=null,al=null,ll=null;function ol(){if(ll)return ll;var e,n=al,i=n.length,a,l="value"in Hi?Hi.value:Hi.textContent,o=l.length;for(e=0;e<i&&n[e]===l[e];e++);var d=i-e;for(a=1;a<=d&&n[i-a]===l[o-a];a++);return ll=l.slice(e,1<a?1-a:void 0)}function sl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ga(){return!0}function ql(){return!1}function On(e){function n(i,a,l,o,d){this._reactName=i,this._targetInst=l,this.type=a,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ga:ql,this.isPropagationStopped=ql,this}return M(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),n}var Ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zn=On(Ie),ya=M({},Ie,{view:0,detail:0}),ch=On(ya),Ws,Ys,Gl,Eo=M({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(Ws=e.screenX-Gl.screenX,Ys=e.screenY-Gl.screenY):Ys=Ws=0,Gl=e),Ws)},movementY:function(e){return"movementY"in e?e.movementY:Ys}}),oc=On(Eo),uh=M({},Eo,{dataTransfer:0}),ph=On(uh),mh=M({},ya,{relatedTarget:0}),Fs=On(mh),hh=M({},Ie,{animationName:0,elapsedTime:0,pseudoElement:0}),fh=On(hh),gh=M({},Ie,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yh=On(gh),xh=M({},Ie,{data:0}),sc=On(xh),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=jh[e])?!!n[e]:!1}function Vs(){return Sh}var wh=M({},ya,{key:function(e){if(e.key){var n=bh[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(e){return e.type==="keypress"?sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ch=On(wh),Ah=M({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=On(Ah),Dh=M({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),Th=On(Dh),zh=M({},Ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bh=On(zh),Rh=M({},Eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kh=On(Rh),Eh=M({},Ie,{newState:0,oldState:0}),Nh=On(Eh),Mh=[9,13,27,32],Qs=Vn&&"CompositionEvent"in window,Wl=null;Vn&&"documentMode"in document&&(Wl=document.documentMode);var Hh=Vn&&"TextEvent"in window&&!Wl,dc=Vn&&(!Qs||Wl&&8<Wl&&11>=Wl),cc=" ",uc=!1;function pc(e,n){switch(e){case"keyup":return Mh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function Uh(e,n){switch(e){case"compositionend":return mc(n);case"keypress":return n.which!==32?null:(uc=!0,cc);case"textInput":return e=n.data,e===cc&&uc?null:e;default:return null}}function Oh(e,n){if(rl)return e==="compositionend"||!Qs&&pc(e,n)?(e=ol(),ll=al=Hi=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return dc&&n.locale!=="ko"?null:n.data;default:return null}}var Lh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Lh[e.type]:n==="textarea"}function fc(e,n,i,a){Fn?Zt?Zt.push(a):Zt=[a]:Fn=a,n=js(n,"onChange"),0<n.length&&(i=new zn("onChange","change",null,i,a),e.push({event:i,listeners:n}))}var Yl=null,Fl=null;function Ph(e){Kp(e,0)}function No(e){var n=qi(e);if(de(n))return e}function gc(e,n){if(e==="change")return n}var yc=!1;if(Vn){var Xs;if(Vn){var Zs="oninput"in document;if(!Zs){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),Zs=typeof xc.oninput=="function"}Xs=Zs}else Xs=!1;yc=Xs&&(!document.documentMode||9<document.documentMode)}function bc(){Yl&&(Yl.detachEvent("onpropertychange",vc),Fl=Yl=null)}function vc(e){if(e.propertyName==="value"&&No(Fl)){var n=[];fc(n,Fl,e,Gi(e)),ma(Ph,n)}}function Ih(e,n,i){e==="focusin"?(bc(),Yl=n,Fl=i,Yl.attachEvent("onpropertychange",vc)):e==="focusout"&&bc()}function _h(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return No(Fl)}function qh(e,n){if(e==="click")return No(n)}function Gh(e,n){if(e==="input"||e==="change")return No(n)}function Wh(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var pi=typeof Object.is=="function"?Object.is:Wh;function Vl(e,n){if(pi(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),a=Object.keys(n);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var l=i[a];if(!kn.call(n,l)||!pi(e[l],n[l]))return!1}return!0}function jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sc(e,n){var i=jc(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=n&&a>=n)return{node:i,offset:n-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jc(i)}}function wc(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?wc(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Cc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ne(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=ne(e.document)}return n}function Ks(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Yh=Vn&&"documentMode"in document&&11>=document.documentMode,dl=null,Js=null,Ql=null,$s=!1;function Ac(e,n,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$s||dl==null||dl!==ne(a)||(a=dl,"selectionStart"in a&&Ks(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ql&&Vl(Ql,a)||(Ql=a,a=js(Js,"onSelect"),0<a.length&&(n=new zn("onSelect","select",null,n,i),e.push({event:n,listeners:a}),n.target=dl)))}function qa(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var cl={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},er={},Dc={};Vn&&(Dc=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Ga(e){if(er[e])return er[e];if(!cl[e])return e;var n=cl[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Dc)return er[e]=n[i];return e}var Tc=Ga("animationend"),zc=Ga("animationiteration"),Bc=Ga("animationstart"),Fh=Ga("transitionrun"),Vh=Ga("transitionstart"),Qh=Ga("transitioncancel"),Rc=Ga("transitionend"),kc=new Map,tr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tr.push("scrollEnd");function Ui(e,n){kc.set(e,n),Ni(n,[e])}var Mo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wi=[],ul=0,nr=0;function Ho(){for(var e=ul,n=nr=ul=0;n<e;){var i=wi[n];wi[n++]=null;var a=wi[n];wi[n++]=null;var l=wi[n];wi[n++]=null;var o=wi[n];if(wi[n++]=null,a!==null&&l!==null){var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}o!==0&&Ec(i,l,o)}}function Uo(e,n,i,a){wi[ul++]=e,wi[ul++]=n,wi[ul++]=i,wi[ul++]=a,nr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function ir(e,n,i,a){return Uo(e,n,i,a),Oo(e)}function Wa(e,n){return Uo(e,null,null,n),Oo(e)}function Ec(e,n,i){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i);for(var l=!1,o=e.return;o!==null;)o.childLanes|=i,a=o.alternate,a!==null&&(a.childLanes|=i),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(l=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,l&&n!==null&&(l=31-Ee(i),e=o.hiddenUpdates,a=e[l],a===null?e[l]=[n]:a.push(n),n.lane=i|536870912),o):null}function Oo(e){if(50<yo)throw yo=0,pd=null,Error(u(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var pl={};function Xh(e,n,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,n,i,a){return new Xh(e,n,i,a)}function ar(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qi(e,n){var i=e.alternate;return i===null?(i=mi(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Nc(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Lo(e,n,i,a,l,o){var d=0;if(a=e,typeof e=="function")ar(e)&&(d=1);else if(typeof e=="string")d=tg(e,i,yt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ae:return e=mi(31,i,n,l),e.elementType=Ae,e.lanes=o,e;case pe:return Ya(i.children,l,o,n);case _:d=8,l|=24;break;case ce:return e=mi(12,i,n,l|2),e.elementType=ce,e.lanes=o,e;case ke:return e=mi(13,i,n,l),e.elementType=ke,e.lanes=o,e;case pt:return e=mi(19,i,n,l),e.elementType=pt,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:d=10;break e;case N:d=9;break e;case w:d=11;break e;case mt:d=14;break e;case P:d=16,a=null;break e}d=29,i=Error(u(130,e===null?"null":typeof e,"")),a=null}return n=mi(d,i,n,l),n.elementType=e,n.type=a,n.lanes=o,n}function Ya(e,n,i,a){return e=mi(7,e,a,n),e.lanes=i,e}function lr(e,n,i){return e=mi(6,e,null,n),e.lanes=i,e}function Mc(e){var n=mi(18,null,null,0);return n.stateNode=e,n}function or(e,n,i){return n=mi(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Hc=new WeakMap;function Ci(e,n){if(typeof e=="object"&&e!==null){var i=Hc.get(e);return i!==void 0?i:(n={value:e,source:n,stack:qe(n)},Hc.set(e,n),n)}return{value:e,source:n,stack:qe(n)}}var ml=[],hl=0,Po=null,Xl=0,Ai=[],Di=0,xa=null,Wi=1,Yi="";function Xi(e,n){ml[hl++]=Xl,ml[hl++]=Po,Po=e,Xl=n}function Uc(e,n,i){Ai[Di++]=Wi,Ai[Di++]=Yi,Ai[Di++]=xa,xa=e;var a=Wi;e=Yi;var l=32-Ee(a)-1;a&=~(1<<l),i+=1;var o=32-Ee(n)+l;if(30<o){var d=l-l%5;o=(a&(1<<d)-1).toString(32),a>>=d,l-=d,Wi=1<<32-Ee(n)+l|i<<l|a,Yi=o+e}else Wi=1<<o|i<<l|a,Yi=e}function sr(e){e.return!==null&&(Xi(e,1),Uc(e,1,0))}function rr(e){for(;e===Po;)Po=ml[--hl],ml[hl]=null,Xl=ml[--hl],ml[hl]=null;for(;e===xa;)xa=Ai[--Di],Ai[Di]=null,Yi=Ai[--Di],Ai[Di]=null,Wi=Ai[--Di],Ai[Di]=null}function Oc(e,n){Ai[Di++]=Wi,Ai[Di++]=Yi,Ai[Di++]=xa,Wi=n.id,Yi=n.overflow,xa=e}var Ln=null,Kt=null,ft=!1,ba=null,Ti=!1,dr=Error(u(519));function va(e){var n=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(Ci(n,e)),dr}function Lc(e){var n=e.stateNode,i=e.type,a=e.memoizedProps;switch(n[zt]=e,n[fn]=a,i){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(i=0;i<bo.length;i++)st(bo[i],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":st("invalid",n),dt(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":st("invalid",n);break;case"textarea":st("invalid",n),bt(n,a.value,a.defaultValue,a.children)}i=a.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||a.suppressHydrationWarning===!0||tm(n.textContent,i)?(a.popover!=null&&(st("beforetoggle",n),st("toggle",n)),a.onScroll!=null&&st("scroll",n),a.onScrollEnd!=null&&st("scrollend",n),a.onClick!=null&&(n.onclick=tn),n=!0):n=!1,n||va(e,!0)}function Pc(e){for(Ln=e.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:Ln=Ln.return}}function fl(e){if(e!==Ln)return!1;if(!ft)return Pc(e),ft=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Td(e.type,e.memoizedProps)),i=!i),i&&Kt&&va(e),Pc(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Kt=cm(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Kt=cm(e)}else n===27?(n=Kt,Ma(e.type)?(e=Ed,Ed=null,Kt=e):Kt=n):Kt=Ln?Bi(e.stateNode.nextSibling):null;return!0}function Fa(){Kt=Ln=null,ft=!1}function cr(){var e=ba;return e!==null&&(ai===null?ai=e:ai.push.apply(ai,e),ba=null),e}function Zl(e){ba===null?ba=[e]:ba.push(e)}var ur=gt(null),Va=null,Zi=null;function ja(e,n,i){_e(ur,n._currentValue),n._currentValue=i}function Ki(e){e._currentValue=ur.current,ye(ur)}function pr(e,n,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===i)break;e=e.return}}function mr(e,n,i,a){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){var d=l.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=l;for(var S=0;S<n.length;S++)if(p.context===n[S]){o.lanes|=i,p=o.alternate,p!==null&&(p.lanes|=i),pr(o.return,i,e),a||(d=null);break e}o=p.next}}else if(l.tag===18){if(d=l.return,d===null)throw Error(u(341));d.lanes|=i,o=d.alternate,o!==null&&(o.lanes|=i),pr(d,i,e),d=null}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}}function gl(e,n,i,a){e=null;for(var l=n,o=!1;l!==null;){if(!o){if((l.flags&524288)!==0)o=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var d=l.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var p=l.type;pi(l.pendingProps.value,d.value)||(e!==null?e.push(p):e=[p])}}else if(l===bn.current){if(d=l.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Co):e=[Co])}l=l.return}e!==null&&mr(n,e,i,a),n.flags|=262144}function Io(e){for(e=e.firstContext;e!==null;){if(!pi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qa(e){Va=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pn(e){return Ic(Va,e)}function _o(e,n){return Va===null&&Qa(e),Ic(e,n)}function Ic(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Zi===null){if(e===null)throw Error(u(308));Zi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Zi=Zi.next=n;return i}var Zh=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Kh=s.unstable_scheduleCallback,Jh=s.unstable_NormalPriority,jn={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hr(){return{controller:new Zh,data:new Map,refCount:0}}function Kl(e){e.refCount--,e.refCount===0&&Kh(Jh,function(){e.controller.abort()})}var Jl=null,fr=0,yl=0,xl=null;function $h(e,n){if(Jl===null){var i=Jl=[];fr=0,yl=xd(),xl={status:"pending",value:void 0,then:function(a){i.push(a)}}}return fr++,n.then(_c,_c),n}function _c(){if(--fr===0&&Jl!==null){xl!==null&&(xl.status="fulfilled");var e=Jl;Jl=null,yl=0,xl=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ef(e,n){var i=[],a={status:"pending",value:null,reason:null,then:function(l){i.push(l)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var l=0;l<i.length;l++)(0,i[l])(n)},function(l){for(a.status="rejected",a.reason=l,l=0;l<i.length;l++)(0,i[l])(void 0)}),a}var qc=q.S;q.S=function(e,n){Ap=qt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&$h(e,n),qc!==null&&qc(e,n)};var Xa=gt(null);function gr(){var e=Xa.current;return e!==null?e:Pt.pooledCache}function qo(e,n){n===null?_e(Xa,Xa.current):_e(Xa,n.pool)}function Gc(){var e=gr();return e===null?null:{parent:jn._currentValue,pool:e}}var bl=Error(u(460)),yr=Error(u(474)),Go=Error(u(542)),Wo={then:function(){}};function Wc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yc(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(tn,tn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vc(e),e;default:if(typeof n.status=="string")n.then(tn,tn);else{if(e=Pt,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var l=n;l.status="fulfilled",l.value=a}},function(a){if(n.status==="pending"){var l=n;l.status="rejected",l.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vc(e),e}throw Ka=n,bl}}function Za(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ka=i,bl):i}}var Ka=null;function Fc(){if(Ka===null)throw Error(u(459));var e=Ka;return Ka=null,e}function Vc(e){if(e===bl||e===Go)throw Error(u(483))}var vl=null,$l=0;function Yo(e){var n=$l;return $l+=1,vl===null&&(vl=[]),Yc(vl,e,n)}function eo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Fo(e,n){throw n.$$typeof===C?Error(u(525)):(e=Object.prototype.toString.call(n),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qc(e){function n(E,z){if(e){var H=E.deletions;H===null?(E.deletions=[z],E.flags|=16):H.push(z)}}function i(E,z){if(!e)return null;for(;z!==null;)n(E,z),z=z.sibling;return null}function a(E){for(var z=new Map;E!==null;)E.key!==null?z.set(E.key,E):z.set(E.index,E),E=E.sibling;return z}function l(E,z){return E=Qi(E,z),E.index=0,E.sibling=null,E}function o(E,z,H){return E.index=H,e?(H=E.alternate,H!==null?(H=H.index,H<z?(E.flags|=67108866,z):H):(E.flags|=67108866,z)):(E.flags|=1048576,z)}function d(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function p(E,z,H,J){return z===null||z.tag!==6?(z=lr(H,E.mode,J),z.return=E,z):(z=l(z,H),z.return=E,z)}function S(E,z,H,J){var Me=H.type;return Me===pe?Q(E,z,H.props.children,J,H.key):z!==null&&(z.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===P&&Za(Me)===z.type)?(z=l(z,H.props),eo(z,H),z.return=E,z):(z=Lo(H.type,H.key,H.props,null,E.mode,J),eo(z,H),z.return=E,z)}function U(E,z,H,J){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=or(H,E.mode,J),z.return=E,z):(z=l(z,H.children||[]),z.return=E,z)}function Q(E,z,H,J,Me){return z===null||z.tag!==7?(z=Ya(H,E.mode,J,Me),z.return=E,z):(z=l(z,H),z.return=E,z)}function ee(E,z,H){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=lr(""+z,E.mode,H),z.return=E,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case oe:return H=Lo(z.type,z.key,z.props,null,E.mode,H),eo(H,z),H.return=E,H;case R:return z=or(z,E.mode,H),z.return=E,z;case P:return z=Za(z),ee(E,z,H)}if(at(z)||ue(z))return z=Ya(z,E.mode,H,null),z.return=E,z;if(typeof z.then=="function")return ee(E,Yo(z),H);if(z.$$typeof===ie)return ee(E,_o(E,z),H);Fo(E,z)}return null}function L(E,z,H,J){var Me=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Me!==null?null:p(E,z,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case oe:return H.key===Me?S(E,z,H,J):null;case R:return H.key===Me?U(E,z,H,J):null;case P:return H=Za(H),L(E,z,H,J)}if(at(H)||ue(H))return Me!==null?null:Q(E,z,H,J,null);if(typeof H.then=="function")return L(E,z,Yo(H),J);if(H.$$typeof===ie)return L(E,z,_o(E,H),J);Fo(E,H)}return null}function G(E,z,H,J,Me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return E=E.get(H)||null,p(z,E,""+J,Me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case oe:return E=E.get(J.key===null?H:J.key)||null,S(z,E,J,Me);case R:return E=E.get(J.key===null?H:J.key)||null,U(z,E,J,Me);case P:return J=Za(J),G(E,z,H,J,Me)}if(at(J)||ue(J))return E=E.get(H)||null,Q(z,E,J,Me,null);if(typeof J.then=="function")return G(E,z,H,Yo(J),Me);if(J.$$typeof===ie)return G(E,z,H,_o(z,J),Me);Fo(z,J)}return null}function Se(E,z,H,J){for(var Me=null,wt=null,ze=z,Je=z=0,ut=null;ze!==null&&Je<H.length;Je++){ze.index>Je?(ut=ze,ze=null):ut=ze.sibling;var Ct=L(E,ze,H[Je],J);if(Ct===null){ze===null&&(ze=ut);break}e&&ze&&Ct.alternate===null&&n(E,ze),z=o(Ct,z,Je),wt===null?Me=Ct:wt.sibling=Ct,wt=Ct,ze=ut}if(Je===H.length)return i(E,ze),ft&&Xi(E,Je),Me;if(ze===null){for(;Je<H.length;Je++)ze=ee(E,H[Je],J),ze!==null&&(z=o(ze,z,Je),wt===null?Me=ze:wt.sibling=ze,wt=ze);return ft&&Xi(E,Je),Me}for(ze=a(ze);Je<H.length;Je++)ut=G(ze,E,Je,H[Je],J),ut!==null&&(e&&ut.alternate!==null&&ze.delete(ut.key===null?Je:ut.key),z=o(ut,z,Je),wt===null?Me=ut:wt.sibling=ut,wt=ut);return e&&ze.forEach(function(Pa){return n(E,Pa)}),ft&&Xi(E,Je),Me}function Ue(E,z,H,J){if(H==null)throw Error(u(151));for(var Me=null,wt=null,ze=z,Je=z=0,ut=null,Ct=H.next();ze!==null&&!Ct.done;Je++,Ct=H.next()){ze.index>Je?(ut=ze,ze=null):ut=ze.sibling;var Pa=L(E,ze,Ct.value,J);if(Pa===null){ze===null&&(ze=ut);break}e&&ze&&Pa.alternate===null&&n(E,ze),z=o(Pa,z,Je),wt===null?Me=Pa:wt.sibling=Pa,wt=Pa,ze=ut}if(Ct.done)return i(E,ze),ft&&Xi(E,Je),Me;if(ze===null){for(;!Ct.done;Je++,Ct=H.next())Ct=ee(E,Ct.value,J),Ct!==null&&(z=o(Ct,z,Je),wt===null?Me=Ct:wt.sibling=Ct,wt=Ct);return ft&&Xi(E,Je),Me}for(ze=a(ze);!Ct.done;Je++,Ct=H.next())Ct=G(ze,E,Je,Ct.value,J),Ct!==null&&(e&&Ct.alternate!==null&&ze.delete(Ct.key===null?Je:Ct.key),z=o(Ct,z,Je),wt===null?Me=Ct:wt.sibling=Ct,wt=Ct);return e&&ze.forEach(function(pg){return n(E,pg)}),ft&&Xi(E,Je),Me}function Lt(E,z,H,J){if(typeof H=="object"&&H!==null&&H.type===pe&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case oe:e:{for(var Me=H.key;z!==null;){if(z.key===Me){if(Me=H.type,Me===pe){if(z.tag===7){i(E,z.sibling),J=l(z,H.props.children),J.return=E,E=J;break e}}else if(z.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===P&&Za(Me)===z.type){i(E,z.sibling),J=l(z,H.props),eo(J,H),J.return=E,E=J;break e}i(E,z);break}else n(E,z);z=z.sibling}H.type===pe?(J=Ya(H.props.children,E.mode,J,H.key),J.return=E,E=J):(J=Lo(H.type,H.key,H.props,null,E.mode,J),eo(J,H),J.return=E,E=J)}return d(E);case R:e:{for(Me=H.key;z!==null;){if(z.key===Me)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){i(E,z.sibling),J=l(z,H.children||[]),J.return=E,E=J;break e}else{i(E,z);break}else n(E,z);z=z.sibling}J=or(H,E.mode,J),J.return=E,E=J}return d(E);case P:return H=Za(H),Lt(E,z,H,J)}if(at(H))return Se(E,z,H,J);if(ue(H)){if(Me=ue(H),typeof Me!="function")throw Error(u(150));return H=Me.call(H),Ue(E,z,H,J)}if(typeof H.then=="function")return Lt(E,z,Yo(H),J);if(H.$$typeof===ie)return Lt(E,z,_o(E,H),J);Fo(E,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,z!==null&&z.tag===6?(i(E,z.sibling),J=l(z,H),J.return=E,E=J):(i(E,z),J=lr(H,E.mode,J),J.return=E,E=J),d(E)):i(E,z)}return function(E,z,H,J){try{$l=0;var Me=Lt(E,z,H,J);return vl=null,Me}catch(ze){if(ze===bl||ze===Go)throw ze;var wt=mi(29,ze,null,E.mode);return wt.lanes=J,wt.return=E,wt}finally{}}}var Ja=Qc(!0),Xc=Qc(!1),Sa=!1;function xr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function br(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(e,n,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Dt&2)!==0){var l=a.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),a.pending=n,n=Oo(e),Ec(e,null,i),n}return Uo(e,a,n,i),Oo(e)}function to(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,I(e,i)}}function vr(e,n){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var l=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var d={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};o===null?l=o=d:o=o.next=d,i=i.next}while(i!==null);o===null?l=o=n:o=o.next=n}else l=o=n;i={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:a.shared,callbacks:a.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var jr=!1;function no(){if(jr){var e=xl;if(e!==null)throw e}}function io(e,n,i,a){jr=!1;var l=e.updateQueue;Sa=!1;var o=l.firstBaseUpdate,d=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var S=p,U=S.next;S.next=null,d===null?o=U:d.next=U,d=S;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,p=Q.lastBaseUpdate,p!==d&&(p===null?Q.firstBaseUpdate=U:p.next=U,Q.lastBaseUpdate=S))}if(o!==null){var ee=l.baseState;d=0,Q=U=S=null,p=o;do{var L=p.lane&-536870913,G=L!==p.lane;if(G?(ct&L)===L:(a&L)===L){L!==0&&L===yl&&(jr=!0),Q!==null&&(Q=Q.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var Se=e,Ue=p;L=n;var Lt=i;switch(Ue.tag){case 1:if(Se=Ue.payload,typeof Se=="function"){ee=Se.call(Lt,ee,L);break e}ee=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ue.payload,L=typeof Se=="function"?Se.call(Lt,ee,L):Se,L==null)break e;ee=M({},ee,L);break e;case 2:Sa=!0}}L=p.callback,L!==null&&(e.flags|=64,G&&(e.flags|=8192),G=l.callbacks,G===null?l.callbacks=[L]:G.push(L))}else G={lane:L,tag:p.tag,payload:p.payload,callback:p.callback,next:null},Q===null?(U=Q=G,S=ee):Q=Q.next=G,d|=L;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;G=p,p=G.next,G.next=null,l.lastBaseUpdate=G,l.shared.pending=null}}while(!0);Q===null&&(S=ee),l.baseState=S,l.firstBaseUpdate=U,l.lastBaseUpdate=Q,o===null&&(l.shared.lanes=0),Ba|=d,e.lanes=d,e.memoizedState=ee}}function Zc(e,n){if(typeof e!="function")throw Error(u(191,e));e.call(n)}function Kc(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Zc(i[e],n)}var jl=gt(null),Vo=gt(0);function Jc(e,n){e=oa,_e(Vo,e),_e(jl,n),oa=e|n.baseLanes}function Sr(){_e(Vo,oa),_e(jl,jl.current)}function wr(){oa=Vo.current,ye(jl),ye(Vo)}var hi=gt(null),zi=null;function Aa(e){var n=e.alternate;_e(gn,gn.current&1),_e(hi,e),zi===null&&(n===null||jl.current!==null||n.memoizedState!==null)&&(zi=e)}function Cr(e){_e(gn,gn.current),_e(hi,e),zi===null&&(zi=e)}function $c(e){e.tag===22?(_e(gn,gn.current),_e(hi,e),zi===null&&(zi=e)):Da()}function Da(){_e(gn,gn.current),_e(hi,hi.current)}function fi(e){ye(hi),zi===e&&(zi=null),ye(gn)}var gn=gt(0);function Qo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Rd(i)||kd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ji=0,Xe=null,Ut=null,Sn=null,Xo=!1,Sl=!1,$a=!1,Zo=0,ao=0,wl=null,tf=0;function cn(){throw Error(u(321))}function Ar(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!pi(e[i],n[i]))return!1;return!0}function Dr(e,n,i,a,l,o){return Ji=o,Xe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?Uu:_r,$a=!1,o=i(a,l),$a=!1,Sl&&(o=tu(n,i,a,l)),eu(e),o}function eu(e){q.H=so;var n=Ut!==null&&Ut.next!==null;if(Ji=0,Sn=Ut=Xe=null,Xo=!1,ao=0,wl=null,n)throw Error(u(300));e===null||wn||(e=e.dependencies,e!==null&&Io(e)&&(wn=!0))}function tu(e,n,i,a){Xe=e;var l=0;do{if(Sl&&(wl=null),ao=0,Sl=!1,25<=l)throw Error(u(301));if(l+=1,Sn=Ut=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}q.H=Ou,o=n(i,a)}while(Sl);return o}function nf(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?lo(n):n,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(Xe.flags|=1024),n}function Tr(){var e=Zo!==0;return Zo=0,e}function zr(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Br(e){if(Xo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Xo=!1}Ji=0,Sn=Ut=Xe=null,Sl=!1,ao=Zo=0,wl=null}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Xe.memoizedState=Sn=e:Sn=Sn.next=e,Sn}function yn(){if(Ut===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var n=Sn===null?Xe.memoizedState:Sn.next;if(n!==null)Sn=n,Ut=e;else{if(e===null)throw Xe.alternate===null?Error(u(467)):Error(u(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Sn===null?Xe.memoizedState=Sn=e:Sn=Sn.next=e}return Sn}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lo(e){var n=ao;return ao+=1,wl===null&&(wl=[]),e=Yc(wl,e,n),n=Xe,(Sn===null?n.memoizedState:Sn.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?Uu:_r),e}function Jo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return lo(e);if(e.$$typeof===ie)return Pn(e)}throw Error(u(438,String(e)))}function Rr(e){var n=null,i=Xe.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var a=Xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(l){return l.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Ko(),Xe.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),a=0;a<e;a++)i[a]=Y;return n.index++,i}function $i(e,n){return typeof n=="function"?n(e):n}function $o(e){var n=yn();return kr(n,Ut,e)}function kr(e,n,i){var a=e.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=i;var l=e.baseQueue,o=a.pending;if(o!==null){if(l!==null){var d=l.next;l.next=o.next,o.next=d}n.baseQueue=l=o,a.pending=null}if(o=e.baseState,l===null)e.memoizedState=o;else{n=l.next;var p=d=null,S=null,U=n,Q=!1;do{var ee=U.lane&-536870913;if(ee!==U.lane?(ct&ee)===ee:(Ji&ee)===ee){var L=U.revertLane;if(L===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ee===yl&&(Q=!0);else if((Ji&L)===L){U=U.next,L===yl&&(Q=!0);continue}else ee={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},S===null?(p=S=ee,d=o):S=S.next=ee,Xe.lanes|=L,Ba|=L;ee=U.action,$a&&i(o,ee),o=U.hasEagerState?U.eagerState:i(o,ee)}else L={lane:ee,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},S===null?(p=S=L,d=o):S=S.next=L,Xe.lanes|=ee,Ba|=ee;U=U.next}while(U!==null&&U!==n);if(S===null?d=o:S.next=p,!pi(o,e.memoizedState)&&(wn=!0,Q&&(i=xl,i!==null)))throw i;e.memoizedState=o,e.baseState=d,e.baseQueue=S,a.lastRenderedState=o}return l===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Er(e){var n=yn(),i=n.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=e;var a=i.dispatch,l=i.pending,o=n.memoizedState;if(l!==null){i.pending=null;var d=l=l.next;do o=e(o,d.action),d=d.next;while(d!==l);pi(o,n.memoizedState)||(wn=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),i.lastRenderedState=o}return[o,a]}function nu(e,n,i){var a=Xe,l=yn(),o=ft;if(o){if(i===void 0)throw Error(u(407));i=i()}else i=n();var d=!pi((Ut||l).memoizedState,i);if(d&&(l.memoizedState=i,wn=!0),l=l.queue,Hr(lu.bind(null,a,l,e),[e]),l.getSnapshot!==n||d||Sn!==null&&Sn.memoizedState.tag&1){if(a.flags|=2048,Cl(9,{destroy:void 0},au.bind(null,a,l,i,n),null),Pt===null)throw Error(u(349));o||(Ji&127)!==0||iu(a,n,i)}return i}function iu(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Xe.updateQueue,n===null?(n=Ko(),Xe.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function au(e,n,i,a){n.value=i,n.getSnapshot=a,ou(n)&&su(e)}function lu(e,n,i){return i(function(){ou(n)&&su(e)})}function ou(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!pi(e,i)}catch{return!0}}function su(e){var n=Wa(e,2);n!==null&&li(n,e,2)}function Nr(e){var n=Qn();if(typeof e=="function"){var i=e;if(e=i(),$a){ge(!0);try{i()}finally{ge(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},n}function ru(e,n,i,a){return e.baseState=i,kr(e,Ut,typeof a=="function"?a:$i)}function af(e,n,i,a,l){if(ns(e))throw Error(u(485));if(e=n.action,e!==null){var o={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){o.listeners.push(d)}};q.T!==null?i(!0):o.isTransition=!1,a(o),i=n.pending,i===null?(o.next=n.pending=o,du(n,o)):(o.next=i.next,n.pending=i.next=o)}}function du(e,n){var i=n.action,a=n.payload,l=e.state;if(n.isTransition){var o=q.T,d={};q.T=d;try{var p=i(l,a),S=q.S;S!==null&&S(d,p),cu(e,n,p)}catch(U){Mr(e,n,U)}finally{o!==null&&d.types!==null&&(o.types=d.types),q.T=o}}else try{o=i(l,a),cu(e,n,o)}catch(U){Mr(e,n,U)}}function cu(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(a){uu(e,n,a)},function(a){return Mr(e,n,a)}):uu(e,n,i)}function uu(e,n,i){n.status="fulfilled",n.value=i,pu(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,du(e,i)))}function Mr(e,n,i){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=i,pu(n),n=n.next;while(n!==a)}e.action=null}function pu(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function mu(e,n){return n}function hu(e,n){if(ft){var i=Pt.formState;if(i!==null){e:{var a=Xe;if(ft){if(Kt){t:{for(var l=Kt,o=Ti;l.nodeType!==8;){if(!o){l=null;break t}if(l=Bi(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){Kt=Bi(l.nextSibling),a=l.data==="F!";break e}}va(a)}a=!1}a&&(n=i[0])}}return i=Qn(),i.memoizedState=i.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:n},i.queue=a,i=Nu.bind(null,Xe,a),a.dispatch=i,a=Nr(!1),o=Ir.bind(null,Xe,!1,a.queue),a=Qn(),l={state:n,dispatch:null,action:e,pending:null},a.queue=l,i=af.bind(null,Xe,l,o,i),l.dispatch=i,a.memoizedState=e,[n,i,!1]}function fu(e){var n=yn();return gu(n,Ut,e)}function gu(e,n,i){if(n=kr(e,n,mu)[0],e=$o($i)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=lo(n)}catch(d){throw d===bl?Go:d}else a=n;n=yn();var l=n.queue,o=l.dispatch;return i!==n.memoizedState&&(Xe.flags|=2048,Cl(9,{destroy:void 0},lf.bind(null,l,i),null)),[a,o,e]}function lf(e,n){e.action=n}function yu(e){var n=yn(),i=Ut;if(i!==null)return gu(n,i,e);yn(),n=n.memoizedState,i=yn();var a=i.queue.dispatch;return i.memoizedState=e,[n,a,!1]}function Cl(e,n,i,a){return e={tag:e,create:i,deps:a,inst:n,next:null},n=Xe.updateQueue,n===null&&(n=Ko(),Xe.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,n.lastEffect=e),e}function xu(){return yn().memoizedState}function es(e,n,i,a){var l=Qn();Xe.flags|=e,l.memoizedState=Cl(1|n,{destroy:void 0},i,a===void 0?null:a)}function ts(e,n,i,a){var l=yn();a=a===void 0?null:a;var o=l.memoizedState.inst;Ut!==null&&a!==null&&Ar(a,Ut.memoizedState.deps)?l.memoizedState=Cl(n,o,i,a):(Xe.flags|=e,l.memoizedState=Cl(1|n,o,i,a))}function bu(e,n){es(8390656,8,e,n)}function Hr(e,n){ts(2048,8,e,n)}function of(e){Xe.flags|=4;var n=Xe.updateQueue;if(n===null)n=Ko(),Xe.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function vu(e){var n=yn().memoizedState;return of({ref:n,nextImpl:e}),function(){if((Dt&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}function ju(e,n){return ts(4,2,e,n)}function Su(e,n){return ts(4,4,e,n)}function wu(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Cu(e,n,i){i=i!=null?i.concat([e]):null,ts(4,4,wu.bind(null,n,e),i)}function Ur(){}function Au(e,n){var i=yn();n=n===void 0?null:n;var a=i.memoizedState;return n!==null&&Ar(n,a[1])?a[0]:(i.memoizedState=[e,n],e)}function Du(e,n){var i=yn();n=n===void 0?null:n;var a=i.memoizedState;if(n!==null&&Ar(n,a[1]))return a[0];if(a=e(),$a){ge(!0);try{e()}finally{ge(!1)}}return i.memoizedState=[a,n],a}function Or(e,n,i){return i===void 0||(Ji&1073741824)!==0&&(ct&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Tp(),Xe.lanes|=e,Ba|=e,i)}function Tu(e,n,i,a){return pi(i,n)?i:jl.current!==null?(e=Or(e,i,a),pi(e,n)||(wn=!0),e):(Ji&42)===0||(Ji&1073741824)!==0&&(ct&261930)===0?(wn=!0,e.memoizedState=i):(e=Tp(),Xe.lanes|=e,Ba|=e,n)}function zu(e,n,i,a,l){var o=se.p;se.p=o!==0&&8>o?o:8;var d=q.T,p={};q.T=p,Ir(e,!1,n,i);try{var S=l(),U=q.S;if(U!==null&&U(p,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var Q=ef(S,a);oo(e,n,Q,xi(e))}else oo(e,n,a,xi(e))}catch(ee){oo(e,n,{then:function(){},status:"rejected",reason:ee},xi())}finally{se.p=o,d!==null&&p.types!==null&&(d.types=p.types),q.T=d}}function sf(){}function Lr(e,n,i,a){if(e.tag!==5)throw Error(u(476));var l=Bu(e).queue;zu(e,l,n,me,i===null?sf:function(){return Ru(e),i(a)})}function Bu(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:me},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Ru(e){var n=Bu(e);n.next===null&&(n=e.alternate.memoizedState),oo(e,n.next.queue,{},xi())}function Pr(){return Pn(Co)}function ku(){return yn().memoizedState}function Eu(){return yn().memoizedState}function rf(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=xi();e=wa(i);var a=Ca(n,e,i);a!==null&&(li(a,n,i),to(a,n,i)),n={cache:hr()},e.payload=n;return}n=n.return}}function df(e,n,i){var a=xi();i={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ns(e)?Mu(n,i):(i=ir(e,n,i,a),i!==null&&(li(i,e,a),Hu(i,n,a)))}function Nu(e,n,i){var a=xi();oo(e,n,i,a)}function oo(e,n,i,a){var l={lane:a,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ns(e))Mu(n,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var d=n.lastRenderedState,p=o(d,i);if(l.hasEagerState=!0,l.eagerState=p,pi(p,d))return Uo(e,n,l,0),Pt===null&&Ho(),!1}catch{}finally{}if(i=ir(e,n,l,a),i!==null)return li(i,e,a),Hu(i,n,a),!0}return!1}function Ir(e,n,i,a){if(a={lane:2,revertLane:xd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ns(e)){if(n)throw Error(u(479))}else n=ir(e,i,a,2),n!==null&&li(n,e,2)}function ns(e){var n=e.alternate;return e===Xe||n!==null&&n===Xe}function Mu(e,n){Sl=Xo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Hu(e,n,i){if((i&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,I(e,i)}}var so={readContext:Pn,use:Jo,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};so.useEffectEvent=cn;var Uu={readContext:Pn,use:Jo,useCallback:function(e,n){return Qn().memoizedState=[e,n===void 0?null:n],e},useContext:Pn,useEffect:bu,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,es(4194308,4,wu.bind(null,n,e),i)},useLayoutEffect:function(e,n){return es(4194308,4,e,n)},useInsertionEffect:function(e,n){es(4,2,e,n)},useMemo:function(e,n){var i=Qn();n=n===void 0?null:n;var a=e();if($a){ge(!0);try{e()}finally{ge(!1)}}return i.memoizedState=[a,n],a},useReducer:function(e,n,i){var a=Qn();if(i!==void 0){var l=i(n);if($a){ge(!0);try{i(n)}finally{ge(!1)}}}else l=n;return a.memoizedState=a.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},a.queue=e,e=e.dispatch=df.bind(null,Xe,e),[a.memoizedState,e]},useRef:function(e){var n=Qn();return e={current:e},n.memoizedState=e},useState:function(e){e=Nr(e);var n=e.queue,i=Nu.bind(null,Xe,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Ur,useDeferredValue:function(e,n){var i=Qn();return Or(i,e,n)},useTransition:function(){var e=Nr(!1);return e=zu.bind(null,Xe,e.queue,!0,!1),Qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var a=Xe,l=Qn();if(ft){if(i===void 0)throw Error(u(407));i=i()}else{if(i=n(),Pt===null)throw Error(u(349));(ct&127)!==0||iu(a,n,i)}l.memoizedState=i;var o={value:i,getSnapshot:n};return l.queue=o,bu(lu.bind(null,a,o,e),[e]),a.flags|=2048,Cl(9,{destroy:void 0},au.bind(null,a,o,i,n),null),i},useId:function(){var e=Qn(),n=Pt.identifierPrefix;if(ft){var i=Yi,a=Wi;i=(a&~(1<<32-Ee(a)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Zo++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=tf++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Pr,useFormState:hu,useActionState:hu,useOptimistic:function(e){var n=Qn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Ir.bind(null,Xe,!0,i),i.dispatch=n,[e,n]},useMemoCache:Rr,useCacheRefresh:function(){return Qn().memoizedState=rf.bind(null,Xe)},useEffectEvent:function(e){var n=Qn(),i={impl:e};return n.memoizedState=i,function(){if((Dt&2)!==0)throw Error(u(440));return i.impl.apply(void 0,arguments)}}},_r={readContext:Pn,use:Jo,useCallback:Au,useContext:Pn,useEffect:Hr,useImperativeHandle:Cu,useInsertionEffect:ju,useLayoutEffect:Su,useMemo:Du,useReducer:$o,useRef:xu,useState:function(){return $o($i)},useDebugValue:Ur,useDeferredValue:function(e,n){var i=yn();return Tu(i,Ut.memoizedState,e,n)},useTransition:function(){var e=$o($i)[0],n=yn().memoizedState;return[typeof e=="boolean"?e:lo(e),n]},useSyncExternalStore:nu,useId:ku,useHostTransitionStatus:Pr,useFormState:fu,useActionState:fu,useOptimistic:function(e,n){var i=yn();return ru(i,Ut,e,n)},useMemoCache:Rr,useCacheRefresh:Eu};_r.useEffectEvent=vu;var Ou={readContext:Pn,use:Jo,useCallback:Au,useContext:Pn,useEffect:Hr,useImperativeHandle:Cu,useInsertionEffect:ju,useLayoutEffect:Su,useMemo:Du,useReducer:Er,useRef:xu,useState:function(){return Er($i)},useDebugValue:Ur,useDeferredValue:function(e,n){var i=yn();return Ut===null?Or(i,e,n):Tu(i,Ut.memoizedState,e,n)},useTransition:function(){var e=Er($i)[0],n=yn().memoizedState;return[typeof e=="boolean"?e:lo(e),n]},useSyncExternalStore:nu,useId:ku,useHostTransitionStatus:Pr,useFormState:yu,useActionState:yu,useOptimistic:function(e,n){var i=yn();return Ut!==null?ru(i,Ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Rr,useCacheRefresh:Eu};Ou.useEffectEvent=vu;function qr(e,n,i,a){n=e.memoizedState,i=i(a,n),i=i==null?n:M({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Gr={enqueueSetState:function(e,n,i){e=e._reactInternals;var a=xi(),l=wa(a);l.payload=n,i!=null&&(l.callback=i),n=Ca(e,l,a),n!==null&&(li(n,e,a),to(n,e,a))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var a=xi(),l=wa(a);l.tag=1,l.payload=n,i!=null&&(l.callback=i),n=Ca(e,l,a),n!==null&&(li(n,e,a),to(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=xi(),a=wa(i);a.tag=2,n!=null&&(a.callback=n),n=Ca(e,a,i),n!==null&&(li(n,e,i),to(n,e,i))}};function Lu(e,n,i,a,l,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,d):n.prototype&&n.prototype.isPureReactComponent?!Vl(i,a)||!Vl(l,o):!0}function Pu(e,n,i,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,a),n.state!==e&&Gr.enqueueReplaceState(n,n.state,null)}function el(e,n){var i=n;if("ref"in n){i={};for(var a in n)a!=="ref"&&(i[a]=n[a])}if(e=e.defaultProps){i===n&&(i=M({},i));for(var l in e)i[l]===void 0&&(i[l]=e[l])}return i}function Iu(e){Mo(e)}function _u(e){console.error(e)}function qu(e){Mo(e)}function is(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function Gu(e,n,i){try{var a=e.onCaughtError;a(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Wr(e,n,i){return i=wa(i),i.tag=3,i.payload={element:null},i.callback=function(){is(e,n)},i}function Wu(e){return e=wa(e),e.tag=3,e}function Yu(e,n,i,a){var l=i.type.getDerivedStateFromError;if(typeof l=="function"){var o=a.value;e.payload=function(){return l(o)},e.callback=function(){Gu(n,i,a)}}var d=i.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){Gu(n,i,a),typeof l!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var p=a.stack;this.componentDidCatch(a.value,{componentStack:p!==null?p:""})})}function cf(e,n,i,a,l){if(i.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=i.alternate,n!==null&&gl(n,i,l,!0),i=hi.current,i!==null){switch(i.tag){case 31:case 13:return zi===null?fs():i.alternate===null&&un===0&&(un=3),i.flags&=-257,i.flags|=65536,i.lanes=l,a===Wo?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([a]):n.add(a),fd(e,a,l)),!1;case 22:return i.flags|=65536,a===Wo?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([a]):i.add(a)),fd(e,a,l)),!1}throw Error(u(435,i.tag))}return fd(e,a,l),fs(),!1}if(ft)return n=hi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=l,a!==dr&&(e=Error(u(422),{cause:a}),Zl(Ci(e,i)))):(a!==dr&&(n=Error(u(423),{cause:a}),Zl(Ci(n,i))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,a=Ci(a,i),l=Wr(e.stateNode,a,l),vr(e,l),un!==4&&(un=2)),!1;var o=Error(u(520),{cause:a});if(o=Ci(o,i),go===null?go=[o]:go.push(o),un!==4&&(un=2),n===null)return!0;a=Ci(a,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=l&-l,i.lanes|=e,e=Wr(i.stateNode,a,e),vr(i,e),!1;case 1:if(n=i.type,o=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ra===null||!Ra.has(o))))return i.flags|=65536,l&=-l,i.lanes|=l,l=Wu(l),Yu(l,e,i,a),vr(i,l),!1}i=i.return}while(i!==null);return!1}var Yr=Error(u(461)),wn=!1;function In(e,n,i,a){n.child=e===null?Xc(n,null,i,a):Ja(n,e.child,i,a)}function Fu(e,n,i,a,l){i=i.render;var o=n.ref;if("ref"in a){var d={};for(var p in a)p!=="ref"&&(d[p]=a[p])}else d=a;return Qa(n),a=Dr(e,n,i,d,o,l),p=Tr(),e!==null&&!wn?(zr(e,n,l),ea(e,n,l)):(ft&&p&&sr(n),n.flags|=1,In(e,n,a,l),n.child)}function Vu(e,n,i,a,l){if(e===null){var o=i.type;return typeof o=="function"&&!ar(o)&&o.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=o,Qu(e,n,o,a,l)):(e=Lo(i.type,null,a,n,n.mode,l),e.ref=n.ref,e.return=n,n.child=e)}if(o=e.child,!$r(e,l)){var d=o.memoizedProps;if(i=i.compare,i=i!==null?i:Vl,i(d,a)&&e.ref===n.ref)return ea(e,n,l)}return n.flags|=1,e=Qi(o,a),e.ref=n.ref,e.return=n,n.child=e}function Qu(e,n,i,a,l){if(e!==null){var o=e.memoizedProps;if(Vl(o,a)&&e.ref===n.ref)if(wn=!1,n.pendingProps=a=o,$r(e,l))(e.flags&131072)!==0&&(wn=!0);else return n.lanes=e.lanes,ea(e,n,l)}return Fr(e,n,i,a,l)}function Xu(e,n,i,a){var l=a.children,o=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(o=o!==null?o.baseLanes|i:i,e!==null){for(a=n.child=e.child,l=0;a!==null;)l=l|a.lanes|a.childLanes,a=a.sibling;a=l&~o}else a=0,n.child=null;return Zu(e,n,o,i,a)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&qo(n,o!==null?o.cachePool:null),o!==null?Jc(n,o):Sr(),$c(n);else return a=n.lanes=536870912,Zu(e,n,o!==null?o.baseLanes|i:i,i,a)}else o!==null?(qo(n,o.cachePool),Jc(n,o),Da(),n.memoizedState=null):(e!==null&&qo(n,null),Sr(),Da());return In(e,n,l,i),n.child}function ro(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Zu(e,n,i,a,l){var o=gr();return o=o===null?null:{parent:jn._currentValue,pool:o},n.memoizedState={baseLanes:i,cachePool:o},e!==null&&qo(n,null),Sr(),$c(n),e!==null&&gl(e,n,a,!0),n.childLanes=l,null}function as(e,n){return n=os({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Ku(e,n,i){return Ja(n,e.child,null,i),e=as(n,n.pendingProps),e.flags|=2,fi(n),n.memoizedState=null,e}function uf(e,n,i){var a=n.pendingProps,l=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ft){if(a.mode==="hidden")return e=as(n,a),n.lanes=536870912,ro(null,e);if(Cr(n),(e=Kt)?(e=dm(e,Ti),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:xa!==null?{id:Wi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},i=Mc(e),i.return=n,n.child=i,Ln=n,Kt=null)):e=null,e===null)throw va(n);return n.lanes=536870912,null}return as(n,a)}var o=e.memoizedState;if(o!==null){var d=o.dehydrated;if(Cr(n),l)if(n.flags&256)n.flags&=-257,n=Ku(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(u(558));else if(wn||gl(e,n,i,!1),l=(i&e.childLanes)!==0,wn||l){if(a=Pt,a!==null&&(d=F(a,i),d!==0&&d!==o.retryLane))throw o.retryLane=d,Wa(e,d),li(a,e,d),Yr;fs(),n=Ku(e,n,i)}else e=o.treeContext,Kt=Bi(d.nextSibling),Ln=n,ft=!0,ba=null,Ti=!1,e!==null&&Oc(n,e),n=as(n,a),n.flags|=4096;return n}return e=Qi(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ls(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(u(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Fr(e,n,i,a,l){return Qa(n),i=Dr(e,n,i,a,void 0,l),a=Tr(),e!==null&&!wn?(zr(e,n,l),ea(e,n,l)):(ft&&a&&sr(n),n.flags|=1,In(e,n,i,l),n.child)}function Ju(e,n,i,a,l,o){return Qa(n),n.updateQueue=null,i=tu(n,a,i,l),eu(e),a=Tr(),e!==null&&!wn?(zr(e,n,o),ea(e,n,o)):(ft&&a&&sr(n),n.flags|=1,In(e,n,i,o),n.child)}function $u(e,n,i,a,l){if(Qa(n),n.stateNode===null){var o=pl,d=i.contextType;typeof d=="object"&&d!==null&&(o=Pn(d)),o=new i(a,o),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Gr,n.stateNode=o,o._reactInternals=n,o=n.stateNode,o.props=a,o.state=n.memoizedState,o.refs={},xr(n),d=i.contextType,o.context=typeof d=="object"&&d!==null?Pn(d):pl,o.state=n.memoizedState,d=i.getDerivedStateFromProps,typeof d=="function"&&(qr(n,i,d,a),o.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(d=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),d!==o.state&&Gr.enqueueReplaceState(o,o.state,null),io(n,a,o,l),no(),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){o=n.stateNode;var p=n.memoizedProps,S=el(i,p);o.props=S;var U=o.context,Q=i.contextType;d=pl,typeof Q=="object"&&Q!==null&&(d=Pn(Q));var ee=i.getDerivedStateFromProps;Q=typeof ee=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=n.pendingProps!==p,Q||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||U!==d)&&Pu(n,o,a,d),Sa=!1;var L=n.memoizedState;o.state=L,io(n,a,o,l),no(),U=n.memoizedState,p||L!==U||Sa?(typeof ee=="function"&&(qr(n,i,ee,a),U=n.memoizedState),(S=Sa||Lu(n,i,S,a,L,U,d))?(Q||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=U),o.props=a,o.state=U,o.context=d,a=S):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{o=n.stateNode,br(e,n),d=n.memoizedProps,Q=el(i,d),o.props=Q,ee=n.pendingProps,L=o.context,U=i.contextType,S=pl,typeof U=="object"&&U!==null&&(S=Pn(U)),p=i.getDerivedStateFromProps,(U=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==ee||L!==S)&&Pu(n,o,a,S),Sa=!1,L=n.memoizedState,o.state=L,io(n,a,o,l),no();var G=n.memoizedState;d!==ee||L!==G||Sa||e!==null&&e.dependencies!==null&&Io(e.dependencies)?(typeof p=="function"&&(qr(n,i,p,a),G=n.memoizedState),(Q=Sa||Lu(n,i,Q,a,L,G,S)||e!==null&&e.dependencies!==null&&Io(e.dependencies))?(U||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,G,S),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,G,S)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=G),o.props=a,o.state=G,o.context=S,a=Q):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&L===e.memoizedState||(n.flags|=1024),a=!1)}return o=a,ls(e,n),a=(n.flags&128)!==0,o||a?(o=n.stateNode,i=a&&typeof i.getDerivedStateFromError!="function"?null:o.render(),n.flags|=1,e!==null&&a?(n.child=Ja(n,e.child,null,l),n.child=Ja(n,null,i,l)):In(e,n,i,l),n.memoizedState=o.state,e=n.child):e=ea(e,n,l),e}function ep(e,n,i,a){return Fa(),n.flags|=256,In(e,n,i,a),n.child}var Vr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qr(e){return{baseLanes:e,cachePool:Gc()}}function Xr(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=yi),e}function tp(e,n,i){var a=n.pendingProps,l=!1,o=(n.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(gn.current&2)!==0),d&&(l=!0,n.flags&=-129),d=(n.flags&32)!==0,n.flags&=-33,e===null){if(ft){if(l?Aa(n):Da(),(e=Kt)?(e=dm(e,Ti),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:xa!==null?{id:Wi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},i=Mc(e),i.return=n,n.child=i,Ln=n,Kt=null)):e=null,e===null)throw va(n);return kd(e)?n.lanes=32:n.lanes=536870912,null}var p=a.children;return a=a.fallback,l?(Da(),l=n.mode,p=os({mode:"hidden",children:p},l),a=Ya(a,l,i,null),p.return=n,a.return=n,p.sibling=a,n.child=p,a=n.child,a.memoizedState=Qr(i),a.childLanes=Xr(e,d,i),n.memoizedState=Vr,ro(null,a)):(Aa(n),Zr(n,p))}var S=e.memoizedState;if(S!==null&&(p=S.dehydrated,p!==null)){if(o)n.flags&256?(Aa(n),n.flags&=-257,n=Kr(e,n,i)):n.memoizedState!==null?(Da(),n.child=e.child,n.flags|=128,n=null):(Da(),p=a.fallback,l=n.mode,a=os({mode:"visible",children:a.children},l),p=Ya(p,l,i,null),p.flags|=2,a.return=n,p.return=n,a.sibling=p,n.child=a,Ja(n,e.child,null,i),a=n.child,a.memoizedState=Qr(i),a.childLanes=Xr(e,d,i),n.memoizedState=Vr,n=ro(null,a));else if(Aa(n),kd(p)){if(d=p.nextSibling&&p.nextSibling.dataset,d)var U=d.dgst;d=U,a=Error(u(419)),a.stack="",a.digest=d,Zl({value:a,source:null,stack:null}),n=Kr(e,n,i)}else if(wn||gl(e,n,i,!1),d=(i&e.childLanes)!==0,wn||d){if(d=Pt,d!==null&&(a=F(d,i),a!==0&&a!==S.retryLane))throw S.retryLane=a,Wa(e,a),li(d,e,a),Yr;Rd(p)||fs(),n=Kr(e,n,i)}else Rd(p)?(n.flags|=192,n.child=e.child,n=null):(e=S.treeContext,Kt=Bi(p.nextSibling),Ln=n,ft=!0,ba=null,Ti=!1,e!==null&&Oc(n,e),n=Zr(n,a.children),n.flags|=4096);return n}return l?(Da(),p=a.fallback,l=n.mode,S=e.child,U=S.sibling,a=Qi(S,{mode:"hidden",children:a.children}),a.subtreeFlags=S.subtreeFlags&65011712,U!==null?p=Qi(U,p):(p=Ya(p,l,i,null),p.flags|=2),p.return=n,a.return=n,a.sibling=p,n.child=a,ro(null,a),a=n.child,p=e.child.memoizedState,p===null?p=Qr(i):(l=p.cachePool,l!==null?(S=jn._currentValue,l=l.parent!==S?{parent:S,pool:S}:l):l=Gc(),p={baseLanes:p.baseLanes|i,cachePool:l}),a.memoizedState=p,a.childLanes=Xr(e,d,i),n.memoizedState=Vr,ro(e.child,a)):(Aa(n),i=e.child,e=i.sibling,i=Qi(i,{mode:"visible",children:a.children}),i.return=n,i.sibling=null,e!==null&&(d=n.deletions,d===null?(n.deletions=[e],n.flags|=16):d.push(e)),n.child=i,n.memoizedState=null,i)}function Zr(e,n){return n=os({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function os(e,n){return e=mi(22,e,null,n),e.lanes=0,e}function Kr(e,n,i){return Ja(n,e.child,null,i),e=Zr(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function np(e,n,i){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),pr(e.return,n,i)}function Jr(e,n,i,a,l,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:l,treeForkCount:o}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=l,d.treeForkCount=o)}function ip(e,n,i){var a=n.pendingProps,l=a.revealOrder,o=a.tail;a=a.children;var d=gn.current,p=(d&2)!==0;if(p?(d=d&1|2,n.flags|=128):d&=1,_e(gn,d),In(e,n,a,i),a=ft?Xl:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&np(e,i,n);else if(e.tag===19)np(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(i=n.child,l=null;i!==null;)e=i.alternate,e!==null&&Qo(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=n.child,n.child=null):(l=i.sibling,i.sibling=null),Jr(n,!1,l,i,o,a);break;case"backwards":case"unstable_legacy-backwards":for(i=null,l=n.child,n.child=null;l!==null;){if(e=l.alternate,e!==null&&Qo(e)===null){n.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}Jr(n,!0,i,null,o,a);break;case"together":Jr(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function ea(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ba|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(gl(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(u(153));if(n.child!==null){for(e=n.child,i=Qi(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Qi(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function $r(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Io(e)))}function pf(e,n,i){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),ja(n,jn,e.memoizedState.cache),Fa();break;case 27:case 5:vt(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:ja(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Cr(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(Aa(n),n.flags|=128,null):(i&n.child.childLanes)!==0?tp(e,n,i):(Aa(n),e=ea(e,n,i),e!==null?e.sibling:null);Aa(n);break;case 19:var l=(e.flags&128)!==0;if(a=(i&n.childLanes)!==0,a||(gl(e,n,i,!1),a=(i&n.childLanes)!==0),l){if(a)return ip(e,n,i);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),_e(gn,gn.current),a)break;return null;case 22:return n.lanes=0,Xu(e,n,i,n.pendingProps);case 24:ja(n,jn,e.memoizedState.cache)}return ea(e,n,i)}function ap(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)wn=!0;else{if(!$r(e,i)&&(n.flags&128)===0)return wn=!1,pf(e,n,i);wn=(e.flags&131072)!==0}else wn=!1,ft&&(n.flags&1048576)!==0&&Uc(n,Xl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=Za(n.elementType),n.type=e,typeof e=="function")ar(e)?(a=el(e,a),n.tag=1,n=$u(null,n,e,a,i)):(n.tag=0,n=Fr(null,n,e,a,i));else{if(e!=null){var l=e.$$typeof;if(l===w){n.tag=11,n=Fu(null,n,e,a,i);break e}else if(l===mt){n.tag=14,n=Vu(null,n,e,a,i);break e}}throw n=ht(e)||e,Error(u(306,n,""))}}return n;case 0:return Fr(e,n,n.type,n.pendingProps,i);case 1:return a=n.type,l=el(a,n.pendingProps),$u(e,n,a,l,i);case 3:e:{if(Ft(n,n.stateNode.containerInfo),e===null)throw Error(u(387));a=n.pendingProps;var o=n.memoizedState;l=o.element,br(e,n),io(n,a,null,i);var d=n.memoizedState;if(a=d.cache,ja(n,jn,a),a!==o.cache&&mr(n,[jn],i,!0),no(),a=d.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:d.cache},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){n=ep(e,n,a,i);break e}else if(a!==l){l=Ci(Error(u(424)),n),Zl(l),n=ep(e,n,a,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Kt=Bi(e.firstChild),Ln=n,ft=!0,ba=null,Ti=!0,i=Xc(n,null,a,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Fa(),a===l){n=ea(e,n,i);break e}In(e,n,a,i)}n=n.child}return n;case 26:return ls(e,n),e===null?(i=fm(n.type,null,n.pendingProps,null))?n.memoizedState=i:ft||(i=n.type,e=n.pendingProps,a=Ss(Ke.current).createElement(i),a[zt]=n,a[fn]=e,_n(a,i,e),rn(a),n.stateNode=a):n.memoizedState=fm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return vt(n),e===null&&ft&&(a=n.stateNode=pm(n.type,n.pendingProps,Ke.current),Ln=n,Ti=!0,l=Kt,Ma(n.type)?(Ed=l,Kt=Bi(a.firstChild)):Kt=l),In(e,n,n.pendingProps.children,i),ls(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ft&&((l=a=Kt)&&(a=qf(a,n.type,n.pendingProps,Ti),a!==null?(n.stateNode=a,Ln=n,Kt=Bi(a.firstChild),Ti=!1,l=!0):l=!1),l||va(n)),vt(n),l=n.type,o=n.pendingProps,d=e!==null?e.memoizedProps:null,a=o.children,Td(l,o)?a=null:d!==null&&Td(l,d)&&(n.flags|=32),n.memoizedState!==null&&(l=Dr(e,n,nf,null,null,i),Co._currentValue=l),ls(e,n),In(e,n,a,i),n.child;case 6:return e===null&&ft&&((e=i=Kt)&&(i=Gf(i,n.pendingProps,Ti),i!==null?(n.stateNode=i,Ln=n,Kt=null,e=!0):e=!1),e||va(n)),null;case 13:return tp(e,n,i);case 4:return Ft(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=Ja(n,null,a,i):In(e,n,a,i),n.child;case 11:return Fu(e,n,n.type,n.pendingProps,i);case 7:return In(e,n,n.pendingProps,i),n.child;case 8:return In(e,n,n.pendingProps.children,i),n.child;case 12:return In(e,n,n.pendingProps.children,i),n.child;case 10:return a=n.pendingProps,ja(n,n.type,a.value),In(e,n,a.children,i),n.child;case 9:return l=n.type._context,a=n.pendingProps.children,Qa(n),l=Pn(l),a=a(l),n.flags|=1,In(e,n,a,i),n.child;case 14:return Vu(e,n,n.type,n.pendingProps,i);case 15:return Qu(e,n,n.type,n.pendingProps,i);case 19:return ip(e,n,i);case 31:return uf(e,n,i);case 22:return Xu(e,n,i,n.pendingProps);case 24:return Qa(n),a=Pn(jn),e===null?(l=gr(),l===null&&(l=Pt,o=hr(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=i),l=o),n.memoizedState={parent:a,cache:l},xr(n),ja(n,jn,l)):((e.lanes&i)!==0&&(br(e,n),io(n,null,null,i),no()),l=e.memoizedState,o=n.memoizedState,l.parent!==a?(l={parent:a,cache:a},n.memoizedState=l,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=l),ja(n,jn,a)):(a=o.cache,ja(n,jn,a),a!==l.cache&&mr(n,[jn],i,!0))),In(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(u(156,n.tag))}function ta(e){e.flags|=4}function ed(e,n,i,a,l){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(kp())e.flags|=8192;else throw Ka=Wo,yr}else e.flags&=-16777217}function lp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vm(n))if(kp())e.flags|=8192;else throw Ka=Wo,yr}function ss(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?sn():536870912,e.lanes|=n,zl|=n)}function co(e,n){if(!ft)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Jt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(n)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags&65011712,a|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=i,n}function mf(e,n,i){var a=n.pendingProps;switch(rr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(n),null;case 1:return Jt(n),null;case 3:return i=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Ki(jn),pn(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fl(n)?ta(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,cr())),Jt(n),null;case 26:var l=n.type,o=n.memoizedState;return e===null?(ta(n),o!==null?(Jt(n),lp(n,o)):(Jt(n),ed(n,l,null,a,i))):o?o!==e.memoizedState?(ta(n),Jt(n),lp(n,o)):(Jt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&ta(n),Jt(n),ed(n,l,e,a,i)),null;case 27:if(ln(n),i=Ke.current,l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&ta(n);else{if(!a){if(n.stateNode===null)throw Error(u(166));return Jt(n),null}e=yt.current,fl(n)?Lc(n):(e=pm(l,a,i),n.stateNode=e,ta(n))}return Jt(n),null;case 5:if(ln(n),l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&ta(n);else{if(!a){if(n.stateNode===null)throw Error(u(166));return Jt(n),null}if(o=yt.current,fl(n))Lc(n);else{var d=Ss(Ke.current);switch(o){case 1:o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof a.is=="string"?d.createElement("select",{is:a.is}):d.createElement("select"),a.multiple?o.multiple=!0:a.size&&(o.size=a.size);break;default:o=typeof a.is=="string"?d.createElement(l,{is:a.is}):d.createElement(l)}}o[zt]=n,o[fn]=a;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=o;e:switch(_n(o,l,a),l){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ta(n)}}return Jt(n),ed(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&ta(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(u(166));if(e=Ke.current,fl(n)){if(e=n.stateNode,i=n.memoizedProps,a=null,l=Ln,l!==null)switch(l.tag){case 27:case 5:a=l.memoizedProps}e[zt]=n,e=!!(e.nodeValue===i||a!==null&&a.suppressHydrationWarning===!0||tm(e.nodeValue,i)),e||va(n,!0)}else e=Ss(e).createTextNode(a),e[zt]=n,n.stateNode=e}return Jt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(a=fl(n),i!==null){if(e===null){if(!a)throw Error(u(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[zt]=n}else Fa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Jt(n),e=!1}else i=cr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(fi(n),n):(fi(n),null);if((n.flags&128)!==0)throw Error(u(558))}return Jt(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=fl(n),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(u(318));if(l=n.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));l[zt]=n}else Fa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Jt(n),l=!1}else l=cr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return n.flags&256?(fi(n),n):(fi(n),null)}return fi(n),(n.flags&128)!==0?(n.lanes=i,n):(i=a!==null,e=e!==null&&e.memoizedState!==null,i&&(a=n.child,l=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(l=a.alternate.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),ss(n,n.updateQueue),Jt(n),null);case 4:return pn(),e===null&&Sd(n.stateNode.containerInfo),Jt(n),null;case 10:return Ki(n.type),Jt(n),null;case 19:if(ye(gn),a=n.memoizedState,a===null)return Jt(n),null;if(l=(n.flags&128)!==0,o=a.rendering,o===null)if(l)co(a,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(o=Qo(e),o!==null){for(n.flags|=128,co(a,!1),e=o.updateQueue,n.updateQueue=e,ss(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Nc(i,e),i=i.sibling;return _e(gn,gn.current&1|2),ft&&Xi(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&qt()>ps&&(n.flags|=128,l=!0,co(a,!1),n.lanes=4194304)}else{if(!l)if(e=Qo(o),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,ss(n,e),co(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return Jt(n),null}else 2*qt()-a.renderingStartTime>ps&&i!==536870912&&(n.flags|=128,l=!0,co(a,!1),n.lanes=4194304);a.isBackwards?(o.sibling=n.child,n.child=o):(e=a.last,e!==null?e.sibling=o:n.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qt(),e.sibling=null,i=gn.current,_e(gn,l?i&1|2:i&1),ft&&Xi(n,a.treeForkCount),e):(Jt(n),null);case 22:case 23:return fi(n),wr(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(i&536870912)!==0&&(n.flags&128)===0&&(Jt(n),n.subtreeFlags&6&&(n.flags|=8192)):Jt(n),i=n.updateQueue,i!==null&&ss(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048),e!==null&&ye(Xa),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Ki(jn),Jt(n),null;case 25:return null;case 30:return null}throw Error(u(156,n.tag))}function hf(e,n){switch(rr(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ki(jn),pn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ln(n),null;case 31:if(n.memoizedState!==null){if(fi(n),n.alternate===null)throw Error(u(340));Fa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(fi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(u(340));Fa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ye(gn),null;case 4:return pn(),null;case 10:return Ki(n.type),null;case 22:case 23:return fi(n),wr(),e!==null&&ye(Xa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ki(jn),null;case 25:return null;default:return null}}function op(e,n){switch(rr(n),n.tag){case 3:Ki(jn),pn();break;case 26:case 27:case 5:ln(n);break;case 4:pn();break;case 31:n.memoizedState!==null&&fi(n);break;case 13:fi(n);break;case 19:ye(gn);break;case 10:Ki(n.type);break;case 22:case 23:fi(n),wr(),e!==null&&ye(Xa);break;case 24:Ki(jn)}}function uo(e,n){try{var i=n.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var l=a.next;i=l;do{if((i.tag&e)===e){a=void 0;var o=i.create,d=i.inst;a=o(),d.destroy=a}i=i.next}while(i!==l)}}catch(p){Rt(n,n.return,p)}}function Ta(e,n,i){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){var d=a.inst,p=d.destroy;if(p!==void 0){d.destroy=void 0,l=n;var S=i,U=p;try{U()}catch(Q){Rt(l,S,Q)}}}a=a.next}while(a!==o)}}catch(Q){Rt(n,n.return,Q)}}function sp(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Kc(n,i)}catch(a){Rt(e,e.return,a)}}}function rp(e,n,i){i.props=el(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(a){Rt(e,n,a)}}function po(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof i=="function"?e.refCleanup=i(a):i.current=a}}catch(l){Rt(e,n,l)}}function Fi(e,n){var i=e.ref,a=e.refCleanup;if(i!==null)if(typeof a=="function")try{a()}catch(l){Rt(e,n,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(l){Rt(e,n,l)}else i.current=null}function dp(e){var n=e.type,i=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&a.focus();break e;case"img":i.src?a.src=i.src:i.srcSet&&(a.srcset=i.srcSet)}}catch(l){Rt(e,e.return,l)}}function td(e,n,i){try{var a=e.stateNode;Uf(a,e.type,i,n),a[fn]=n}catch(l){Rt(e,e.return,l)}}function cp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ma(e.type)||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function id(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=tn));else if(a!==4&&(a===27&&Ma(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(id(e,n,i),e=e.sibling;e!==null;)id(e,n,i),e=e.sibling}function rs(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(a!==4&&(a===27&&Ma(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(rs(e,n,i),e=e.sibling;e!==null;)rs(e,n,i),e=e.sibling}function up(e){var n=e.stateNode,i=e.memoizedProps;try{for(var a=e.type,l=n.attributes;l.length;)n.removeAttributeNode(l[0]);_n(n,a,i),n[zt]=e,n[fn]=i}catch(o){Rt(e,e.return,o)}}var na=!1,Cn=!1,ad=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function ff(e,n){if(e=e.containerInfo,Ad=Bs,e=Cc(e),Ks(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var l=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var d=0,p=-1,S=-1,U=0,Q=0,ee=e,L=null;t:for(;;){for(var G;ee!==i||l!==0&&ee.nodeType!==3||(p=d+l),ee!==o||a!==0&&ee.nodeType!==3||(S=d+a),ee.nodeType===3&&(d+=ee.nodeValue.length),(G=ee.firstChild)!==null;)L=ee,ee=G;for(;;){if(ee===e)break t;if(L===i&&++U===l&&(p=d),L===o&&++Q===a&&(S=d),(G=ee.nextSibling)!==null)break;ee=L,L=ee.parentNode}ee=G}i=p===-1||S===-1?null:{start:p,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(Dd={focusedElem:e,selectionRange:i},Bs=!1,Mn=n;Mn!==null;)if(n=Mn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Mn=e;else for(;Mn!==null;){switch(n=Mn,o=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)l=e[i],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,i=n,l=o.memoizedProps,o=o.memoizedState,a=i.stateNode;try{var Se=el(i.type,l);e=a.getSnapshotBeforeUpdate(Se,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){Rt(i,i.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Bd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=n.sibling,e!==null){e.return=n.return,Mn=e;break}Mn=n.return}}function mp(e,n,i){var a=i.flags;switch(i.tag){case 0:case 11:case 15:aa(e,i),a&4&&uo(5,i);break;case 1:if(aa(e,i),a&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(d){Rt(i,i.return,d)}else{var l=el(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(l,n,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Rt(i,i.return,d)}}a&64&&sp(i),a&512&&po(i,i.return);break;case 3:if(aa(e,i),a&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Kc(e,n)}catch(d){Rt(i,i.return,d)}}break;case 27:n===null&&a&4&&up(i);case 26:case 5:aa(e,i),n===null&&a&4&&dp(i),a&512&&po(i,i.return);break;case 12:aa(e,i);break;case 31:aa(e,i),a&4&&gp(e,i);break;case 13:aa(e,i),a&4&&yp(e,i),a&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Cf.bind(null,i),Wf(e,i))));break;case 22:if(a=i.memoizedState!==null||na,!a){n=n!==null&&n.memoizedState!==null||Cn,l=na;var o=Cn;na=a,(Cn=n)&&!o?la(e,i,(i.subtreeFlags&8772)!==0):aa(e,i),na=l,Cn=o}break;case 30:break;default:aa(e,i)}}function hp(e){var n=e.alternate;n!==null&&(e.alternate=null,hp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ki(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nn=null,ti=!1;function ia(e,n,i){for(i=i.child;i!==null;)fp(e,n,i),i=i.sibling}function fp(e,n,i){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(xe,i)}catch{}switch(i.tag){case 26:Cn||Fi(i,n),ia(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Cn||Fi(i,n);var a=nn,l=ti;Ma(i.type)&&(nn=i.stateNode,ti=!1),ia(e,n,i),jo(i.stateNode),nn=a,ti=l;break;case 5:Cn||Fi(i,n);case 6:if(a=nn,l=ti,nn=null,ia(e,n,i),nn=a,ti=l,nn!==null)if(ti)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(i.stateNode)}catch(o){Rt(i,n,o)}else try{nn.removeChild(i.stateNode)}catch(o){Rt(i,n,o)}break;case 18:nn!==null&&(ti?(e=nn,sm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ul(e)):sm(nn,i.stateNode));break;case 4:a=nn,l=ti,nn=i.stateNode.containerInfo,ti=!0,ia(e,n,i),nn=a,ti=l;break;case 0:case 11:case 14:case 15:Ta(2,i,n),Cn||Ta(4,i,n),ia(e,n,i);break;case 1:Cn||(Fi(i,n),a=i.stateNode,typeof a.componentWillUnmount=="function"&&rp(i,n,a)),ia(e,n,i);break;case 21:ia(e,n,i);break;case 22:Cn=(a=Cn)||i.memoizedState!==null,ia(e,n,i),Cn=a;break;default:ia(e,n,i)}}function gp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ul(e)}catch(i){Rt(n,n.return,i)}}}function yp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ul(e)}catch(i){Rt(n,n.return,i)}}function gf(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new pp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new pp),n;default:throw Error(u(435,e.tag))}}function ds(e,n){var i=gf(e);n.forEach(function(a){if(!i.has(a)){i.add(a);var l=Af.bind(null,e,a);a.then(l,l)}})}function ni(e,n){var i=n.deletions;if(i!==null)for(var a=0;a<i.length;a++){var l=i[a],o=e,d=n,p=d;e:for(;p!==null;){switch(p.tag){case 27:if(Ma(p.type)){nn=p.stateNode,ti=!1;break e}break;case 5:nn=p.stateNode,ti=!1;break e;case 3:case 4:nn=p.stateNode.containerInfo,ti=!0;break e}p=p.return}if(nn===null)throw Error(u(160));fp(o,d,l),nn=null,ti=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)xp(n,e),n=n.sibling}var Oi=null;function xp(e,n){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ni(n,e),ii(e),a&4&&(Ta(3,e,e.return),uo(3,e),Ta(5,e,e.return));break;case 1:ni(n,e),ii(e),a&512&&(Cn||i===null||Fi(i,i.return)),a&64&&na&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?a:i.concat(a))));break;case 26:var l=Oi;if(ni(n,e),ii(e),a&512&&(Cn||i===null||Fi(i,i.return)),a&4){var o=i!==null?i.memoizedState:null;if(a=e.memoizedState,i===null)if(a===null)if(e.stateNode===null){e:{a=e.type,i=e.memoizedProps,l=l.ownerDocument||l;t:switch(a){case"title":o=l.getElementsByTagName("title")[0],(!o||o[Yn]||o[zt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(a),l.head.insertBefore(o,l.querySelector("head > title"))),_n(o,a,i),o[zt]=e,rn(o),a=o;break e;case"link":var d=xm("link","href",l).get(a+(i.href||""));if(d){for(var p=0;p<d.length;p++)if(o=d[p],o.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&o.getAttribute("rel")===(i.rel==null?null:i.rel)&&o.getAttribute("title")===(i.title==null?null:i.title)&&o.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){d.splice(p,1);break t}}o=l.createElement(a),_n(o,a,i),l.head.appendChild(o);break;case"meta":if(d=xm("meta","content",l).get(a+(i.content||""))){for(p=0;p<d.length;p++)if(o=d[p],o.getAttribute("content")===(i.content==null?null:""+i.content)&&o.getAttribute("name")===(i.name==null?null:i.name)&&o.getAttribute("property")===(i.property==null?null:i.property)&&o.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&o.getAttribute("charset")===(i.charSet==null?null:i.charSet)){d.splice(p,1);break t}}o=l.createElement(a),_n(o,a,i),l.head.appendChild(o);break;default:throw Error(u(468,a))}o[zt]=e,rn(o),a=o}e.stateNode=a}else bm(l,e.type,e.stateNode);else e.stateNode=ym(l,a,e.memoizedProps);else o!==a?(o===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):o.count--,a===null?bm(l,e.type,e.stateNode):ym(l,a,e.memoizedProps)):a===null&&e.stateNode!==null&&td(e,e.memoizedProps,i.memoizedProps)}break;case 27:ni(n,e),ii(e),a&512&&(Cn||i===null||Fi(i,i.return)),i!==null&&a&4&&td(e,e.memoizedProps,i.memoizedProps);break;case 5:if(ni(n,e),ii(e),a&512&&(Cn||i===null||Fi(i,i.return)),e.flags&32){l=e.stateNode;try{Gt(l,"")}catch(Se){Rt(e,e.return,Se)}}a&4&&e.stateNode!=null&&(l=e.memoizedProps,td(e,l,i!==null?i.memoizedProps:l)),a&1024&&(ad=!0);break;case 6:if(ni(n,e),ii(e),a&4){if(e.stateNode===null)throw Error(u(162));a=e.memoizedProps,i=e.stateNode;try{i.nodeValue=a}catch(Se){Rt(e,e.return,Se)}}break;case 3:if(As=null,l=Oi,Oi=ws(n.containerInfo),ni(n,e),Oi=l,ii(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Ul(n.containerInfo)}catch(Se){Rt(e,e.return,Se)}ad&&(ad=!1,bp(e));break;case 4:a=Oi,Oi=ws(e.stateNode.containerInfo),ni(n,e),ii(e),Oi=a;break;case 12:ni(n,e),ii(e);break;case 31:ni(n,e),ii(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 13:ni(n,e),ii(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(us=qt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 22:l=e.memoizedState!==null;var S=i!==null&&i.memoizedState!==null,U=na,Q=Cn;if(na=U||l,Cn=Q||S,ni(n,e),Cn=Q,na=U,ii(e),a&8192)e:for(n=e.stateNode,n._visibility=l?n._visibility&-2:n._visibility|1,l&&(i===null||S||na||Cn||tl(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){S=i=n;try{if(o=S.stateNode,l)d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{p=S.stateNode;var ee=S.memoizedProps.style,L=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;p.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(Se){Rt(S,S.return,Se)}}}else if(n.tag===6){if(i===null){S=n;try{S.stateNode.nodeValue=l?"":S.memoizedProps}catch(Se){Rt(S,S.return,Se)}}}else if(n.tag===18){if(i===null){S=n;try{var G=S.stateNode;l?rm(G,!0):rm(S.stateNode,!1)}catch(Se){Rt(S,S.return,Se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(i=a.retryQueue,i!==null&&(a.retryQueue=null,ds(e,i))));break;case 19:ni(n,e),ii(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ds(e,a)));break;case 30:break;case 21:break;default:ni(n,e),ii(e)}}function ii(e){var n=e.flags;if(n&2){try{for(var i,a=e.return;a!==null;){if(cp(a)){i=a;break}a=a.return}if(i==null)throw Error(u(160));switch(i.tag){case 27:var l=i.stateNode,o=nd(e);rs(e,o,l);break;case 5:var d=i.stateNode;i.flags&32&&(Gt(d,""),i.flags&=-33);var p=nd(e);rs(e,p,d);break;case 3:case 4:var S=i.stateNode.containerInfo,U=nd(e);id(e,U,S);break;default:throw Error(u(161))}}catch(Q){Rt(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function bp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;bp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function aa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)mp(e,n.alternate,n),n=n.sibling}function tl(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ta(4,n,n.return),tl(n);break;case 1:Fi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&rp(n,n.return,i),tl(n);break;case 27:jo(n.stateNode);case 26:case 5:Fi(n,n.return),tl(n);break;case 22:n.memoizedState===null&&tl(n);break;case 30:tl(n);break;default:tl(n)}e=e.sibling}}function la(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,l=e,o=n,d=o.flags;switch(o.tag){case 0:case 11:case 15:la(l,o,i),uo(4,o);break;case 1:if(la(l,o,i),a=o,l=a.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(U){Rt(a,a.return,U)}if(a=o,l=a.updateQueue,l!==null){var p=a.stateNode;try{var S=l.shared.hiddenCallbacks;if(S!==null)for(l.shared.hiddenCallbacks=null,l=0;l<S.length;l++)Zc(S[l],p)}catch(U){Rt(a,a.return,U)}}i&&d&64&&sp(o),po(o,o.return);break;case 27:up(o);case 26:case 5:la(l,o,i),i&&a===null&&d&4&&dp(o),po(o,o.return);break;case 12:la(l,o,i);break;case 31:la(l,o,i),i&&d&4&&gp(l,o);break;case 13:la(l,o,i),i&&d&4&&yp(l,o);break;case 22:o.memoizedState===null&&la(l,o,i),po(o,o.return);break;case 30:break;default:la(l,o,i)}n=n.sibling}}function ld(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Kl(i))}function od(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Kl(e))}function Li(e,n,i,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vp(e,n,i,a),n=n.sibling}function vp(e,n,i,a){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Li(e,n,i,a),l&2048&&uo(9,n);break;case 1:Li(e,n,i,a);break;case 3:Li(e,n,i,a),l&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Kl(e)));break;case 12:if(l&2048){Li(e,n,i,a),e=n.stateNode;try{var o=n.memoizedProps,d=o.id,p=o.onPostCommit;typeof p=="function"&&p(d,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Rt(n,n.return,S)}}else Li(e,n,i,a);break;case 31:Li(e,n,i,a);break;case 13:Li(e,n,i,a);break;case 23:break;case 22:o=n.stateNode,d=n.alternate,n.memoizedState!==null?o._visibility&2?Li(e,n,i,a):mo(e,n):o._visibility&2?Li(e,n,i,a):(o._visibility|=2,Al(e,n,i,a,(n.subtreeFlags&10256)!==0||!1)),l&2048&&ld(d,n);break;case 24:Li(e,n,i,a),l&2048&&od(n.alternate,n);break;default:Li(e,n,i,a)}}function Al(e,n,i,a,l){for(l=l&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var o=e,d=n,p=i,S=a,U=d.flags;switch(d.tag){case 0:case 11:case 15:Al(o,d,p,S,l),uo(8,d);break;case 23:break;case 22:var Q=d.stateNode;d.memoizedState!==null?Q._visibility&2?Al(o,d,p,S,l):mo(o,d):(Q._visibility|=2,Al(o,d,p,S,l)),l&&U&2048&&ld(d.alternate,d);break;case 24:Al(o,d,p,S,l),l&&U&2048&&od(d.alternate,d);break;default:Al(o,d,p,S,l)}n=n.sibling}}function mo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,a=n,l=a.flags;switch(a.tag){case 22:mo(i,a),l&2048&&ld(a.alternate,a);break;case 24:mo(i,a),l&2048&&od(a.alternate,a);break;default:mo(i,a)}n=n.sibling}}var ho=8192;function Dl(e,n,i){if(e.subtreeFlags&ho)for(e=e.child;e!==null;)jp(e,n,i),e=e.sibling}function jp(e,n,i){switch(e.tag){case 26:Dl(e,n,i),e.flags&ho&&e.memoizedState!==null&&ng(i,Oi,e.memoizedState,e.memoizedProps);break;case 5:Dl(e,n,i);break;case 3:case 4:var a=Oi;Oi=ws(e.stateNode.containerInfo),Dl(e,n,i),Oi=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ho,ho=16777216,Dl(e,n,i),ho=a):Dl(e,n,i));break;default:Dl(e,n,i)}}function Sp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];Mn=a,Cp(a,e)}Sp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wp(e),e=e.sibling}function wp(e){switch(e.tag){case 0:case 11:case 15:fo(e),e.flags&2048&&Ta(9,e,e.return);break;case 3:fo(e);break;case 12:fo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,cs(e)):fo(e);break;default:fo(e)}}function cs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];Mn=a,Cp(a,e)}Sp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ta(8,n,n.return),cs(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,cs(n));break;default:cs(n)}e=e.sibling}}function Cp(e,n){for(;Mn!==null;){var i=Mn;switch(i.tag){case 0:case 11:case 15:Ta(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var a=i.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Kl(i.memoizedState.cache)}if(a=i.child,a!==null)a.return=i,Mn=a;else e:for(i=e;Mn!==null;){a=Mn;var l=a.sibling,o=a.return;if(hp(a),a===i){Mn=null;break e}if(l!==null){l.return=o,Mn=l;break e}Mn=o}}}var yf={getCacheForType:function(e){var n=Pn(jn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Pn(jn).controller.signal}},xf=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Pt=null,ot=null,ct=0,Bt=0,gi=null,za=!1,Tl=!1,sd=!1,oa=0,un=0,Ba=0,nl=0,rd=0,yi=0,zl=0,go=null,ai=null,dd=!1,us=0,Ap=0,ps=1/0,ms=null,Ra=null,Bn=0,ka=null,Bl=null,sa=0,cd=0,ud=null,Dp=null,yo=0,pd=null;function xi(){return(Dt&2)!==0&&ct!==0?ct&-ct:q.T!==null?xd():He()}function Tp(){if(yi===0)if((ct&536870912)===0||ft){var e=Vt;Vt<<=1,(Vt&3932160)===0&&(Vt=262144),yi=e}else yi=536870912;return e=hi.current,e!==null&&(e.flags|=32),yi}function li(e,n,i){(e===Pt&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)&&(Rl(e,0),Ea(e,ct,yi,!1)),Ye(e,i),((Dt&2)===0||e!==Pt)&&(e===Pt&&((Dt&2)===0&&(nl|=i),un===4&&Ea(e,ct,yi,!1)),Vi(e))}function zp(e,n,i){if((Dt&6)!==0)throw Error(u(327));var a=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Nn(e,n),l=a?jf(e,n):hd(e,n,!0),o=a;do{if(l===0){Tl&&!a&&Ea(e,n,0,!1);break}else{if(i=e.current.alternate,o&&!bf(i)){l=hd(e,n,!1),o=!1;continue}if(l===2){if(o=n,e.errorRecoveryDisabledLanes&o)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){n=d;e:{var p=e;l=go;var S=p.current.memoizedState.isDehydrated;if(S&&(Rl(p,d).flags|=256),d=hd(p,d,!1),d!==2){if(sd&&!S){p.errorRecoveryDisabledLanes|=o,nl|=o,l=4;break e}o=ai,ai=l,o!==null&&(ai===null?ai=o:ai.push.apply(ai,o))}l=d}if(o=!1,l!==2)continue}}if(l===1){Rl(e,0),Ea(e,n,0,!0);break}e:{switch(a=e,o=l,o){case 0:case 1:throw Error(u(345));case 4:if((n&4194048)!==n)break;case 6:Ea(a,n,yi,!za);break e;case 2:ai=null;break;case 3:case 5:break;default:throw Error(u(329))}if((n&62914560)===n&&(l=us+300-qt(),10<l)){if(Ea(a,n,yi,!za),Ge(a,0,!0)!==0)break e;sa=n,a.timeoutHandle=lm(Bp.bind(null,a,i,ai,ms,dd,n,yi,nl,zl,za,o,"Throttled",-0,0),l);break e}Bp(a,i,ai,ms,dd,n,yi,nl,zl,za,o,null,-0,0)}}break}while(!0);Vi(e)}function Bp(e,n,i,a,l,o,d,p,S,U,Q,ee,L,G){if(e.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tn},jp(n,o,ee);var Se=(o&62914560)===o?us-qt():(o&4194048)===o?Ap-qt():0;if(Se=ig(ee,Se),Se!==null){sa=o,e.cancelPendingCommit=Se(Op.bind(null,e,n,o,i,a,l,d,p,S,Q,ee,null,L,G)),Ea(e,o,d,!U);return}}Op(e,n,o,i,a,l,d,p,S)}function bf(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var a=0;a<i.length;a++){var l=i[a],o=l.getSnapshot;l=l.value;try{if(!pi(o(),l))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ea(e,n,i,a){n&=~rd,n&=~nl,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var l=n;0<l;){var o=31-Ee(l),d=1<<o;a[o]=-1,l&=~d}i!==0&&T(e,i,n)}function hs(){return(Dt&6)===0?(xo(0),!1):!0}function md(){if(ot!==null){if(Bt===0)var e=ot.return;else e=ot,Zi=Va=null,Br(e),vl=null,$l=0,e=ot;for(;e!==null;)op(e.alternate,e),e=e.return;ot=null}}function Rl(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Pf(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),sa=0,md(),Pt=e,ot=i=Qi(e.current,null),ct=n,Bt=0,gi=null,za=!1,Tl=Nn(e,n),sd=!1,zl=yi=rd=nl=Ba=un=0,ai=go=null,dd=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var l=31-Ee(a),o=1<<l;n|=e[l],a&=~o}return oa=n,Ho(),i}function Rp(e,n){Xe=null,q.H=so,n===bl||n===Go?(n=Fc(),Bt=3):n===yr?(n=Fc(),Bt=4):Bt=n===Yr?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,gi=n,ot===null&&(un=1,is(e,Ci(n,e.current)))}function kp(){var e=hi.current;return e===null?!0:(ct&4194048)===ct?zi===null:(ct&62914560)===ct||(ct&536870912)!==0?e===zi:!1}function Ep(){var e=q.H;return q.H=so,e===null?so:e}function Np(){var e=q.A;return q.A=yf,e}function fs(){un=4,za||(ct&4194048)!==ct&&hi.current!==null||(Tl=!0),(Ba&134217727)===0&&(nl&134217727)===0||Pt===null||Ea(Pt,ct,yi,!1)}function hd(e,n,i){var a=Dt;Dt|=2;var l=Ep(),o=Np();(Pt!==e||ct!==n)&&(ms=null,Rl(e,n)),n=!1;var d=un;e:do try{if(Bt!==0&&ot!==null){var p=ot,S=gi;switch(Bt){case 8:md(),d=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(n=!0);var U=Bt;if(Bt=0,gi=null,kl(e,p,S,U),i&&Tl){d=0;break e}break;default:U=Bt,Bt=0,gi=null,kl(e,p,S,U)}}vf(),d=un;break}catch(Q){Rp(e,Q)}while(!0);return n&&e.shellSuspendCounter++,Zi=Va=null,Dt=a,q.H=l,q.A=o,ot===null&&(Pt=null,ct=0,Ho()),d}function vf(){for(;ot!==null;)Mp(ot)}function jf(e,n){var i=Dt;Dt|=2;var a=Ep(),l=Np();Pt!==e||ct!==n?(ms=null,ps=qt()+500,Rl(e,n)):Tl=Nn(e,n);e:do try{if(Bt!==0&&ot!==null){n=ot;var o=gi;t:switch(Bt){case 1:Bt=0,gi=null,kl(e,n,o,1);break;case 2:case 9:if(Wc(o)){Bt=0,gi=null,Hp(n);break}n=function(){Bt!==2&&Bt!==9||Pt!==e||(Bt=7),Vi(e)},o.then(n,n);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:Wc(o)?(Bt=0,gi=null,Hp(n)):(Bt=0,gi=null,kl(e,n,o,7));break;case 5:var d=null;switch(ot.tag){case 26:d=ot.memoizedState;case 5:case 27:var p=ot;if(d?vm(d):p.stateNode.complete){Bt=0,gi=null;var S=p.sibling;if(S!==null)ot=S;else{var U=p.return;U!==null?(ot=U,gs(U)):ot=null}break t}}Bt=0,gi=null,kl(e,n,o,5);break;case 6:Bt=0,gi=null,kl(e,n,o,6);break;case 8:md(),un=6;break e;default:throw Error(u(462))}}Sf();break}catch(Q){Rp(e,Q)}while(!0);return Zi=Va=null,q.H=a,q.A=l,Dt=i,ot!==null?0:(Pt=null,ct=0,Ho(),un)}function Sf(){for(;ot!==null&&!An();)Mp(ot)}function Mp(e){var n=ap(e.alternate,e,oa);e.memoizedProps=e.pendingProps,n===null?gs(e):ot=n}function Hp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Ju(i,n,n.pendingProps,n.type,void 0,ct);break;case 11:n=Ju(i,n,n.pendingProps,n.type.render,n.ref,ct);break;case 5:Br(n);default:op(i,n),n=ot=Nc(n,oa),n=ap(i,n,oa)}e.memoizedProps=e.pendingProps,n===null?gs(e):ot=n}function kl(e,n,i,a){Zi=Va=null,Br(n),vl=null,$l=0;var l=n.return;try{if(cf(e,l,n,i,ct)){un=1,is(e,Ci(i,e.current)),ot=null;return}}catch(o){if(l!==null)throw ot=l,o;un=1,is(e,Ci(i,e.current)),ot=null;return}n.flags&32768?(ft||a===1?e=!0:Tl||(ct&536870912)!==0?e=!1:(za=e=!0,(a===2||a===9||a===3||a===6)&&(a=hi.current,a!==null&&a.tag===13&&(a.flags|=16384))),Up(n,e)):gs(n)}function gs(e){var n=e;do{if((n.flags&32768)!==0){Up(n,za);return}e=n.return;var i=mf(n.alternate,n,oa);if(i!==null){ot=i;return}if(n=n.sibling,n!==null){ot=n;return}ot=n=e}while(n!==null);un===0&&(un=5)}function Up(e,n){do{var i=hf(e.alternate,e);if(i!==null){i.flags&=32767,ot=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ot=e;return}ot=e=i}while(e!==null);un=6,ot=null}function Op(e,n,i,a,l,o,d,p,S){e.cancelPendingCommit=null;do ys();while(Bn!==0);if((Dt&6)!==0)throw Error(u(327));if(n!==null){if(n===e.current)throw Error(u(177));if(o=n.lanes|n.childLanes,o|=nr,di(e,i,o,d,p,S),e===Pt&&(ot=Pt=null,ct=0),Bl=n,ka=e,sa=i,cd=o,ud=l,Dp=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Df(At,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null,l=se.p,se.p=2,d=Dt,Dt|=4;try{ff(e,n,i)}finally{Dt=d,se.p=l,q.T=a}}Bn=1,Lp(),Pp(),Ip()}}function Lp(){if(Bn===1){Bn=0;var e=ka,n=Bl,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=q.T,q.T=null;var a=se.p;se.p=2;var l=Dt;Dt|=4;try{xp(n,e);var o=Dd,d=Cc(e.containerInfo),p=o.focusedElem,S=o.selectionRange;if(d!==p&&p&&p.ownerDocument&&wc(p.ownerDocument.documentElement,p)){if(S!==null&&Ks(p)){var U=S.start,Q=S.end;if(Q===void 0&&(Q=U),"selectionStart"in p)p.selectionStart=U,p.selectionEnd=Math.min(Q,p.value.length);else{var ee=p.ownerDocument||document,L=ee&&ee.defaultView||window;if(L.getSelection){var G=L.getSelection(),Se=p.textContent.length,Ue=Math.min(S.start,Se),Lt=S.end===void 0?Ue:Math.min(S.end,Se);!G.extend&&Ue>Lt&&(d=Lt,Lt=Ue,Ue=d);var E=Sc(p,Ue),z=Sc(p,Lt);if(E&&z&&(G.rangeCount!==1||G.anchorNode!==E.node||G.anchorOffset!==E.offset||G.focusNode!==z.node||G.focusOffset!==z.offset)){var H=ee.createRange();H.setStart(E.node,E.offset),G.removeAllRanges(),Ue>Lt?(G.addRange(H),G.extend(z.node,z.offset)):(H.setEnd(z.node,z.offset),G.addRange(H))}}}}for(ee=[],G=p;G=G.parentNode;)G.nodeType===1&&ee.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<ee.length;p++){var J=ee[p];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Bs=!!Ad,Dd=Ad=null}finally{Dt=l,se.p=a,q.T=i}}e.current=n,Bn=2}}function Pp(){if(Bn===2){Bn=0;var e=ka,n=Bl,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=q.T,q.T=null;var a=se.p;se.p=2;var l=Dt;Dt|=4;try{mp(e,n.alternate,n)}finally{Dt=l,se.p=a,q.T=i}}Bn=3}}function Ip(){if(Bn===4||Bn===3){Bn=0,vi();var e=ka,n=Bl,i=sa,a=Dp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Bn=5:(Bn=0,Bl=ka=null,_p(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ra=null),De(i),n=n.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(xe,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=q.T,l=se.p,se.p=2,q.T=null;try{for(var o=e.onRecoverableError,d=0;d<a.length;d++){var p=a[d];o(p.value,{componentStack:p.stack})}}finally{q.T=n,se.p=l}}(sa&3)!==0&&ys(),Vi(e),l=e.pendingLanes,(i&261930)!==0&&(l&42)!==0?e===pd?yo++:(yo=0,pd=e):yo=0,xo(0)}}function _p(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Kl(n)))}function ys(){return Lp(),Pp(),Ip(),qp()}function qp(){if(Bn!==5)return!1;var e=ka,n=cd;cd=0;var i=De(sa),a=q.T,l=se.p;try{se.p=32>i?32:i,q.T=null,i=ud,ud=null;var o=ka,d=sa;if(Bn=0,Bl=ka=null,sa=0,(Dt&6)!==0)throw Error(u(331));var p=Dt;if(Dt|=4,wp(o.current),vp(o,o.current,d,i),Dt=p,xo(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(xe,o)}catch{}return!0}finally{se.p=l,q.T=a,_p(e,n)}}function Gp(e,n,i){n=Ci(i,n),n=Wr(e.stateNode,n,2),e=Ca(e,n,2),e!==null&&(Ye(e,2),Vi(e))}function Rt(e,n,i){if(e.tag===3)Gp(e,e,i);else for(;n!==null;){if(n.tag===3){Gp(n,e,i);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ra===null||!Ra.has(a))){e=Ci(i,e),i=Wu(2),a=Ca(n,i,2),a!==null&&(Yu(i,a,n,e),Ye(a,2),Vi(a));break}}n=n.return}}function fd(e,n,i){var a=e.pingCache;if(a===null){a=e.pingCache=new xf;var l=new Set;a.set(n,l)}else l=a.get(n),l===void 0&&(l=new Set,a.set(n,l));l.has(i)||(sd=!0,l.add(i),e=wf.bind(null,e,n,i),n.then(e,e))}function wf(e,n,i){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Pt===e&&(ct&i)===i&&(un===4||un===3&&(ct&62914560)===ct&&300>qt()-us?(Dt&2)===0&&Rl(e,0):rd|=i,zl===ct&&(zl=0)),Vi(e)}function Wp(e,n){n===0&&(n=sn()),e=Wa(e,n),e!==null&&(Ye(e,n),Vi(e))}function Cf(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Wp(e,i)}function Af(e,n){var i=0;switch(e.tag){case 31:case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(u(314))}a!==null&&a.delete(n),Wp(e,i)}function Df(e,n){return re(e,n)}var xs=null,El=null,gd=!1,bs=!1,yd=!1,Na=0;function Vi(e){e!==El&&e.next===null&&(El===null?xs=El=e:El=El.next=e),bs=!0,gd||(gd=!0,zf())}function xo(e,n){if(!yd&&bs){yd=!0;do for(var i=!1,a=xs;a!==null;){if(e!==0){var l=a.pendingLanes;if(l===0)var o=0;else{var d=a.suspendedLanes,p=a.pingedLanes;o=(1<<31-Ee(42|e)+1)-1,o&=l&~(d&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(i=!0,Qp(a,o))}else o=ct,o=Ge(a,a===Pt?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(o&3)===0||Nn(a,o)||(i=!0,Qp(a,o));a=a.next}while(i);yd=!1}}function Tf(){Yp()}function Yp(){bs=gd=!1;var e=0;Na!==0&&Lf()&&(e=Na);for(var n=qt(),i=null,a=xs;a!==null;){var l=a.next,o=Fp(a,n);o===0?(a.next=null,i===null?xs=l:i.next=l,l===null&&(El=i)):(i=a,(e!==0||(o&3)!==0)&&(bs=!0)),a=l}Bn!==0&&Bn!==5||xo(e),Na!==0&&(Na=0)}function Fp(e,n){for(var i=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var d=31-Ee(o),p=1<<d,S=l[d];S===-1?((p&i)===0||(p&a)!==0)&&(l[d]=jt(p,n)):S<=n&&(e.expiredLanes|=p),o&=~p}if(n=Pt,i=ct,i=Ge(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,i===0||e===n&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Kn(a),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Nn(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(a!==null&&Kn(a),De(i)){case 2:case 8:i=Jn;break;case 32:i=At;break;case 268435456:i=mn;break;default:i=At}return a=Vp.bind(null,e),i=re(i,a),e.callbackPriority=n,e.callbackNode=i,n}return a!==null&&a!==null&&Kn(a),e.callbackPriority=2,e.callbackNode=null,2}function Vp(e,n){if(Bn!==0&&Bn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ys()&&e.callbackNode!==i)return null;var a=ct;return a=Ge(e,e===Pt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(zp(e,a,n),Fp(e,qt()),e.callbackNode!=null&&e.callbackNode===i?Vp.bind(null,e):null)}function Qp(e,n){if(ys())return null;zp(e,n,!0)}function zf(){If(function(){(Dt&6)!==0?re(rt,Tf):Yp()})}function xd(){if(Na===0){var e=yl;e===0&&(e=Nt,Nt<<=1,(Nt&261888)===0&&(Nt=256)),Na=e}return Na}function Xp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ji(""+e)}function Zp(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function Bf(e,n,i,a,l){if(n==="submit"&&i&&i.stateNode===l){var o=Xp((l[fn]||null).action),d=a.submitter;d&&(n=(n=d[fn]||null)?Xp(n.formAction):d.getAttribute("formAction"),n!==null&&(o=n,d=null));var p=new zn("action","action",null,a,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Na!==0){var S=d?Zp(l,d):new FormData(l);Lr(i,{pending:!0,data:S,method:l.method,action:o},null,S)}}else typeof o=="function"&&(p.preventDefault(),S=d?Zp(l,d):new FormData(l),Lr(i,{pending:!0,data:S,method:l.method,action:o},o,S))},currentTarget:l}]})}}for(var bd=0;bd<tr.length;bd++){var vd=tr[bd],Rf=vd.toLowerCase(),kf=vd[0].toUpperCase()+vd.slice(1);Ui(Rf,"on"+kf)}Ui(Tc,"onAnimationEnd"),Ui(zc,"onAnimationIteration"),Ui(Bc,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(Fh,"onTransitionRun"),Ui(Vh,"onTransitionStart"),Ui(Qh,"onTransitionCancel"),Ui(Rc,"onTransitionEnd"),Z("onMouseEnter",["mouseout","mouseover"]),Z("onMouseLeave",["mouseout","mouseover"]),Z("onPointerEnter",["pointerout","pointerover"]),Z("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ef=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bo));function Kp(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],l=a.event;a=a.listeners;e:{var o=void 0;if(n)for(var d=a.length-1;0<=d;d--){var p=a[d],S=p.instance,U=p.currentTarget;if(p=p.listener,S!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=U;try{o(l)}catch(Q){Mo(Q)}l.currentTarget=null,o=S}else for(d=0;d<a.length;d++){if(p=a[d],S=p.instance,U=p.currentTarget,p=p.listener,S!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=U;try{o(l)}catch(Q){Mo(Q)}l.currentTarget=null,o=S}}}}function st(e,n){var i=n[We];i===void 0&&(i=n[We]=new Set);var a=e+"__bubble";i.has(a)||(Jp(n,e,2,!1),i.add(a))}function jd(e,n,i){var a=0;n&&(a|=4),Jp(i,e,a,n)}var vs="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[vs]){e[vs]=!0,pa.forEach(function(i){i!=="selectionchange"&&(Ef.has(i)||jd(i,!1,e),jd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[vs]||(n[vs]=!0,jd("selectionchange",!1,n))}}function Jp(e,n,i,a){switch(Tm(n)){case 2:var l=og;break;case 8:l=sg;break;default:l=Od}i=l.bind(null,n,i,e),l=void 0,!ha||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(n,i,{capture:!0,passive:l}):e.addEventListener(n,i,!0):l!==void 0?e.addEventListener(n,i,{passive:l}):e.addEventListener(n,i,!1)}function wd(e,n,i,a,l){var o=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var p=a.stateNode.containerInfo;if(p===l)break;if(d===4)for(d=a.return;d!==null;){var S=d.tag;if((S===3||S===4)&&d.stateNode.containerInfo===l)return;d=d.return}for(;p!==null;){if(d=Ii(p),d===null)return;if(S=d.tag,S===5||S===6||S===26||S===27){a=o=d;continue e}p=p.parentNode}}a=a.return}ma(function(){var U=o,Q=Gi(i),ee=[];e:{var L=kc.get(e);if(L!==void 0){var G=zn,Se=e;switch(e){case"keypress":if(sl(i)===0)break e;case"keydown":case"keyup":G=Ch;break;case"focusin":Se="focus",G=Fs;break;case"focusout":Se="blur",G=Fs;break;case"beforeblur":case"afterblur":G=Fs;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Th;break;case Tc:case zc:case Bc:G=fh;break;case Rc:G=Bh;break;case"scroll":case"scrollend":G=ch;break;case"wheel":G=kh;break;case"copy":case"cut":case"paste":G=yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=rc;break;case"toggle":case"beforetoggle":G=Nh}var Ue=(n&4)!==0,Lt=!Ue&&(e==="scroll"||e==="scrollend"),E=Ue?L!==null?L+"Capture":null:L;Ue=[];for(var z=U,H;z!==null;){var J=z;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||E===null||(J=Mi(z,E),J!=null&&Ue.push(vo(z,J,H))),Lt)break;z=z.return}0<Ue.length&&(L=new G(L,Se,null,i,Q),ee.push({event:L,listeners:Ue}))}}if((n&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",L&&i!==ei&&(Se=i.relatedTarget||i.fromElement)&&(Ii(Se)||Se[ci]))break e;if((G||L)&&(L=Q.window===Q?Q:(L=Q.ownerDocument)?L.defaultView||L.parentWindow:window,G?(Se=i.relatedTarget||i.toElement,G=U,Se=Se?Ii(Se):null,Se!==null&&(Lt=y(Se),Ue=Se.tag,Se!==Lt||Ue!==5&&Ue!==27&&Ue!==6)&&(Se=null)):(G=null,Se=U),G!==Se)){if(Ue=oc,J="onMouseLeave",E="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=rc,J="onPointerLeave",E="onPointerEnter",z="pointer"),Lt=G==null?L:qi(G),H=Se==null?L:qi(Se),L=new Ue(J,z+"leave",G,i,Q),L.target=Lt,L.relatedTarget=H,J=null,Ii(Q)===U&&(Ue=new Ue(E,z+"enter",Se,i,Q),Ue.target=H,Ue.relatedTarget=Lt,J=Ue),Lt=J,G&&Se)t:{for(Ue=Nf,E=G,z=Se,H=0,J=E;J;J=Ue(J))H++;J=0;for(var Me=z;Me;Me=Ue(Me))J++;for(;0<H-J;)E=Ue(E),H--;for(;0<J-H;)z=Ue(z),J--;for(;H--;){if(E===z||z!==null&&E===z.alternate){Ue=E;break t}E=Ue(E),z=Ue(z)}Ue=null}else Ue=null;G!==null&&$p(ee,L,G,Ue,!1),Se!==null&&Lt!==null&&$p(ee,Lt,Se,Ue,!0)}}e:{if(L=U?qi(U):window,G=L.nodeName&&L.nodeName.toLowerCase(),G==="select"||G==="input"&&L.type==="file")var wt=gc;else if(hc(L))if(yc)wt=Gh;else{wt=_h;var ze=Ih}else G=L.nodeName,!G||G.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?U&&vn(U.elementType)&&(wt=gc):wt=qh;if(wt&&(wt=wt(e,U))){fc(ee,wt,i,Q);break e}ze&&ze(e,L,U),e==="focusout"&&U&&L.type==="number"&&U.memoizedProps.value!=null&&lt(L,"number",L.value)}switch(ze=U?qi(U):window,e){case"focusin":(hc(ze)||ze.contentEditable==="true")&&(dl=ze,Js=U,Ql=null);break;case"focusout":Ql=Js=dl=null;break;case"mousedown":$s=!0;break;case"contextmenu":case"mouseup":case"dragend":$s=!1,Ac(ee,i,Q);break;case"selectionchange":if(Yh)break;case"keydown":case"keyup":Ac(ee,i,Q)}var Je;if(Qs)e:{switch(e){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else rl?pc(e,i)&&(ut="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ut="onCompositionStart");ut&&(dc&&i.locale!=="ko"&&(rl||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&rl&&(Je=ol()):(Hi=Q,al="value"in Hi?Hi.value:Hi.textContent,rl=!0)),ze=js(U,ut),0<ze.length&&(ut=new sc(ut,e,null,i,Q),ee.push({event:ut,listeners:ze}),Je?ut.data=Je:(Je=mc(i),Je!==null&&(ut.data=Je)))),(Je=Hh?Uh(e,i):Oh(e,i))&&(ut=js(U,"onBeforeInput"),0<ut.length&&(ze=new sc("onBeforeInput","beforeinput",null,i,Q),ee.push({event:ze,listeners:ut}),ze.data=Je)),Bf(ee,e,U,i,Q)}Kp(ee,n)})}function vo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function js(e,n){for(var i=n+"Capture",a=[];e!==null;){var l=e,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=Mi(e,i),l!=null&&a.unshift(vo(e,l,o)),l=Mi(e,n),l!=null&&a.push(vo(e,l,o))),e.tag===3)return a;e=e.return}return[]}function Nf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $p(e,n,i,a,l){for(var o=n._reactName,d=[];i!==null&&i!==a;){var p=i,S=p.alternate,U=p.stateNode;if(p=p.tag,S!==null&&S===a)break;p!==5&&p!==26&&p!==27||U===null||(S=U,l?(U=Mi(i,o),U!=null&&d.unshift(vo(i,U,S))):l||(U=Mi(i,o),U!=null&&d.push(vo(i,U,S)))),i=i.return}d.length!==0&&e.push({event:n,listeners:d})}var Mf=/\r\n?/g,Hf=/\u0000|\uFFFD/g;function em(e){return(typeof e=="string"?e:""+e).replace(Mf,`
`).replace(Hf,"")}function tm(e,n){return n=em(n),em(e)===n}function Ot(e,n,i,a,l,o){switch(i){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||Gt(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&Gt(e,""+a);break;case"className":dn(e,"class",a);break;case"tabIndex":dn(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(e,i,a);break;case"style":Un(e,a,o);break;case"data":if(n!=="object"){dn(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=ji(""+a),e.setAttribute(i,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(i==="formAction"?(n!=="input"&&Ot(e,n,"name",l.name,l,null),Ot(e,n,"formEncType",l.formEncType,l,null),Ot(e,n,"formMethod",l.formMethod,l,null),Ot(e,n,"formTarget",l.formTarget,l,null)):(Ot(e,n,"encType",l.encType,l,null),Ot(e,n,"method",l.method,l,null),Ot(e,n,"target",l.target,l,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(i);break}a=ji(""+a),e.setAttribute(i,a);break;case"onClick":a!=null&&(e.onclick=tn);break;case"onScroll":a!=null&&st("scroll",e);break;case"onScrollEnd":a!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=i}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}i=ji(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""+a):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":a===!0?e.setAttribute(i,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(i,a):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(i,a):e.removeAttribute(i);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(i):e.setAttribute(i,a);break;case"popover":st("beforetoggle",e),st("toggle",e),Xt(e,"popover",a);break;case"xlinkActuate":Ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ht(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ht(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ht(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ht(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Xt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Gn.get(i)||i,Xt(e,i,a))}}function Cd(e,n,i,a,l,o){switch(i){case"style":Un(e,a,o);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(i=a.__html,i!=null){if(l.children!=null)throw Error(u(60));e.innerHTML=i}}break;case"children":typeof a=="string"?Gt(e,a):(typeof a=="number"||typeof a=="bigint")&&Gt(e,""+a);break;case"onScroll":a!=null&&st("scroll",e);break;case"onScrollEnd":a!=null&&st("scrollend",e);break;case"onClick":a!=null&&(e.onclick=tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(l=i.endsWith("Capture"),n=i.slice(2,l?i.length-7:void 0),o=e[fn]||null,o=o!=null?o[i]:null,typeof o=="function"&&e.removeEventListener(n,o,l),typeof a=="function")){typeof o!="function"&&o!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,a,l);break e}i in e?e[i]=a:a===!0?e.setAttribute(i,""):Xt(e,i,a)}}}function _n(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var a=!1,l=!1,o;for(o in i)if(i.hasOwnProperty(o)){var d=i[o];if(d!=null)switch(o){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,n));default:Ot(e,n,o,d,i,null)}}l&&Ot(e,n,"srcSet",i.srcSet,i,null),a&&Ot(e,n,"src",i.src,i,null);return;case"input":st("invalid",e);var p=o=d=l=null,S=null,U=null;for(a in i)if(i.hasOwnProperty(a)){var Q=i[a];if(Q!=null)switch(a){case"name":l=Q;break;case"type":d=Q;break;case"checked":S=Q;break;case"defaultChecked":U=Q;break;case"value":o=Q;break;case"defaultValue":p=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,n));break;default:Ot(e,n,a,Q,i,null)}}dt(e,o,p,S,U,d,l,!1);return;case"select":st("invalid",e),a=d=o=null;for(l in i)if(i.hasOwnProperty(l)&&(p=i[l],p!=null))switch(l){case"value":o=p;break;case"defaultValue":d=p;break;case"multiple":a=p;default:Ot(e,n,l,p,i,null)}n=o,i=d,e.multiple=!!a,n!=null?Ne(e,!!a,n,!1):i!=null&&Ne(e,!!a,i,!0);return;case"textarea":st("invalid",e),o=l=a=null;for(d in i)if(i.hasOwnProperty(d)&&(p=i[d],p!=null))switch(d){case"value":a=p;break;case"defaultValue":l=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(u(91));break;default:Ot(e,n,d,p,i,null)}bt(e,a,l,o);return;case"option":for(S in i)if(i.hasOwnProperty(S)&&(a=i[S],a!=null))switch(S){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ot(e,n,S,a,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(a=0;a<bo.length;a++)st(bo[a],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(a=i[U],a!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,n));default:Ot(e,n,U,a,i,null)}return;default:if(vn(n)){for(Q in i)i.hasOwnProperty(Q)&&(a=i[Q],a!==void 0&&Cd(e,n,Q,a,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(a=i[p],a!=null&&Ot(e,n,p,a,i,null))}function Uf(e,n,i,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,d=null,p=null,S=null,U=null,Q=null;for(G in i){var ee=i[G];if(i.hasOwnProperty(G)&&ee!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":S=ee;default:a.hasOwnProperty(G)||Ot(e,n,G,null,a,ee)}}for(var L in a){var G=a[L];if(ee=i[L],a.hasOwnProperty(L)&&(G!=null||ee!=null))switch(L){case"type":o=G;break;case"name":l=G;break;case"checked":U=G;break;case"defaultChecked":Q=G;break;case"value":d=G;break;case"defaultValue":p=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(u(137,n));break;default:G!==ee&&Ot(e,n,L,G,a,ee)}}Pe(e,d,p,S,U,Q,o,l);return;case"select":G=d=p=L=null;for(o in i)if(S=i[o],i.hasOwnProperty(o)&&S!=null)switch(o){case"value":break;case"multiple":G=S;default:a.hasOwnProperty(o)||Ot(e,n,o,null,a,S)}for(l in a)if(o=a[l],S=i[l],a.hasOwnProperty(l)&&(o!=null||S!=null))switch(l){case"value":L=o;break;case"defaultValue":p=o;break;case"multiple":d=o;default:o!==S&&Ot(e,n,l,o,a,S)}n=p,i=d,a=G,L!=null?Ne(e,!!i,L,!1):!!a!=!!i&&(n!=null?Ne(e,!!i,n,!0):Ne(e,!!i,i?[]:"",!1));return;case"textarea":G=L=null;for(p in i)if(l=i[p],i.hasOwnProperty(p)&&l!=null&&!a.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Ot(e,n,p,null,a,l)}for(d in a)if(l=a[d],o=i[d],a.hasOwnProperty(d)&&(l!=null||o!=null))switch(d){case"value":L=l;break;case"defaultValue":G=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(u(91));break;default:l!==o&&Ot(e,n,d,l,a,o)}et(e,L,G);return;case"option":for(var Se in i)if(L=i[Se],i.hasOwnProperty(Se)&&L!=null&&!a.hasOwnProperty(Se))switch(Se){case"selected":e.selected=!1;break;default:Ot(e,n,Se,null,a,L)}for(S in a)if(L=a[S],G=i[S],a.hasOwnProperty(S)&&L!==G&&(L!=null||G!=null))switch(S){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ot(e,n,S,L,a,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in i)L=i[Ue],i.hasOwnProperty(Ue)&&L!=null&&!a.hasOwnProperty(Ue)&&Ot(e,n,Ue,null,a,L);for(U in a)if(L=a[U],G=i[U],a.hasOwnProperty(U)&&L!==G&&(L!=null||G!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(u(137,n));break;default:Ot(e,n,U,L,a,G)}return;default:if(vn(n)){for(var Lt in i)L=i[Lt],i.hasOwnProperty(Lt)&&L!==void 0&&!a.hasOwnProperty(Lt)&&Cd(e,n,Lt,void 0,a,L);for(Q in a)L=a[Q],G=i[Q],!a.hasOwnProperty(Q)||L===G||L===void 0&&G===void 0||Cd(e,n,Q,L,a,G);return}}for(var E in i)L=i[E],i.hasOwnProperty(E)&&L!=null&&!a.hasOwnProperty(E)&&Ot(e,n,E,null,a,L);for(ee in a)L=a[ee],G=i[ee],!a.hasOwnProperty(ee)||L===G||L==null&&G==null||Ot(e,n,ee,L,a,G)}function nm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Of(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),a=0;a<i.length;a++){var l=i[a],o=l.transferSize,d=l.initiatorType,p=l.duration;if(o&&p&&nm(d)){for(d=0,p=l.responseEnd,a+=1;a<i.length;a++){var S=i[a],U=S.startTime;if(U>p)break;var Q=S.transferSize,ee=S.initiatorType;Q&&nm(ee)&&(S=S.responseEnd,d+=Q*(S<p?1:(p-U)/(S-U)))}if(--a,n+=8*(o+d)/(l.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ad=null,Dd=null;function Ss(e){return e.nodeType===9?e:e.ownerDocument}function im(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function am(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Td(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var zd=null;function Lf(){var e=window.event;return e&&e.type==="popstate"?e===zd?!1:(zd=e,!0):(zd=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,Pf=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,If=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(e){return om.resolve(null).then(e).catch(_f)}:lm;function _f(e){setTimeout(function(){throw e})}function Ma(e){return e==="head"}function sm(e,n){var i=n,a=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"||i==="/&"){if(a===0){e.removeChild(l),Ul(n);return}a--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")a++;else if(i==="html")jo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,jo(i);for(var o=i.firstChild;o;){var d=o.nextSibling,p=o.nodeName;o[Yn]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&o.rel.toLowerCase()==="stylesheet"||i.removeChild(o),o=d}}else i==="body"&&jo(e.ownerDocument.body);i=l}while(i);Ul(n)}function rm(e,n){var i=e;e=0;do{var a=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=a}while(i)}function Bd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Bd(i),ki(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function qf(e,n,i,a){for(;e.nodeType===1;){var l=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Yn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Bi(e.nextSibling),e===null)break}return null}function Gf(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Bi(e.nextSibling),e===null))return null;return e}function dm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bi(e.nextSibling),e===null))return null;return e}function Rd(e){return e.data==="$?"||e.data==="$~"}function kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wf(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var a=function(){n(),i.removeEventListener("DOMContentLoaded",a)};i.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Bi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ed=null;function cm(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Bi(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function um(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function pm(e,n,i){switch(n=Ss(i),e){case"html":if(e=n.documentElement,!e)throw Error(u(452));return e;case"head":if(e=n.head,!e)throw Error(u(453));return e;case"body":if(e=n.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function jo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ki(e)}var Ri=new Map,mm=new Set;function ws(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=se.d;se.d={f:Yf,r:Ff,D:Vf,C:Qf,L:Xf,m:Zf,X:Jf,S:Kf,M:$f};function Yf(){var e=ra.f(),n=hs();return e||n}function Ff(e){var n=_i(e);n!==null&&n.tag===5&&n.type==="form"?Ru(n):ra.r(e)}var Nl=typeof document>"u"?null:document;function hm(e,n,i){var a=Nl;if(a&&typeof n=="string"&&n){var l=Be(n);l='link[rel="'+e+'"][href="'+l+'"]',typeof i=="string"&&(l+='[crossorigin="'+i+'"]'),mm.has(l)||(mm.add(l),e={rel:e,crossOrigin:i,href:n},a.querySelector(l)===null&&(n=a.createElement("link"),_n(n,"link",e),rn(n),a.head.appendChild(n)))}}function Vf(e){ra.D(e),hm("dns-prefetch",e,null)}function Qf(e,n){ra.C(e,n),hm("preconnect",e,n)}function Xf(e,n,i){ra.L(e,n,i);var a=Nl;if(a&&e&&n){var l='link[rel="preload"][as="'+Be(n)+'"]';n==="image"&&i&&i.imageSrcSet?(l+='[imagesrcset="'+Be(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(l+='[imagesizes="'+Be(i.imageSizes)+'"]')):l+='[href="'+Be(e)+'"]';var o=l;switch(n){case"style":o=Ml(e);break;case"script":o=Hl(e)}Ri.has(o)||(e=M({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Ri.set(o,e),a.querySelector(l)!==null||n==="style"&&a.querySelector(So(o))||n==="script"&&a.querySelector(wo(o))||(n=a.createElement("link"),_n(n,"link",e),rn(n),a.head.appendChild(n)))}}function Zf(e,n){ra.m(e,n);var i=Nl;if(i&&e){var a=n&&typeof n.as=="string"?n.as:"script",l='link[rel="modulepreload"][as="'+Be(a)+'"][href="'+Be(e)+'"]',o=l;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Hl(e)}if(!Ri.has(o)&&(e=M({rel:"modulepreload",href:e},n),Ri.set(o,e),i.querySelector(l)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(wo(o)))return}a=i.createElement("link"),_n(a,"link",e),rn(a),i.head.appendChild(a)}}}function Kf(e,n,i){ra.S(e,n,i);var a=Nl;if(a&&e){var l=Ei(a).hoistableStyles,o=Ml(e);n=n||"default";var d=l.get(o);if(!d){var p={loading:0,preload:null};if(d=a.querySelector(So(o)))p.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Ri.get(o))&&Nd(e,i);var S=d=a.createElement("link");rn(S),_n(S,"link",e),S._p=new Promise(function(U,Q){S.onload=U,S.onerror=Q}),S.addEventListener("load",function(){p.loading|=1}),S.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Cs(d,n,a)}d={type:"stylesheet",instance:d,count:1,state:p},l.set(o,d)}}}function Jf(e,n){ra.X(e,n);var i=Nl;if(i&&e){var a=Ei(i).hoistableScripts,l=Hl(e),o=a.get(l);o||(o=i.querySelector(wo(l)),o||(e=M({src:e,async:!0},n),(n=Ri.get(l))&&Md(e,n),o=i.createElement("script"),rn(o),_n(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function $f(e,n){ra.M(e,n);var i=Nl;if(i&&e){var a=Ei(i).hoistableScripts,l=Hl(e),o=a.get(l);o||(o=i.querySelector(wo(l)),o||(e=M({src:e,async:!0,type:"module"},n),(n=Ri.get(l))&&Md(e,n),o=i.createElement("script"),rn(o),_n(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function fm(e,n,i,a){var l=(l=Ke.current)?ws(l):null;if(!l)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ml(i.href),i=Ei(l).hoistableStyles,a=i.get(n),a||(a={type:"style",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ml(i.href);var o=Ei(l).hoistableStyles,d=o.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,d),(o=l.querySelector(So(e)))&&!o._p&&(d.instance=o,d.state.loading=5),Ri.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ri.set(e,i),o||eg(l,e,i,d.state))),n&&a===null)throw Error(u(528,""));return d}if(n&&a!==null)throw Error(u(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Hl(i),i=Ei(l).hoistableScripts,a=i.get(n),a||(a={type:"script",instance:null,count:0,state:null},i.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Ml(e){return'href="'+Be(e)+'"'}function So(e){return'link[rel="stylesheet"]['+e+"]"}function gm(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function eg(e,n,i,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),_n(n,"link",i),rn(n),e.head.appendChild(n))}function Hl(e){return'[src="'+Be(e)+'"]'}function wo(e){return"script[async]"+e}function ym(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+Be(i.href)+'"]');if(a)return n.instance=a,rn(a),a;var l=M({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),rn(a),_n(a,"style",l),Cs(a,i.precedence,e),n.instance=a;case"stylesheet":l=Ml(i.href);var o=e.querySelector(So(l));if(o)return n.state.loading|=4,n.instance=o,rn(o),o;a=gm(i),(l=Ri.get(l))&&Nd(a,l),o=(e.ownerDocument||e).createElement("link"),rn(o);var d=o;return d._p=new Promise(function(p,S){d.onload=p,d.onerror=S}),_n(o,"link",a),n.state.loading|=4,Cs(o,i.precedence,e),n.instance=o;case"script":return o=Hl(i.src),(l=e.querySelector(wo(o)))?(n.instance=l,rn(l),l):(a=i,(l=Ri.get(o))&&(a=M({},i),Md(a,l)),e=e.ownerDocument||e,l=e.createElement("script"),rn(l),_n(l,"link",a),e.head.appendChild(l),n.instance=l);case"void":return null;default:throw Error(u(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,Cs(a,i.precedence,e));return n.instance}function Cs(e,n,i){for(var a=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=a.length?a[a.length-1]:null,o=l,d=0;d<a.length;d++){var p=a[d];if(p.dataset.precedence===n)o=p;else if(o!==l)break}o?o.parentNode.insertBefore(e,o.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Nd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var As=null;function xm(e,n,i){if(As===null){var a=new Map,l=As=new Map;l.set(i,a)}else l=As,a=l.get(i),a||(a=new Map,l.set(i,a));if(a.has(e))return a;for(a.set(e,null),i=i.getElementsByTagName(e),l=0;l<i.length;l++){var o=i[l];if(!(o[Yn]||o[zt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var d=o.getAttribute(n)||"";d=e+d;var p=a.get(d);p?p.push(o):a.set(d,[o])}}return a}function bm(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function tg(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function vm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ng(e,n,i,a){if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var l=Ml(a.href),o=n.querySelector(So(l));if(o){n=o._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ds.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=o,rn(o);return}o=n.ownerDocument||n,a=gm(a),(l=Ri.get(l))&&Nd(a,l),o=o.createElement("link"),rn(o);var d=o;d._p=new Promise(function(p,S){d.onload=p,d.onerror=S}),_n(o,"link",a),i.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Ds.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Hd=0;function ig(e,n){return e.stylesheets&&e.count===0&&zs(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var a=setTimeout(function(){if(e.stylesheets&&zs(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+n);0<e.imgBytes&&Hd===0&&(Hd=62500*Of());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zs(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Hd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(l)}}:null}function Ds(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ts=null;function zs(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ts=new Map,n.forEach(ag,e),Ts=null,Ds.call(e))}function ag(e,n){if(!(n.state.loading&4)){var i=Ts.get(e);if(i)var a=i.get(null);else{i=new Map,Ts.set(e,i);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var d=l[o];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(i.set(d.dataset.precedence,d),a=d)}a&&i.set(null,a)}l=n.instance,d=l.getAttribute("data-precedence"),o=i.get(d)||a,o===a&&i.set(null,l),i.set(d,l),this.count++,a=Ds.bind(this),l.addEventListener("load",a),l.addEventListener("error",a),o?o.parentNode.insertBefore(l,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),n.state.loading|=4}}var Co={$$typeof:ie,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function lg(e,n,i,a,l,o,d,p,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=a,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function jm(e,n,i,a,l,o,d,p,S,U,Q,ee){return e=new lg(e,n,i,d,S,U,Q,ee,p),n=1,o===!0&&(n|=24),o=mi(3,null,null,n),e.current=o,o.stateNode=e,n=hr(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:a,isDehydrated:i,cache:n},xr(o),e}function Sm(e){return e?(e=pl,e):pl}function wm(e,n,i,a,l,o){l=Sm(l),a.context===null?a.context=l:a.pendingContext=l,a=wa(n),a.payload={element:i},o=o===void 0?null:o,o!==null&&(a.callback=o),i=Ca(e,a,n),i!==null&&(li(i,e,n),to(i,e,n))}function Cm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Ud(e,n){Cm(e,n),(e=e.alternate)&&Cm(e,n)}function Am(e){if(e.tag===13||e.tag===31){var n=Wa(e,67108864);n!==null&&li(n,e,67108864),Ud(e,67108864)}}function Dm(e){if(e.tag===13||e.tag===31){var n=xi();n=te(n);var i=Wa(e,n);i!==null&&li(i,e,n),Ud(e,n)}}var Bs=!0;function og(e,n,i,a){var l=q.T;q.T=null;var o=se.p;try{se.p=2,Od(e,n,i,a)}finally{se.p=o,q.T=l}}function sg(e,n,i,a){var l=q.T;q.T=null;var o=se.p;try{se.p=8,Od(e,n,i,a)}finally{se.p=o,q.T=l}}function Od(e,n,i,a){if(Bs){var l=Ld(a);if(l===null)wd(e,n,a,Rs,i),zm(e,a);else if(dg(l,e,n,i,a))a.stopPropagation();else if(zm(e,a),n&4&&-1<rg.indexOf(e)){for(;l!==null;){var o=_i(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var d=Dn(o.pendingLanes);if(d!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;d;){var S=1<<31-Ee(d);p.entanglements[1]|=S,d&=~S}Vi(o),(Dt&6)===0&&(ps=qt()+500,xo(0))}}break;case 31:case 13:p=Wa(o,2),p!==null&&li(p,o,2),hs(),Ud(o,2)}if(o=Ld(a),o===null&&wd(e,n,a,Rs,i),o===l)break;l=o}l!==null&&a.stopPropagation()}else wd(e,n,a,null,i)}}function Ld(e){return e=Gi(e),Pd(e)}var Rs=null;function Pd(e){if(Rs=null,e=Ii(e),e!==null){var n=y(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=g(n),e!==null)return e;e=null}else if(i===31){if(e=x(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Rs=e,null}function Tm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case rt:return 2;case Jn:return 8;case At:case on:return 32;case mn:return 268435456;default:return 32}default:return 32}}var Id=!1,Ha=null,Ua=null,Oa=null,Ao=new Map,Do=new Map,La=[],rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zm(e,n){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Ao.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(n.pointerId)}}function To(e,n,i,a,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:n,domEventName:i,eventSystemFlags:a,nativeEvent:o,targetContainers:[l]},n!==null&&(n=_i(n),n!==null&&Am(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),e)}function dg(e,n,i,a,l){switch(n){case"focusin":return Ha=To(Ha,e,n,i,a,l),!0;case"dragenter":return Ua=To(Ua,e,n,i,a,l),!0;case"mouseover":return Oa=To(Oa,e,n,i,a,l),!0;case"pointerover":var o=l.pointerId;return Ao.set(o,To(Ao.get(o)||null,e,n,i,a,l)),!0;case"gotpointercapture":return o=l.pointerId,Do.set(o,To(Do.get(o)||null,e,n,i,a,l)),!0}return!1}function Bm(e){var n=Ii(e.target);if(n!==null){var i=y(n);if(i!==null){if(n=i.tag,n===13){if(n=g(i),n!==null){e.blockedOn=n,it(e.priority,function(){Dm(i)});return}}else if(n===31){if(n=x(i),n!==null){e.blockedOn=n,it(e.priority,function(){Dm(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ks(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Ld(e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);ei=a,i.target.dispatchEvent(a),ei=null}else return n=_i(i),n!==null&&Am(n),e.blockedOn=i,!1;n.shift()}return!0}function Rm(e,n,i){ks(e)&&i.delete(n)}function cg(){Id=!1,Ha!==null&&ks(Ha)&&(Ha=null),Ua!==null&&ks(Ua)&&(Ua=null),Oa!==null&&ks(Oa)&&(Oa=null),Ao.forEach(Rm),Do.forEach(Rm)}function Es(e,n){e.blockedOn===n&&(e.blockedOn=null,Id||(Id=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,cg)))}var Ns=null;function km(e){Ns!==e&&(Ns=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ns===e&&(Ns=null);for(var n=0;n<e.length;n+=3){var i=e[n],a=e[n+1],l=e[n+2];if(typeof a!="function"){if(Pd(a||i)===null)continue;break}var o=_i(i);o!==null&&(e.splice(n,3),n-=3,Lr(o,{pending:!0,data:l,method:i.method,action:a},a,l))}}))}function Ul(e){function n(S){return Es(S,e)}Ha!==null&&Es(Ha,e),Ua!==null&&Es(Ua,e),Oa!==null&&Es(Oa,e),Ao.forEach(n),Do.forEach(n);for(var i=0;i<La.length;i++){var a=La[i];a.blockedOn===e&&(a.blockedOn=null)}for(;0<La.length&&(i=La[0],i.blockedOn===null);)Bm(i),i.blockedOn===null&&La.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(a=0;a<i.length;a+=3){var l=i[a],o=i[a+1],d=l[fn]||null;if(typeof o=="function")d||km(i);else if(d){var p=null;if(o&&o.hasAttribute("formAction")){if(l=o,d=o[fn]||null)p=d.formAction;else if(Pd(l)!==null)continue}else p=d.action;typeof p=="function"?i[a+1]=p:(i.splice(a,3),a-=3),km(i)}}}function Em(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(d){return l=d})},focusReset:"manual",scroll:"manual"})}function n(){l!==null&&(l(),l=null),a||setTimeout(i,20)}function i(){if(!a&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),l!==null&&(l(),l=null)}}}function _d(e){this._internalRoot=e}Ms.prototype.render=_d.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(u(409));var i=n.current,a=xi();wm(i,a,e,n,null,null)},Ms.prototype.unmount=_d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;wm(e.current,2,null,e,null,null),hs(),n[ci]=null}};function Ms(e){this._internalRoot=e}Ms.prototype.unstable_scheduleHydration=function(e){if(e){var n=He();e={blockedOn:null,target:e,priority:n};for(var i=0;i<La.length&&n!==0&&n<La[i].priority;i++);La.splice(i,0,e),i===0&&Bm(e)}};var Nm=r.version;if(Nm!=="19.2.1")throw Error(u(527,Nm,"19.2.1"));se.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=D(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var ug={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{xe=Hs.inject(ug),he=Hs}catch{}}return Bo.createRoot=function(e,n){if(!f(e))throw Error(u(299));var i=!1,a="",l=Iu,o=_u,d=qu;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=jm(e,1,!1,null,null,i,a,null,l,o,d,Em),e[ci]=n.current,Sd(e),new _d(n)},Bo.hydrateRoot=function(e,n,i){if(!f(e))throw Error(u(299));var a=!1,l="",o=Iu,d=_u,p=qu,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(o=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(S=i.formState)),n=jm(e,1,!0,n,i??null,a,l,S,o,d,p,Em),n.context=Sm(null),i=n.current,a=xi(),a=te(a),l=wa(a),l.callback=null,Ca(i,l,a),i=a,n.current.lanes=i,Ye(n,i),Vi(n),e[ci]=n.current,Sd(e),new Ms(n)},Bo.version="19.2.1",Bo}var qm;function qg(){if(qm)return Gd.exports;qm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Gd.exports=_g(),Gd.exports}var Gg=qg();const Wg=()=>t.jsxs("div",{style:we.container,children:[t.jsx("div",{style:we.hero,children:t.jsxs("div",{style:we.heroContent,children:[t.jsxs("h1",{style:we.heroTitle,children:[t.jsx("span",{style:we.gradientText,children:"Healthcare"})," at Your Fingertips"]}),t.jsx("p",{style:we.heroSubtitle,children:"Book appointments with top doctors and hospitals instantly. No registration required!"}),t.jsxs("div",{style:we.ctaButtons,children:[t.jsxs(bi,{to:"/book",style:we.primaryCta,children:[t.jsx("span",{style:{display:"inline-flex",marginRight:"10px",lineHeight:0},"aria-hidden":"true",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[t.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),t.jsx("path",{d:"M16 3v4M8 3v4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M7 11h10M7 15h10",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]})}),"Book Appointment Now"]}),t.jsx("a",{href:"#features",style:we.secondaryCta,children:"Learn More "})]}),t.jsxs("div",{style:we.statsBar,children:[t.jsxs("div",{style:we.statItem,children:[t.jsx("div",{style:we.statNumber,children:"1000+"}),t.jsx("div",{style:we.statLabel,children:"Doctors"})]}),t.jsx("div",{style:we.statDivider}),t.jsxs("div",{style:we.statItem,children:[t.jsx("div",{style:we.statNumber,children:"50+"}),t.jsx("div",{style:we.statLabel,children:"Hospitals"})]}),t.jsx("div",{style:we.statDivider}),t.jsxs("div",{style:we.statItem,children:[t.jsx("div",{style:we.statNumber,children:"10k+"}),t.jsx("div",{style:we.statLabel,children:"Happy Patients"})]})]})]})}),t.jsxs("div",{id:"features",style:we.featuresSection,children:[t.jsx("h2",{style:we.sectionTitle,children:"Why Choose Us?"}),t.jsxs("div",{style:we.featuresGrid,children:[t.jsxs("div",{style:we.featureCard,children:[t.jsx("div",{style:{...we.iconCircle,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:""}),t.jsx("h3",{style:we.featureTitle,children:"Wide Network"}),t.jsx("p",{style:we.featureText,children:"Access to 1000+ verified doctors and 50+ hospitals across multiple cities"})]}),t.jsxs("div",{style:we.featureCard,children:[t.jsx("div",{style:{...we.iconCircle,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:""}),t.jsx("h3",{style:we.featureTitle,children:"Instant Booking"}),t.jsx("p",{style:we.featureText,children:"Book appointments in seconds without any registration hassle"})]}),t.jsxs("div",{style:we.featureCard,children:[t.jsx("div",{style:{...we.iconCircle,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:""}),t.jsx("h3",{style:we.featureTitle,children:"Secure Payments"}),t.jsx("p",{style:we.featureText,children:"Safe and secure online payment with multiple payment options"})]}),t.jsxs("div",{style:we.featureCard,children:[t.jsx("div",{style:{...we.iconCircle,background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:""}),t.jsx("h3",{style:we.featureTitle,children:"Easy Rescheduling"}),t.jsx("p",{style:we.featureText,children:"Reschedule or cancel appointments easily with just a few clicks"})]})]})]}),t.jsxs("div",{style:we.providerSection,children:[t.jsxs("div",{style:we.providerCard,children:[t.jsx("div",{style:we.providerIcon,children:""}),t.jsx("h3",{style:we.providerTitle,children:"Are you a Doctor?"}),t.jsx("p",{style:we.providerText,children:"Join our platform and manage your appointments efficiently"}),t.jsxs("div",{style:we.providerButtons,children:[t.jsx(bi,{to:"/login",style:we.loginButton,children:"Login"}),t.jsx(bi,{to:"/register",style:we.registerButton,children:"Register"})]})]}),t.jsxs("div",{style:we.providerCard,children:[t.jsx("div",{style:we.providerIcon,children:""}),t.jsx("h3",{style:we.providerTitle,children:"Hospital?"}),t.jsx("p",{style:we.providerText,children:"Digitize your hospital operations and reach more patients"}),t.jsxs("div",{style:we.providerButtons,children:[t.jsx(bi,{to:"/login",style:we.loginButton,children:"Login"}),t.jsx(bi,{to:"/register",style:we.registerButton,children:"Register"})]})]})]}),!1,t.jsxs("div",{style:we.footer,children:[t.jsx("p",{style:we.footerText,children:" 2025 Souldoc. All rights reserved."}),t.jsxs("div",{style:we.footerLinks,children:[t.jsx("a",{href:"/privacy",style:we.footerLink,children:"Privacy Policy"}),t.jsx("span",{style:we.footerDivider,children:""}),t.jsx("a",{href:"/terms",style:we.footerLink,children:"Terms of Service"}),t.jsx("span",{style:we.footerDivider,children:""}),t.jsx("a",{href:"mailto:pauljos@gmail.com",style:we.footerLink,children:"Contact Us"})]})]}),t.jsx("style",{children:`
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0px);
                    }
                    50% {
                        transform: translateY(-20px);
                    }
                }
                
                @keyframes pulse {
                    0%, 100% {
                        transform: scale(1);
                    }
                    50% {
                        transform: scale(1.05);
                    }
                }
            `})]}),we={container:{minHeight:"100vh",background:"linear-gradient(to bottom, #f8f9fa, #ffffff)"},hero:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"80px 20px",textAlign:"center",position:"relative",overflow:"hidden"},heroContent:{maxWidth:"1200px",margin:"0 auto",position:"relative",zIndex:1,animation:"fadeInUp 0.8s ease-out"},heroTitle:{fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:"800",color:"white",marginBottom:"20px",lineHeight:"1.2"},gradientText:{background:"linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},heroSubtitle:{fontSize:"clamp(1rem, 2vw, 1.3rem)",color:"rgba(255, 255, 255, 0.9)",marginBottom:"40px",maxWidth:"700px",margin:"0 auto 40px",lineHeight:"1.6"},ctaButtons:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap",marginBottom:"60px"},primaryCta:{padding:"18px 40px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center"},secondaryCta:{padding:"18px 40px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontSize:"1.1rem",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},statsBar:{display:"flex",justifyContent:"center",alignItems:"center",gap:"40px",flexWrap:"wrap",padding:"30px",background:"rgba(255, 255, 255, 0.15)",borderRadius:"20px",backdropFilter:"blur(10px)",maxWidth:"800px",margin:"0 auto"},statItem:{textAlign:"center"},statNumber:{fontSize:"2.5rem",fontWeight:"800",color:"white",marginBottom:"5px"},statLabel:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},statDivider:{width:"2px",height:"60px",background:"rgba(255, 255, 255, 0.3)"},featuresSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto"},sectionTitle:{fontSize:"clamp(2rem, 4vw, 2.5rem)",fontWeight:"700",textAlign:"center",marginBottom:"60px",color:"#333"},featuresGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"30px"},featureCard:{background:"white",padding:"40px 30px",borderRadius:"20px",textAlign:"center",boxShadow:"0 5px 20px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease",cursor:"pointer",minWidth:"0"},iconCircle:{width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",margin:"0 auto 20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.15)"},featureTitle:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"15px",color:"#333"},featureText:{color:"#666",lineHeight:"1.6",fontSize:"0.95rem"},providerSection:{padding:"80px 20px",maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"40px"},providerCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"50px 40px",borderRadius:"25px",textAlign:"center",color:"white",boxShadow:"0 10px 40px rgba(102, 126, 234, 0.3)"},providerIcon:{fontSize:"4rem",marginBottom:"20px",animation:"float 3s ease-in-out infinite"},providerTitle:{fontSize:"1.8rem",fontWeight:"700",marginBottom:"15px"},providerText:{fontSize:"1rem",opacity:.9,marginBottom:"30px",lineHeight:"1.6"},providerButtons:{display:"flex",gap:"15px",justifyContent:"center"},loginButton:{padding:"12px 30px",background:"white",color:"#667eea",borderRadius:"50px",textDecoration:"none",fontWeight:"600",transition:"all 0.3s ease"},registerButton:{padding:"12px 30px",background:"rgba(255, 255, 255, 0.2)",color:"white",border:"2px solid white",borderRadius:"50px",textDecoration:"none",fontWeight:"600",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},footer:{background:"#2d3436",color:"white",padding:"40px 20px",textAlign:"center"},footerText:{margin:"0 0 15px 0",opacity:.8},footerLinks:{display:"flex",justifyContent:"center",gap:"15px",flexWrap:"wrap",alignItems:"center"},footerLink:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s"},footerDivider:{opacity:.5}};const Yg="type.googleapis.com/google.protobuf.Int64Value",Fg="type.googleapis.com/google.protobuf.UInt64Value";function Km(s,r){const c={};for(const u in s)s.hasOwnProperty(u)&&(c[u]=r(s[u]));return c}function Ps(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(r=>Ps(r));if(typeof s=="function"||typeof s=="object")return Km(s,r=>Ps(r));throw new Error("Data cannot be encoded in JSON: "+s)}function Ol(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case Yg:case Fg:{const r=Number(s.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+s);return r}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(r=>Ol(r)):typeof s=="function"||typeof s=="object"?Km(s,r=>Ol(r)):s}const $d="functions";const Gm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ri extends Tg{constructor(r,c,u){super(`${$d}/${r}`,c||""),this.details=u,Object.setPrototypeOf(this,ri.prototype)}}function Vg(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Is(s,r){let c=Vg(s),u=c,f;try{const y=r&&r.error;if(y){const g=y.status;if(typeof g=="string"){if(!Gm[g])return new ri("internal","internal");c=Gm[g],u=g}const x=y.message;typeof x=="string"&&(u=x),f=y.details,f!==void 0&&(f=Ol(f))}}catch{}return c==="ok"?null:new ri(c,u,f)}class Qg{constructor(r,c,u,f){this.app=r,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jg(r)&&r.settings.appCheckToken&&(this.serverAppAppCheckToken=r.settings.appCheckToken),this.auth=c.getImmediate({optional:!0}),this.messaging=u.getImmediate({optional:!0}),this.auth||c.get().then(y=>this.auth=y,()=>{}),this.messaging||u.get().then(y=>this.messaging=y,()=>{}),this.appCheck||f?.get().then(y=>this.appCheck=y,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(r){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const c=r?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return c.error?null:c.token}return null}async getContext(r){const c=await this.getAuthToken(),u=await this.getMessagingToken(),f=await this.getAppCheckToken(r);return{authToken:c,messagingToken:u,appCheckToken:f}}}const Xd="us-central1",Xg=/^data: (.*?)(?:\n|$)/;function Zg(s){let r=null;return{promise:new Promise((c,u)=>{r=setTimeout(()=>{u(new ri("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{r&&clearTimeout(r)}}}class Kg{constructor(r,c,u,f,y=Xd,g=(...x)=>fetch(...x)){this.app=r,this.fetchImpl=g,this.emulatorOrigin=null,this.contextProvider=new Qg(r,c,u,f),this.cancelAllRequests=new Promise(x=>{this.deleteService=()=>Promise.resolve(x())});try{const x=new URL(y);this.customDomain=x.origin+(x.pathname==="/"?"":x.pathname),this.region=Xd}catch{this.customDomain=null,this.region=y}}_delete(){return this.deleteService()}_url(r){const c=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${c}/${this.region}/${r}`:this.customDomain!==null?`${this.customDomain}/${r}`:`https://${this.region}-${c}.cloudfunctions.net/${r}`}}function Jg(s,r,c){const u=Zm(r);s.emulatorOrigin=`http${u?"s":""}://${r}:${c}`,u&&(Ag(s.emulatorOrigin+"/backends"),Dg("Functions",!0))}function $g(s,r,c){const u=f=>ty(s,r,f,{});return u.stream=(f,y)=>iy(s,r,f,y),u}function Jm(s){return s.emulatorOrigin&&Zm(s.emulatorOrigin)?"include":void 0}async function ey(s,r,c,u,f){c["Content-Type"]="application/json";let y;try{y=await u(s,{method:"POST",body:JSON.stringify(r),headers:c,credentials:Jm(f)})}catch{return{status:0,json:null}}let g=null;try{g=await y.json()}catch{}return{status:y.status,json:g}}async function $m(s,r){const c={},u=await s.contextProvider.getContext(r.limitedUseAppCheckTokens);return u.authToken&&(c.Authorization="Bearer "+u.authToken),u.messagingToken&&(c["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(c["X-Firebase-AppCheck"]=u.appCheckToken),c}function ty(s,r,c,u){const f=s._url(r);return ny(s,f,c,u)}async function ny(s,r,c,u){c=Ps(c);const f={data:c},y=await $m(s,u),g=u.timeout||7e4,x=Zg(g),j=await Promise.race([ey(r,f,y,s.fetchImpl,s),x.promise,s.cancelAllRequests]);if(x.cancel(),!j)throw new ri("cancelled","Firebase Functions instance was deleted.");const D=Is(j.status,j.json);if(D)throw D;if(!j.json)throw new ri("internal","Response is not valid JSON object.");let A=j.json.data;if(typeof A>"u"&&(A=j.json.result),typeof A>"u")throw new ri("internal","Response is missing data field.");return{data:Ol(A)}}function iy(s,r,c,u){const f=s._url(r);return ay(s,f,c,u||{})}async function ay(s,r,c,u){c=Ps(c);const f={data:c},y=await $m(s,u);y["Content-Type"]="application/json",y.Accept="text/event-stream";let g;try{g=await s.fetchImpl(r,{method:"POST",body:JSON.stringify(f),headers:y,signal:u?.signal,credentials:Jm(s)})}catch(C){if(C instanceof Error&&C.name==="AbortError"){const R=new ri("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const oe=Is(0,null);return{data:Promise.reject(oe),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(oe)}}}}}}let x,j;const D=new Promise((C,oe)=>{x=C,j=oe});u?.signal?.addEventListener("abort",()=>{const C=new ri("cancelled","Request was cancelled.");j(C)});const A=g.body.getReader(),M=ly(A,x,j,u?.signal);return{stream:{[Symbol.asyncIterator](){const C=M.getReader();return{async next(){const{value:oe,done:R}=await C.read();return{value:oe,done:R}},async return(){return await C.cancel(),{done:!0,value:void 0}}}}},data:D}}function ly(s,r,c,u){const f=(g,x)=>{const j=g.match(Xg);if(!j)return;const D=j[1];try{const A=JSON.parse(D);if("result"in A){r(Ol(A.result));return}if("message"in A){x.enqueue(Ol(A.message));return}if("error"in A){const M=Is(0,A);x.error(M),c(M);return}}catch(A){if(A instanceof ri){x.error(A),c(A);return}}},y=new TextDecoder;return new ReadableStream({start(g){let x="";return j();async function j(){if(u?.aborted){const D=new ri("cancelled","Request was cancelled");return g.error(D),c(D),Promise.resolve()}try{const{value:D,done:A}=await s.read();if(A){x.trim()&&f(x.trim(),g),g.close();return}if(u?.aborted){const C=new ri("cancelled","Request was cancelled");g.error(C),c(C),await s.cancel();return}x+=y.decode(D,{stream:!0});const M=x.split(`
`);x=M.pop()||"";for(const C of M)C.trim()&&f(C.trim(),g);return j()}catch(D){const A=D instanceof ri?D:Is(0,null);g.error(A),c(A)}}},cancel(){return s.cancel()}})}const Wm="@firebase/functions",Ym="0.13.1";const oy="auth-internal",sy="app-check-internal",ry="messaging-internal";function dy(s){const r=(c,{instanceIdentifier:u})=>{const f=c.getProvider("app").getImmediate(),y=c.getProvider(oy),g=c.getProvider(ry),x=c.getProvider(sy);return new Kg(f,y,g,x,u)};bg(new vg($d,r,"PUBLIC").setMultipleInstances(!0)),Mm(Wm,Ym,s),Mm(Wm,Ym,"esm2020")}function eh(s=Sg(),r=Xd){const u=wg(Jd(s),$d).getImmediate({identifier:r}),f=Cg("functions");return f&&cy(u,...f),u}function cy(s,r,c){Jg(Jd(s),r,c)}function ec(s,r,c){return $g(Jd(s),r)}dy();const uy={apiKey:"AIzaSyD8M529DHrG1QBN9UKYexF0trTHrIzo5oM",authDomain:"docsapp-b7430.firebaseapp.com",projectId:"docsapp-b7430",storageBucket:"docsapp-b7430.firebasestorage.app",messagingSenderId:"1011149482238",appId:"1:1011149482238:web:89189afe319f87a6b6ddaf",measurementId:"G-CN15LYGF6F"},tc=zg(uy),Pi=Bg(tc),V=Rg(tc),nc=eh(tc),py=Object.freeze(Object.defineProperty({__proto__:null,auth:Pi,db:V,functions:nc},Symbol.toStringTag,{value:"Module"})),my=async(s,r)=>{const c=Re(V,"invitations",s),u=await Yt(c);if(!u.exists())throw new Error("Invalid invitation code");const f=u.data();if(f.used)throw new Error("Invitation code already used");if(new Date(f.expiresAt)<new Date)throw new Error("Invitation code expired");await Wt(c,{used:!0,usedBy:r,usedAt:new Date().toISOString()});const y=Re(V,"users",r);await Wt(y,{hospitalId:f.hospitalId,hospitalName:f.hospitalName});const x=(await Yt(y)).data(),j=Re(V,"doctors",r);return await Zn(j,{userId:r,hospitalId:f.hospitalId,name:x.displayName,email:x.email,specialization:x.specialization||"",createdAt:new Date().toISOString()}),f.hospitalId},hy=async s=>{console.log("getHospitalDoctors called with hospitalId:",s);try{const r=ve(V,"users"),c=Ce(r,le("hospitalId","==",s)),f=(await Oe(c)).docs.map(y=>({uid:y.id,id:y.id,...y.data()})).filter(y=>y.role==="doctor");return console.log("Found doctors:",f.length),f}catch(r){return console.error("Error fetching hospital doctors:",r),[]}},fy=async s=>{const r=ve(V,"appointments"),c=Ce(r,le("hospitalId","==",s));return(await Oe(c)).docs.map(f=>({id:f.id,...f.data()}))},gy=async s=>{const r=ve(V,"appointments"),c=Ce(r,le("doctorId","==",s));return(await Oe(c)).docs.map(f=>({id:f.id,...f.data()}))},yy=async(s,r)=>{const c=Re(V,"users",s);await Wt(c,{isActive:r,updatedAt:new Date().toISOString()})},th=async(s,r)=>{const c=Re(V,"users",s);await Wt(c,{...r,updatedAt:new Date().toISOString()})},xy=async(s,r)=>{const c=Re(V,"users",s);await Wt(c,{hospitalId:null,isActive:!1,updatedAt:new Date().toISOString()})},Fd=async(s,r)=>{const c=Re(V,"doctorAvailability",s);await Zn(c,{doctorId:s,...r,updatedAt:new Date().toISOString()},{merge:!0})},ic=async s=>{const r=Re(V,"doctorAvailability",s),c=await Yt(r);return c.exists()?c.data():{workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[]}},by=async(s,r)=>{const c=Re(V,"doctorAvailability",s),u=await Yt(c);let f=[];u.exists()&&(f=u.data().blockedTimeSlots||[]),f.push({...r,id:`block_${Date.now()}`,createdAt:new Date().toISOString()}),await Zn(c,{doctorId:s,blockedTimeSlots:f,updatedAt:new Date().toISOString()},{merge:!0})},vy=async(s,r)=>{const c=Re(V,"doctorAvailability",s),u=await Yt(c);if(u.exists()){const y=(u.data().blockedTimeSlots||[]).filter(g=>g.id!==r);await Wt(c,{blockedTimeSlots:y,updatedAt:new Date().toISOString()})}},Fm=async s=>{const r=Ce(ve(V,"users"),le("hospitalId","==",s),le("role","==","doctor"));Ce(ve(V,"users"),le("hospitalId","==",s),le("role","==","doctor"));const c=ve(V,"appointments"),u=Ce(c,le("hospitalId","==",s)),f=Ce(c,le("hospitalId","==",s),le("status","==","completed")),y=new Date().toISOString().split("T")[0],g=Ce(c,le("hospitalId","==",s),le("date","==",y));let x=0;try{x=(await Us(f,{totalRevenue:Os("fee")})).data().totalRevenue||0}catch(oe){console.warn("Revenue aggregation failed (likely missing index):",oe)}let j=0,D=0;try{j=(await si(r)).data().count,D=(await si(activeDoctorsQuery)).data().count}catch(oe){console.warn("Doctor stats counting failed (likely missing index or collection mismatch):",oe)}const[A,M,C]=await Promise.all([si(u),si(f),si(g)]);return{totalDoctors:j,activeDoctors:D,totalAppointments:A.data().count,todayAppointments:C.data().count,completedAppointments:M.data().count,totalRevenue:x}},jy=async s=>{const r=ve(V,"appointments"),c=Ce(r,le("doctorId","==",s)),u=Ce(r,le("doctorId","==",s),le("status","==","completed")),f=new Date().toISOString().split("T")[0],y=Ce(r,le("doctorId","==",s),le("date","==",f)),[g,x,j]=await Promise.all([si(c),si(u),si(y)]);return{totalAppointments:g.data().count,todayAppointments:j.data().count,completedAppointments:x.data().count}},Sy=async(s,r,c)=>{try{console.log("addNewDoctorToHospital called with:",{hospitalId:s,hospitalName:r,doctorData:c});const u=`doctor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,f=Re(V,"users",u),y={uid:u,displayName:c.displayName,email:c.email,phone:c.phone,specialization:c.specialization,consultationFee:c.consultationFee,role:"doctor",hospitalId:s,hospitalName:r,isActive:!0,createdAt:new Date().toISOString(),country:c.country||"",state:c.state||"",city:c.city||""};console.log("Creating doctor document with data:",y),await Zn(f,y),console.log("Doctor document created successfully with ID:",u);const g=Re(V,"doctorAvailability",u);return await Zn(g,{doctorId:u,workingHours:{start:"09:00",end:"17:00"},slotDuration:30,workingDays:[1,2,3,4,5],unavailableDates:[],blockedTimeSlots:[],updatedAt:new Date().toISOString()}),console.log("Doctor availability created successfully"),u}catch(u){throw console.error("Error in addNewDoctorToHospital:",u),u}},wy=async(s,r,c)=>{const u=`VISIT_${Date.now()}`,f=Re(V,"users",s,"visits",u);return await Zn(f,{...c,doctorId:r,date:new Date().toISOString(),createdAt:new Date().toISOString()}),u},Cy=async(s,r,c)=>{const u=`RX_${Date.now()}`,f=Re(V,"users",s,"prescriptions",u);return await Zn(f,{...c,doctorId:r,patientId:s,date:new Date().toISOString(),createdAt:new Date().toISOString()}),u},nh=async(s,r,c,u=null,f={})=>{if(console.log("=== registerUser CALLED ==="),console.log("Email:",s,"Role:",u,"Name:",c),!r||!c)throw new Error("Name and password are required");if(u==="patient"){const g=f.phone;if(!g)throw new Error("Phone number is required for patient registration");const x=`patient_${g.replace(/\D/g,"")}@docsapp.local`;console.log("Patient registration with phone:",g),console.log("Generated email for Firebase:",x);try{const D=(await Hm(Pi,x,r)).user;await Um(D,{displayName:c});const A=Re(V,"users",D.uid),M={uid:D.uid,phone:g,displayName:c,role:"patient",createdAt:new Date().toISOString(),...f};return await Zn(A,M),M}catch(j){throw console.error("Patient Registration Error:",j),j}}if(!s)throw new Error("Email is required for doctor/hospital registration");const y=String(s).trim().toLowerCase();if(console.log("Original email:",s),console.log("Cleaned email:",y),console.log("Email length:",y.length),!y.includes("@")||y.length<3)throw new Error("Please enter a valid email address");try{console.log("auth.js: Creating user with email and password...");const x=(await Hm(Pi,y,r)).user;console.log("auth.js: User created, UID:",x.uid),console.log("auth.js: Updating user profile..."),await Um(x,{displayName:c}),console.log("auth.js: Profile updated");let j=null;if(u==="hospital"){console.log("auth.js: Creating hospital document..."),j=`hospital_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const C=Re(V,"hospitals",j),oe={id:j,name:c,email:y,ownerId:x.uid,enabled:!0,createdAt:new Date().toISOString(),...f};console.log("auth.js: Hospital data to save:",oe);try{await Zn(C,oe),console.log(" auth.js: Hospital document created successfully with ID:",j)}catch(R){throw console.error(" auth.js: FAILED to create hospital document:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),new Error(`Failed to create hospital: ${R.message}`)}}console.log("auth.js: Creating user document in Firestore...");const D=Re(V,"users",x.uid),A={uid:x.uid,email:y,displayName:c,createdAt:new Date().toISOString(),...j&&{hospitalId:j},...u&&{role:u},...f};console.log("auth.js: User data to save:",A);try{await Zn(D,A),console.log(" auth.js: User document created successfully")}catch(C){throw console.error(" auth.js: FAILED to create user document:",C),console.error("Error code:",C.code),console.error("Error message:",C.message),new Error(`Failed to create user profile: ${C.message}`)}await new Promise(C=>setTimeout(C,500));const M=await Yt(D);if(M.exists()?console.log("auth.js: Verified user document exists:",M.data()):console.error("auth.js: WARNING - User document not found after creation!"),u==="doctor"&&f.invitationCode){console.log("auth.js: Processing invitation code...");try{await my(f.invitationCode,x.uid),console.log("auth.js: Doctor linked to hospital via invitation code")}catch(C){console.error("auth.js: Error using invitation code:",C)}}return console.log("auth.js: Registration complete, returning userData"),A}catch(g){throw console.error("Registration Error:",g),g}},Ay=async(s,r)=>{if(!s||!r)throw new Error("Email/Phone and password are required");const c=String(s).trim().toLowerCase(),u=/^[\d\s\-\+\(\)]+$/.test(c.replace(/\s/g,""));let f=c;if(u)f=`patient_${c.replace(/\D/g,"")}@docsapp.local`,console.log("Phone login detected, using email:",f);else if(!c.includes("@")||c.length<3)throw new Error("Please enter a valid email address or phone number");try{return(await kg(Pi,f,r)).user}catch(y){throw console.error("Login Error:",y),y}},Dy=async()=>Ng(Pi),Ty=async s=>{try{const r={url:window.location.origin+"/login",handleCodeInApp:!1};return console.log("========================================"),console.log("PASSWORD RESET DIAGNOSTIC INFO:"),console.log("Email to reset:",s),console.log("Firebase Auth Domain:",Pi.config.authDomain),console.log("Firebase Project ID:",Pi.config.apiKey.includes("mock")?"MOCK PROJECT":"Real Project"),console.log("Redirect URL:",r.url),console.log("Current User:",Pi.currentUser?.email||"Not logged in"),console.log("========================================"),console.log("Attempting to send password reset email to:",s),await Eg(Pi,s,r),console.log("========================================"),console.log(" SUCCESS: Password reset email sent"),console.log("From: noreply@"+Pi.config.authDomain),console.log("To:",s),console.log("Action: Check spam folder and wait 2-5 minutes"),console.log("========================================"),{success:!0,message:"Password reset email sent successfully"}}catch(r){console.error("========================================"),console.error(" ERROR: Password reset failed"),console.error("Error code:",r.code),console.error("Error message:",r.message),console.error("Full error:",r),console.error("========================================");let c="Failed to send password reset email.";throw r.code==="auth/user-not-found"?c="No account found with this email address.":r.code==="auth/invalid-email"?c="Invalid email address format.":r.code==="auth/too-many-requests"?c="Too many attempts. Please try again later.":(r.code==="auth/missing-android-pkg-name"||r.code==="auth/missing-continue-uri"||r.code==="auth/missing-ios-bundle-id"||r.code==="auth/invalid-continue-uri"||r.code==="auth/unauthorized-continue-uri")&&(c="Configuration error. Please contact support."),new Error(c)}},zy=()=>{const[s,r]=b.useState(""),[c,u]=b.useState(""),[f,y]=b.useState(""),[g,x]=b.useState(""),[j,D]=b.useState(!1),[A,M]=b.useState(""),[C,oe]=b.useState(!1),[R,pe]=b.useState(""),[_,ce]=b.useState(!1),[N,ie]=b.useState(!1),w=Il(),ke=fg();b.useEffect(()=>{ke.state?.message&&(x(ke.state.message),window.history.replaceState({},document.title))},[ke]);const pt=async Ae=>{Ae.preventDefault(),ie(!0),y("");try{await Ay(s.trim(),c),w("/dashboard")}catch{y("Failed to login. Please check your credentials.")}finally{ie(!1)}},mt=async Ae=>{Ae.preventDefault(),oe(!0),pe(""),y("");try{console.log("Requesting password reset for:",A.trim()),await Ty(A.trim()),pe("Password reset email sent! Check your inbox and spam folder."),M(""),setTimeout(()=>{D(!1),pe("")},5e3)}catch(Y){console.error("Password reset error:",Y),y(Y.message||"Failed to send reset email.")}finally{oe(!1)}},P={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},card:{background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxWidth:"440px",width:"100%",overflow:"hidden",animation:"slideUp 0.5s ease-out"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2.5rem) clamp(1.25rem, 4vw, 2rem)",textAlign:"center",color:"white"},title:{margin:0,fontSize:"clamp(1.5rem, 5vw, 2rem)",fontWeight:"700",marginBottom:"0.5rem",letterSpacing:"-0.5px"},subtitle:{margin:0,fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",opacity:.95,fontWeight:"400"},body:{padding:"clamp(1.25rem, 4vw, 2rem)"},alert:{padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",animation:"fadeIn 0.3s ease-out",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},successAlert:{background:"#d1f4e0",color:"#0d6832",border:"1px solid #a7e9c3"},errorAlert:{background:"#fee",color:"#c81e1e",border:"1px solid #fcc"},infoBox:{background:"#f0f4ff",padding:"clamp(0.75rem, 2vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",color:"#4a5568",textAlign:"center",border:"1px solid #d6e0ff",lineHeight:"1.5"},form:{display:"flex",flexDirection:"column",gap:"clamp(1rem, 3vw, 1.25rem)"},inputGroup:{position:"relative"},label:{display:"block",marginBottom:"0.5rem",fontSize:"clamp(0.85rem, 2.5vw, 0.9rem)",fontWeight:"600",color:"#374151"},input:{width:"100%",padding:"clamp(0.7rem, 2vw, 0.875rem) clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",border:"2px solid #e5e7eb",borderRadius:"12px",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},passwordWrapper:{position:"relative"},eyeButton:{position:"absolute",right:"clamp(0.75rem, 2vw, 1rem)",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"clamp(1.1rem, 3vw, 1.25rem)",color:"#6b7280",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},forgotLink:{textAlign:"right",marginTop:"-0.5rem"},linkButton:{background:"none",border:"none",color:"#667eea",cursor:"pointer",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)",fontWeight:"600",textDecoration:"none",padding:0},submitButton:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",fontSize:"clamp(0.95rem, 3vw, 1rem)",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",marginTop:"0.5rem"},submitButtonDisabled:{opacity:.6,cursor:"not-allowed",transform:"none"},divider:{display:"flex",alignItems:"center",textAlign:"center",margin:"clamp(1rem, 3vw, 1.5rem) 0",color:"#9ca3af",fontSize:"clamp(0.8rem, 2.5vw, 0.9rem)"},dividerLine:{flex:1,height:"1px",background:"#e5e7eb"},dividerText:{padding:"0 clamp(0.75rem, 2vw, 1rem)"},registerLink:{textAlign:"center",color:"#6b7280",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)"},link:{color:"#667eea",fontWeight:"600",textDecoration:"none"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"fadeIn 0.3s ease-out",backdropFilter:"blur(4px)"},modal:{background:"white",padding:"2rem",borderRadius:"20px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.4)",maxWidth:"440px",width:"90%",animation:"slideUp 0.3s ease-out"},modalTitle:{marginTop:0,fontSize:"1.75rem",fontWeight:"700",color:"#1f2937",marginBottom:"0.5rem"},modalText:{color:"#6b7280",fontSize:"0.95rem",marginBottom:"1.5rem",lineHeight:"1.6"},buttonGroup:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},primaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"},secondaryButton:{flex:1,padding:"0.875rem",fontSize:"1rem",fontWeight:"600",color:"#4b5563",background:"#f3f4f6",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease"}};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
                    @keyframes slideUp {
                        from {
                            opacity: 0;
                            transform: translateY(30px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    input:focus {
                        border-color: #667eea !important;
                        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
                    }
                    button:hover:not(:disabled) {
                        transform: translateY(-2px);
                    }
                    button:active:not(:disabled) {
                        transform: translateY(0);
                    }
                    a:hover {
                        text-decoration: underline;
                    }
                `}),t.jsxs("div",{style:P.container,children:[t.jsxs("div",{style:P.card,children:[t.jsxs("div",{style:P.header,children:[t.jsx("h1",{style:P.title,children:"Welcome Back"}),t.jsx("p",{style:P.subtitle,children:"Sign in to your account"})]}),t.jsxs("div",{style:P.body,children:[g&&t.jsxs("div",{style:{...P.alert,...P.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:g})]}),f&&t.jsxs("div",{style:{...P.alert,...P.errorAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("span",{children:f})]}),t.jsxs("div",{style:P.infoBox,children:[t.jsx("strong",{children:"For Doctors & Hospitals"}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:["Patients don't need to login. ",t.jsx(bi,{to:"/book",style:P.link,children:"Book appointment "})]})]}),t.jsxs("form",{onSubmit:pt,style:P.form,children:[t.jsxs("div",{style:P.inputGroup,children:[t.jsx("label",{style:P.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:s,onChange:Ae=>r(Ae.target.value),required:!0,style:P.input})]}),t.jsxs("div",{style:P.inputGroup,children:[t.jsx("label",{style:P.label,children:"Password"}),t.jsxs("div",{style:P.passwordWrapper,children:[t.jsx("input",{type:_?"text":"password",placeholder:"Enter your password",value:c,onChange:Ae=>u(Ae.target.value),required:!0,style:P.input}),t.jsx("button",{type:"button",onClick:()=>ce(!_),style:P.eyeButton,"aria-label":_?"Hide password":"Show password",children:_?"":""})]})]}),t.jsx("div",{style:P.forgotLink,children:t.jsx("button",{type:"button",onClick:()=>D(!0),style:P.linkButton,children:"Forgot Password?"})}),t.jsx("button",{type:"submit",style:{...P.submitButton,...N?P.submitButtonDisabled:{}},disabled:N,children:N?" Signing in...":"Sign In"})]}),t.jsxs("div",{style:P.divider,children:[t.jsx("div",{style:P.dividerLine}),t.jsx("span",{style:P.dividerText,children:"or"}),t.jsx("div",{style:P.dividerLine})]}),t.jsxs("div",{style:P.registerLink,children:["Don't have an account? ",t.jsx(bi,{to:"/register",style:P.link,children:"Create Account"})]})]})]}),j&&t.jsx("div",{style:P.modalOverlay,onClick:()=>D(!1),children:t.jsxs("div",{style:P.modal,onClick:Ae=>Ae.stopPropagation(),children:[t.jsx("h3",{style:P.modalTitle,children:"Reset Password"}),t.jsx("p",{style:P.modalText,children:"Enter your email address and we'll send you a link to reset your password."}),R&&t.jsxs("div",{style:{...P.alert,...P.successAlert},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"600"},children:"Email sent successfully!"}),t.jsx("small",{style:{display:"block",fontSize:"0.85rem",opacity:.9},children:" Check your spam folder if you don't see it within a few minutes"})]})]}),t.jsxs("form",{onSubmit:mt,style:P.form,children:[t.jsxs("div",{style:P.inputGroup,children:[t.jsx("label",{style:P.label,children:"Email Address"}),t.jsx("input",{type:"email",placeholder:"Enter your email",value:A,onChange:Ae=>M(Ae.target.value),required:!0,style:P.input})]}),t.jsxs("div",{style:P.buttonGroup,children:[t.jsx("button",{type:"submit",disabled:C,style:{...P.primaryButton,...C?P.submitButtonDisabled:{}},children:C?" Sending...":"Send Reset Link"}),t.jsx("button",{type:"button",onClick:()=>{D(!1),M(""),pe(""),y("")},style:P.secondaryButton,children:"Cancel"})]})]})]})})]})]})},ih=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo (Congo-Brazzaville)","Costa Rica","Croatia","Cuba","Cyprus","Czechia (Czech Republic)","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (fmr. 'Swaziland')","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],By={India:["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Puducherry","Jammu and Kashmir","Ladakh"],"United States of America":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],"United Kingdom":["England","Scotland","Wales","Northern Ireland"]},ah={India:{Maharashtra:["Mumbai","Pune","Nagpur","Nashik","Thane"],Karnataka:["Bengaluru","Mysore","Mangalore","Hubli"],Delhi:["New Delhi","Central Delhi","South Delhi","North Delhi"],"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli"]},"United States of America":{California:["Los Angeles","San Francisco","San Diego","Sacramento"],Texas:["Houston","Dallas","Austin","San Antonio"],"New York":["New York City","Buffalo","Rochester","Albany"]},"United Kingdom":{England:["London","Manchester","Birmingham","Leeds"],Scotland:["Edinburgh","Glasgow","Aberdeen"],Wales:["Cardiff","Swansea","Newport"],"Northern Ireland":["Belfast","Londonderry","Lisburn"]}};ah["United Arab Emirates"]={Dubai:["Dubai","Jumeirah","Deira","Al Quoz"],"Abu Dhabi":["Abu Dhabi","Al Ain","Mussafah"],Sharjah:["Sharjah","Khor Fakkan","Al Dhaid"],RasAlKhaimah:["Ras Al Khaimah","Digdaga"],Ajman:["Ajman"],Fujairah:["Fujairah"]};const Ry=(s,r)=>{if(!s||!r)return null;const c=_l[s.trim()]||s.trim(),u=ah[c];return u&&(u[r]||u[r.trim()])||null},ky={India:{Maharashtra:{Mumbai:["Mumbai City","Mumbai Suburban","Bandra","Andheri"],Pune:["Pune City","Pune Rural","Haveli","Shivajinagar"]},Karnataka:{Bengaluru:["Bengaluru Urban","Bengaluru Rural"]},Delhi:{"New Delhi":["Central Delhi","South Delhi","North Delhi"]}},"United States of America":{California:{"Los Angeles":["Los Angeles County"],"San Francisco":["San Francisco County"]},Texas:{Houston:["Harris County"],Dallas:["Dallas County"]}},"United Kingdom":{England:{London:["Greater London"],Manchester:["Greater Manchester"],Birmingham:["West Midlands"]}},"United Arab Emirates":{Dubai:{Dubai:["Deira","Bur Dubai","Jumeirah","Al Rigga"]},"Abu Dhabi":{"Abu Dhabi":["Al Zahiya","Mussafah","Khalifa City"]}}},Ey=s=>{if(!s)return"District / County";switch(_l[s.trim()]||s.trim()){case"India":return"District";case"United States of America":return"County";case"United Kingdom":return"County";case"United Arab Emirates":return"Area";default:return"District / County"}},_l={USA:"United States of America",US:"United States of America","United States":"United States of America","United Kingdom":"United Kingdom",UK:"United Kingdom","Great Britain":"United Kingdom",Britain:"United Kingdom",India:"India",IN:"India"};_l.UAE="United Arab Emirates";_l["United Arab Emirates"]="United Arab Emirates";const Ny=s=>{if(!s)return null;const c=_l[s.trim()]||s.trim();return By[c]||null},My=(s,r,c)=>{if(!s||!r||!c)return null;const u=_l[s.trim()]||s.trim(),f=ky[u];if(!f)return null;const y=f[r]||f[r.trim()];return y&&(y[c]||y[c.trim()])||null},lh=b.createContext(),Ia=()=>b.useContext(lh),Hy=({children:s})=>{const[r,c]=b.useState(null),[u,f]=b.useState(null),[y,g]=b.useState(!0);b.useEffect(()=>{let j=null;const D=Mg(Pi,A=>{if(console.log("AuthContext: onAuthStateChanged fired, user:",A?.uid),c(A),j&&(j(),j=null),A){console.log("AuthContext: Setting up profile listener for:",A.uid);const M=Ce(ve(V,"users"),le("uid","==",A.uid));j=Hg(M,C=>{if(C.empty)console.log("AuthContext: No profile document found yet (might be creating...)"),f(null);else{const oe=C.docs[0].data();console.log("AuthContext: Profile updated via snapshot:",oe),f(oe)}g(!1)},C=>{console.error("AuthContext: Profile snapshot error:",C),g(!1)})}else f(null),g(!1)});return()=>{D(),j&&j()}},[]);const x={currentUser:r,userProfile:u,isAuthenticated:!!r,loading:y};return t.jsx(lh.Provider,{value:x,children:y?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.5rem",background:"var(--bg-main, #f8fafc)",color:"var(--text-secondary, #64748b)"},children:"Loading..."}):s})},xn={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)",display:"flex",alignItems:"center",justifyContent:"center"},card:{maxWidth:"500px",width:"100%",background:"white",borderRadius:"clamp(15px, 3vw, 20px)",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",overflow:"hidden"},header:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1.5rem, 4vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1.25rem, 4vw, 2rem)"},input:{width:"100%",padding:"clamp(0.6rem, 2vw, 0.75rem)",border:"2px solid #e0e0e0",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",transition:"all 0.3s ease",boxSizing:"border-box"},select:{width:"100%",padding:"clamp(0.6rem, 2vw, 0.75rem)",border:"2px solid #e0e0e0",borderRadius:"10px",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",transition:"all 0.3s ease",boxSizing:"border-box",backgroundColor:"white"},button:{width:"100%",padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"none",borderRadius:"10px",fontSize:"clamp(0.95rem, 3vw, 1.1rem)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},infoBox:{padding:"clamp(0.75rem, 2.5vw, 1rem)",borderRadius:"12px",marginBottom:"clamp(1rem, 3vw, 1.5rem)",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",fontSize:"clamp(0.8rem, 2.5vw, 0.95rem)",lineHeight:"1.5"},roleCard:{padding:"clamp(0.85rem, 2.5vw, 1rem)",border:"2px solid #e0e0e0",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"clamp(0.75rem, 2vw, 1rem)",marginBottom:"0.75rem"}},Uy=()=>{const[s,r]=b.useState({email:"",password:"",confirmPassword:"",name:"",role:"doctor"}),[c,u]=b.useState(""),[f,y]=b.useState(!1),[g,x]=b.useState(!1),j=Il(),{isAuthenticated:D}=Ia();b.useEffect(()=>{D&&j("/dashboard",{replace:!0})},[D,j]);const A=C=>{r({...s,[C.target.name]:C.target.value})},M=async C=>{C.preventDefault(),y(!0),u("");const{email:oe,password:R,confirmPassword:pe,name:_,role:ce}=s;if(!oe||!R||!pe||!_||!ce){u("All fields are required"),y(!1);return}if(R!==pe){u("Passwords do not match"),y(!1);return}try{console.log("Register.jsx: Starting registration...");const N={};(ce==="doctor"||ce==="hospital")&&(N.country=s.country||"",N.state=s.state||"",N.city=s.city||"",N.district=s.district||"",N.address=s.address||"");const ie=await nh(oe.trim(),R,_,ce,N);console.log("Register.jsx: Registration completed successfully!",ie),console.log("Register.jsx: Navigating to dashboard...");try{j("/dashboard",{replace:!0})}catch(w){console.warn("Register.jsx: navigate failed, falling back to hard redirect.",w),window.location.replace("/dashboard")}x(!0)}catch(N){console.error("Register.jsx: Registration error:",N);let ie="Failed to register.";N.code==="auth/email-already-in-use"?ie="This email is already registered. Please login instead or use a different email.":N.code==="auth/weak-password"?ie="Password should be at least 6 characters.":N.code==="auth/invalid-email"?ie="Invalid email address format.":N.message&&(ie=N.message),u(ie)}finally{y(!1)}};return t.jsx("div",{style:xn.container,children:t.jsxs("div",{style:xn.card,children:[t.jsxs("div",{style:xn.header,children:[t.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700"},children:" Provider Registration"}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:"Join our healthcare network"})]}),t.jsxs("div",{style:xn.content,children:[t.jsxs("div",{style:{...xn.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[t.jsx("strong",{children:"For Healthcare Providers Only"}),t.jsx("br",{}),"Patients don't need to register.",t.jsx(bi,{to:"/book",style:{color:"#1565c0",fontWeight:"600",marginLeft:"0.25rem"},children:"Book appointment directly "})]})]}),c&&t.jsxs("div",{style:{...xn.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24",border:"2px solid #f5c6cb"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[c,c.includes("already registered")&&t.jsx("div",{style:{marginTop:"0.5rem"},children:t.jsx(bi,{to:"/login",style:{color:"#721c24",fontWeight:"600",textDecoration:"underline"},children:"Go to Login "})})]})]}),g&&t.jsxs("div",{style:{...xn.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:["Registration successful! Redirecting...",t.jsx(bi,{to:"/dashboard",style:{color:"#155724",fontWeight:"600",marginLeft:"0.5rem"},children:"Go to Dashboard "})]})]}),t.jsxs("form",{onSubmit:M,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Full Name *"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter your full name",required:!0,value:s.name,onChange:A,style:xn.input,onFocus:C=>C.target.style.borderColor="#667eea",onBlur:C=>C.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"I am registering as: *"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsxs("div",{style:{...xn.roleCard,borderColor:s.role==="doctor"?"#667eea":"#e0e0e0",background:s.role==="doctor"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:s.role==="doctor"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>r({...s,role:"doctor"}),onMouseEnter:C=>{s.role!=="doctor"&&(C.currentTarget.style.borderColor="#667eea",C.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:C=>{s.role!=="doctor"&&(C.currentTarget.style.borderColor="#e0e0e0",C.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"doctor",checked:s.role==="doctor",onChange:A,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Doctor"})]})]}),t.jsxs("div",{style:{...xn.roleCard,borderColor:s.role==="hospital"?"#667eea":"#e0e0e0",background:s.role==="hospital"?"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)":"white",boxShadow:s.role==="hospital"?"0 4px 15px rgba(102, 126, 234, 0.2)":"none"},onClick:()=>r({...s,role:"hospital"}),onMouseEnter:C=>{s.role!=="hospital"&&(C.currentTarget.style.borderColor="#667eea",C.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:C=>{s.role!=="hospital"&&(C.currentTarget.style.borderColor="#e0e0e0",C.currentTarget.style.transform="translateY(0)")},children:[t.jsx("input",{type:"radio",name:"role",value:"hospital",checked:s.role==="hospital",onChange:A,style:{width:"20px",height:"20px",cursor:"pointer"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:""}),t.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:"Hospital"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Email Address *"}),t.jsx("input",{name:"email",type:"email",placeholder:"your.email@example.com",required:!0,value:s.email,onChange:A,style:xn.input,onFocus:C=>C.target.style.borderColor="#667eea",onBlur:C=>C.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Password *"}),t.jsx("input",{name:"password",type:"password",placeholder:"At least 6 characters",required:!0,value:s.password,onChange:A,style:xn.input,onFocus:C=>C.target.style.borderColor="#667eea",onBlur:C=>C.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Confirm Password *"}),t.jsx("input",{name:"confirmPassword",type:"password",placeholder:"Re-enter your password",required:!0,value:s.confirmPassword,onChange:A,style:xn.input,onFocus:C=>C.target.style.borderColor="#667eea",onBlur:C=>C.target.style.borderColor="#e0e0e0"})]}),(s.role==="doctor"||s.role==="hospital")&&t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Country"}),t.jsxs("select",{name:"country",value:s.country||"",onChange:A,required:s.role==="doctor"||s.role==="hospital",style:xn.select,children:[t.jsx("option",{value:"",children:"Select Country"}),ih.map(C=>t.jsx("option",{value:C,children:C},C))]}),(()=>{const C=Ny(s.country);return C&&C.length?t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"State / Province"}),t.jsxs("select",{name:"state",value:s.state||"",onChange:A,required:!0,style:xn.select,children:[t.jsx("option",{value:"",children:"Select State / Province"}),C.map(oe=>t.jsx("option",{value:oe,children:oe},oe))]})]}):t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"State / Province"}),t.jsx("input",{name:"state",type:"text",placeholder:"State / Province",value:s.state||"",onChange:A,style:xn.input})]})})(),(()=>{const C=Ry(s.country,s.state);return C&&C.length?t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"City / District"}),t.jsxs("select",{name:"city",value:s.city||"",onChange:A,required:!0,style:xn.select,children:[t.jsx("option",{value:"",children:"Select City / District"}),C.map(oe=>t.jsx("option",{value:oe,children:oe},oe))]})]}):t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"City"}),t.jsx("input",{name:"city",type:"text",placeholder:"City",value:s.city||"",onChange:A,style:xn.input})]})})(),(()=>{const C=My(s.country,s.state,s.city);if(C&&C.length){const oe=Ey(s.country);return t.jsxs(t.Fragment,{children:[t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:oe}),t.jsxs("select",{name:"district",value:s.district||"",onChange:A,required:!0,style:xn.select,children:[t.jsxs("option",{value:"",children:["Select ",oe]}),C.map(R=>t.jsx("option",{value:R,children:R},R))]})]})}return null})(),t.jsx("label",{style:{display:"block",marginTop:"0.75rem",marginBottom:"0.5rem",fontWeight:"600",color:"#333",fontSize:"0.95rem"},children:"Address (optional)"}),t.jsx("input",{name:"address",type:"text",placeholder:"Clinic / Hospital Address",value:s.address||"",onChange:A,style:xn.input})]}),t.jsx("button",{type:"submit",disabled:f,style:{...xn.button,opacity:f?.7:1,cursor:f?"not-allowed":"pointer"},onMouseEnter:C=>{f||(C.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)"},children:f?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Registering..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Create Account"]})})]}),t.jsxs("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid #f0f0f0",textAlign:"center"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Already have an account?"}),t.jsx(bi,{to:"/login",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Login here "})]})]})]})})},Oy="modulepreload",Ly=function(s){return"/"+s},Vm={},_s=function(r,c,u){let f=Promise.resolve();if(c&&c.length>0){let j=function(D){return Promise.all(D.map(A=>Promise.resolve(A).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=g?.nonce||g?.getAttribute("nonce");f=j(c.map(D=>{if(D=Ly(D),D in Vm)return;Vm[D]=!0;const A=D.endsWith(".css"),M=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${D}"]${M}`))return;const C=document.createElement("link");if(C.rel=A?"stylesheet":Oy,A||(C.as="script"),C.crossOrigin="",C.href=D,x&&C.setAttribute("nonce",x),document.head.appendChild(C),A)return new Promise((oe,R)=>{C.addEventListener("load",oe),C.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${D}`)))})}))}function y(g){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=g,window.dispatchEvent(x),!x.defaultPrevented)throw g}return f.then(g=>{for(const x of g||[])x.status==="rejected"&&y(x.reason);return r().catch(y)})},an=({size:s=20,style:r={},className:c="",ariaHidden:u=!0,...f})=>t.jsxs("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":u?"true":void 0,focusable:"false",className:c,style:{display:"block",verticalAlign:"middle",...r},...f,children:[t.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),t.jsx("path",{d:"M16 3v4M8 3v4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M7 11h10M7 15h10",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),ko=(s,r)=>{if(!r||!r.rates)return{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2};const u=s&&(s.toLowerCase()==="india"||s.toLowerCase()==="in")?"INR":"GBP",f=r.rates[u];return f||{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},Py=s=>({INR:"",GBP:"",USD:"$",EUR:""})[s]||s,Ll=(s,r)=>{if(s.customRates&&s.customRates.appointmentCost)return{...s.customRates,currency:s.customRates.currency||s.currency||"USD",symbol:Py(s.customRates.currency||s.currency||"USD")};const c=s.country||"default";return ko(c,r)},Iy=async(s,r)=>{try{const c=ve(V,"healthRecords"),u=Ce(c,le("patientId","==",s),le("doctorId","==",r),ca("createdAt","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching health records:",c),c}},_y=async(s,r)=>{try{const c=ve(V,"prescriptions"),u=Ce(c,le("patientId","==",s),le("doctorId","==",r),ca("createdAt","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching prescriptions:",c),c}},qy=async(s,r)=>{try{const c=ve(V,"appointments"),u=Ce(c,le("patientId","==",s),le("doctorId","==",r),ca("date","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data()}))}catch(c){throw console.error("Error fetching patient appointments:",c),c}},Gy=async(s,r,c,u=null)=>{try{const f=ve(V,"healthRecords"),y={patientId:s,doctorId:r,...c,createdAt:Ls.now(),updatedAt:Ls.now()};return u&&(y.hospitalId=u),(await ua(f,y)).id}catch(f){throw console.error("Error adding health record:",f),f}},Wy=async(s,r)=>{try{return(await ec(nc,"generateHealthSummary")({patientId:s,doctorId:r})).data}catch(c){throw console.error("Error generating health summary:",c),c}},Yy=async(s,r)=>{try{const c=ve(V,"healthSummaries"),u=Ce(c,le("patientId","==",s),le("doctorId","==",r),ca("generatedAt","desc")),f=await Oe(u);if(!f.empty){const y=f.docs[0],g=y.data(),x=g.generatedAt?.toDate?.()||new Date,j=new Date(Date.now()-3600*1e3);if(x>j)return{id:y.id,...g,generatedAt:x}}return null}catch(c){return console.error("Error fetching cached summary:",c),null}},Fy=async(s,r)=>{try{const[c,u,f]=await Promise.all([Iy(s,r),_y(s,r),qy(s,r)]);return{healthRecords:c,prescriptions:u,appointments:f}}catch(c){throw console.error("Error fetching comprehensive patient data:",c),c}},Vy=async(s,r)=>{try{console.log(" Searching hospital patients:",{searchTerm:s,hospitalId:r});const c=s.toLowerCase().trim(),u=ve(V,"appointments"),f=Ce(u,le("hospitalId","==",r)),y=await Oe(f);console.log(` Found ${y.size} appointments for hospital`);const g=new Map;y.forEach(j=>{const D=j.data(),A=(D.patientName||D.name||"").toLowerCase(),M=D.patientPhone||D.userPhone||D.phone||"",C=D.patientEmail||D.email||"",oe=(D.id||j.id).toLowerCase(),R=D.patientId||D.userId||D.patientUid||D.patient_id||D.user_id||M||D.patientEmail||oe,pe=A.includes(c)||M.includes(c)||oe.includes(c);if(console.log("Checking appointment:",{patientName:A,patientPhone:M,patientId:R,matchesSearch:pe,bookingNumber:oe}),pe)if(!g.has(R))g.set(R,{id:R,name:D.patientName||D.name||"Unknown",phone:M,email:C,lastAppointment:D.date,bookingNumber:j.id,totalAppointments:1,lastDoctorId:D.doctorId,lastDoctorName:D.doctorName||"Unknown"});else{const _=g.get(R);_.totalAppointments+=1,D.date>_.lastAppointment&&(_.lastAppointment=D.date,_.bookingNumber=j.id,_.lastDoctorId=D.doctorId,_.lastDoctorName=D.doctorName||"Unknown")}});const x=Array.from(g.values());return console.log(` Found ${x.length} unique patients matching search`),x}catch(c){throw console.error(" Error searching hospital patients:",c),c}},Qy=async(s,r)=>{try{const c=ve(V,"healthRecords"),u=Ce(c,le("patientId","==",s),le("hospitalId","==",r),ca("createdAt","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching hospital patient health records:",c),c}},Xy=async(s,r)=>{try{const c=ve(V,"prescriptions"),u=Ce(c,le("patientId","==",s),le("hospitalId","==",r),ca("createdAt","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt?.toDate?.()||new Date}))}catch(c){throw console.error("Error fetching hospital patient prescriptions:",c),c}},Zy=async(s,r)=>{try{const c=ve(V,"appointments"),u=Ce(c,le("patientId","==",s),le("hospitalId","==",r),ca("date","desc"));return(await Oe(u)).docs.map(y=>({id:y.id,...y.data()}))}catch(c){throw console.error("Error fetching hospital patient appointments:",c),c}},Ky=async(s,r)=>{try{const[c,u,f]=await Promise.all([Qy(s,r),Xy(s,r),Zy(s,r)]);return{healthRecords:c,prescriptions:u,appointments:f}}catch(c){throw console.error("Error fetching comprehensive hospital patient data:",c),c}},Jy=async(s,r,c,u)=>{try{const f=[],y=ve(V,"healthRecords"),g=Ce(y,le("patientId","==",s),le("doctorId","==",r),le("hospitalId","==",u)),x=await Oe(g),j=ve(V,"prescriptions"),D=Ce(j,le("patientId","==",s),le("doctorId","==",r),le("hospitalId","==",u)),A=await Oe(D),M=x.docs.map(async oe=>{const R=Re(V,"healthRecords",oe.id);await Wt(R,{doctorId:c,transferredFrom:r,transferredAt:Ls.now()})}),C=A.docs.map(async oe=>{const R=Re(V,"prescriptions",oe.id);await Wt(R,{doctorId:c,transferredFrom:r,transferredAt:Ls.now()})});return await Promise.all([...M,...C]),{success:!0,recordsTransferred:x.size,prescriptionsTransferred:A.size}}catch(f){throw console.error("Error transferring patient records:",f),f}},$y=async s=>{const r=Re(V,"patients",s),c=await Yt(r);return c.exists()?{id:c.id,...c.data()}:null},ex=async s=>{s.replace(/[^\d]/g,"");const r=Ce(ve(V,"patients"),le("phone","==",s)),c=await Oe(r);if(!c.empty){const u=c.docs[0];return{id:u.id,...u.data()}}return null},tx=async s=>{try{console.log(" Fetching patient details for ID:",s);let r=await $y(s);if(r||(console.log(" Patient not found by ID, trying phone search..."),r=await ex(s)),!r)return console.warn(" Patient not found by ID or phone:",s),{id:s,name:"Unknown Patient",phone:s,appointments:[],prescriptions:[]};console.log(" Patient found:",r);const c=r.phone||s;console.log(" Searching by phone:",c);const u=Ce(ve(V,"appointments"),le("patientPhone","==",c)),y=(await Oe(u)).docs.map(D=>({id:D.id,...D.data()})).sort((D,A)=>{const M=D.date?new Date(D.date):new Date(0);return(A.date?new Date(A.date):new Date(0))-M});console.log(` Found ${y.length} appointments`);const g=Ce(ve(V,"prescriptions"),le("patientPhone","==",c)),j=(await Oe(g)).docs.map(D=>({id:D.id,...D.data()})).sort((D,A)=>{const M=D.createdAt?new Date(D.createdAt):new Date(0);return(A.createdAt?new Date(A.createdAt):new Date(0))-M});return console.log(` Found ${j.length} prescriptions`),{...r,appointments:y,prescriptions:j}}catch(r){throw console.error(" Error in getPatientDetails:",r),r}},nx=async s=>{const r=ve(V,"patients"),c=await Oe(r),u=s.toLowerCase();return c.docs.map(y=>({id:y.id,...y.data()})).filter(y=>y.name?.toLowerCase().includes(u)||y.phone?.includes(s)||y.dob?.includes(s))},ix=({patientId:s,doctorId:r,doctorName:c,appointment:u=null,onClose:f})=>{const[y,g]=b.useState("overview"),[x,j]=b.useState(null),[D,A]=b.useState(!0),[M,C]=b.useState(!1),[oe,R]=b.useState(!!u),[pe,_]=b.useState(null),[ce,N]=b.useState({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""}),[ie,w]=b.useState({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),ke=b.useRef(null),[pt,mt]=b.useState(!1),[P,Ae]=b.useState([]),[Y,$e]=b.useState("#000000"),[ue,Qe]=b.useState(2),[ht,at]=b.useState(!1),[q,se]=b.useState(""),me=b.useRef(null);b.useEffect(()=>{Fe(),Ze()},[s]);const Fe=async()=>{try{if(A(!0),console.log(" Loading patient data for ID:",s),!s)throw new Error("Patient ID is required");const k=await tx(s);if(console.log(" Patient data loaded:",k),!k)throw new Error("Patient not found");j(k)}catch(k){console.error(" Error loading patient data:",k),ye("Error loading patient data: "+k.message,"error"),j({id:s,name:"Unknown Patient",phone:"N/A",appointments:[],prescriptions:[],visits:[]})}finally{A(!1)}},Ze=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const k=window.SpeechRecognition||window.webkitSpeechRecognition;me.current=new k,me.current.continuous=!0,me.current.interimResults=!0,me.current.lang="en-US",me.current.onresult=Te=>{let fe="";for(let Ve=Te.resultIndex;Ve<Te.results.length;Ve++){const qe=Te.results[Ve][0].transcript;Te.results[Ve].isFinal&&(fe+=qe+" ")}se(Ve=>Ve+fe)},me.current.onerror=Te=>{console.error("Speech recognition error:",Te.error),at(!1)}}},gt=()=>{ht?(me.current?.stop(),at(!1)):(se(""),me.current?.start(),at(!0))},ye=(k,Te="success")=>{_({message:k,type:Te}),setTimeout(()=>_(null),3e3)},_e=k=>{const Te=ke.current,fe=Te.getContext("2d"),Ve=Te.getBoundingClientRect(),qe=(k.clientX||k.touches?.[0]?.clientX)-Ve.left,kn=(k.clientY||k.touches?.[0]?.clientY)-Ve.top;fe.beginPath(),fe.moveTo(qe,kn),mt(!0),Ae(re=>[...re,Te.toDataURL()])},yt=k=>{if(!pt)return;const Te=ke.current,fe=Te.getContext("2d"),Ve=Te.getBoundingClientRect(),qe=(k.clientX||k.touches?.[0]?.clientX)-Ve.left,kn=(k.clientY||k.touches?.[0]?.clientY)-Ve.top;fe.lineTo(qe,kn),fe.strokeStyle=Y,fe.lineWidth=ue,fe.lineCap="round",fe.lineJoin="round",fe.stroke()},kt=()=>{mt(!1)},Ke=()=>{const k=ke.current;k.getContext("2d").clearRect(0,0,k.width,k.height),Ae([])},bn=()=>{if(P.length>0){const k=ke.current,Te=k.getContext("2d"),fe=P[P.length-1],Ve=new Image;Ve.src=fe,Ve.onload=()=>{Te.clearRect(0,0,k.width,k.height),Te.drawImage(Ve,0,0)},Ae(qe=>qe.slice(0,-1))}},Ft=()=>{w(k=>({...k,medicines:[...k.medicines,{name:"",dosage:"",frequency:"",duration:"",instructions:""}]}))},pn=k=>{w(Te=>({...Te,medicines:Te.medicines.filter((fe,Ve)=>Ve!==k)}))},vt=(k,Te,fe)=>{w(Ve=>({...Ve,medicines:Ve.medicines.map((qe,kn)=>kn===k?{...qe,[Te]:fe}:qe)}))},ln=async()=>{try{await wy(s,r,ce),ye("Visit record saved successfully!"),C(!1),Fe(),N({chiefComplaint:"",diagnosis:"",vitals:{bloodPressure:"",temperature:"",pulse:"",weight:"",height:"",oxygenSaturation:""},notes:"",followUpDate:""})}catch(k){ye("Error saving visit: "+k.message,"error")}},Tt=async()=>{try{let k={...ie,doctorName:c,handwrittenImage:ie.inputMethod==="draw"?ke.current?.toDataURL():null,voiceTranscript:ie.inputMethod==="voice"?q:null};await Cy(s,r,k),ye("Prescription saved successfully!"),R(!1),Fe(),w({medicines:[{name:"",dosage:"",frequency:"",duration:"",instructions:""}],diagnosis:"",additionalNotes:"",inputMethod:"type"}),se(""),ke.current&&Ke()}catch(k){ye("Error saving prescription: "+k.message,"error")}},Et=k=>{const Te=window.open("","","width=800,height=600"),fe=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Prescription</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; }
          .header { text-align: center; border-bottom: 2px solid #11998e; padding-bottom: 20px; margin-bottom: 20px; }
          .header h1 { color: #11998e; margin: 0; }
          .patient-info, .prescription-info { margin: 20px 0; }
          .label { font-weight: bold; color: #666; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
          th { background-color: #11998e; color: white; }
          .footer { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; }
          .signature { margin-top: 60px; }
          .handwritten-image { max-width: 100%; border: 1px solid #ddd; margin: 20px 0; }
          @media print {
            body { margin: 0; }
            button { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1> Medical Prescription</h1>
          <p><strong>Dr. ${c}</strong></p>
          <p>Date: ${new Date(k.date).toLocaleDateString()}</p>
        </div>
        
        <div class="patient-info">
          <h3>Patient Information</h3>
          <p><span class="label">Name:</span> ${x.name}</p>
          <p><span class="label">Age:</span> ${x.age||"N/A"}</p>
          <p><span class="label">Gender:</span> ${x.gender||"N/A"}</p>
          <p><span class="label">Contact:</span> ${x.phone||x.email}</p>
        </div>
        
        <div class="prescription-info">
          <h3>Diagnosis</h3>
          <p>${k.diagnosis||"N/A"}</p>
        </div>
        
        ${k.handwrittenImage?`
          <div>
            <h3>Handwritten Prescription</h3>
            <img src="${k.handwrittenImage}" class="handwritten-image" alt="Handwritten Prescription" />
          </div>
        `:""}
        
        ${k.medicines&&k.medicines.length>0?`
          <div>
            <h3>Medications</h3>
            <table>
              <thead>
                <tr>
                  <th>Medicine</th>
                  <th>Dosage</th>
                  <th>Frequency</th>
                  <th>Duration</th>
                  <th>Instructions</th>
                </tr>
              </thead>
              <tbody>
                ${k.medicines.map(Ve=>`
                  <tr>
                    <td>${Ve.name}</td>
                    <td>${Ve.dosage}</td>
                    <td>${Ve.frequency}</td>
                    <td>${Ve.duration}</td>
                    <td>${Ve.instructions}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        `:""}
        
        ${k.additionalNotes?`
          <div>
            <h3>Additional Notes</h3>
            <p>${k.additionalNotes}</p>
          </div>
        `:""}
        
        ${k.voiceTranscript?`
          <div>
            <h3>Voice Notes</h3>
            <p>${k.voiceTranscript}</p>
          </div>
        `:""}
        
        <div class="footer">
          <div class="signature">
            <p>___________________________</p>
            <p><strong>Dr. ${c}</strong></p>
            <p>Digital Signature</p>
          </div>
        </div>
        
        <button onclick="window.print()" style="background: #11998e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Print Prescription</button>
      </body>
      </html>
    `;Te.document.write(fe),Te.document.close()};return D?t.jsx("div",{style:K.modalOverlay,children:t.jsx("div",{style:K.modal,children:t.jsx("div",{style:K.loadingSpinner,children:"Loading patient data..."})})}):x?t.jsx("div",{style:K.modalOverlay,onClick:f,children:t.jsxs("div",{style:K.modal,onClick:k=>k.stopPropagation(),children:[pe&&t.jsx("div",{style:{...K.notification,background:pe.type==="error"?"#ff4444":"#11998e"},children:pe.message}),t.jsxs("div",{style:K.modalHeader,children:[t.jsxs("div",{children:[t.jsxs("h2",{style:K.modalTitle,children:["Patient Record: ",x.name]}),t.jsxs("p",{style:K.modalSubtitle,children:["Age: ",x.age||"N/A"," | Gender: ",x.gender||"N/A"," | Blood Type: ",x.healthRecords?.bloodType||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:K.primaryButton,onClick:()=>C(!0),children:" Add Visit"}),t.jsx("button",{style:K.primaryButton,onClick:()=>R(!0),children:" New Prescription"}),t.jsx("button",{style:K.closeButton,onClick:f,children:""})]})]}),u&&t.jsxs("div",{style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",margin:"0 1.5rem 1rem 1.5rem",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",marginBottom:"0.25rem"},children:" Active Consultation"}),t.jsxs("div",{style:{fontSize:"0.95rem",opacity:.9},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",u.date," |  ",u.timeSlot||u.time]})]}),t.jsx("button",{onClick:()=>R(!0),style:{padding:"0.75rem 1.5rem",background:"white",color:"#667eea",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",transition:"transform 0.2s"},onMouseOver:k=>k.currentTarget.style.transform="scale(1.05)",onMouseOut:k=>k.currentTarget.style.transform="scale(1)",children:" Add Prescription Now"})]}),t.jsx("div",{style:K.tabs,children:["overview","prescriptions","visits","health"].map(k=>t.jsx("button",{style:{...K.tab,...y===k?K.activeTab:{}},onClick:()=>g(k),children:k.charAt(0).toUpperCase()+k.slice(1)},k))}),t.jsxs("div",{style:K.modalBody,children:[y==="overview"&&t.jsxs("div",{children:[t.jsxs("div",{style:K.section,children:[t.jsx("h3",{style:K.sectionTitle,children:" Patient Information"}),t.jsxs("div",{style:K.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",x.email]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",x.phone||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",x.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",x.healthRecords?.bloodType||"N/A"]})]})]}),t.jsxs("div",{style:K.section,children:[t.jsx("h3",{style:K.sectionTitle,children:" Recent Vitals"}),x.visits&&x.visits[0]?.vitals?t.jsxs("div",{style:K.vitalsGrid,children:[t.jsxs("div",{style:K.vitalCard,children:[t.jsx("div",{style:K.vitalLabel,children:"Blood Pressure"}),t.jsx("div",{style:K.vitalValue,children:x.visits[0].vitals.bloodPressure})]}),t.jsxs("div",{style:K.vitalCard,children:[t.jsx("div",{style:K.vitalLabel,children:"Temperature"}),t.jsx("div",{style:K.vitalValue,children:x.visits[0].vitals.temperature})]}),t.jsxs("div",{style:K.vitalCard,children:[t.jsx("div",{style:K.vitalLabel,children:"Pulse"}),t.jsx("div",{style:K.vitalValue,children:x.visits[0].vitals.pulse})]}),t.jsxs("div",{style:K.vitalCard,children:[t.jsx("div",{style:K.vitalLabel,children:"Weight"}),t.jsx("div",{style:K.vitalValue,children:x.visits[0].vitals.weight})]})]}):t.jsx("p",{style:K.noData,children:"No vital signs recorded yet"})]}),t.jsxs("div",{style:K.section,children:[t.jsx("h3",{style:K.sectionTitle,children:" Allergies & Conditions"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Allergies:"})," ",x.healthRecords?.allergies?.join(", ")||"None recorded"]}),t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",x.healthRecords?.chronicConditions?.join(", ")||"None recorded"]})]})]}),y==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:K.sectionTitle,children:" Prescription History"}),x.prescriptions&&x.prescriptions.length>0?x.prescriptions.map((k,Te)=>t.jsxs("div",{style:K.prescriptionCard,children:[t.jsxs("div",{style:K.prescriptionHeader,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString(),t.jsx("br",{}),t.jsx("strong",{children:"Doctor:"})," ",k.doctorName||"N/A"]}),t.jsx("button",{style:K.printButton,onClick:()=>Et(k),children:" Print"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.medicines&&k.medicines.length>0&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Medicines:"}),t.jsx("ul",{style:K.medicineList,children:k.medicines.map((fe,Ve)=>t.jsxs("li",{children:[fe.name," - ",fe.dosage," (",fe.frequency,") for ",fe.duration,fe.instructions&&` - ${fe.instructions}`]},Ve))})]}),k.handwrittenImage&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Handwritten Notes:"}),t.jsx("img",{src:k.handwrittenImage,style:K.handwrittenPreview,alt:"Handwritten"})]}),k.additionalNotes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.additionalNotes]})]},Te)):t.jsx("p",{style:K.noData,children:"No prescriptions recorded yet"})]}),y==="visits"&&t.jsxs("div",{children:[t.jsx("h3",{style:K.sectionTitle,children:" Visit History"}),x.visits&&x.visits.length>0?x.visits.map((k,Te)=>t.jsxs("div",{style:K.visitCard,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",k.chiefComplaint]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",k.diagnosis]}),k.vitals&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Vitals:"})," BP: ",k.vitals.bloodPressure,", Temp: ",k.vitals.temperature,", Pulse: ",k.vitals.pulse]}),k.notes&&t.jsxs("div",{style:{marginTop:"10px"},children:[t.jsx("strong",{children:"Notes:"})," ",k.notes]})]},Te)):t.jsx("p",{style:K.noData,children:"No visits recorded yet"})]}),y==="health"&&t.jsxs("div",{children:[t.jsx("h3",{style:K.sectionTitle,children:" Health Records"}),t.jsxs("div",{style:K.section,children:[t.jsxs("div",{style:K.infoGrid,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Blood Type:"})," ",x.healthRecords?.bloodType||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Height:"})," ",x.healthRecords?.height||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",x.healthRecords?.weight||"N/A"]})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Current Medications:"}),t.jsx("p",{children:x.healthRecords?.medications?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Allergies:"}),t.jsx("p",{children:x.healthRecords?.allergies?.join(", ")||"None"})]}),t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsx("strong",{children:"Chronic Conditions:"}),t.jsx("p",{children:x.healthRecords?.chronicConditions?.join(", ")||"None"})]})]})]})]}),M&&t.jsx("div",{style:K.subModalOverlay,children:t.jsxs("div",{style:K.subModal,children:[t.jsxs("div",{style:K.modalHeader,children:[t.jsx("h3",{children:"Add Visit Record"}),t.jsx("button",{style:K.closeButton,onClick:()=>C(!1),children:""})]}),t.jsxs("div",{style:K.formBody,children:[t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Chief Complaint"}),t.jsx("input",{style:K.input,value:ce.chiefComplaint,onChange:k=>N({...ce,chiefComplaint:k.target.value}),placeholder:"Patient's main concern"})]}),t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Diagnosis"}),t.jsx("input",{style:K.input,value:ce.diagnosis,onChange:k=>N({...ce,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:K.vitalsSection,children:[t.jsx("h4",{children:"Vital Signs"}),t.jsxs("div",{style:K.vitalsInputGrid,children:[t.jsxs("div",{children:[t.jsx("label",{style:K.label,children:"BP"}),t.jsx("input",{style:K.input,value:ce.vitals.bloodPressure,onChange:k=>N({...ce,vitals:{...ce.vitals,bloodPressure:k.target.value}}),placeholder:"120/80"})]}),t.jsxs("div",{children:[t.jsx("label",{style:K.label,children:"Temp"}),t.jsx("input",{style:K.input,value:ce.vitals.temperature,onChange:k=>N({...ce,vitals:{...ce.vitals,temperature:k.target.value}}),placeholder:"98.6F"})]}),t.jsxs("div",{children:[t.jsx("label",{style:K.label,children:"Pulse"}),t.jsx("input",{style:K.input,value:ce.vitals.pulse,onChange:k=>N({...ce,vitals:{...ce.vitals,pulse:k.target.value}}),placeholder:"72 bpm"})]}),t.jsxs("div",{children:[t.jsx("label",{style:K.label,children:"Weight"}),t.jsx("input",{style:K.input,value:ce.vitals.weight,onChange:k=>N({...ce,vitals:{...ce.vitals,weight:k.target.value}}),placeholder:"70 kg"})]})]})]}),t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Notes"}),t.jsx("textarea",{style:{...K.input,minHeight:"100px"},value:ce.notes,onChange:k=>N({...ce,notes:k.target.value}),placeholder:"Additional observations"})]}),t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Follow-up Date"}),t.jsx("input",{type:"date",style:K.input,value:ce.followUpDate,onChange:k=>N({...ce,followUpDate:k.target.value})})]}),t.jsx("button",{style:K.saveButton,onClick:ln,children:"Save Visit Record"})]})]})}),oe&&t.jsx("div",{style:K.subModalOverlay,children:t.jsxs("div",{style:{...K.subModal,maxWidth:"900px"},children:[t.jsxs("div",{style:K.modalHeader,children:[t.jsx("h3",{children:"New Prescription"}),t.jsx("button",{style:K.closeButton,onClick:()=>R(!1),children:""})]}),t.jsxs("div",{style:K.formBody,children:[t.jsxs("div",{style:K.inputMethodSelector,children:[t.jsx("button",{style:{...K.methodButton,...ie.inputMethod==="type"?K.methodButtonActive:{}},onClick:()=>w({...ie,inputMethod:"type"}),children:" Type"}),t.jsx("button",{style:{...K.methodButton,...ie.inputMethod==="draw"?K.methodButtonActive:{}},onClick:()=>w({...ie,inputMethod:"draw"}),children:" Draw/Write"}),t.jsx("button",{style:{...K.methodButton,...ie.inputMethod==="voice"?K.methodButtonActive:{}},onClick:()=>w({...ie,inputMethod:"voice"}),children:" Voice"})]}),ie.inputMethod==="type"&&t.jsxs("div",{children:[t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Diagnosis"}),t.jsx("input",{style:K.input,value:ie.diagnosis,onChange:k=>w({...ie,diagnosis:k.target.value}),placeholder:"Medical diagnosis"})]}),t.jsxs("div",{style:K.medicinesSection,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h4",{children:"Medicines"}),t.jsx("button",{style:K.addButton,onClick:Ft,children:" Add Medicine"})]}),ie.medicines.map((k,Te)=>t.jsxs("div",{style:K.medicineRow,children:[t.jsx("input",{style:{...K.input,flex:2},placeholder:"Medicine name",value:k.name,onChange:fe=>vt(Te,"name",fe.target.value)}),t.jsx("input",{style:{...K.input,flex:1},placeholder:"Dosage",value:k.dosage,onChange:fe=>vt(Te,"dosage",fe.target.value)}),t.jsx("input",{style:{...K.input,flex:1},placeholder:"Frequency",value:k.frequency,onChange:fe=>vt(Te,"frequency",fe.target.value)}),t.jsx("input",{style:{...K.input,flex:1},placeholder:"Duration",value:k.duration,onChange:fe=>vt(Te,"duration",fe.target.value)}),t.jsx("input",{style:{...K.input,flex:2},placeholder:"Instructions",value:k.instructions,onChange:fe=>vt(Te,"instructions",fe.target.value)}),ie.medicines.length>1&&t.jsx("button",{style:K.removeButton,onClick:()=>pn(Te),children:""})]},Te))]}),t.jsxs("div",{style:K.formGroup,children:[t.jsx("label",{style:K.label,children:"Additional Notes"}),t.jsx("textarea",{style:{...K.input,minHeight:"80px"},value:ie.additionalNotes,onChange:k=>w({...ie,additionalNotes:k.target.value}),placeholder:"Any additional instructions or notes"})]})]}),ie.inputMethod==="draw"&&t.jsxs("div",{children:[t.jsxs("div",{style:K.canvasControls,children:[t.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[t.jsx("label",{children:"Pen Color:"}),t.jsx("input",{type:"color",value:Y,onChange:k=>$e(k.target.value),style:K.colorPicker}),t.jsx("label",{children:"Size:"}),t.jsx("input",{type:"range",min:"1",max:"10",value:ue,onChange:k=>Qe(k.target.value),style:K.sizeSlider}),t.jsxs("span",{children:[ue,"px"]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{style:K.canvasButton,onClick:bn,children:" Undo"}),t.jsx("button",{style:K.canvasButton,onClick:Ke,children:" Clear"})]})]}),t.jsx("canvas",{ref:ke,width:800,height:500,style:K.canvas,onMouseDown:_e,onMouseMove:yt,onMouseUp:kt,onMouseLeave:kt,onTouchStart:_e,onTouchMove:yt,onTouchEnd:kt}),t.jsx("p",{style:K.canvasHint,children:" Use your mouse, stylus, or touch to write the prescription"})]}),ie.inputMethod==="voice"&&t.jsxs("div",{children:[t.jsxs("div",{style:K.voiceControls,children:[t.jsx("button",{style:{...K.voiceButton,background:ht?"#ff4444":"#11998e"},onClick:gt,children:ht?" Stop Recording":" Start Recording"}),ht&&t.jsxs("div",{style:K.recordingIndicator,children:[t.jsx("span",{style:K.recordingDot}),"Recording..."]})]}),t.jsxs("div",{style:K.transcriptBox,children:[t.jsx("strong",{children:"Transcript:"}),t.jsx("div",{style:K.transcript,children:q||"Speak to start transcription..."})]}),t.jsx("p",{style:K.voiceHint,children:' Click "Start Recording" and speak clearly. The system will convert your speech to text.'})]}),t.jsx("button",{style:K.saveButton,onClick:Tt,children:" Save Prescription"})]})]})})]})}):null},K={modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},modal:{background:"white",borderRadius:"15px",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},modalHeader:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",padding:"20px 30px",display:"flex",justifyContent:"space-between",alignItems:"center"},modalTitle:{margin:0,fontSize:"24px",fontWeight:"600"},modalSubtitle:{margin:"5px 0 0 0",opacity:.9,fontSize:"14px"},closeButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"35px",height:"35px",borderRadius:"50%",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s"},primaryButton:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},tabs:{display:"flex",borderBottom:"2px solid #e0e0e0",background:"#f8f9fa"},tab:{flex:1,padding:"15px",border:"none",background:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#666",transition:"all 0.3s"},activeTab:{color:"#11998e",borderBottom:"3px solid #11998e",fontWeight:"600"},modalBody:{padding:"30px",overflowY:"auto",flex:1},section:{marginBottom:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"10px"},sectionTitle:{margin:"0 0 15px 0",color:"#11998e",fontSize:"18px",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},vitalsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},vitalCard:{background:"white",padding:"15px",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},vitalLabel:{fontSize:"12px",color:"#666",marginBottom:"5px"},vitalValue:{fontSize:"20px",fontWeight:"600",color:"#11998e"},noData:{textAlign:"center",color:"#999",padding:"40px",fontStyle:"italic"},prescriptionCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},prescriptionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #e0e0e0"},printButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",transition:"all 0.3s"},medicineList:{marginTop:"10px",paddingLeft:"20px"},handwrittenPreview:{maxWidth:"100%",border:"1px solid #ddd",borderRadius:"5px",marginTop:"10px"},visitCard:{background:"#f8f9fa",padding:"20px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e0e0e0"},loadingSpinner:{textAlign:"center",padding:"40px",color:"#11998e",fontSize:"18px"},notification:{position:"absolute",top:"20px",right:"20px",color:"white",padding:"15px 25px",borderRadius:"8px",zIndex:1001,animation:"slideIn 0.3s ease",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},subModalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1001},subModal:{background:"white",borderRadius:"15px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},formBody:{padding:"30px",overflowY:"auto"},formGroup:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",boxSizing:"border-box"},vitalsSection:{marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},vitalsInputGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginTop:"15px"},saveButton:{width:"100%",padding:"15px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"all 0.3s",marginTop:"20px"},inputMethodSelector:{display:"flex",gap:"10px",marginBottom:"20px",padding:"10px",background:"#f8f9fa",borderRadius:"8px"},methodButton:{flex:1,padding:"12px",border:"2px solid #ddd",background:"white",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},methodButtonActive:{background:"#11998e",color:"white",borderColor:"#11998e"},medicinesSection:{marginBottom:"20px"},medicineRow:{display:"flex",gap:"10px",marginBottom:"10px",alignItems:"center"},addButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},removeButton:{background:"#ff4444",color:"white",border:"none",padding:"8px 12px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvas:{border:"2px solid #ddd",borderRadius:"8px",cursor:"crosshair",width:"100%",touchAction:"none",background:"white"},canvasControls:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},colorPicker:{width:"40px",height:"40px",border:"none",borderRadius:"5px",cursor:"pointer"},sizeSlider:{width:"100px"},canvasButton:{background:"#11998e",color:"white",border:"none",padding:"8px 16px",borderRadius:"5px",cursor:"pointer",fontSize:"14px"},canvasHint:{textAlign:"center",color:"#666",fontSize:"14px",marginTop:"10px",fontStyle:"italic"},voiceControls:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},voiceButton:{padding:"15px 30px",border:"none",borderRadius:"8px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s"},recordingIndicator:{display:"flex",alignItems:"center",gap:"10px",color:"#ff4444",fontWeight:"600"},recordingDot:{width:"12px",height:"12px",background:"#ff4444",borderRadius:"50%",animation:"pulse 1.5s infinite"},transcriptBox:{marginBottom:"20px"},transcript:{marginTop:"10px",padding:"20px",background:"white",border:"2px solid #ddd",borderRadius:"8px",minHeight:"150px",fontSize:"14px",lineHeight:"1.6",color:"#333"},voiceHint:{textAlign:"center",color:"#666",fontSize:"14px",fontStyle:"italic"}},oh=({patientId:s,onClose:r,doctorId:c=null,doctorName:u=null,hospitalId:f=null,isHospitalView:y=!1})=>{const[g,x]=b.useState({healthRecords:[],prescriptions:[],appointments:[]}),[j,D]=b.useState(null),[A,M]=b.useState(!0),[C,oe]=b.useState(null),[R,pe]=b.useState(!1),[_,ce]=b.useState("summary"),[N,ie]=b.useState(!1),[w,ke]=b.useState({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""});b.useEffect(()=>{s&&(c||f)&&(pt(),c&&mt())},[s,c,f]);const pt=async()=>{M(!0);try{const Y=y&&f?await Ky(s,f):await Fy(s,c);if(x(Y),Y.appointments&&Y.appointments.length>0){const $e=Y.appointments[0];D({name:$e.patientName,phone:$e.patientPhone,email:$e.patientEmail||"N/A"})}}catch(Y){console.error("Error loading patient data:",Y),alert("Failed to load patient data")}finally{M(!1)}},mt=async()=>{try{const Y=await Yy(s,c);Y&&oe(Y.summary)}catch(Y){console.error("Error loading cached summary:",Y)}},P=async()=>{pe(!0);try{const Y=await Wy(s,c);oe(Y.summary)}catch(Y){console.error("Error generating AI summary:",Y),alert("Failed to generate AI summary: "+Y.message)}finally{pe(!1)}},Ae=async Y=>{Y.preventDefault();try{await Gy(s,c,{...w,doctorName:u}),alert("Health record added successfully!"),ie(!1),ke({chiefComplaint:"",bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",symptoms:"",observations:"",allergies:"",chronicConditions:"",notes:""}),await pt()}catch($e){console.error("Error adding health record:",$e),alert("Failed to add health record")}};return A?t.jsx("div",{style:Rn.modal,onClick:r,children:t.jsx("div",{style:{...Rn.modalContent,maxWidth:"900px"},onClick:Y=>Y.stopPropagation(),children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Loading patient health records..."})]})})}):t.jsx("div",{style:Rn.modal,onClick:r,children:t.jsxs("div",{style:{...Rn.modalContent,maxWidth:"1000px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:Y=>Y.stopPropagation(),children:[t.jsx("div",{style:{borderBottom:"2px solid #11998e",paddingBottom:"1rem",marginBottom:"1rem"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Complete Health Records"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#666"},children:["Patient: ",t.jsx("strong",{children:j?.name||"Unknown"}),j?.phone&&` |  ${j.phone}`,j?.email&&` |  ${j.email}`]})]}),t.jsx("button",{onClick:r,style:{background:"#f5576c",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontWeight:"600"},children:" Close"})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:Rn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#11998e"},children:g?.appointments?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Total Visits"})]}),t.jsxs("div",{style:Rn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#667eea"},children:g?.prescriptions?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Prescriptions"})]}),t.jsxs("div",{style:Rn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#f5576c"},children:g?.healthRecords?.length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Health Records"})]}),t.jsxs("div",{style:Rn.statBox,children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#38ef7d"},children:g?.appointments?.filter(Y=>Y.status==="completed").length||0}),t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Completed"})]})]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"2px solid #e0e0e0"},children:["summary","appointments","prescriptions","records"].map(Y=>t.jsx("button",{onClick:()=>ce(Y),style:{padding:"0.75rem 1.5rem",background:_===Y?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"transparent",color:_===Y?"white":"#666",border:"none",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",textTransform:"capitalize"},children:Y},Y))}),t.jsxs("div",{style:{flex:1,overflow:"auto",padding:"0.5rem"},children:[_==="summary"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" AI-Powered Health Summary"}),t.jsx("button",{onClick:P,disabled:R,style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:R?"not-allowed":"pointer",fontWeight:"600",opacity:R?.6:1},children:R?" Generating...":" Generate AI Summary"})]}),C?t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",border:"2px solid #667eea",whiteSpace:"pre-wrap",lineHeight:"1.8"},children:C}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:'Click "Generate AI Summary" to get an AI-powered comprehensive health analysis'})]})]}),_==="appointments"&&t.jsxs("div",{children:[t.jsxs("h3",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(IconCalendar,{size:20})}),"Appointment History"]}),g?.appointments.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No appointments found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:g?.appointments.map(Y=>t.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("strong",{style:{color:"#11998e"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(IconCalendar,{size:18})})," ",Y.date," at ",Y.time]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:Y.status==="completed"?"#38ef7d":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:Y.status})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[" ",Y.hospitalName||Y.doctorName]}),Y.reason&&t.jsxs("div",{children:[" ",Y.reason]})]})]},Y.id))})]}),_==="prescriptions"&&t.jsxs("div",{children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Prescription History"}),g?.prescriptions.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No prescriptions found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:g?.prescriptions.map(Y=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #11998e"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#11998e"},children:[" ",Y.prescriptionDate||"Date N/A"]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Diagnosis:"})," ",Y.diagnosis]}),t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Medications:"}),t.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:Y.medications?.map(($e,ue)=>t.jsxs("li",{children:[$e.name," - ",$e.dosage||"N/A"," | ",$e.frequency||"N/A"," | ",$e.duration||"N/A"]},ue))})]}),Y.instructions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Instructions:"})," ",Y.instructions]}),Y.tests&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Tests:"})," ",Y.tests]})]})]},Y.id))})]}),_==="records"&&t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h3",{style:{margin:0,color:"#333"},children:" Detailed Health Records"}),t.jsx("button",{onClick:()=>ie(!N),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:N?" Cancel":" Add New Record"})]}),N&&t.jsxs("form",{onSubmit:Ae,style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",marginBottom:"1.5rem",border:"2px solid #11998e"},children:[t.jsx("h4",{style:{marginTop:0,color:"#11998e"},children:" Add Health Record"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Chief Complaint *",value:w.chiefComplaint,onChange:Y=>ke({...w,chiefComplaint:Y.target.value}),style:Rn.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Blood Pressure (e.g., 120/80)",value:w.bloodPressure,onChange:Y=>ke({...w,bloodPressure:Y.target.value}),style:Rn.input}),t.jsx("input",{type:"text",placeholder:"Heart Rate (bpm)",value:w.heartRate,onChange:Y=>ke({...w,heartRate:Y.target.value}),style:Rn.input}),t.jsx("input",{type:"text",placeholder:"Temperature (F/C)",value:w.temperature,onChange:Y=>ke({...w,temperature:Y.target.value}),style:Rn.input}),t.jsx("input",{type:"text",placeholder:"Weight",value:w.weight,onChange:Y=>ke({...w,weight:Y.target.value}),style:Rn.input}),t.jsx("input",{type:"text",placeholder:"Height",value:w.height,onChange:Y=>ke({...w,height:Y.target.value}),style:Rn.input})]}),t.jsx("textarea",{placeholder:"Symptoms",value:w.symptoms,onChange:Y=>ke({...w,symptoms:Y.target.value}),style:{...Rn.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Observations",value:w.observations,onChange:Y=>ke({...w,observations:Y.target.value}),style:{...Rn.input,minHeight:"60px",marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Allergies",value:w.allergies,onChange:Y=>ke({...w,allergies:Y.target.value}),style:{...Rn.input,marginTop:"1rem"}}),t.jsx("input",{type:"text",placeholder:"Chronic Conditions",value:w.chronicConditions,onChange:Y=>ke({...w,chronicConditions:Y.target.value}),style:{...Rn.input,marginTop:"1rem"}}),t.jsx("textarea",{placeholder:"Additional Notes",value:w.notes,onChange:Y=>ke({...w,notes:Y.target.value}),style:{...Rn.input,minHeight:"80px",marginTop:"1rem"}}),t.jsx("button",{type:"submit",style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",width:"100%"},children:" Save Health Record"})]}),g?.healthRecords?.length===0?t.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No detailed health records yet. Add one using the button above."}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:g?.healthRecords?.map(Y=>t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px",border:"2px solid #667eea"},children:[t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("strong",{style:{color:"#667eea"},children:[" ",Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"N/A"," | Dr. ",Y.doctorName||u]})}),t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Chief Complaint:"})," ",Y.chiefComplaint]}),Y.bloodPressure&&t.jsxs("div",{children:[t.jsx("strong",{children:"BP:"})," ",Y.bloodPressure]}),Y.heartRate&&t.jsxs("div",{children:[t.jsx("strong",{children:"Heart Rate:"})," ",Y.heartRate," bpm"]}),Y.temperature&&t.jsxs("div",{children:[t.jsx("strong",{children:"Temperature:"})," ",Y.temperature]}),Y.weight&&t.jsxs("div",{children:[t.jsx("strong",{children:"Weight:"})," ",Y.weight]}),Y.symptoms&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Symptoms:"})," ",Y.symptoms]}),Y.observations&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Observations:"})," ",Y.observations]}),Y.allergies&&t.jsxs("div",{style:{marginTop:"0.5rem",color:"#f5576c"},children:[t.jsx("strong",{children:" Allergies:"})," ",Y.allergies]}),Y.chronicConditions&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Chronic Conditions:"})," ",Y.chronicConditions]}),Y.notes&&t.jsxs("div",{style:{marginTop:"0.5rem"},children:[t.jsx("strong",{children:"Notes:"})," ",Y.notes]})]})]},Y.id))})]})]})]})})},Rn={modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem"},modalContent:{background:"white",borderRadius:"15px",padding:"2rem",width:"100%",boxShadow:"0 10px 50px rgba(0,0,0,0.3)"},statBox:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",textAlign:"center",border:"1px solid #e0e0e0"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #e0e0e0",fontSize:"1rem",boxSizing:"border-box"}},oi="/assets/billing_qr-D9aYMsrW.png";function Zd(s){const[r,c]=s.split("-").map(Number),u=new Date(r,c-1,1),f=new Date(r,c-1+1,1);return{startISO:u.toISOString(),nextMonthISO:f.toISOString(),startDateStr:`${s}-01`}}function sh({appointmentsCount:s=0,prescriptionsCount:r=0,rates:c={},pricingModel:u="full",discountPercentage:f=0}){let y=s*(c.appointmentCost||0),g=r*(c.prescriptionCost||0),x=y+g;if(u==="free")y=0,g=0,x=0;else if(u==="reduced"){const j=(f||0)/100;y*=1-j,g*=1-j,x*=1-j}return{appointmentCost:y,prescriptionCost:g,totalCost:x}}function rh({doctorId:s,doctorProfile:r,isHospitalView:c=!1,suppressHeader:u=!1}){const{currentUser:f,userProfile:y}=Ia(),g=s||f?.uid,x=r||y,[j,D]=b.useState("overview"),[A,M]=b.useState(!1),[C,oe]=b.useState([]),[R,pe]=b.useState({}),[_,ce]=b.useState({}),[N,ie]=b.useState(!0),[w,ke]=b.useState(null),[pt,mt]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[P,Ae]=b.useState(""),[Y,$e]=b.useState([]),[ue,Qe]=b.useState(!1),[ht,at]=b.useState(!1),[q,se]=b.useState(null),[me,Fe]=b.useState(!1),[Ze,gt]=b.useState(!1),[ye,_e]=b.useState(null),[yt,kt]=b.useState(!1),[Ke,bn]=b.useState(null),[Ft,pn]=b.useState(new Date().toISOString().split("T")[0]),[vt,ln]=b.useState(!1),[Tt,Et]=b.useState(!1),[k,Te]=b.useState(!1),[fe,Ve]=b.useState(null),qe=h=>{try{const B=sessionStorage.getItem(h);if(B)return JSON.parse(B)}catch(B){console.warn("Cache read error",B)}return null},kn=(h,B)=>{try{sessionStorage.setItem(h,JSON.stringify(B))}catch(X){console.warn("Cache write error",X)}},[re,Kn]=b.useState(""),[An,vi]=b.useState([]),[qt,$t]=b.useState(!1),[rt,Jn]=b.useState(!1),[At,on]=b.useState({displayName:"",specialization:"",consultationFee:"",phone:"",country:"",state:"",city:"",address:""}),[mn,O]=b.useState({date:new Date().toISOString().split("T")[0],startTime:"12:00",endTime:"13:00",reason:"Lunch Break"}),[$,xe]=b.useState(!1),[he,ge]=b.useState({slotDuration:30,workingDays:[1,2,3,4,5],dayWiseHours:{1:{enabled:!0,start:"09:00",end:"17:00"},2:{enabled:!0,start:"09:00",end:"17:00"},3:{enabled:!0,start:"09:00",end:"17:00"},4:{enabled:!0,start:"09:00",end:"17:00"},5:{enabled:!0,start:"09:00",end:"17:00"},6:{enabled:!1,start:"09:00",end:"17:00"},7:{enabled:!1,start:"09:00",end:"17:00"}}}),[Ee,xt]=b.useState(!1),[hn,En]=b.useState({date:new Date().toISOString().split("T")[0],reason:""}),[Nt,Vt]=b.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[Hn,Dn]=b.useState(null);b.useEffect(()=>{const h=window.matchMedia("(max-width: 480px)"),B=X=>M(X.matches);return M(h.matches),h.addEventListener?h.addEventListener("change",B):h.addListener(B),()=>{h.removeEventListener?h.removeEventListener("change",B):h.removeListener(B)}},[]);const[Ge,Nn]=b.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[jt,sn]=b.useState(""),[Mt,Ye]=b.useState(!1),[di,T]=b.useState(""),[I,F]=b.useState(!1),[te,De]=b.useState(null);b.useEffect(()=>{const h=new Image;h.src=oi,h.onload=()=>{try{const B=document.createElement("canvas");B.width=h.width,B.height=h.height;const X=B.getContext("2d");X.drawImage(h,0,0);const ne=X.getImageData(0,0,B.width,B.height).data;let je=B.width,Be=B.height,Pe=0,dt=0;const lt=250;for(let Un=0;Un<B.height;Un++)for(let vn=0;vn<B.width;vn++){const Gn=(Un*B.width+vn)*4,ui=ne[Gn],ji=ne[Gn+1],tn=ne[Gn+2];ne[Gn+3]>10&&!(ui>lt&&ji>lt&&tn>lt)&&(vn<je&&(je=vn),Un<Be&&(Be=Un),vn>Pe&&(Pe=vn),Un>dt&&(dt=Un))}if(je>Pe||Be>dt){De(oi);return}const Ne=Math.max(8,Math.floor(Math.min(B.width,B.height)*.02));je=Math.max(0,je-Ne),Be=Math.max(0,Be-Ne),Pe=Math.min(B.width,Pe+Ne),dt=Math.min(B.height,dt+Ne);const et=Pe-je+1,bt=dt-Be+1,Gt=document.createElement("canvas");Gt.width=et,Gt.height=bt,Gt.getContext("2d").drawImage(B,je,Be,et,bt,0,0,et,bt);const Tn=Gt.toDataURL("image/png");De(Tn)}catch(B){console.error("QR crop failed",B),De(oi)}},h.onerror=()=>De(oi)},[oi]),b.useEffect(()=>{g&&it()},[g]),b.useEffect(()=>{if(!P){const h=new Date,B=h.getFullYear(),X=String(h.getMonth()+1).padStart(2,"0");Ae(`${B}-${X}`)}},[]),b.useEffect(()=>{x&&on({displayName:x.displayName||"",specialization:x.specialization||"",consultationFee:x.consultationFee||"",phone:x.phone||"",country:x.country||"",state:x.state||"",city:x.city||"",address:x.address||""})},[x]),b.useEffect(()=>{j==="usage"&&g&&fn()},[j,g]),b.useEffect(()=>{j==="billing"&&g&&Wn()},[j,g,P]),b.useEffect(()=>{j==="appointments"&&g&&!rt&&He()},[j,g,rt]);const He=async()=>{if(!N){ie(!0);try{const h=await gy(g),B=[...new Set(h.filter(ne=>!ne.patientName||!ne.patientPhone).map(ne=>ne.patientId||ne.userId||ne.patientUid).filter(ne=>ne))],X={};await Promise.all(B.map(async ne=>{try{const je=Re(V,"users",ne),Be=await Yt(je);Be.exists()&&(X[ne]=Be.data())}catch(je){console.error("Error fetching patient data for:",ne,je)}}));const de=h.map(ne=>{if(ne.patientName&&ne.patientPhone)return ne;const je=ne.patientId||ne.userId||ne.patientUid,Be=X[je];return Be?{...ne,patientId:je,patientName:Be.displayName||Be.name||Be.email,patientPhone:Be.phone||Be.phoneNumber||"N/A",patientEmail:Be.email}:ne});console.log(" Loaded all appointments:",de.length),oe(de),Jn(!0)}catch(h){console.error("Error loading all appointments:",h),be("Error loading appointments","error")}finally{ie(!1)}}},it=async()=>{ie(!0);try{const h=new Date().toISOString().split("T")[0],B=ve(V,"appointments"),X=Ce(B,le("doctorId","==",g),le("date","==",h)),[de,ne,je]=await Promise.all([jy(g),Oe(X),ic(g)]),Be=ne.docs.map(Ne=>({id:Ne.id,...Ne.data()}));console.log(" Dashboard Data Loaded (Optimized):",{stats:de,todayAppointments:Be.length});const Pe=[...new Set(Be.filter(Ne=>!Ne.patientName||!Ne.patientPhone).map(Ne=>Ne.patientId||Ne.userId||Ne.patientUid).filter(Ne=>Ne))],dt={};await Promise.all(Pe.map(async Ne=>{try{const et=Re(V,"users",Ne),bt=await Yt(et);bt.exists()&&(dt[Ne]=bt.data())}catch(et){console.error(et)}}));const lt=Be.map(Ne=>{if(Ne.patientName&&Ne.patientPhone)return Ne;const et=Ne.patientId||Ne.userId||Ne.patientUid,bt=dt[et];return bt?{...Ne,patientId:et,patientName:bt.displayName||bt.name||bt.email,patientPhone:bt.phone||bt.phoneNumber||"N/A",patientEmail:bt.email}:Ne});rt||oe(lt),pe(je),ce({...de,todayAppointments:Be.length,patientCount:0})}catch(h){console.error("Error loading dashboard data:",h),be("Error loading data","error")}finally{ie(!1)}},be=(h,B="success")=>{Dn({message:h,type:B}),setTimeout(()=>Dn(null),3e3)};b.useEffect(()=>{const h=new Date,B=h.getFullYear(),X=String(h.getMonth()+1).padStart(2,"0");Ae(`${B}-${X}`)},[]),b.useEffect(()=>{j==="payments"&&P&&g&&Wn()},[j,P,g]);const zt=h=>{console.log(" Getting payment methods for country:",h);const B=[];return h==="India"||h==="IN"?B.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):h==="United States"||h==="US"||h==="USA"?B.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):h==="United Kingdom"||h==="UK"||h==="GB"?B.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):h==="Canada"||h==="CA"?B.push("PayPal","Stripe","Interac","Bank Transfer","Check"):h==="Australia"||h==="AU"?B.push("PayPal","Stripe","BPAY","Bank Transfer"):B.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",B),B},fn=async()=>{try{ie(!0),console.log(" Loading usage data for doctor:",g);let h={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const en=Re(V,"config","billing"),Tn=await Yt(en);Tn.exists()&&(h=Tn.data(),mt(h))}catch(en){console.warn("Config not found, using defaults:",en)}const B=Re(V,"users",g),X=await Yt(B);if(!X.exists())throw new Error("Doctor profile not found");const de=X.data(),ne=ve(V,"appointments"),je=Ce(ne,le("doctorId","==",g)),Pe=(await Oe(je)).docs.map(en=>({id:en.id,...en.data()})),dt=ve(V,"prescriptions"),lt=Ce(dt,le("doctorId","==",g)),et=(await Oe(lt)).docs.map(en=>({id:en.id,...en.data()})),bt=x?.country||de?.country||"default",Gt=Ll({country:bt,customRates:de?.customRates},h);ke({totalAppointments:Pe.length,totalPrescriptions:et.length,appointmentsByMonth:St(Pe),prescriptionsByMonth:St(et),pricingModel:de?.pricingModel||"full",discountPercentage:de?.discountPercentage||0,currency:Gt.currency||"GBP",symbol:Gt.symbol||"",rates:Gt})}catch(h){console.error("Error loading usage data:",h),be("Error loading usage data","error")}finally{ie(!1)}},ci=async h=>{if(h.preventDefault(),!di){be("Please select a payment method","error");return}const B=parseFloat(jt);if(!B||B<=0){be("Please enter a valid amount","error");return}if(B>Ge.pendingAmount){be("Amount cannot exceed pending balance","error");return}try{Ye(!0);const X={doctorId:g,doctorName:x.displayName||x.email,amount:B,currency:w.currency,paymentMethod:di,status:"pending",createdAt:new Date().toISOString(),createdBy:f.uid,type:"partial",description:`Partial payment for doctor app usage - ${Ge.totalAppointments} appointments, ${Ge.totalPrescriptions} prescriptions`},de=ve(V,"payments");await ua(de,X),be("Payment request submitted successfully! Admin will verify and process.","success"),Te(!1),sn(""),T(""),Wn()}catch(X){console.error("Error processing payment:",X),be("Failed to process payment","error")}finally{Ye(!1)}},We=()=>{sn(""),T(""),Te(!0)},Wn=async()=>{try{ie(!0),console.log(" Loading billing data for doctor:",g);const h=`doc_billing_${g}_${P||"all"}`;if(c)console.log(" Embedded hospital view: bypassing doctor cache to reflect hospital aggregation");else{const Ie=qe(h);if(Ie){console.log(" Using cached doctor billing data for",h),Ie.cumulativeData&&Nn(Ie.cumulativeData),Ie.paymentInfo?ke(Ie.paymentInfo):ke(Ie),ie(!1);return}}let B={currency:"USD",appointmentCost:50,prescriptionCost:20};try{const Ie=Re(V,"config","billing"),zn=await Yt(Ie);zn.exists()&&(B=zn.data(),mt(B))}catch(Ie){console.warn("Config not found, using defaults:",Ie)}const X=Re(V,"users",g),de=await Yt(X);if(!de.exists())throw new Error("Doctor profile not found");const ne=de.data(),je=ve(V,"appointments"),Be=ve(V,"prescriptions"),Pe=ve(V,"payments"),dt=Ce(je,le("doctorId","==",g)),lt=Ce(Be,le("doctorId","==",g)),Ne=Ce(Pe,le("doctorId","==",g));let et=dt,bt=lt,Gt=Ne;if(P){const{startISO:Ie,nextMonthISO:zn}=Zd(P);et=Ce(je,le("doctorId","==",g),le("date",">=",Ie),le("date","<",zn)),bt=Ce(Be,le("doctorId","==",g),le("createdAt",">=",Ie),le("createdAt","<",zn)),Gt=Ce(Pe,le("doctorId","==",g),le("createdAt",">=",Ie),le("createdAt","<",zn))}const en=Ce(Ne,ca("createdAt","desc"),Qd(100));let Tn=null;if(P){const{startISO:Ie,nextMonthISO:zn}=Zd(P);Tn=Ce(Pe,le("doctorId","==",g),le("createdAt",">=",Ie),le("createdAt","<",zn),ca("createdAt","desc"),Qd(100))}console.time("DoctorBillingFetch");const[Un,vn,Gn,ui,ji,tn]=await Promise.all([si(dt).catch(Ie=>({data:()=>({count:0})})),si(lt).catch(Ie=>({data:()=>({count:0})})),Us(Ne,{totalPaid:Os("amount")}).catch(Ie=>({data:()=>({totalPaid:0})})),si(et).catch(Ie=>({data:()=>({count:0})})),si(bt).catch(Ie=>({data:()=>({count:0})})),Oe(en).catch(Ie=>({docs:[]})),Tn?Oe(Tn).catch(Ie=>({docs:[]})):Promise.resolve({docs:[]})]);console.timeEnd("DoctorBillingFetch");const ei=Un.data().count,Gi=vn.data().count,Fn=x?.country||ne?.country||"default",Zt=Ll({country:Fn,customRates:ne?.customRates},B),Si=ne?.pricingModel||"full",_a=ne?.discountPercentage||0;let ma=ei*(Zt.appointmentCost||0),Mi=Gi*(Zt.prescriptionCost||0),Vn=ma+Mi;if(Si==="free")ma=0,Mi=0,Vn=0;else if(Si==="reduced"){const Ie=_a/100;ma*=1-Ie,Mi*=1-Ie,Vn*=1-Ie}let ha=0;Gn.data&&(ha=Gn.data().totalPaid||0);const fa=Math.max(0,Vn-ha),Hi=ui.data().count,al=ji.data().count,ll=sh({appointmentsCount:Hi,prescriptionsCount:al,rates:Zt,pricingModel:Si,discountPercentage:_a});let ol=tn.docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,zn)=>zn.createdAt.localeCompare(Ie.createdAt));const sl=arguments[6]&&arguments[6].docs?arguments[6].docs.map(Ie=>({id:Ie.id,...Ie.data()})).sort((Ie,zn)=>zn.createdAt.localeCompare(Ie.createdAt)):[];let ga=0;try{ga=(await Us(Gt,{totalPaid:Os("amount")}).catch(()=>({data:()=>({totalPaid:0})}))).data().totalPaid||0}catch{ga=ol.reduce((zn,ya)=>zn+(ya.status==="completed"&&ya.amount||0),0)}const ql={totalAppointments:ei,totalPrescriptions:Gi,appointmentCost:ma,prescriptionCost:Mi,totalCost:Vn,totalPaid:ha,pendingAmount:fa,paymentHistory:ol};Nn(ql);const On={displayCost:ll?.totalCost||0,monthlyAppointments:Hi,monthlyPrescriptions:al,monthlyPaymentHistory:sl,totalAppointments:ei,totalPrescriptions:Gi,totalCost:Vn,appointmentCost:ma,prescriptionCost:Mi,paid:ha,pending:fa,pricingModel:Si,discountPercentage:_a,rates:Zt,currency:Zt.currency,symbol:Zt.symbol,country:Fn,paymentHistory:ol,monthlyPaid:ga,paymentDetails:B.paymentDetails||{},countryInstructions:B.countrySpecificInstructions||{},isHospitalDoctor:!!ne.hospitalId};ke(On);try{kn(h,{cumulativeData:ql,paymentInfo:On,timestamp:Date.now()})}catch(Ie){console.warn("Failed to write doctor billing cache",Ie)}console.log(" Billing data loaded (Monthly & All-Time)")}catch(h){console.error("Error loading billing data:",h);const B=h&&h.message?h.message:"Failed to load billing data.";be("Error loading billing data: "+B,"error");try{Nn({totalAppointments:0,totalPrescriptions:0,appointmentCost:0,prescriptionCost:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),ke({error:!0,message:B,displayCost:0,monthlyAppointments:0,monthlyPrescriptions:0,totalAppointments:0,totalPrescriptions:0,totalCost:0,appointmentCost:0,prescriptionCost:0,paid:0,pending:0,pricingModel:"full",discountPercentage:0,rates:{},currency:"USD",symbol:"$",country:x?.country||"default",paymentDetails:{},countryInstructions:{}})}catch(X){console.warn("Error while setting fallback billing UI state",X)}}finally{ie(!1)}},St=h=>{const B={};return h.forEach(X=>{const de=X.date||X.createdAt||"";if(de){const ne=de.substring(0,7);B[ne]=(B[ne]||0)+1}}),B},$n=async h=>{h.preventDefault();try{await th(g,At),be("Profile updated successfully!"),Qe(!1),c||window.location.reload()}catch(B){console.error("Error updating profile:",B),be("Failed to update profile","error")}},Yn=async h=>{h.preventDefault();try{const B=C.filter(X=>X.date===mn.date&&X.time>=mn.startTime&&X.time<mn.endTime&&X.status!=="cancelled"&&X.status!=="completed");if(B.length>0){const X=B.map(ne=>`${ne.patientName||ne.userName} at ${ne.time}`).join(", "),de=` WARNING: You have ${B.length} appointment(s) during this time:

${X}

You should cancel or reschedule these appointments before blocking this time. Do you still want to block this time?`;if(!window.confirm(de))return}await by(g,mn),B.length>0?be(`Time blocked. Please contact ${B.length} patient(s) to reschedule!`,"error"):be("Time blocked successfully!"),at(!1),it()}catch(B){console.error("Error blocking time:",B),be("Failed to block time","error")}},ki=async h=>{try{await vy(g,h),be("Time unblocked successfully!"),it()}catch(B){console.error("Error unblocking time:",B),be("Failed to unblock time","error")}},Ii=async h=>{h.preventDefault();try{const B=Object.keys(he.dayWiseHours).filter(je=>he.dayWiseHours[je].enabled).map(je=>parseInt(je)),X=Object.values(he.dayWiseHours).filter(je=>je.enabled),de=X.length>0?{start:X[0].start,end:X[0].end}:{start:"09:00",end:"17:00"},ne={...R,slotDuration:he.slotDuration,workingDays:B,workingHours:de,dayWiseHours:he.dayWiseHours};await Fd(g,ne),pe(ne),be("Availability settings updated successfully!"),xe(!1),it()}catch(B){console.error("Error updating slot config:",B),be("Failed to update availability settings","error")}},_i=async h=>{h.preventDefault();try{const B=C.filter(de=>de.date===hn.date&&de.status!=="cancelled"&&de.status!=="completed");if(B.length>0){const de=B.map(je=>je.patientName||je.userName).join(", "),ne=` WARNING: You have ${B.length} appointment(s) scheduled on ${hn.date}.

Patients: ${de}

You should cancel or reschedule these appointments before marking this date as leave. Do you still want to mark this date as absent?`;if(!window.confirm(ne))return}const X={...R,unavailableDates:[...R.unavailableDates||[],{date:hn.date,reason:hn.reason,id:Date.now().toString()}]};await Fd(g,X),pe(X),B.length>0?be(`Date marked as absent. Please contact ${B.length} patient(s) to reschedule!`,"error"):be("Date marked as absent successfully!"),xt(!1),En({date:new Date().toISOString().split("T")[0],reason:""}),it()}catch(B){console.error("Error marking absent:",B),be("Failed to mark date as absent","error")}},qi=async h=>{try{const B={...R,unavailableDates:(R.unavailableDates||[]).filter(X=>X.id!==h)};await Fd(g,B),pe(B),be("Absent date removed successfully!"),it()}catch(B){console.error("Error removing absent date:",B),be("Failed to remove absent date","error")}},Ei=h=>{ge(B=>({...B,dayWiseHours:{...B.dayWiseHours,[h]:{...B.dayWiseHours[h],enabled:!B.dayWiseHours[h].enabled}}}))},rn=(h,B,X)=>{ge(de=>({...de,dayWiseHours:{...de.dayWiseHours,[h]:{...de.dayWiseHours[h],[B]:X}}}))},pa=h=>{_e(h),Vt({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),gt(!0)},il=()=>{Vt(h=>({...h,medications:[...h.medications,{name:"",dosage:"",frequency:"",duration:""}]}))},Ni=h=>{Vt(B=>({...B,medications:B.medications.filter((X,de)=>de!==h)}))},Z=(h,B,X)=>{Vt(de=>({...de,medications:de.medications.map((ne,je)=>je===h?{...ne,[B]:X}:ne)}))},v=async h=>{h.preventDefault();try{const B={appointmentId:ye.id,patientId:ye.patientId||"",patientName:ye.patientName,patientPhone:ye.patientPhone,doctorId:g,doctorName:x.displayName,hospitalId:x.hospitalId||"",diagnosis:Nt.diagnosis,medications:Nt.medications.filter(ne=>ne.name),tests:Nt.tests,instructions:Nt.instructions,followUpDate:Nt.followUpDate,prescribedDate:new Date().toISOString(),prescribedBy:g},X=await ua(ve(V,"prescriptions"),B),de=Re(V,"appointments",ye.id);await Wt(de,{status:"completed",prescriptionId:X.id,completedAt:new Date().toISOString()}),be("Prescription saved successfully!"),gt(!1),it()}catch(B){console.error("Error saving prescription:",B),be("Failed to save prescription","error")}},ae=async()=>{if(!re.trim()){vi([]);return}$t(!0);try{console.log("Searching for patients:",re);const h=await nx(re);console.log("Search results:",h);const B=h.map(X=>({id:X.id,patientId:X.id,phone:X.phone,name:X.name,dob:X.dob,age:X.age,gender:X.gender}));vi(B),B.length===0&&be("No patients found","error")}catch(h){console.error("Error searching patients:",h),be("Failed to search patients","error")}finally{$t(!1)}},Le=h=>{const B=C.find(X=>X.patientName===h.patient&&(X.time===h.time||X.appointmentTime===h.time)&&(X.date===Ke.date||X.appointmentDate===Ke.date)||X.id===h.appointmentId);B?(_e(B),Et(!0)):(_e({id:h.appointmentId,patientName:h.patient,patientPhone:h.phone,patientId:h.patientId,date:Ke.date,time:h.time,status:h.status||"confirmed"}),Et(!0))},Qt=()=>{ye&&ye.patientId&&(se(ye.patientId),ln(!0),Et(!1))},Xt=()=>{ye&&(Et(!1),pa(ye))},dn=async h=>{try{const B=Ht(R,h),X=ve(V,"appointments"),de=Ce(X,le("doctorId","==",g),le("date","==",h)),je=(await Oe(de)).docs.map(Be=>{const Pe=Be.data();return{time:Pe.time||Pe.appointmentTime,patient:Pe.patientName,phone:Pe.patientPhone,patientId:Pe.patientId,appointmentId:Be.id,status:Pe.status}});bn({date:h,slots:B,bookedSlots:je}),kt(!0)}catch(B){console.error("Error viewing slots:",B),be("Failed to load slots","error")}},Ht=(h,B)=>{if(!h||!B)return[];const{workingHours:X,slotDuration:de,workingDays:ne,unavailableDates:je,blockedTimeSlots:Be}=h;if(je&&je.some(vn=>vn.date===B))return[];const Pe=new Date(B).getDay(),dt=Pe===0?7:Pe;if(!ne||!ne.includes(dt))return[];const lt=[],[Ne,et]=(X?.start||"09:00").split(":").map(Number),[bt,Gt]=(X?.end||"17:00").split(":").map(Number);let en=Ne*60+et;const Tn=bt*60+Gt,Un=de||30;for(;en<Tn;){const vn=Math.floor(en/60),Gn=en%60,ui=`${String(vn).padStart(2,"0")}:${String(Gn).padStart(2,"0")}`;Be&&Be.some(tn=>tn.date===B&&(tn.time===ui||tn.startTime&&tn.endTime&&ui>=tn.startTime&&ui<tn.endTime))||lt.push(ui),en+=Un}return lt},W={container:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",fontFamily:"var(--font-sans)",color:"var(--text-main)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem",background:"var(--bg-card)",padding:"1.5rem",borderRadius:"16px",boxShadow:"var(--shadow-md)",border:"1px solid var(--border-subtle)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px",border:"1px solid var(--border-subtle)",cursor:"default"},tabContainer:{display:"flex",gap:"0.5rem",marginBottom:"2rem",overflowX:"auto",paddingBottom:"0.5rem",msOverflowStyle:"none",scrollbarWidth:"none",borderBottom:"1px solid var(--border-subtle)",padding:"0.5rem 0"},tab:{padding:"0.75rem 1.25rem",borderRadius:"8px",border:"1px solid transparent",background:"transparent",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},activeTab:{background:"var(--primary-light)",color:"white",boxShadow:"var(--shadow-sm)",fontWeight:"600"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"2rem",boxShadow:"var(--shadow-md)",marginBottom:"1.5rem",width:"100%",boxSizing:"border-box",border:"1px solid var(--border-subtle)"},appointmentCard:{background:"white",borderRadius:"12px",padding:"1rem",boxShadow:"var(--shadow-sm)",border:"1px solid #e6e9ef"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-sm)"},dangerButton:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fecaca"},secondaryButton:{background:"white",color:"var(--text-main)",border:"1px solid var(--border-subtle)"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem",backdropFilter:"blur(4px)"},modalContent:{background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",border:"1px solid var(--border-subtle)",animation:"slideUp 0.3s ease-out"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-subtle)",fontSize:"1rem",marginBottom:"1rem",transition:"all 0.2s ease",background:"var(--bg-main)",color:"var(--text-main)"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-lg)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease",color:"white",display:"flex",alignItems:"center",gap:"0.75rem"}};return N||!g||!x?t.jsx("div",{style:W.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:W.container,children:[Hn&&t.jsx("div",{style:{...W.notification,background:Hn.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:Hn.message}),!u&&t.jsxs("div",{style:W.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" Dr. ",x?.displayName||"Doctor Dashboard"]}),t.jsxs("p",{style:{margin:0,color:"#666"},children:[x?.specialization||"Medical Professional"," "]})]}),t.jsxs("div",{style:W.statsGrid,children:[t.jsxs("div",{style:W.statCard,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:28})}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:_.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...W.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:_.completedAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Completed"})]}),t.jsxs("div",{style:{...W.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:_.patientCount||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Patients"})]})]}),t.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:t.jsx("button",{style:{...W.button,background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",color:"white"},onClick:()=>Qe(!0),children:" Update Profile"})}),t.jsx("div",{style:W.tabContainer,children:A?t.jsx("select",{value:j,onChange:h=>D(h.target.value),style:{padding:"0.5rem",borderRadius:"8px",fontSize:"1rem"},"aria-label":"Select dashboard tab",children:["overview","appointments","availability","patients","usage","billing"].filter(h=>!((h==="usage"||h==="billing")&&c)).map(h=>t.jsx("option",{value:h,children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}):["overview","appointments","availability","patients","usage","billing"].filter(h=>!((h==="usage"||h==="billing")&&c)).map(h=>t.jsx("button",{style:{...W.tab,...j===h?W.activeTab:{}},onClick:()=>D(h),children:h==="availability"?"Manage Availability":h.charAt(0).toUpperCase()+h.slice(1)},h))}),j==="appointments"&&t.jsxs("div",{style:W.card,children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:22}),"Your Appointments"]}),C.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:C.map(h=>t.jsx("div",{style:{...W.appointmentCard,borderLeft:`4px solid ${h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsxs("strong",{style:{fontSize:"1.1rem",color:"#333"},children:[" ",h.patientName]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:h.status==="completed"?"#38ef7d":h.status==="confirmed"?"#11998e":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:h.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Date:"})," ",h.date||h.appointmentDate]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",h.time||h.appointmentTime]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",h.patientPhone]}),h.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",h.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.status!=="completed"&&t.jsx("button",{onClick:()=>pa(h),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),t.jsx("button",{onClick:()=>{console.log("=== View Record Clicked ==="),console.log("Full appointment data:",h),console.log("Available fields:",Object.keys(h));const B=h.patientId||h.userId||h.patientUid||h.patient_id||h.user_id||h.patientPhone||h.userPhone||h.patientEmail||h.email||h.patientName;if(console.log("Extracted Patient ID:",B),console.log("Doctor ID:",g),console.log("Doctor Name:",x?.displayName||x?.name),!B){const X=`Patient ID not found in appointment data.

Available fields: ${Object.keys(h).join(", ")}

Please check the console for full appointment data.`;alert(X),console.error("Cannot find patient ID. Appointment structure:",h);return}console.log(" Opening modal with patient ID:",B),se(B),Fe(!0)},style:{padding:"0.6rem 1.2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Patient Records"})]})]})},h.id))})]}),j==="availability"&&t.jsxs("div",{style:W.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Manage Availability"}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{ge({slotDuration:R.slotDuration||30,dayWiseHours:{1:{enabled:R.workingDays?.includes(1),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},2:{enabled:R.workingDays?.includes(2),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},3:{enabled:R.workingDays?.includes(3),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},4:{enabled:R.workingDays?.includes(4),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},5:{enabled:R.workingDays?.includes(5),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},6:{enabled:R.workingDays?.includes(6),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"},7:{enabled:R.workingDays?.includes(7),start:R.workingHours?.start||"09:00",end:R.workingHours?.end||"17:00"}}}),xe(!0)},style:{...W.button,...W.primaryButton},children:" Configure Slots & Hours"}),t.jsx("button",{style:{...W.button,...W.secondaryButton},onClick:()=>at(!0),children:" Block Time"}),t.jsx("button",{style:{...W.button,background:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",color:"white"},onClick:()=>xt(!0),children:" Mark Leave/Absent"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsxs("h3",{style:{color:"#333",marginTop:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:16}),"View Slots for a Date"]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("input",{type:"date",value:Ft,onChange:h=>pn(h.target.value),style:{...W.input,marginBottom:0,flex:"1",minWidth:"0"}}),t.jsx("button",{onClick:()=>dn(Ft),style:{...W.button,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:" View Slots"})]})]}),Ke&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{children:[" Slots for ",Ke.date]}),t.jsx("button",{onClick:()=>bn(null),style:{padding:"0.5rem 1rem",background:"#e0e0e0",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"Close"})]}),Ke.slots.length===0?t.jsx("div",{style:{padding:"2rem",background:R.unavailableDates?.some(h=>h.date===Ke.date)?"#fff3cd":"#fee",borderRadius:"10px",textAlign:"center",color:R.unavailableDates?.some(h=>h.date===Ke.date)?"#856404":"#c33",border:R.unavailableDates?.some(h=>h.date===Ke.date)?"2px solid #ffc107":"2px solid #f5c6cb"},children:R.unavailableDates?.some(h=>h.date===Ke.date)?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"Doctor is on Leave"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:R.unavailableDates.find(h=>h.date===Ke.date)?.reason||"No appointments can be booked on this date"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{children:"No Working Slots Available"}),t.jsx("div",{style:{marginTop:"0.5rem"},children:"This is not a working day"})]})}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem"},children:Ke.slots.map(h=>{const B=Ke.bookedSlots.find(X=>X.time===h);return t.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",border:B?"2px solid #38ef7d":"2px solid #e0e0e0",background:B?"linear-gradient(135deg, rgba(17, 153, 142, 0.1) 0%, rgba(56, 239, 125, 0.1) 100%)":"white",textAlign:"center",cursor:B?"pointer":"default",transition:"all 0.3s ease",position:"relative"},onClick:()=>B&&Le(B),onMouseEnter:X=>{B&&(X.currentTarget.style.transform="translateY(-4px)",X.currentTarget.style.boxShadow="0 4px 12px rgba(17, 153, 142, 0.3)")},onMouseLeave:X=>{B&&(X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="none")},children:[t.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:B?"#11998e":"#333",marginBottom:"0.5rem"},children:[" ",h]}),B?t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#38ef7d",color:"white",borderRadius:"5px",marginBottom:"0.5rem",fontWeight:"600"},children:"BOOKED"}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",color:"#333"},children:[" ",B.patient]}),t.jsxs("div",{style:{fontSize:"0.8rem"},children:[" ",B.phone]})]}),t.jsx("div",{style:{fontSize:"0.7rem",color:"#11998e",fontWeight:"600",marginTop:"0.5rem",padding:"0.3rem",background:"rgba(17, 153, 142, 0.1)",borderRadius:"4px"},children:"Click for records"})]}):t.jsx("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"#e0e0e0",color:"#666",borderRadius:"5px",fontWeight:"600"},children:"AVAILABLE"})]},h)})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{style:{color:"#333"},children:" Current Configuration"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Slot Duration"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"700"},children:[R.slotDuration||30," min"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:"12px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Working Hours"}),t.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"700"},children:[R.workingHours?.start||"09:00"," - ",R.workingHours?.end||"17:00"]})]})]})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333"},children:[t.jsx(an,{size:16})," Working Days"]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"1rem"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((h,B)=>t.jsx("div",{style:{padding:"0.75rem 1.5rem",borderRadius:"10px",background:R.workingDays?.includes(B+1)?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"#e0e0e0",color:R.workingDays?.includes(B+1)?"white":"#666",fontWeight:"600",fontSize:"1rem"},children:h},h))})]}),R.blockedTimeSlots&&R.blockedTimeSlots.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Blocked Time Slots"}),R.blockedTimeSlots.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date})," | ",h.startTime," - ",h.endTime,t.jsx("br",{}),t.jsx("small",{children:h.reason})]}),t.jsx("button",{style:{...W.button,...W.dangerButton},onClick:()=>ki(h.id),children:"Unblock"})]},h.id))]}),R.unavailableDates&&R.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h3",{children:"Absent Dates"}),R.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"1rem",background:"#ffe5e5",borderRadius:"10px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffcccc"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("small",{children:h.reason})]})]}),t.jsx("button",{style:{...W.button,...W.dangerButton},onClick:()=>qi(h.id),children:"Remove"})]},h.id))]})]}),j==="patients"&&t.jsxs("div",{style:W.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" My Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and manage your patient records and prescriptions"}),t.jsx("div",{style:{marginBottom:"2rem"},children:t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by name, phone, or patient ID...",value:re,onChange:h=>Kn(h.target.value),onKeyPress:h=>h.key==="Enter"&&ae(),style:{...W.input,flex:1}}),t.jsx("button",{onClick:ae,disabled:qt,style:{...W.button,minWidth:"0",background:qt?"#ccc":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:qt?" Searching...":" Search"})]})}),An.length>0&&t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h3",{style:{color:"#333",marginBottom:"1rem"},children:["Search Results (",An.length,")"]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:An.map(h=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #667eea"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem"},children:[" ",h.name]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem"},children:[" ",h.phone,h.email&&t.jsxs(t.Fragment,{children:[" |  ",h.email]})]})]}),t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Search ==="),console.log("Patient:",h),console.log("Patient ID:",h.id),!h.id){alert("Patient ID not found");return}se(h.id),Fe(!0),console.log("Modal state updated")},style:W.button,children:" View Records"})]})},h.id))}),t.jsx("button",{onClick:()=>vi([]),style:{...W.button,marginTop:"1rem",background:"#e0e0e0",color:"#333"},children:"Clear Search Results"})]}),t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:"All My Patients"}),(()=>{console.log("Patients Tab - Total appointments:",C.length),console.log("Patients Tab - Appointments data:",C);const h={};C.forEach(ne=>{const je=ne.patientId||ne.userId||ne.patientUid,Be=ne.patientPhone||ne.userPhone,Pe=je||Be,dt=ne.patientName||ne.userName||"Unknown Patient";if(console.log("Processing appointment:",{id:ne.id,actualUserId:je,patientKey:Pe,patientName:dt,patientPhone:Be}),Pe&&!h[Pe]&&(h[Pe]={id:Pe,userId:je,name:dt,phone:Be||"N/A",appointments:[],lastVisit:ne.date,completedVisits:0,upcomingVisits:0}),Pe){h[Pe].appointments.push(ne),ne.status==="completed"&&h[Pe].completedVisits++;const lt=new Date().toISOString().split("T")[0];ne.date>=lt&&ne.status!=="completed"&&ne.status!=="cancelled"&&h[Pe].upcomingVisits++,ne.date>h[Pe].lastVisit&&(h[Pe].lastVisit=ne.date)}});const B=Object.values(h);console.log("Patients Tab - Unique patients found:",B.length),console.log("Patients Tab - Patients list:",B);const de=B.sort((ne,je)=>new Date(je.lastVisit)-new Date(ne.lastVisit)).slice(0,5);return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#11998e"},children:["Total: ",B.length," ",B.length===1?"Patient":"Patients"]}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.25rem"},children:["Showing ",Math.min(5,B.length)," most recent ",B.length>5?"(use search to find others)":""]})]}),de.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),C.length>0?t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#e74c3c"},children:t.jsxs("strong",{children:["Found ",C.length," appointments but no patient data!"]})}),t.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"1rem"},children:"This means appointments don't have patient information (patientId, patientName, patientPhone)."}),t.jsx("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",textAlign:"left",maxWidth:"600px",margin:"0 auto"},children:t.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"#856404"},children:[t.jsx("strong",{children:"Check browser console for details:"}),t.jsx("br",{}),"- Open Developer Tools (F12)",t.jsx("br",{}),'- Look for "Patients Tab" logs',t.jsx("br",{}),"- Check what fields are in your appointments"]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"No patients yet"}),t.jsx("p",{style:{fontSize:"0.9rem"},children:"Patients will appear here after they book appointments with you"})]})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:de.map(ne=>t.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",border:"2px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:t.jsxs("strong",{style:{fontSize:"1.2rem",color:"#333"},children:[" ",ne.name]})}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.8"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",ne.phone]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Last Visit:"})," ",ne.lastVisit]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Completed Visits:"})," ",ne.completedVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Upcoming Visits:"})," ",ne.upcomingVisits]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Total Appointments:"})," ",ne.appointments.length]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>{if(console.log("=== View Records from Patient List ==="),console.log("Patient:",ne),console.log("Patient ID:",ne.id),!ne.id){alert("Patient ID not found");return}se(ne.id),Fe(!0),console.log("Modal state updated")},style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" View Records"}),ne.upcomingVisits>0&&ne.appointments.filter(je=>je.date>=new Date().toISOString().split("T")[0]&&je.status!=="completed").slice(0,1).map(je=>t.jsx("button",{onClick:()=>pa(je),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"},je.id))]})]})},ne.id))})]})})()]}),j==="payments"&&t.jsxs("div",{style:W.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Payments & Earnings"}),t.jsx("button",{onClick:We,style:{...W.button,...W.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),w?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:w.pricingModel==="free"?"#e8f5e9":w.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:w.pricingModel==="free"?"#2e7d32":w.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[w.pricingModel==="free"&&" Free + Ads",w.pricingModel==="reduced"&&` Reduced Rate (${w.discountPercentage}% off)`,w.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[w.pricingModel==="free"&&"You use the app completely FREE! Ad revenue funds your access.",w.pricingModel==="reduced"&&`You get ${w.discountPercentage}% discount on all fees. Ads help reduce your costs.`,w.pricingModel==="full"&&"Premium tier with no ads. You pay standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Cost (",P?"This Month":"Total",")"]}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[w.symbol,w.displayCost?.toFixed(2)||"0.00"]}),P&&t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[w.monthlyAppointments||0," appts (this month)"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Pending Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[w.symbol,(Ge.pendingAmount||w.pending||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Amount due"}),t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:We,style:{...W.button,...W.primaryButton},children:"Pay Now"})})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[w.symbol,w.paid.toFixed(2)]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown (App Usage)"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",w.appointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[w.symbol,w.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",w.prescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[w.symbol,w.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[w.symbol,w.rates.appointmentCost]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[w.symbol,w.rates.prescriptionCost]})]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),w.countryInstructions?.[w.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",w.country," users:"]})," ",w.countryInstructions[w.country]]}),w.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:w.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:w.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",w.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:w.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",w.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",w.paymentDetails.wise.swift]})]})]}),w.country==="India"&&w.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:w.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:w.paymentDetails.upi.upiId})]})})]}),w.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:w.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:w.paymentDetails.paypal.email})]})})]}),w.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:w.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",w.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",w.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:w.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",w.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:w.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",w.paymentDetails.bankTransfer.swift]})]})]}),!w.paymentDetails?.wise?.enabled&&!w.paymentDetails?.upi?.enabled&&!w.paymentDetails?.paypal?.enabled&&!w.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Doctor ID (",t.jsx("strong",{children:f?.uid}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:te||oi,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>F(!0)})})}),I&&t.jsx("div",{onClick:()=>F(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:te||oi,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})}),w.lastPaymentDate&&t.jsxs("div",{style:{background:"#e8f5e9",borderRadius:"10px",padding:"1.5rem",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32"},children:" Last Payment Made"}),t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[w.symbol,w.lastPaymentAmount?.toFixed(2)||"0.00"]}),t.jsx("div",{style:{color:"#666",fontSize:"0.9rem",marginTop:"0.25rem"},children:new Date(w.lastPaymentDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Need help with payments?"})," Contact the admin for payment processing and bank detail updates."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment data..."})]})]}),j==="usage"&&t.jsxs("div",{style:W.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Usage Statistics"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#666"},children:"View Month:"}),t.jsxs("select",{value:P||"all",onChange:h=>Ae(h.target.value==="all"?"":h.target.value),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"2px solid #667eea",fontSize:"1rem",fontWeight:"600",color:"#667eea",cursor:"pointer",background:"white"},children:[t.jsx("option",{value:"all",children:" All Time"}),w?.appointmentsByMonth&&Object.keys(w.appointmentsByMonth).sort().reverse().map(h=>t.jsx("option",{value:h,children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})},h))]})]})]}),N?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]}):w?t.jsxs(t.Fragment,{children:[P&&P!=="all"&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsxs("strong",{style:{color:"#1976d2"},children:[t.jsx(an,{size:16})," Viewing: "]}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(P+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's usage)"})]}),t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:w.pricingModel==="free"?"#4caf50":w.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[w.pricingModel==="free"&&" FREE PLAN",w.pricingModel==="reduced"&&` DISCOUNTED (${w.discountPercentage}% OFF)`,w.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"10px",border:"2px solid #4caf50"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:36})}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[P&&P!=="all"?"Month":"Total"," Appointments"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#2e7d32"},children:P&&P!=="all"?w.appointmentsByMonth?.[P]||0:w.totalAppointments||0})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e3f2fd",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:[P&&P!=="all"?"Month":"Total"," Prescriptions"]}),t.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#1565c0"},children:P&&P!=="all"?w.prescriptionsByMonth?.[P]||0:w.totalPrescriptions||0})]})]}),w.appointmentsByMonth&&Object.keys(w.appointmentsByMonth).length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Object.entries(w.appointmentsByMonth).sort(([h],[B])=>B.localeCompare(h)).map(([h,B])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",borderBottom:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{fontWeight:"500"},children:new Date(h+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[B," appointments, ",w.prescriptionsByMonth?.[h]||0," prescriptions"]})]},h))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Note:"})," This is a read-only view of your cumulative usage statistics. For billing and payments, please check the Billing tab."]})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No usage data available yet."})]})]}),j==="billing"&&t.jsxs("div",{style:W.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Payments"}),t.jsx("button",{onClick:We,style:{...W.button,...W.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),N?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]}):Ge?t.jsxs(t.Fragment,{children:[typeof window<"u"&&window.location.search.includes("debugBilling=1")&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#fffbe6",border:"1px dashed #f59e0b"},children:[t.jsx("strong",{children:"Debug billing state:"}),t.jsx("pre",{style:{maxHeight:"200px",overflow:"auto",fontSize:"12px"},children:JSON.stringify({paymentInfo:w,cumulativeData:Ge},null,2)})]}),(()=>{const h=P&&P!=="all";let B=Ge;const X=Math.max(0,(Ge.totalCost||0)-(Ge.totalPaid||0));if(h){const de=w?.appointmentsByMonth?.[P]||0,ne=w?.prescriptionsByMonth?.[P]||0,je=de*(w?.rates?.appointmentCost||0),Be=ne*(w?.rates?.prescriptionCost||0),Pe=je+Be,dt=w?.monthlyPaymentHistory?.length?w.monthlyPaymentHistory.filter(et=>et.status==="completed"):Ge.paymentHistory?.filter(et=>et.createdAt&&et.createdAt.startsWith(P)&&et.status==="completed")||[],lt=w?.monthlyPaid!==void 0?w.monthlyPaid:dt.reduce((et,bt)=>et+(bt.amount||0),0),Ne=Math.max(0,Pe-lt);B={totalAppointments:de,totalPrescriptions:ne,appointmentCost:je,prescriptionCost:Be,totalCost:Pe,totalPaid:lt,pendingAmount:Ne,paymentHistory:w?.monthlyPaymentHistory?.length?w.monthlyPaymentHistory:dt}}return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"25px",background:w?.pricingModel==="free"?"#4caf50":w?.pricingModel==="reduced"?"#ff9800":"#2196f3",color:"white",fontWeight:"600",fontSize:"14px"},children:[w?.pricingModel==="free"&&" FREE PLAN",w?.pricingModel==="reduced"&&` DISCOUNTED (${w.discountPercentage}% OFF)`,w?.pricingModel==="full"&&" STANDARD PLAN"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Total Cost"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[w?.symbol,(Ge.totalCost||0).toFixed?Ge.totalCost.toFixed(2):(Ge.totalCost||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All time usage charges"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(56, 239, 125, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:" Paid So Far"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[w?.symbol,(Ge.totalPaid||0).toFixed?Ge.totalPaid.toFixed(2):(Ge.totalPaid||0).toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[Ge.paymentHistory?.length||0," payment(s) made"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:(X||0)>0?"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)":"linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)",borderRadius:"12px",color:"white",boxShadow:(X||0)>0?"0 4px 12px rgba(245, 87, 108, 0.3)":"0 4px 12px rgba(76, 175, 80, 0.3)"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:(X||0)>0?" Pending":" All Paid"}),t.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[w?.symbol,(X||0).toFixed?X.toFixed(2):(X||0).toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:X>0?"Amount due":"No pending balance"}),(X||0)>0&&t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:We,style:{...W.button,...W.primaryButton},children:"Pay Now"})})]})]}),h&&t.jsxs("div",{style:{marginTop:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},children:[t.jsxs("strong",{style:{color:"#1976d2"},children:[t.jsx(an,{size:16})," Viewing: "]}),t.jsx("span",{style:{color:"#1976d2"},children:new Date(P+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.9rem",color:"#666"},children:"(Monthly view - showing only this month's data)"})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",marginRight:"1rem"},children:"Select Month:"}),t.jsx("input",{type:"month",value:P,onChange:de=>Ae(de.target.value),style:W.input})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("h3",{style:{marginTop:0,color:"#333"},children:[" Cost Breakdown ",P?`(${new Date(P+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})})`:"(All Time)"]}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[t.jsx(an,{size:14})," Appointments (",B.totalAppointments,"  ",w?.symbol,w?.rates?.appointmentCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[w?.symbol,(B.appointmentCost||0).toFixed?B.appointmentCost.toFixed(2):(B.appointmentCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:[" Prescriptions (",B.totalPrescriptions,"  ",w?.symbol,w?.rates?.prescriptionCost||0,")"]}),t.jsxs("strong",{style:{color:"#667eea"},children:[w?.symbol,(B.prescriptionCost||0).toFixed?B.prescriptionCost.toFixed(2):(B.prescriptionCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#667eea",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Cost"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[w?.symbol,(B.totalCost||0).toFixed?B.totalCost.toFixed(2):(B.totalCost||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#4caf50",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Total Paid"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[w?.symbol,(B.totalPaid||0).toFixed?B.totalPaid.toFixed(2):(B.totalPaid||0).toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:(B.pendingAmount||0)>0?"#ff5252":"#38ef7d",borderRadius:"8px",color:"white"},children:[t.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Pending Balance"}),t.jsxs("strong",{style:{fontSize:"1.2rem"},children:[w?.symbol,(B.pendingAmount||0).toFixed?B.pendingAmount.toFixed(2):(B.pendingAmount||0).toFixed(2)]})]})]})]}),P&&w?.appointmentsByMonth&&w.appointmentsByMonth[P]!==void 0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Monthly Breakdown"}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white",borderRadius:"8px",overflow:"hidden"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#667eea",color:"white"},children:[t.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Month"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Appointments"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Prescriptions"}),t.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Total Cost"}),t.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Status"})]})}),t.jsx("tbody",{children:Object.keys(w.appointmentsByMonth).sort().reverse().map(de=>{const ne=w.appointmentsByMonth[de]||0,je=w.prescriptionsByMonth?.[de]||0,Be=ne*(w.rates?.appointmentCost||0)+je*(w.rates?.prescriptionCost||0),lt=(Ge.paymentHistory?.filter(Ne=>Ne.createdAt&&Ne.createdAt.startsWith(de)&&Ne.status==="completed")||[]).reduce((Ne,et)=>Ne+(et.amount||0),0)>=Be;return t.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[t.jsx("td",{style:{padding:"1rem",fontWeight:"600"},children:new Date(de+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:ne}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:je}),t.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:[w.symbol,Be.toFixed(2)]}),t.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600",background:lt?"#e8f5e9":"#fff3e0",color:lt?"#2e7d32":"#e65100"},children:lt?" Paid":" Pending"})})]},de)})})]})})]}),Ge.paymentHistory&&Ge.paymentHistory.length>0&&t.jsxs("div",{style:{marginTop:"2rem"},children:[t.jsx("h3",{style:{color:"#333",marginBottom:"1rem"},children:" Payment History"}),t.jsx("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem"},children:Ge.paymentHistory.map(de=>t.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",background:"white",borderRadius:"8px",borderLeft:`4px solid ${de.status==="completed"?"#4caf50":de.status==="pending"?"#ff9800":"#f44336"}`},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[de.currency," ",de.amount?.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:[t.jsx(an,{size:14})," ",new Date(de.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.jsxs("div",{children:[" ",de.paymentMethod]}),de.description&&t.jsxs("div",{children:[" ",de.description]})]})]}),t.jsx("div",{children:t.jsxs("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:de.status==="completed"?"#4caf50":de.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[de.status==="completed"&&" Verified",de.status==="pending"&&" Pending Verification",de.status==="failed"&&" Rejected"]})})]})},de.id))})]}),t.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:t.jsxs("p",{style:{margin:0,color:"#e65100"},children:[t.jsx("strong",{children:" Payment Process:"})," Submit your payment details below. Admin will verify and approve your payment. Once verified, your pending balance will be updated."]})})]})})()]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"No billing data available yet."})]})]}),j==="overview"&&t.jsxs("div",{style:W.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#11998e"},children:"Today's Schedule"}),t.jsxs("p",{children:["Appointments: ",t.jsx("strong",{children:_.todayAppointments||0})]}),t.jsxs("p",{children:["Status: ",t.jsx("strong",{style:{color:"#38ef7d"},children:"Active"})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:"Performance"}),t.jsxs("p",{children:["Total Appointments: ",t.jsx("strong",{children:_.totalAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[_.totalAppointments?Math.round(_.completedAppointments/_.totalAppointments*100):0,"%"]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#f5576c"},children:"Patient Care"}),t.jsxs("p",{children:["Total Patients: ",t.jsx("strong",{children:_.patientCount||0})]}),t.jsxs("p",{children:["Rating: ",t.jsx("strong",{children:" 5.0"})]})]})]})]}),ue&&t.jsx("div",{style:W.modal,onClick:()=>Qe(!1),children:t.jsxs("div",{style:W.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Update Profile"}),t.jsxs("form",{onSubmit:$n,children:[t.jsx("input",{type:"text",placeholder:"Full Name",value:At.displayName,onChange:h=>on({...At,displayName:h.target.value}),style:W.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization",value:At.specialization,onChange:h=>on({...At,specialization:h.target.value}),style:W.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee",value:At.consultationFee,onChange:h=>on({...At,consultationFee:h.target.value}),style:W.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number",value:At.phone,onChange:h=>on({...At,phone:h.target.value}),style:W.input,required:!0}),t.jsx("div",{style:{margin:"1.5rem 0 1rem 0",paddingTop:"1rem",borderTop:"2px solid #e0e0e0"},children:t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#667eea",fontSize:"1.1rem"},children:" Clinic/Practice Address"})}),t.jsx("input",{type:"text",placeholder:"Country",value:At.country,onChange:h=>on({...At,country:h.target.value}),style:W.input}),t.jsx("input",{type:"text",placeholder:"State/Province",value:At.state,onChange:h=>on({...At,state:h.target.value}),style:W.input}),t.jsx("input",{type:"text",placeholder:"City",value:At.city,onChange:h=>on({...At,city:h.target.value}),style:W.input}),t.jsx("textarea",{placeholder:"Full Address (Street, Building, etc.)",value:At.address,onChange:h=>on({...At,address:h.target.value}),style:{...W.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...W.button,...W.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>Qe(!1),style:{...W.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),ht&&t.jsx("div",{style:W.modal,onClick:()=>at(!1),children:t.jsxs("div",{style:W.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Block Time Slot"}),t.jsxs("form",{onSubmit:Yn,children:[t.jsx("input",{type:"date",value:mn.date,onChange:h=>O({...mn,date:h.target.value}),style:W.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:mn.startTime,onChange:h=>O({...mn,startTime:h.target.value}),style:{...W.input,marginBottom:0},required:!0}),t.jsx("input",{type:"time",value:mn.endTime,onChange:h=>O({...mn,endTime:h.target.value}),style:{...W.input,marginBottom:0},required:!0})]}),t.jsx("input",{type:"text",placeholder:"Reason (e.g., Lunch Break, Meeting)",value:mn.reason,onChange:h=>O({...mn,reason:h.target.value}),style:W.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...W.button,...W.dangerButton,flex:1},children:"Block Time"}),t.jsx("button",{type:"button",onClick:()=>at(!1),style:{...W.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),$&&t.jsx("div",{style:W.modal,onClick:()=>xe(!1),children:t.jsxs("div",{style:{...W.modalContent,maxWidth:"800px",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Configure Slots & Working Hours"}),t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Set your slot duration and configure working hours for each day of the week"}),t.jsxs("form",{onSubmit:Ii,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:he.slotDuration,onChange:h=>ge({...he,slotDuration:parseInt(h.target.value)}),style:W.input,required:!0,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",color:"#333"},children:"Working Days & Hours"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((h,B)=>{const X=B+1,de=he.dayWiseHours[X];return t.jsx("div",{style:{padding:"1rem",background:de.enabled?"#f0f9ff":"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:`2px solid ${de.enabled?"#11998e":"#e0e0e0"}`},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("div",{style:{flex:"0 0 120px"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:de.enabled,onChange:()=>Ei(X),style:{width:"18px",height:"18px",cursor:"pointer"}}),t.jsx("span",{style:{fontWeight:"600",color:de.enabled?"#11998e":"#666"},children:h})]})}),de.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"Start Time"}),t.jsx("input",{type:"time",value:de.start,onChange:ne=>rn(X,"start",ne.target.value),style:{...W.input,marginBottom:0,padding:"0.5rem"},required:!0})]}),t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem"},children:"End Time"}),t.jsx("input",{type:"time",value:de.end,onChange:ne=>rn(X,"end",ne.target.value),style:{...W.input,marginBottom:0,padding:"0.5rem"},required:!0})]})]})]})},X)})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...W.button,...W.primaryButton,flex:1},children:"Save Configuration"}),t.jsx("button",{type:"button",onClick:()=>xe(!1),style:{...W.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ee&&t.jsx("div",{style:W.modal,onClick:()=>xt(!1),children:t.jsxs("div",{style:W.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Mark Absent Date"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Mark specific dates when you won't be available for appointments"}),R.unavailableDates&&R.unavailableDates.length>0&&t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("h4",{style:{color:"#333",marginBottom:"0.75rem"},children:"Current Absent Dates:"}),R.unavailableDates.map(h=>t.jsxs("div",{style:{padding:"0.75rem",background:"#fff3cd",borderRadius:"8px",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ffc107"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:h.date}),h.reason&&t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:h.reason})]}),t.jsx("button",{type:"button",onClick:()=>qi(h.id),style:{padding:"0.4rem 0.8rem",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]},h.id))]}),t.jsxs("form",{onSubmit:_i,children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Select Date"}),t.jsx("input",{type:"date",value:hn.date,min:new Date().toISOString().split("T")[0],onChange:h=>En({...hn,date:h.target.value}),style:W.input,required:!0})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Reason (optional)"}),t.jsx("input",{type:"text",placeholder:"e.g., Vacation, Personal Day, Conference",value:hn.reason,onChange:h=>En({...hn,reason:h.target.value}),style:W.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...W.button,...W.dangerButton,flex:1},children:"Mark Absent"}),t.jsx("button",{type:"button",onClick:()=>xt(!1),style:{...W.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),console.log("=== MODAL RENDER CHECK ===",{showPatientModal:me,selectedPatient:q,effectiveDoctorId:g,doctorName:x?.displayName||x?.name}),me&&q&&t.jsx(ix,{patientId:q,doctorId:g,doctorName:x?.displayName||x?.name,onClose:()=>{console.log("Closing PatientRecordModal"),Fe(!1),se(null),it()}}),Ze&&ye&&t.jsx("div",{style:W.modal,onClick:()=>gt(!1),children:t.jsxs("div",{style:{...W.modalContent,maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",ye.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",ye.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",ye.date||ye.appointmentDate," at ",ye.time||ye.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:v,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:Nt.diagnosis,onChange:h=>Vt({...Nt,diagnosis:h.target.value}),style:{...W.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:il,style:{padding:"0.4rem 0.8rem",background:"#11998e",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),Nt.medications.map((h,B)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:h.name,onChange:X=>Z(B,"name",X.target.value),style:{...W.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:h.dosage,onChange:X=>Z(B,"dosage",X.target.value),style:W.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:h.frequency,onChange:X=>Z(B,"frequency",X.target.value),style:W.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:h.duration,onChange:X=>Z(B,"duration",X.target.value),style:W.input}),Nt.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>Ni(B),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},B))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:Nt.tests,onChange:h=>Vt({...Nt,tests:h.target.value}),style:{...W.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:Nt.instructions,onChange:h=>Vt({...Nt,instructions:h.target.value}),style:{...W.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:Nt.followUpDate,onChange:h=>Vt({...Nt,followUpDate:h.target.value}),min:new Date().toISOString().split("T")[0],style:W.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...W.button,...W.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>gt(!1),style:{...W.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes pulse {
                    0%, 100% {
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.5;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #11998e;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `}),Tt&&ye&&t.jsx("div",{style:W.modal,onClick:()=>Et(!1),children:t.jsxs("div",{style:{...W.modalContent,maxWidth:"500px"},onClick:h=>h.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #11998e",paddingBottom:"1rem"},children:[" Patient: ",ye.patientName]}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",marginBottom:"1.5rem"},children:t.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.8",color:"#333"},children:[t.jsxs("div",{children:[t.jsxs("strong",{children:[t.jsx(an,{size:14})," Date:"]})," ",ye.date||ye.appointmentDate]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Time:"})," ",ye.time||ye.appointmentTime]}),t.jsxs("div",{children:[t.jsx("strong",{children:" Phone:"})," ",ye.patientPhone]}),ye.reason&&t.jsxs("div",{children:[t.jsx("strong",{children:" Reason:"})," ",ye.reason]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"white",borderRadius:"8px",border:"2px solid #11998e"},children:[t.jsx("strong",{style:{color:"#11998e"},children:"Status:"})," ",ye.status||"pending"]})]})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("button",{onClick:Qt,style:{padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" View Complete Health Records"}),ye.status!=="completed"&&t.jsx("button",{onClick:Xt,style:{padding:"1rem",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Add Prescription"}),ye.status==="completed"&&t.jsx("div",{style:{padding:"1rem",background:"#38ef7d",color:"white",borderRadius:"10px",textAlign:"center",fontSize:"1rem",fontWeight:"600"},children:" Consultation Completed"}),t.jsx("button",{onClick:()=>Et(!1),style:{padding:"1rem",background:"#e0e0e0",color:"#333",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:"Close"})]})]})}),k&&t.jsx("div",{style:W.modal,onClick:()=>Te(!1),children:t.jsxs("div",{style:{...W.modalContent,maxWidth:"600px"},onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsx("p",{style:{color:"#666",marginTop:"-0.5rem",marginBottom:"1.5rem"},children:"Submit your payment details. Admin will verify and update your account balance."}),t.jsxs("form",{onSubmit:ci,children:[t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff3e0",borderRadius:"10px",border:"2px solid #ff9800"},children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#e65100",marginBottom:"0.25rem"},children:"Total Pending Balance:"}),t.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#e65100"},children:[w?.symbol,Ge?.pendingAmount?.toFixed(2)||"0.00"]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:["Payment Amount (",w?.symbol,")"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ge?.pendingAmount||0,value:jt,onChange:h=>sn(h.target.value),style:W.input,placeholder:"Enter amount",required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>sn((Ge?.pendingAmount*.5).toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#1976d2"},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>sn(Ge?.pendingAmount?.toFixed(2)),style:{padding:"0.5rem 1rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",color:"#2e7d32"},children:"Full Amount"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Payment Method"}),t.jsxs("select",{value:di,onChange:h=>T(h.target.value),style:W.input,required:!0,children:[t.jsx("option",{value:"",children:"Select payment method"}),zt(w?.country||"US").map(h=>t.jsx("option",{value:h,children:h},h))]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",fontSize:"0.9rem",color:"#1565c0"},children:[t.jsx("strong",{children:" Payment Process:"}),t.jsx("br",{}),"1. Submit payment details below",t.jsx("br",{}),"2. Admin will verify your payment",t.jsx("br",{}),"3. Your balance will be updated once verified"]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{...W.button,...W.primaryButton,flex:1,opacity:Mt?.6:1,cursor:Mt?"not-allowed":"pointer"},children:Mt?"Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>Te(!1),disabled:Mt,style:{...W.button,background:"#e0e0e0",flex:1,opacity:Mt?.6:1,cursor:Mt?"not-allowed":"pointer"},children:"Cancel"})]})]})]})}),vt&&q&&t.jsx(oh,{patientId:q,onClose:()=>{ln(!1),se(null)},doctorId:g,doctorName:x?.displayName}),k&&t.jsx("div",{style:W.modal,onClick:()=>Te(!1),children:t.jsxs("div",{style:W.modalContent,onClick:h=>h.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsxs("div",{style:{background:"#f0f7ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:"Total Pending:"}),t.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",marginLeft:"0.5rem",color:"#1976d2"},children:[w?.currency," ",Ge.pendingAmount.toFixed(2)]})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[Ge.totalAppointments," appointments + ",Ge.totalPrescriptions," prescriptions"]})]}),t.jsxs("form",{onSubmit:ci,children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:["Payment Amount (",w?.currency,") *"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ge.pendingAmount,placeholder:`Enter amount (max: ${Ge.pendingAmount.toFixed(2)})`,value:jt,onChange:h=>sn(h.target.value),style:W.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("button",{type:"button",onClick:()=>sn((Ge.pendingAmount/2).toFixed(2)),style:{padding:"0.5rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>sn(Ge.pendingAmount.toFixed(2)),style:{padding:"0.5rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"Pay Full"})]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method *"}),t.jsxs("select",{value:di,onChange:h=>T(h.target.value),style:{...W.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select payment method..."}),zt(w?.country||"US").map(h=>t.jsx("option",{value:h,children:h},h))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"}),' After submitting, your payment will be marked as "pending" and will be verified by the admin. Once verified, it will be marked as "completed" and reflected in your balance.']}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{...W.button,...W.primaryButton,flex:1,opacity:Mt?.6:1,cursor:Mt?"not-allowed":"pointer"},children:Mt?"Processing...":"Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>Te(!1),style:{...W.button,background:"#ccc",color:"#333",flex:1},children:"Cancel"})]})]})]})})]})}const ax=()=>{const{currentUser:s,userProfile:r}=Ia(),[c,u]=b.useState("overview"),[f,y]=b.useState([]),[g,x]=b.useState([]),[j,D]=b.useState({}),[A,M]=b.useState(!0),[C,oe]=b.useState(null),[R,pe]=b.useState(!1),[_,ce]=b.useState(null),[N,ie]=b.useState(""),[w,ke]=b.useState([]),[pt,mt]=b.useState(!1),[P,Ae]=b.useState(null),[Y,$e]=b.useState(!1),[ue,Qe]=b.useState(!1),[ht,at]=b.useState("");b.useEffect(()=>{const v=new Date,ae=v.getFullYear(),Le=String(v.getMonth()+1).padStart(2,"0");at(`${ae}-${Le}`)},[]);const[q,se]=b.useState({patientId:"",fromDoctorId:"",toDoctorId:""}),[me,Fe]=b.useState(!1),[Ze,gt]=b.useState(!1),[ye,_e]=b.useState(!1),[yt,kt]=b.useState(!1),[Ke,bn]=b.useState(!1),[Ft,pn]=b.useState(null),[vt,ln]=b.useState({displayName:"",email:"",specialization:"",consultationFee:"",phone:""}),[Tt,Et]=b.useState({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),[k,Te]=b.useState(null),[fe,Ve]=b.useState({}),[qe,kn]=b.useState(null),[re,Kn]=b.useState(null),[An,vi]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:2e3},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:20}}}),[qt,$t]=b.useState([]),[rt,Jn]=b.useState({totalAppointments:0,totalPrescriptions:0,totalCost:0,totalPaid:0,pendingAmount:0,paymentHistory:[]}),[At,on]=b.useState(""),[mn,O]=b.useState(!1),[$,xe]=b.useState(!1),[he,ge]=b.useState(""),[Ee,xt]=b.useState(!1),[hn,En]=b.useState(!1),[Nt,Vt]=b.useState(null),Hn=v=>{try{const ae=sessionStorage.getItem(v);if(ae)return JSON.parse(ae)}catch(ae){console.warn("Cache read error",ae)}return null},Dn=(v,ae)=>{try{sessionStorage.setItem(v,JSON.stringify(ae))}catch(Le){console.warn("Cache write error",Le)}};b.useEffect(()=>{const v=new Image;v.src=oi,v.onload=()=>{try{const ae=document.createElement("canvas");ae.width=v.width,ae.height=v.height;const Le=ae.getContext("2d");Le.drawImage(v,0,0);const Xt=Le.getImageData(0,0,ae.width,ae.height).data;let dn=ae.width,Ht=ae.height,W=0,h=0;const B=250;for(let dt=0;dt<ae.height;dt++)for(let lt=0;lt<ae.width;lt++){const Ne=(dt*ae.width+lt)*4,et=Xt[Ne],bt=Xt[Ne+1],Gt=Xt[Ne+2];Xt[Ne+3]>10&&!(et>B&&bt>B&&Gt>B)&&(lt<dn&&(dn=lt),dt<Ht&&(Ht=dt),lt>W&&(W=lt),dt>h&&(h=dt))}if(dn>W||Ht>h){Vt(oi);return}const X=Math.max(8,Math.floor(Math.min(ae.width,ae.height)*.02));dn=Math.max(0,dn-X),Ht=Math.max(0,Ht-X),W=Math.min(ae.width,W+X),h=Math.min(ae.height,h+X);const de=W-dn+1,ne=h-Ht+1,je=document.createElement("canvas");je.width=de,je.height=ne,je.getContext("2d").drawImage(ae,dn,Ht,de,ne,0,0,de,ne);const Pe=je.toDataURL("image/png");Vt(Pe)}catch(ae){console.error("QR crop failed",ae),Vt(oi)}},v.onerror=()=>Vt(oi)},[oi]);const[Ge,Nn]=b.useState(!1),[jt,sn]=b.useState({displayName:"",country:"",state:"",city:"",address:"",phone:""});b.useEffect(()=>{s?.uid&&r?.hospitalId&&Mt()},[s,r]);const Mt=async()=>{const v=Hn(`dashboard_${r.hospitalId}`);if(v){console.log(" Using cached overview data"),y(v.doctors),D(v.stats),M(!1);return}M(!0);try{const[ae,Le]=await Promise.all([hy(r.hospitalId),Fm(r.hospitalId)]);y(ae),D(Le),Dn(`dashboard_${r.hospitalId}`,{doctors:ae,stats:Le})}catch(ae){console.error("Error loading dashboard data:",ae),Ye("Error loading data","error")}finally{M(!1)}},Ye=(v,ae="success")=>{kn({message:v,type:ae}),setTimeout(()=>kn(null),3e3)};b.useEffect(()=>{c==="usage"&&r?.hospitalId&&T()},[c,r?.hospitalId]),b.useEffect(()=>{c==="billing"&&r?.hospitalId&&ht&&I()},[c,r?.hospitalId,ht]),b.useEffect(()=>{c==="appointments"&&r?.hospitalId&&!Ee&&di()},[c,r,Ee]);const di=async()=>{if(!A){M(!0),console.log("loading all hospital appointments...");try{const v=await fy(r.hospitalId);x(v),xt(!0),console.log(" Loaded all hospital appointments:",v.length)}catch(v){console.error("Error loading appointments:",v),Ye("Error loading appointments","error")}finally{M(!1)}}},T=async()=>{try{M(!0),console.log(" Loading optimized usage data for hospital:",r.hospitalId);const v=Hn(`usage_${r.hospitalId}`);if(v){console.log(" Using cached usage data"),Kn(v),M(!1);return}const[ae,Le,Qt]=await Promise.all([Yt(Re(V,"config","billing")).catch(B=>({exists:()=>!1})),Yt(Re(V,"hospitals",r.hospitalId)),Fm(r.hospitalId)]);if(ae.exists()&&vi(ae.data()),!Le.exists()){Ye("Hospital profile not found","error");return}const Xt=Le.data(),dn=ae.exists()?ae.data():An,Ht=Xt?.country||r?.country||"default",W=ko(Ht,dn),h={totalAppointments:Qt.totalAppointments||0,totalPrescriptions:Qt.totalPrescriptions||0,appointmentsByMonth:{},prescriptionsByMonth:{},pricingModel:Xt?.pricingModel||"full",discountPercentage:Xt?.discountPercentage||0,currency:W.currency,symbol:W.symbol};Dn(`usage_${r.hospitalId}`,h),Kn(h)}catch(v){console.error("Error loading usage data:",v),Ye("Error loading usage data","error")}finally{M(!1)}},I=async()=>{try{if(M(!0),console.log(" Loading billing data for hospital:",r.hospitalId,"Month:",ht),!ht){console.warn("No month selected for billing"),M(!1);return}const v=`billing_${r.hospitalId}_${ht}`,ae=Hn(v);if(ae){console.log(" Using cached billing data for",ht),Jn(ae.cumulativeData),Kn(ae.paymentInfo),M(!1);return}let Le={currency:"USD",appointmentCost:50,prescriptionCost:20};const{startISO:Qt,nextMonthISO:Xt}=Zd(ht);console.log(`Billing Range (ISO): ${Qt} to ${Xt}`);const dn=ve(V,"appointments"),Ht=Ce(dn,le("hospitalId","==",r.hospitalId),le("appointmentDate",">=",Qt),le("appointmentDate","<",Xt)),W=ve(V,"prescriptions"),h=Ce(W,le("hospitalId","==",r.hospitalId),le("date",">=",Qt),le("date","<",Xt)),B=ve(V,"payments"),X=Ce(B,le("hospitalId","==",r.hospitalId),le("createdAt",">=",Qt),le("createdAt","<",Xt)),de=X,ne=Ce(X,Qd(100));console.time("BillingParallelFetch");const[je,Be,Pe,dt,lt,Ne]=await Promise.all([Yt(Re(V,"config","billing")).catch(Zt=>({exists:()=>!1})),Yt(Re(V,"hospitals",r.hospitalId)),si(Ht).catch(Zt=>({data:()=>({count:0})})),si(h).catch(Zt=>({data:()=>({count:0})})),Us(de,{totalPaid:Os("amount")}).catch(Zt=>({data:()=>({totalPaid:0})})),Oe(ne).catch(Zt=>({docs:[]}))]);if(console.timeEnd("BillingParallelFetch"),je.exists()&&(Le=je.data(),vi(Le)),!Be.exists()){Ye("Hospital profile not found","error");return}const et=Be.data(),bt=Ll(et,Le),Gt=Pe.data().count,en=dt.data().count;let Tn=Ne.docs.map(Zt=>({id:Zt.id,...Zt.data()})).sort((Zt,Si)=>Si.createdAt.localeCompare(Zt.createdAt));const Un=et?.pricingModel||"full",vn=et?.discountPercentage||0,Gn=sh({appointmentsCount:Gt,prescriptionsCount:en,rates:bt,pricingModel:Un,discountPercentage:vn});let ui=Gn.appointmentCost,ji=Gn.prescriptionCost,tn=Gn.totalCost,ei=0;lt.data?ei=lt.data().totalPaid||0:ei=Tn.reduce((Zt,Si)=>Zt+(Si.status==="completed"&&Si.amount||0),0);const Gi=Math.max(0,tn-ei),Fn={cumulativeData:{totalAppointments:Gt,totalPrescriptions:en,appointmentCost:ui,prescriptionCost:ji,totalCost:tn,totalPaid:ei,pendingAmount:Gi,paymentHistory:Tn},paymentInfo:{totalAppointments:Gt,totalPrescriptions:en,appointmentCost:ui,prescriptionCost:ji,totalCost:tn,paid:ei,pending:Gi,pricingModel:Un,discountPercentage:vn,rates:bt,currency:bt.currency,symbol:bt.symbol,country:et?.country||r?.country||"default",bankDetails:et?.bankDetails||{},upiId:et?.upiId||"",lastPaymentDate:Tn[0]?.createdAt,lastPaymentAmount:Tn[0]?.amount,doctorCount:f.length,paymentHistory:Tn,paymentDetails:Le.paymentDetails||{},countryInstructions:Le.countrySpecificInstructions||{}},timestamp:Date.now()};Dn(v,Fn),Fn.paymentInfo.displayCost=Gn.totalCost,Fn.paymentInfo.rates=bt,Jn(Fn.cumulativeData),Kn(Fn.paymentInfo),console.log(" Billing data loaded successfully for",ht)}catch(v){console.error("Error loading billing data:",v),Ye("Error loading billing data","error")}finally{M(!1)}},F=v=>{console.log(" Getting payment methods for country:",v);const ae=[];return v==="India"||v==="IN"?ae.push("UPI","Paytm","PhonePe","Google Pay","Bank Transfer","Net Banking"):v==="United States"||v==="US"||v==="USA"?ae.push("PayPal","Stripe","Venmo","Zelle","Bank Transfer","Check"):v==="United Kingdom"||v==="UK"||v==="GB"?ae.push("PayPal","Stripe","Faster Payments","Bank Transfer","Check"):v==="Canada"||v==="CA"?ae.push("PayPal","Stripe","Interac","Bank Transfer","Check"):v==="Australia"||v==="AU"?ae.push("PayPal","Stripe","BPAY","Bank Transfer"):ae.push("PayPal","Stripe","Bank Transfer","Wire Transfer"),console.log(" Available payment methods:",ae),ae},te=async v=>{if(v.preventDefault(),!he){Ye("Please select a payment method","error");return}const ae=parseFloat(At);if(!ae||ae<=0){Ye("Please enter a valid amount","error");return}if(ae>rt.pendingAmount){Ye("Amount cannot exceed pending balance","error");return}try{xe(!0);const Le={hospitalId:r.hospitalId,hospitalName:r.displayName,amount:ae,currency:re.currency,paymentMethod:he,status:"pending",createdAt:new Date().toISOString(),createdBy:s.uid,type:"partial",description:`Partial payment for hospital app usage - ${rt.totalAppointments} appointments, ${rt.totalPrescriptions} prescriptions`},Qt=ve(V,"payments");await ua(Qt,Le),Ye("Payment request submitted successfully! Admin will verify and process.","success"),O(!1),on(""),ge(""),I()}catch(Le){console.error("Error processing payment:",Le),Ye("Failed to process payment","error")}finally{xe(!1)}},De=()=>{on(""),ge(""),O(!0)},He=async v=>{v.preventDefault();try{if(console.log("Adding doctor with data:",vt),console.log("Hospital ID:",r.hospitalId),console.log("Hospital Name:",r.displayName),!r.hospitalId){Ye("Hospital ID not found. Please contact support.","error");return}await Sy(r.hospitalId,r.displayName,vt),Ye("Doctor added successfully!"),Fe(!1),ln({displayName:"",email:"",specialization:"",consultationFee:"",phone:""}),Mt()}catch(ae){console.error("Error adding doctor:",ae),Ye("Failed to add doctor: "+(ae.message||"Unknown error"),"error")}},it=v=>{pn(v),Et({diagnosis:"",medications:[{name:"",dosage:"",frequency:"",duration:""}],instructions:"",followUpDate:"",tests:""}),bn(!0)},be=()=>{Et({...Tt,medications:[...Tt.medications,{name:"",dosage:"",frequency:"",duration:""}]})},zt=(v,ae,Le)=>{const Qt=[...Tt.medications];Qt[v][ae]=Le,Et({...Tt,medications:Qt})},fn=v=>{const ae=Tt.medications.filter((Le,Qt)=>Qt!==v);Et({...Tt,medications:ae})},ci=async v=>{v.preventDefault();try{const{db:ae}=await _s(async()=>{const{db:h}=await Promise.resolve().then(()=>py);return{db:h}},void 0),{doc:Le,updateDoc:Qt,setDoc:Xt,collection:dn}=await _s(async()=>{const{doc:h,updateDoc:B,setDoc:X,collection:de}=await import("./firebase-p-DgfaJy.js").then(ne=>ne.K);return{doc:h,updateDoc:B,setDoc:X,collection:de}},[]),Ht=Le(dn(ae,"prescriptions"));await Xt(Ht,{appointmentId:Ft.id,patientName:Ft.patientName,patientPhone:Ft.patientPhone,doctorName:Ft.doctorName,hospitalId:r.hospitalId,hospitalName:r.displayName,...Tt,createdAt:new Date().toISOString(),createdBy:s.uid});const W=Le(ae,"appointments",Ft.id);await Qt(W,{status:"completed",prescriptionId:Ht.id,completedAt:new Date().toISOString()}),Ye("Prescription saved successfully!"),bn(!1),pn(null),Mt()}catch(ae){console.error("Error saving prescription:",ae),Ye("Failed to save prescription","error")}},We=async v=>{v.preventDefault();try{await th(k.uid,{displayName:k.displayName,specialization:k.specialization,consultationFee:k.consultationFee,phone:k.phone}),Ye("Doctor updated successfully!"),gt(!1),Te(null),Mt()}catch(ae){console.error("Error updating doctor:",ae),Ye("Failed to update doctor","error")}},Wn=async(v,ae)=>{try{await yy(v,!ae),Ye(`Doctor ${ae?"disabled":"enabled"} successfully!`),Mt()}catch(Le){console.error("Error toggling doctor status:",Le),Ye("Failed to update status","error")}},St=async v=>{if(window.confirm("Are you sure you want to remove this doctor?"))try{await xy(v,r.hospitalId),Ye("Doctor removed successfully!"),Mt()}catch(ae){console.error("Error deleting doctor:",ae),Ye("Failed to remove doctor","error")}},$n=async()=>{try{await Ve(C.uid,fe),Ye("Availability updated successfully!"),_e(!1)}catch(v){console.error("Error saving availability:",v),Ye("Failed to update availability","error")}},Yn=async v=>{oe(v);try{const ae=await ic(v.uid);Ve(ae),_e(!0)}catch(ae){console.error("Error loading availability:",ae),Ye("Failed to load availability","error")}},ki=v=>{Te({...v}),gt(!0)},Ii=v=>{ce(v),pe(!0)},_i=async v=>{v.preventDefault();try{const ae=Re(V,"users",s.uid);if(await Wt(ae,{displayName:jt.displayName,country:jt.country,state:jt.state,city:jt.city,address:jt.address,phone:jt.phone,updatedAt:new Date().toISOString()}),r?.hospitalId){const Le=Re(V,"hospitals",r.hospitalId);await Wt(Le,{name:jt.displayName,country:jt.country,state:jt.state,city:jt.city,address:jt.address,updatedAt:new Date().toISOString()})}Ye("Hospital profile updated successfully!"),Nn(!1),setTimeout(()=>window.location.reload(),1e3)}catch(ae){console.error("Error updating hospital profile:",ae),Ye("Failed to update profile","error")}},qi=()=>{sn({displayName:r?.displayName||"",country:r?.country||"",state:r?.state||"",city:r?.city||"",address:r?.address||"",phone:r?.phone||""}),Nn(!0)},Ei=async()=>{if(!N.trim()){ke([]);return}mt(!0);try{const v=await Vy(N,r.hospitalId);ke(v),v.length===0&&Ye("No patients found","error")}catch(v){console.error("Error searching patients:",v),Ye("Failed to search patients","error")}finally{mt(!1)}},rn=v=>{Ae(v),$e(!0),ke([]),ie("")},pa=v=>{se({patientId:v.id,patientName:v.name,fromDoctorId:v.lastDoctorId,fromDoctorName:v.lastDoctorName,toDoctorId:""}),Qe(!0)},il=async v=>{if(v.preventDefault(),!q.toDoctorId){Ye("Please select a doctor to transfer to","error");return}try{const ae=await Jy(q.patientId,q.fromDoctorId,q.toDoctorId,r.hospitalId);Ye(`Successfully transferred ${ae.recordsTransferred} health records and ${ae.prescriptionsTransferred} prescriptions`,"success"),Qe(!1),se({patientId:"",fromDoctorId:"",toDoctorId:""})}catch(ae){console.error("Error transferring records:",ae),Ye("Failed to transfer records","error")}},Ni=()=>{pe(!1),ce(null),Mt()};if(R&&_)return t.jsxs("div",{children:[t.jsxs("div",{style:{background:"white",padding:"1rem 2rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("button",{onClick:Ni,style:{padding:"0.5rem 1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Back to Hospital Dashboard"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.85rem",color:"#666"},children:"Viewing Dashboard for:"}),t.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#333"},children:["Dr. ",_.displayName," - ",_.specialization]})]})]}),t.jsx(rh,{doctorId:_.uid,doctorProfile:_,isHospitalView:!0,suppressHeader:!0})]});const Z={container:{maxWidth:"1200px",margin:"0 auto",padding:"1rem",fontFamily:"var(--font-sans)",color:"var(--text-main)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem",background:"var(--bg-card)",padding:"1.5rem",borderRadius:"16px",boxShadow:"var(--shadow-md)",border:"1px solid var(--border-subtle)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"120px",border:"1px solid var(--border-subtle)",cursor:"default"},tabContainer:{display:"flex",gap:"0.5rem",marginBottom:"2rem",overflowX:"auto",paddingBottom:"0.5rem",msOverflowStyle:"none",scrollbarWidth:"none",borderBottom:"1px solid var(--border-subtle)",padding:"0.5rem 0"},tab:{padding:"0.75rem 1.25rem",borderRadius:"8px",border:"1px solid transparent",background:"transparent",color:"var(--text-secondary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",transition:"all 0.2s ease",whiteSpace:"nowrap"},activeTab:{background:"var(--primary-light)",color:"white",boxShadow:"var(--shadow-sm)",fontWeight:"600"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"2rem",boxShadow:"var(--shadow-md)",marginBottom:"1.5rem",width:"100%",boxSizing:"border-box",border:"1px solid var(--border-subtle)"},doctorCard:{background:"var(--bg-card)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1rem",border:"1px solid var(--border-subtle)",boxShadow:"var(--shadow-sm)",transition:"all 0.2s ease",display:"flex",flexDirection:"column",gap:"1rem"},button:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-sm)"},successButton:{background:"#10b981",color:"white",boxShadow:"var(--shadow-sm)"},dangerButton:{background:"#fee2e2",color:"#ef4444",border:"1px solid #fecaca"},warningButton:{background:"#fef3c7",color:"#d97706",border:"1px solid #fde68a"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"1rem",backdropFilter:"blur(4px)"},modalContent:{background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"var(--shadow-xl)",border:"1px solid var(--border-subtle)",animation:"slideUp 0.3s ease-out"},input:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-subtle)",fontSize:"1rem",marginBottom:"1rem",transition:"all 0.2s ease",background:"var(--bg-main)",color:"var(--text-main)"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-lg)",zIndex:2e3,fontWeight:"500",animation:"slideIn 0.3s ease",color:"white",display:"flex",alignItems:"center",gap:"0.75rem"}};return A||!s||!r?.hospitalId?t.jsx("div",{style:Z.container,children:t.jsxs("div",{style:{textAlign:"center",color:"white",fontSize:"1.5rem",paddingTop:"3rem"},children:[t.jsx("div",{className:"spinner",style:{border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading Dashboard..."]})}):t.jsxs("div",{style:Z.container,children:[qe&&t.jsx("div",{style:{...Z.notification,background:qe.type==="error"?"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white"},children:qe.message}),t.jsxs("div",{style:Z.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",color:"#333",marginBottom:"0.5rem"},children:[" ",r?.displayName||"Hospital Dashboard"]}),t.jsx("p",{style:{margin:0,color:"#666"},children:"Welcome back! Manage your hospital operations efficiently."})]}),t.jsxs("div",{style:Z.statsGrid,children:[t.jsxs("div",{style:Z.statCard,children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.totalDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Doctors"})]}),t.jsxs("div",{style:{...Z.statCard,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.activeDoctors||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"})]}),t.jsxs("div",{style:{...Z.statCard,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:t.jsx(an,{size:36})}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.todayAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Today's Appointments"})]}),t.jsxs("div",{style:{...Z.statCard,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"}}),t.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:j.totalAppointments||0}),t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"})]})]}),t.jsx("div",{style:Z.tabContainer,children:typeof window<"u"&&window.matchMedia&&window.matchMedia("(max-width:480px)").matches?t.jsx("select",{value:c,onChange:v=>u(v.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select hospital tab",children:[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("option",{value:v.id,children:v.label},v.id))}):[{id:"overview",label:"Overview"},{id:"doctors",label:"Doctors"},{id:"appointments",label:"Appointments"},{id:"patients",label:"Patients"},{id:"analytics",label:"Analytics"},{id:"usage",label:"Usage"},{id:"billing",label:"Billing"},{id:"settings",label:"Settings"}].map(v=>t.jsx("button",{style:{...Z.tab,...c===v.id?Z.activeTab:{}},onClick:()=>u(v.id),children:v.label},v.id))}),c==="doctors"&&t.jsxs("div",{style:Z.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Manage Doctors"}),t.jsx("button",{style:{...Z.button,...Z.primaryButton},onClick:()=>Fe(!0),children:"+ Add New Doctor"})]}),f.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"No doctors yet. Add your first doctor to get started!"})]}):f.map(v=>t.jsx("div",{style:Z.doctorCard,children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:"1 1 0",minWidth:"0",boxSizing:"border-box"},children:[t.jsxs("h3",{style:{margin:"0 0 0.5rem 0",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.displayName,v.isActive===!1&&t.jsx("span",{style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",background:"#ff4444",color:"white",borderRadius:"5px"},children:"Disabled"})]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Specialization:"})," ",v.specialization||"N/A"]}),t.jsxs("p",{style:{margin:"0 0 0.25rem 0",color:"#666"},children:[t.jsx("strong",{children:"Consultation Fee:"})," $",v.consultationFee||"N/A"]}),t.jsxs("p",{style:{margin:"0",color:"#666"},children:[t.jsx("strong",{children:"Phone:"})," ",v.phone||"N/A"]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{style:{...Z.button,background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontWeight:"600"},onClick:()=>Ii(v),children:" View Dashboard"}),t.jsx("button",{style:{...Z.button,...Z.primaryButton},onClick:()=>ki(v),children:" Edit"}),t.jsxs("button",{style:{...Z.button,...Z.successButton},onClick:()=>Yn(v),children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:16})})," Availability"]}),t.jsx("button",{style:{...Z.button,...v.isActive===!1?Z.successButton:Z.warningButton},onClick:()=>Wn(v.uid,v.isActive!==!1),children:v.isActive===!1?" Enable":" Disable"}),t.jsx("button",{style:{...Z.button,...Z.dangerButton},onClick:()=>St(v.uid),children:" Delete"})]})]})},v.uid))]}),c==="appointments"&&t.jsxs("div",{style:Z.card,children:[t.jsxs("h2",{style:{marginTop:0,color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:22}),"Appointments & Prescriptions"]}),g.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:t.jsx(an,{size:48})}),t.jsx("p",{children:"No appointments scheduled yet."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:g.map(v=>t.jsx("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",borderLeft:`4px solid ${v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#f5576c"}`},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[t.jsx("strong",{style:{fontSize:"1.1rem",color:"#333"},children:v.patientName}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:v.status==="completed"?"#38ef7d":v.status==="confirmed"?"#667eea":"#ffa502",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:v.status||"pending"})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Doctor:"})," ",v.doctorName]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," ",t.jsx("strong",{children:"Date:"})," ",v.appointmentDate||v.date]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Time:"})," ",v.appointmentTime||v.time]}),t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Phone:"})," ",v.patientPhone]}),v.reason&&t.jsxs("div",{children:[" ",t.jsx("strong",{children:"Reason:"})," ",v.reason]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.status!=="completed"&&t.jsx("button",{onClick:()=>it(v),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",whiteSpace:"nowrap"},children:" Add Prescription"}),v.status==="completed"&&v.prescriptionId&&t.jsx("div",{style:{padding:"0.5rem 1rem",background:"#38ef7d",color:"white",borderRadius:"8px",fontSize:"0.85rem",textAlign:"center",fontWeight:"600"},children:" Prescribed"})]})]})},v.id))})]}),c==="usage"&&t.jsxs("div",{style:Z.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" App Usage Statistics"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"View your hospital's app usage metrics (appointments and prescriptions)"}),re?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:re.pricingModel==="free"?"#e8f5e9":re.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:re.pricingModel==="free"?"#2e7d32":re.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[re.pricingModel==="free"&&" Free + Ads",re.pricingModel==="reduced"&&` Reduced Rate (${re.discountPercentage}% off)`,re.pricingModel==="full"&&" Full Rate"]})]}),t.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#555"},children:[re.pricingModel==="free"&&"Your hospital uses the app completely FREE! Ad revenue funds your access.",re.pricingModel==="reduced"&&`Your hospital gets ${re.discountPercentage}% discount on all fees. Ads help reduce your costs.`,re.pricingModel==="full"&&"Premium tier with no ads. Your hospital pays standard app usage fees."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Appointments"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:re.totalAppointments}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Total Prescriptions"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:re.totalPrescriptions}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"All-time total"})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Active Doctors"}),t.jsx("div",{style:{fontSize:"2.2rem",fontWeight:"bold",marginTop:"0.5rem"},children:f.length}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Using the platform"})]})]}),re.appointmentsByMonth&&Object.keys(re.appointmentsByMonth).length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Monthly Breakdown"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Object.entries(re.appointmentsByMonth).sort((v,ae)=>ae[0].localeCompare(v[0])).slice(0,12).map(([v,ae])=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"white",borderRadius:"6px",marginBottom:"0.5rem"},children:[t.jsx("span",{style:{fontWeight:"600"},children:new Date(v+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[ae," ",ae===1?"appointment":"appointments"]})]},v))})]}),t.jsxs("div",{style:{background:"#e3f2fd",borderRadius:"10px",padding:"1.5rem",border:"2px solid #2196f3"},children:[t.jsx("h3",{style:{marginTop:0,color:"#1976d2"},children:" About Usage Tracking"}),t.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#424242",lineHeight:"1.8"},children:[t.jsx("li",{children:"All appointments and prescriptions are tracked cumulatively"}),t.jsx("li",{children:"Usage metrics help understand your hospital's platform engagement"}),t.jsx("li",{children:"Billing is calculated based on total usage (see Billing tab)"})]})]})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading usage data..."})]})]}),c==="billing"&&t.jsxs("div",{style:Z.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Billing & Analytics"}),t.jsx("button",{onClick:De,style:{...Z.button,...Z.primaryButton,fontSize:"1rem",padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Make Payment"})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("label",{style:{fontWeight:"600",marginRight:"1rem"},children:"Select Month:"}),t.jsx("input",{type:"month",value:ht,onChange:v=>at(v.target.value),style:Z.input})]}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"View your hospital's app usage metrics (appointments and prescriptions)"}),re?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"2rem",padding:"15px",background:"#f0f7ff",borderRadius:"10px",border:"2px solid #2196f3"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[t.jsx("div",{children:t.jsx("strong",{style:{color:"#1976d2",fontSize:"16px"},children:"Your Pricing Model:"})}),t.jsxs("div",{style:{padding:"8px 20px",borderRadius:"20px",fontSize:"15px",fontWeight:"600",background:re.pricingModel==="free"?"#e8f5e9":re.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:re.pricingModel==="free"?"#2e7d32":re.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[re.pricingModel==="free"&&" Free + Ads",re.pricingModel==="reduced"&&` Reduced Rate (${re.discountPercentage}% off)`,re.pricingModel==="full"&&" Full Rate"]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white"},children:[t.jsxs("div",{style:{fontSize:"0.9rem",opacity:.9},children:["Cost (",ht?"This Month":"Total",")"]}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[re.symbol,re.displayCost?.toFixed(2)||"0.00"]}),ht&&t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[re.monthlyAppointments||0," appts (this month)"]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Pending Payment"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[re.symbol,rt.pendingAmount.toFixed(2)]}),t.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Amount due"}),t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx("button",{onClick:De,style:{...Z.button,...Z.primaryButton},children:"Pay Now"})})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #38ef7d 0%, #11998e 100%)",borderRadius:"10px",color:"white"},children:[t.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Already Paid"}),t.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginTop:"0.5rem"},children:[re.symbol,rt.totalPaid.toFixed(2)]}),t.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:[rt.paymentHistory.length," payment",rt.paymentHistory.length!==1?"s":""]})]})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Cost Breakdown"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Appointments (",rt.totalAppointments,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[re.symbol,rt.appointmentCost.toFixed(2)]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"white",borderRadius:"8px"},children:[t.jsxs("span",{children:["Prescriptions (",rt.totalPrescriptions,")"]}),t.jsxs("span",{style:{fontWeight:"600"},children:[re.symbol,rt.prescriptionCost.toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"2px solid #ddd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[t.jsx("span",{children:"Rate per Appointment:"}),t.jsxs("span",{children:[re.symbol,re.rates?.appointmentCost||0]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[t.jsx("span",{children:"Rate per Prescription:"}),t.jsxs("span",{children:[re.symbol,re.rates?.prescriptionCost||0]})]})]})]}),rt.paymentHistory.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" Payment History"}),t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:rt.paymentHistory.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",marginBottom:"0.75rem",borderLeft:`4px solid ${v.status==="completed"?"#4caf50":v.status==="pending"?"#ff9800":"#f44336"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[re.symbol,v.amount.toFixed(2)]}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",background:v.status==="completed"?"#e8f5e9":v.status==="pending"?"#fff3e0":"#ffebee",color:v.status==="completed"?"#2e7d32":v.status==="pending"?"#e65100":"#c62828"},children:v.status.toUpperCase()})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[t.jsxs("div",{children:["Method: ",v.paymentMethod]}),t.jsxs("div",{children:["Date: ",new Date(v.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),v.description&&t.jsxs("div",{children:["Note: ",v.description]})]})]},v.id))})]}),t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[t.jsx("h3",{style:{marginTop:0,color:"#333"},children:" How to Pay for App Usage"}),re.countryInstructions?.[re.country]&&t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",color:"#1976d2"},children:[t.jsxs("strong",{children:[" For ",re.country," users:"]})," ",re.countryInstructions[re.country]]}),re.paymentDetails?.wise?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #00d09c"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#00d09c",fontSize:"1.2rem"},children:"Wise Transfer (Recommended - Lowest Fees)"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:re.paymentDetails.wise.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Wise Email:"})," ",t.jsx("span",{style:{color:"#00d09c",fontFamily:"monospace",fontSize:"1.1rem"},children:re.paymentDetails.wise.email})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",re.paymentDetails.wise.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:re.paymentDetails.wise.iban})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",re.paymentDetails.wise.sortCode]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",re.paymentDetails.wise.swift]})]})]}),(re.country==="India"||re.country==="IN")&&re.paymentDetails?.upi?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"3px solid #667eea"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#667eea",fontSize:"1.2rem"},children:"UPI Payment"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:re.paymentDetails.upi.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"UPI ID:"})," ",t.jsx("span",{style:{color:"#667eea",fontFamily:"monospace",fontSize:"1.2rem"},children:re.paymentDetails.upi.upiId})]})})]}),re.paymentDetails?.paypal?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #0070ba"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#0070ba",fontSize:"1.2rem"},children:"PayPal"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:re.paymentDetails.paypal.instructions}),t.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:t.jsxs("div",{children:[t.jsx("strong",{children:"PayPal Email:"})," ",t.jsx("span",{style:{color:"#0070ba",fontFamily:"monospace",fontSize:"1.1rem"},children:re.paymentDetails.paypal.email})]})})]}),re.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"white",borderRadius:"10px",border:"2px solid #607d8b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("strong",{style:{color:"#607d8b",fontSize:"1.2rem"},children:"Bank Transfer"})]}),t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:re.paymentDetails.bankTransfer.instructions}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Name:"})," ",re.paymentDetails.bankTransfer.accountName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Bank:"})," ",re.paymentDetails.bankTransfer.bankName]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Account Number:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:re.paymentDetails.bankTransfer.accountNumber})]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Sort Code:"})," ",re.paymentDetails.bankTransfer.sortCode]}),t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"IBAN:"})," ",t.jsx("span",{style:{fontFamily:"monospace"},children:re.paymentDetails.bankTransfer.iban})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"SWIFT:"})," ",re.paymentDetails.bankTransfer.swift]})]})]}),!re.paymentDetails?.wise?.enabled&&!re.paymentDetails?.upi?.enabled&&!re.paymentDetails?.paypal?.enabled&&!re.paymentDetails?.bankTransfer?.enabled&&t.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"white",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#ff9800"},children:"Payment Details Not Configured"}),t.jsx("p",{style:{color:"#666"},children:"Please contact admin to set up payment methods."})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[t.jsx("strong",{style:{color:"#e65100"},children:" IMPORTANT:"}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e65100"},children:["Always include your Hospital ID (",t.jsx("strong",{children:r?.hospitalId}),") as reference/note in your payment!"]})]}),t.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"1.5rem"},children:t.jsx("div",{style:{width:"220px",height:"220px",margin:"0 auto",overflow:"hidden",borderRadius:"8px"},children:t.jsx("img",{src:Nt||oi,alt:"billing-qr",style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",display:"block"},onClick:()=>En(!0)})})}),hn&&t.jsx("div",{onClick:()=>En(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:t.jsx("img",{src:Nt||oi,alt:"billing-qr-large",style:{maxWidth:"90%",maxHeight:"90%",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",background:"white",padding:"12px",borderRadius:"8px"}})})]}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading billing data..."})]})]}),c==="overview"&&t.jsxs("div",{style:Z.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Quick Overview"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea"},children:" Doctor Summary"}),t.jsxs("p",{children:["Total Doctors: ",t.jsx("strong",{children:j.totalDoctors||0})]}),t.jsxs("p",{children:["Active Doctors: ",t.jsx("strong",{children:j.activeDoctors||0})]}),t.jsxs("p",{children:["Inactive Doctors: ",t.jsx("strong",{children:(j.totalDoctors||0)-(j.activeDoctors||0)})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsxs("h3",{style:{marginTop:0,color:"#38ef7d",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(an,{size:18}),"Appointments"]}),t.jsxs("p",{children:["Today: ",t.jsx("strong",{children:j.todayAppointments||0})]}),t.jsxs("p",{children:["Total: ",t.jsx("strong",{children:j.totalAppointments||0})]}),t.jsxs("p",{children:["Completed: ",t.jsx("strong",{children:j.completedAppointments||0})]}),t.jsxs("p",{children:["Pending: ",t.jsx("strong",{children:j.pendingAppointments||0})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"10px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#fa709a"},children:" Status Breakdown"}),t.jsxs("p",{children:["Confirmed: ",t.jsx("strong",{children:j.confirmedAppointments||0})]}),t.jsxs("p",{children:["Cancelled: ",t.jsx("strong",{children:j.cancelledAppointments||0})]}),t.jsxs("p",{children:["Completion Rate: ",t.jsxs("strong",{children:[j.totalAppointments?Math.round(j.completedAppointments/j.totalAppointments*100):0,"%"]})]})]})]})]}),c==="patients"&&t.jsxs("div",{style:Z.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Hospital Patients"}),t.jsx("p",{style:{color:"#666",marginBottom:"1.5rem"},children:"Search and view all patients who have visited your hospital across all doctors"}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Search by patient name or booking number...",value:N,onChange:v=>ie(v.target.value),onKeyPress:v=>v.key==="Enter"&&Ei(),style:{...Z.input,flex:1}}),t.jsx("button",{onClick:Ei,disabled:pt,style:{...Z.button,...Z.primaryButton,minWidth:"0"},children:pt?" Searching...":" Search"})]}),w.length>0&&t.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"10px",padding:"1rem",maxHeight:"400px",overflowY:"auto"},children:[t.jsxs("h4",{style:{marginTop:0,color:"#333"},children:["Found ",w.length," patient",w.length!==1?"s":""]}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:w.map(v=>t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"8px",border:"2px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem",marginBottom:"0.5rem"},children:[" ",v.name]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[" ",v.phone]}),t.jsxs("div",{children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:14})})," Last Visit: ",v.lastAppointment]}),t.jsxs("div",{children:[" Last Seen by: Dr. ",v.lastDoctorName]}),t.jsxs("div",{children:[" Total Visits: ",v.totalAppointments]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>rn(v.id),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" View Full History"}),t.jsx("button",{onClick:()=>pa(v),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:" Transfer Records"})]})]},v.id))})]})]}),w.length===0&&!pt&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"10px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{marginTop:0,color:"#333"},children:"Search for Patients"}),t.jsx("p",{children:"Enter a patient name or booking number to view their complete medical history across all your doctors."}),t.jsxs("p",{style:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Use Cases:"}),t.jsx("br",{})," View patient history when doctor is unavailable",t.jsx("br",{})," Transfer records when doctor leaves the hospital",t.jsx("br",{})," Access complete patient data across all departments"]})]})]}),c==="analytics"&&t.jsxs("div",{style:Z.card,children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Analytics & Reports"}),t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Advanced analytics coming soon!"}),t.jsx("p",{children:"View detailed reports, charts, and insights about your hospital performance."})]})]}),c==="settings"&&t.jsxs("div",{style:Z.card,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" Hospital Settings"}),t.jsx("button",{onClick:qi,style:{...Z.button,...Z.primaryButton},children:" Edit Profile"})]}),t.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#667eea",marginBottom:"1rem"},children:" Hospital Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Hospital Name"}),t.jsx("div",{style:{fontSize:"0.95rem",fontWeight:"500",color:"#444"},children:r?.displayName||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Email"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:s?.email||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Phone"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.phone||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px"},children:[t.jsx("h3",{style:{marginTop:0,color:"#38ef7d",marginBottom:"1rem"},children:" Address Information"}),t.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Country"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.country||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"State/Province"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.state||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"City"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.city||"Not set"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Address"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:r?.address||"Not set"})]})]})]}),t.jsxs("div",{style:{padding:"1.5rem",background:"#e8f5e9",borderRadius:"12px",border:"2px solid #4caf50"},children:[t.jsx("h3",{style:{marginTop:0,color:"#2e7d32",marginBottom:"1rem"},children:" Account Status"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Account Active"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsx("span",{children:"Profile Verified"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:""}),t.jsxs("span",{children:["Hospital ID: ",r?.hospitalId||"Not set"]})]})]})]})]})]}),me&&t.jsx("div",{style:Z.modal,onClick:()=>Fe(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Add New Doctor"}),t.jsxs("form",{onSubmit:He,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:vt.displayName,onChange:v=>ln({...vt,displayName:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"email",placeholder:"Email (optional)",value:vt.email,onChange:v=>ln({...vt,email:v.target.value}),style:Z.input}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:vt.specialization,onChange:v=>ln({...vt,specialization:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:vt.consultationFee,onChange:v=>ln({...vt,consultationFee:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:vt.phone,onChange:v=>ln({...vt,phone:v.target.value}),style:Z.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Z.button,...Z.primaryButton,flex:1},children:"Add Doctor"}),t.jsx("button",{type:"button",onClick:()=>Fe(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ze&&k&&t.jsx("div",{style:Z.modal,onClick:()=>gt(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:"Edit Doctor"}),t.jsxs("form",{onSubmit:We,children:[t.jsx("input",{type:"text",placeholder:"Full Name *",value:k.displayName,onChange:v=>Te({...k,displayName:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Specialization *",value:k.specialization,onChange:v=>Te({...k,specialization:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"number",placeholder:"Consultation Fee *",value:k.consultationFee,onChange:v=>Te({...k,consultationFee:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:k.phone,onChange:v=>Te({...k,phone:v.target.value}),style:Z.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Z.button,...Z.primaryButton,flex:1},children:"Save Changes"}),t.jsx("button",{type:"button",onClick:()=>gt(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),ye&&C&&t.jsx("div",{style:Z.modal,onClick:()=>_e(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsxs("h2",{style:{marginTop:0,color:"#333"},children:["Manage Availability - ",C.displayName]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Hours"}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("input",{type:"time",value:fe.workingHours?.start||"09:00",onChange:v=>Ve({...fe,workingHours:{...fe.workingHours,start:v.target.value}}),style:{...Z.input,marginBottom:0}}),t.jsx("input",{type:"time",value:fe.workingHours?.end||"17:00",onChange:v=>Ve({...fe,workingHours:{...fe.workingHours,end:v.target.value}}),style:{...Z.input,marginBottom:0}})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Slot Duration (minutes)"}),t.jsxs("select",{value:fe.slotDuration||30,onChange:v=>Ve({...fe,slotDuration:parseInt(v.target.value)}),style:Z.input,children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:45,children:"45 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Working Days"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((v,ae)=>{const Le=ae+1,Qt=fe.workingDays?.includes(Le);return t.jsx("button",{type:"button",onClick:()=>{const Xt=fe.workingDays||[],dn=Qt?Xt.filter(Ht=>Ht!==Le):[...Xt,Le];Ve({...fe,workingDays:dn})},style:{...Z.button,background:Qt?"#667eea":"#e0e0e0",color:Qt?"white":"#666"},children:v},v)})})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[t.jsx("button",{type:"button",onClick:$n,style:{...Z.button,...Z.primaryButton,flex:1},children:"Save Availability"}),t.jsx("button",{type:"button",onClick:()=>_e(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})}),Ke&&Ft&&t.jsx("div",{style:Z.modal,onClick:()=>bn(!1),children:t.jsxs("div",{style:{...Z.modalContent,maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333",borderBottom:"2px solid #667eea",paddingBottom:"1rem"},children:" Add Prescription"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #e0e0e0"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:"#333"},children:"Patient Information"}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",lineHeight:"1.6"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",Ft.patientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Phone:"})," ",Ft.patientPhone]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Date:"})," ",Ft.appointmentDate," at ",Ft.appointmentTime]})]})]}),t.jsxs("form",{onSubmit:ci,children:[t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Diagnosis *"}),t.jsx("textarea",{placeholder:"Enter diagnosis...",value:Tt.diagnosis,onChange:v=>Et({...Tt,diagnosis:v.target.value}),style:{...Z.input,minHeight:"80px",resize:"vertical"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#333"},children:"Medications *"}),t.jsx("button",{type:"button",onClick:be,style:{padding:"0.4rem 0.8rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Add Medicine"})]}),Tt.medications.map((v,ae)=>t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid #e0e0e0"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{type:"text",placeholder:"Medicine Name *",value:v.name,onChange:Le=>zt(ae,"name",Le.target.value),style:{...Z.input,gridColumn:"1 / -1"},required:!0}),t.jsx("input",{type:"text",placeholder:"Dosage (e.g., 500mg)",value:v.dosage,onChange:Le=>zt(ae,"dosage",Le.target.value),style:Z.input}),t.jsx("input",{type:"text",placeholder:"Frequency (e.g., 2x daily)",value:v.frequency,onChange:Le=>zt(ae,"frequency",Le.target.value),style:Z.input}),t.jsx("input",{type:"text",placeholder:"Duration (e.g., 7 days)",value:v.duration,onChange:Le=>zt(ae,"duration",Le.target.value),style:Z.input}),Tt.medications.length>1&&t.jsx("button",{type:"button",onClick:()=>fn(ae),style:{padding:"0.5rem",background:"#f5576c",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove"})]})},ae))]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Tests/Lab Work (if any)"}),t.jsx("textarea",{placeholder:"Enter required tests...",value:Tt.tests,onChange:v=>Et({...Tt,tests:v.target.value}),style:{...Z.input,minHeight:"60px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Instructions"}),t.jsx("textarea",{placeholder:"Additional instructions for the patient...",value:Tt.instructions,onChange:v=>Et({...Tt,instructions:v.target.value}),style:{...Z.input,minHeight:"80px",resize:"vertical"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Follow-up Date"}),t.jsx("input",{type:"date",value:Tt.followUpDate,onChange:v=>Et({...Tt,followUpDate:v.target.value}),min:new Date().toISOString().split("T")[0],style:Z.input})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[t.jsx("button",{type:"submit",style:{...Z.button,...Z.primaryButton,flex:1},children:" Save Prescription"}),t.jsx("button",{type:"button",onClick:()=>bn(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),ue&&t.jsx("div",{style:Z.modal,onClick:()=>Qe(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Transfer Patient Records"}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Patient: ",q.patientName]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Current Doctor: Dr. ",q.fromDoctorName]})]}),t.jsxs("form",{onSubmit:il,children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Transfer To Doctor: *"}),t.jsxs("select",{value:q.toDoctorId,onChange:v=>se({...q,toDoctorId:v.target.value}),style:{...Z.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select a doctor..."}),f.filter(v=>v.uid!==q.fromDoctorId&&v.isActive).map(v=>t.jsxs("option",{value:v.uid,children:["Dr. ",v.displayName," - ",v.specialization]},v.uid))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This will transfer all health records and prescriptions from the current doctor to the selected doctor. The original records will be marked as transferred."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Z.button,...Z.primaryButton,flex:1},children:" Transfer Records"}),t.jsx("button",{type:"button",onClick:()=>Qe(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),mn&&t.jsx("div",{style:Z.modal,onClick:()=>O(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Make Payment"}),!1,t.jsxs("div",{style:{background:"#f0f7ff",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"2px solid #2196f3"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{color:"#1976d2"},children:"Total Pending:"}),t.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",marginLeft:"0.5rem",color:"#1976d2"},children:[re?.currency," ",rt.pendingAmount.toFixed(2)]})]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[rt.totalAppointments," appointments + ",rt.totalPrescriptions," prescriptions"]})]}),t.jsxs("form",{onSubmit:te,children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:["Payment Amount (",re?.currency,") *"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:rt.pendingAmount,placeholder:`Enter amount (max: ${rt.pendingAmount.toFixed(2)})`,value:At,onChange:v=>on(v.target.value),style:Z.input,required:!0}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[t.jsx("button",{type:"button",onClick:()=>on((rt.pendingAmount/2).toFixed(2)),style:{padding:"0.5rem",background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"50%"}),t.jsx("button",{type:"button",onClick:()=>on(rt.pendingAmount.toFixed(2)),style:{padding:"0.5rem",background:"#e8f5e9",border:"1px solid #4caf50",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",flex:1},children:"Pay Full"})]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method *"}),t.jsxs("select",{value:he,onChange:v=>ge(v.target.value),style:{...Z.input,marginBottom:"1rem"},required:!0,children:[t.jsx("option",{value:"",children:"Select payment method..."}),F(re?.country||"US").map(v=>t.jsx("option",{value:v,children:v},v))]}),t.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"}),' After submitting, your payment will be marked as "pending" and will be verified by the admin. Once verified, it will be marked as "completed" and reflected in your balance.']}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",disabled:$,style:{...Z.button,...Z.primaryButton,flex:1,opacity:$?.6:1,cursor:$?"not-allowed":"pointer"},children:$?" Processing...":" Submit Payment"}),t.jsx("button",{type:"button",onClick:()=>O(!1),disabled:$,style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Ge&&t.jsx("div",{style:Z.modal,onClick:()=>Nn(!1),children:t.jsxs("div",{style:Z.modalContent,onClick:v=>v.stopPropagation(),children:[t.jsx("h2",{style:{marginTop:0,color:"#333"},children:" Edit Hospital Profile"}),t.jsxs("form",{onSubmit:_i,children:[t.jsx("input",{type:"text",placeholder:"Hospital Name *",value:jt.displayName,onChange:v=>sn({...jt,displayName:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"tel",placeholder:"Phone Number *",value:jt.phone,onChange:v=>sn({...jt,phone:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"text",placeholder:"Country *",value:jt.country,onChange:v=>sn({...jt,country:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"text",placeholder:"State/Province *",value:jt.state,onChange:v=>sn({...jt,state:v.target.value}),style:Z.input,required:!0}),t.jsx("input",{type:"text",placeholder:"City *",value:jt.city,onChange:v=>sn({...jt,city:v.target.value}),style:Z.input,required:!0}),t.jsx("textarea",{placeholder:"Full Address",value:jt.address,onChange:v=>sn({...jt,address:v.target.value}),style:{...Z.input,minHeight:"80px",resize:"vertical"}}),t.jsxs("div",{style:{background:"#e3f2fd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsx("strong",{children:" Note:"})," This information will be visible to patients when they book appointments with your hospital's doctors."]}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsx("button",{type:"submit",style:{...Z.button,...Z.primaryButton,flex:1},children:" Save Changes"}),t.jsx("button",{type:"button",onClick:()=>Nn(!1),style:{...Z.button,background:"#e0e0e0",flex:1},children:"Cancel"})]})]})]})}),Y&&P&&t.jsx(oh,{patientId:P,onClose:()=>{$e(!1),Ae(null)},hospitalId:r?.hospitalId,isHospitalView:!0}),t.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                input:focus, select:focus {
                    outline: none;
                    border-color: #667eea;
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]})},lx=async()=>(await Oe(ve(V,"doctors"))).docs.map(r=>({id:r.id,...r.data()})),ox=async(s,r)=>{const c=`${s}_${r}`,u=Re(V,"doctor_slots",c),f=await Yt(u);return f.exists()?f.data().slots:[]},sx=async(s,r,c,u)=>(await ec(nc,"createAppointment")({doctorId:s,date:r,time:c,paymentId:u})).data;var Pl;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(Pl||(Pl={}));class Vd extends Error{constructor(r,c,u){super(r),this.message=r,this.code=c,this.data=u}}const rx=s=>{var r,c;return s?.androidBridge?"android":!((c=(r=s?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||c===void 0)&&c.bridge?"ios":"web"},dx=s=>{const r=s.CapacitorCustomPlatform||null,c=s.Capacitor||{},u=c.Plugins=c.Plugins||{},f=()=>r!==null?r.name:rx(s),y=()=>f()!=="web",g=M=>{const C=D.get(M);return!!(C?.platforms.has(f())||x(M))},x=M=>{var C;return(C=c.PluginHeaders)===null||C===void 0?void 0:C.find(oe=>oe.name===M)},j=M=>s.console.error(M),D=new Map,A=(M,C={})=>{const oe=D.get(M);if(oe)return console.warn(`Capacitor plugin "${M}" already registered. Cannot register plugins twice.`),oe.proxy;const R=f(),pe=x(M);let _;const ce=async()=>(!_&&R in C?_=typeof C[R]=="function"?_=await C[R]():_=C[R]:r!==null&&!_&&"web"in C&&(_=typeof C.web=="function"?_=await C.web():_=C.web),_),N=(P,Ae)=>{var Y,$e;if(pe){const ue=pe?.methods.find(Qe=>Ae===Qe.name);if(ue)return ue.rtype==="promise"?Qe=>c.nativePromise(M,Ae.toString(),Qe):(Qe,ht)=>c.nativeCallback(M,Ae.toString(),Qe,ht);if(P)return(Y=P[Ae])===null||Y===void 0?void 0:Y.bind(P)}else{if(P)return($e=P[Ae])===null||$e===void 0?void 0:$e.bind(P);throw new Vd(`"${M}" plugin is not implemented on ${R}`,Pl.Unimplemented)}},ie=P=>{let Ae;const Y=(...$e)=>{const ue=ce().then(Qe=>{const ht=N(Qe,P);if(ht){const at=ht(...$e);return Ae=at?.remove,at}else throw new Vd(`"${M}.${P}()" is not implemented on ${R}`,Pl.Unimplemented)});return P==="addListener"&&(ue.remove=async()=>Ae()),ue};return Y.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(Y,"name",{value:P,writable:!1,configurable:!1}),Y},w=ie("addListener"),ke=ie("removeListener"),pt=(P,Ae)=>{const Y=w({eventName:P},Ae),$e=async()=>{const Qe=await Y;ke({eventName:P,callbackId:Qe},Ae)},ue=new Promise(Qe=>Y.then(()=>Qe({remove:$e})));return ue.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await $e()},ue},mt=new Proxy({},{get(P,Ae){switch(Ae){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return pe?pt:w;case"removeListener":return ke;default:return ie(Ae)}}});return u[M]=mt,D.set(M,{name:M,proxy:mt,platforms:new Set([...Object.keys(C),...pe?[R]:[]])}),mt};return c.convertFileSrc||(c.convertFileSrc=M=>M),c.getPlatform=f,c.handleError=j,c.isNativePlatform=y,c.isPluginAvailable=g,c.registerPlugin=A,c.Exception=Vd,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c},cx=s=>s.Capacitor=dx(s),qs=cx(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ac=qs.registerPlugin;class lc{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,c){let u=!1;this.listeners[r]||(this.listeners[r]=[],u=!0),this.listeners[r].push(c);const y=this.windowListeners[r];y&&!y.registered&&this.addWindowListener(y),u&&this.sendRetainedArgumentsForEvent(r);const g=async()=>this.removeListener(r,c);return Promise.resolve({remove:g})}async removeAllListeners(){this.listeners={};for(const r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}}notifyListeners(r,c,u){const f=this.listeners[r];if(!f){if(u){let y=this.retainedEventArguments[r];y||(y=[]),y.push(c),this.retainedEventArguments[r]=y}return}f.forEach(y=>y(c))}hasListeners(r){var c;return!!(!((c=this.listeners[r])===null||c===void 0)&&c.length)}registerWindowListener(r,c){this.windowListeners[c]={registered:!1,windowEventName:r,pluginEventName:c,handler:u=>{this.notifyListeners(c,u)}}}unimplemented(r="not implemented"){return new qs.Exception(r,Pl.Unimplemented)}unavailable(r="not available"){return new qs.Exception(r,Pl.Unavailable)}async removeListener(r,c){const u=this.listeners[r];if(!u)return;const f=u.indexOf(c);this.listeners[r].splice(f,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const c=this.retainedEventArguments[r];c&&(delete this.retainedEventArguments[r],c.forEach(u=>{this.notifyListeners(r,u)}))}}const Qm=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Xm=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ux extends lc{async getCookies(){const r=document.cookie,c={};return r.split(";").forEach(u=>{if(u.length<=0)return;let[f,y]=u.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");f=Xm(f).trim(),y=Xm(y).trim(),c[f]=y}),c}async setCookie(r){try{const c=Qm(r.key),u=Qm(r.value),f=`; expires=${(r.expires||"").replace("expires=","")}`,y=(r.path||"/").replace("path=",""),g=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${c}=${u||""}${f}; path=${y}; ${g};`}catch(c){return Promise.reject(c)}}async deleteCookie(r){try{document.cookie=`${r.key}=; Max-Age=0`}catch(c){return Promise.reject(c)}}async clearCookies(){try{const r=document.cookie.split(";")||[];for(const c of r)document.cookie=c.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}}async clearAllCookies(){try{await this.clearCookies()}catch(r){return Promise.reject(r)}}}ac("CapacitorCookies",{web:()=>new ux});const px=async s=>new Promise((r,c)=>{const u=new FileReader;u.onload=()=>{const f=u.result;r(f.indexOf(",")>=0?f.split(",")[1]:f)},u.onerror=f=>c(f),u.readAsDataURL(s)}),mx=(s={})=>{const r=Object.keys(s);return Object.keys(s).map(f=>f.toLocaleLowerCase()).reduce((f,y,g)=>(f[y]=s[r[g]],f),{})},hx=(s,r=!0)=>s?Object.entries(s).reduce((u,f)=>{const[y,g]=f;let x,j;return Array.isArray(g)?(j="",g.forEach(D=>{x=r?encodeURIComponent(D):D,j+=`${y}=${x}&`}),j.slice(0,-1)):(x=r?encodeURIComponent(g):g,j=`${y}=${x}`),`${u}&${j}`},"").substr(1):null,fx=(s,r={})=>{const c=Object.assign({method:s.method||"GET",headers:s.headers},r),f=mx(s.headers)["content-type"]||"";if(typeof s.data=="string")c.body=s.data;else if(f.includes("application/x-www-form-urlencoded")){const y=new URLSearchParams;for(const[g,x]of Object.entries(s.data||{}))y.set(g,x);c.body=y.toString()}else if(f.includes("multipart/form-data")||s.data instanceof FormData){const y=new FormData;if(s.data instanceof FormData)s.data.forEach((x,j)=>{y.append(j,x)});else for(const x of Object.keys(s.data))y.append(x,s.data[x]);c.body=y;const g=new Headers(c.headers);g.delete("content-type"),c.headers=g}else(f.includes("application/json")||typeof s.data=="object")&&(c.body=JSON.stringify(s.data));return c};class gx extends lc{async request(r){const c=fx(r,r.webFetchExtra),u=hx(r.params,r.shouldEncodeUrlParams),f=u?`${r.url}?${u}`:r.url,y=await fetch(f,c),g=y.headers.get("content-type")||"";let{responseType:x="text"}=y.ok?r:{};g.includes("application/json")&&(x="json");let j,D;switch(x){case"arraybuffer":case"blob":D=await y.blob(),j=await px(D);break;case"json":j=await y.json();break;case"document":case"text":default:j=await y.text()}const A={};return y.headers.forEach((M,C)=>{A[C]=M}),{data:j,headers:A,status:y.status,url:y.url}}async get(r){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))}async post(r){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))}async put(r){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))}async patch(r){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))}async delete(r){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))}}ac("CapacitorHttp",{web:()=>new gx});class yx extends lc{constructor(){super()}async echo(r){return console.log("ECHO",r),r}async open(r){return console.log(r),new Promise((c,u)=>{var f,y,g=r;g.handler=function(A){console.log(A.razorpay_payment_id),c({response:A})},g["modal.ondismiss"]=function(){u(JSON.stringify({code:2,description:"Payment Canceled by User"}))};var x=0;g.hasOwnProperty("retry")&&g.retry.enabled===!0&&(x=g.retry.max_count);var j=document.getElementsByTagName("script")[0],D=document.createElement("script");D.id="rzp-jssdk",D.setAttribute("src","https://checkout.razorpay.com/v1/checkout.js"),(f=j.parentNode)===null||f===void 0||f.appendChild(D),D.addEventListener("load",()=>{try{y=new window.Razorpay(g),y.open(),y.on("payment.failed",A=>{var M;x=x-1,x<0&&(console.log(A),(M=j.parentNode)===null||M===void 0||M.removeChild(D),u(A.error))})}catch(A){u({response:A})}})})}}const dh=ac("Checkout",{web:()=>_s(()=>Promise.resolve().then(()=>xx),void 0).then(s=>new s.CheckoutWeb)}),xx=Object.freeze(Object.defineProperty({__proto__:null,Checkout:dh,CheckoutWeb:yx},Symbol.toStringTag,{value:"Module"})),bx=async(s,r={})=>{console.log("Initializing payment of "+s,r);const c=r?.keyId||void 0||"rzp_test_1234567890";if(qs.isNativePlatform())try{const u={key:c,amount:Math.round(s*100).toString(),name:"Appointment App",description:"Consultation Fee",prefill:{email:r?.email||"test@example.com",contact:r?.phone||"9999999999"},theme:{color:"#4f46e5"},...r.options},f=await dh.open(u);return console.log(" Native Payment Success:",f),{success:!0,paymentId:f.response.razorpay_payment_id||f.response.payment_id,amount:s,timestamp:new Date().toISOString(),method:"native-razorpay",details:f.response}}catch(u){throw console.error(" Native Payment Failed:",u),new Error(u.message||"Payment failed")}else return console.log(" Using Web Mock Payment"),new Promise((u,f)=>{setTimeout(()=>{console.log(" Web Mock Payment Success"),u({success:!0,paymentId:"pay_web_"+Math.random().toString(36).substr(2,9),amount:s,timestamp:new Date().toISOString(),method:"web-mock"})},1e3)})},vx=()=>{const{currentUser:s}=Ia(),[r,c]=b.useState([]),[u,f]=b.useState(null),[y,g]=b.useState(!1),[x,j]=b.useState([]),[D,A]=b.useState(new Date().toISOString().split("T")[0]),[M,C]=b.useState(!1);b.useEffect(()=>{oe()},[]);const oe=async()=>{try{const N=await lx();c(N)}catch(N){console.error(N)}},R=async N=>{f(N),g(!0),await pe(N.id,D)},pe=async(N,ie)=>{C(!0),j([]);try{const w=await ox(N,ie);j(w||[])}catch(w){console.error(w)}C(!1)},_=N=>{const ie=N.target.value;A(ie),u&&pe(u.id,ie)},ce=async N=>{if(window.confirm(`Book appointment with ${u.name} at ${N.time}? Fees: ${u.consultationFee}`)){C(!0);try{const ie=await bx(u.consultationFee,{doctorId:u.id,patientId:s.uid});await sx(u.id,D,N.time,ie.paymentId),alert(`Booking Confirmed! Payment ID: ${ie.paymentId}`),pe(u.id,D)}catch(ie){console.error(ie),alert("Booking Failed: "+ie.message)}C(!1)}};return t.jsx("div",{style:{padding:"1rem"},children:y?t.jsxs("div",{children:[t.jsx("button",{onClick:()=>g(!1),style:{marginBottom:"1rem",background:"none",border:"none",color:"var(--color-text-muted)",cursor:"pointer"},children:" Back to Doctors"}),t.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"},children:[t.jsxs("h3",{style:{marginTop:0},children:["Book with ",u.name||u.displayName]}),t.jsxs("label",{style:{display:"block",marginBottom:"1rem"},children:["Select Date:",t.jsx("input",{type:"date",value:D,onChange:_,style:{marginLeft:"0.5rem",padding:"0.5rem"}})]}),M?t.jsx("p",{children:"Loading slots..."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem"},children:x.length===0?t.jsx("p",{children:"No slots available for this date."}):x.map((N,ie)=>t.jsx("button",{disabled:N.isBooked,onClick:()=>!N.isBooked&&ce(N),style:{padding:"0.75rem",background:N.isBooked?"#e2e8f0":"var(--color-bg-card)",border:N.isBooked?"none":"1px solid var(--color-primary)",color:N.isBooked?"#94a3b8":"var(--color-primary)",cursor:N.isBooked?"not-allowed":"pointer",borderRadius:"var(--radius-md)"},children:N.time},ie))})]})]}):t.jsxs("div",{children:[t.jsx("h3",{children:"Available Doctors"}),t.jsx("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:r.map(N=>t.jsxs("div",{style:{padding:"1.5rem",background:"white",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-md)",transition:"transform 0.2s"},children:[t.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--color-primary)"},children:N.name||N.displayName}),t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"var(--color-text-muted)"},children:N.specialization}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[t.jsxs("span",{style:{fontWeight:600},children:["",N.consultationFee]}),t.jsx("button",{onClick:()=>R(N),style:{padding:"0.5rem 1rem",background:"var(--color-secondary)",color:"white",border:"none",borderRadius:"var(--radius-full)"},children:"Book Now"})]}),N.hospitalName&&t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",color:"#888"},children:["@",N.hospitalName]})]},N.id))})]})})},jx=({showNotification:s})=>{const[r,c]=b.useState(!1),[u,f]=b.useState(null),[y,g]=b.useState([]),[x,j]=b.useState("all"),[D,A]=b.useState("");b.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0);const _=Re(V,"config","ads"),ce=await Yt(_);ce.exists()?f(ce.data()):f({enabled:!1,adProvider:"google",googleAdSenseId:"",bookingPageAdsEnabled:!1,adPlacements:{bookingPage:!1,doctorDashboard:!1,hospitalDashboard:!1}});const N=ve(V,"users"),ie=Ce(N,le("role","==","doctor")),w=Ce(N,le("role","==","hospital")),[ke,pt]=await Promise.all([Oe(ie),Oe(w)]),mt=[];ke.forEach(P=>{const Ae=P.data();mt.push({id:P.id,...Ae,type:"doctor",adsEnabled:Ae.adsEnabled||!1,pricingModel:Ae.pricingModel||"full",discountPercentage:Ae.discountPercentage||0})}),pt.forEach(P=>{const Ae=P.data();mt.push({id:P.id,...Ae,type:"hospital",adsEnabled:Ae.adsEnabled||!1,pricingModel:Ae.pricingModel||"full",discountPercentage:Ae.discountPercentage||0})}),g(mt)}catch(_){console.error("Error loading ads data:",_),s?.("Error loading ads configuration","error")}finally{c(!1)}},C=async()=>{try{c(!0);const _=Re(V,"config","ads");await Wt(_,u),s?.("Global ad configuration saved successfully","success")}catch(_){console.error("Error saving config:",_),s?.("Error saving configuration","error")}finally{c(!1)}},oe=async(_,ce)=>{try{const N=Re(V,"users",_);await Wt(N,{adsEnabled:!ce}),g(ie=>ie.map(w=>w.id===_?{...w,adsEnabled:!ce}:w)),s?.("Ad settings updated","success")}catch(N){console.error("Error updating entity ads:",N),s?.("Error updating ad settings","error")}},R=async(_,ce,N=0)=>{try{const ie=Re(V,"users",_);await Wt(ie,{pricingModel:ce,discountPercentage:ce==="reduced"?N:0}),g(w=>w.map(ke=>ke.id===_?{...ke,pricingModel:ce,discountPercentage:N}:ke)),s?.("Pricing model updated","success")}catch(ie){console.error("Error updating pricing:",ie),s?.("Error updating pricing model","error")}},pe=y.filter(_=>x==="doctors"?_.type==="doctor":x==="hospitals"?_.type==="hospital":!0).filter(_=>{if(!D)return!0;const ce=D.toLowerCase();return _.name?.toLowerCase().includes(ce)||_.email?.toLowerCase().includes(ce)});return r&&!u?t.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading ads configuration..."}):t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{style:{marginBottom:"10px"},children:" Ads Management"}),t.jsx("p",{style:{color:"#666",marginBottom:"30px"},children:"Configure ads to monetize your platform. Providers use the app for free, and ads generate revenue for you."}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",marginBottom:"30px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Global Ad Settings"}),t.jsxs("div",{style:{display:"grid",gap:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:u?.enabled||!1,onChange:_=>f({...u,enabled:_.target.checked}),style:{width:"20px",height:"20px",marginRight:"10px"}}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"500"},children:"Enable Ads System Globally"})]}),t.jsx("div",{style:{padding:"6px 12px",background:"#e3f2fd",borderRadius:"20px",fontSize:"13px",color:"#1976d2",fontWeight:"500"},children:"100% Revenue to Platform"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Google AdSense Publisher ID"}),t.jsx("input",{type:"text",placeholder:"ca-pub-xxxxxxxxxxxxxxxx",value:u?.googleAdSenseId||"",onChange:_=>f({...u,googleAdSenseId:_.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Get this from your Google AdSense account"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:" Revenue Model Options"}),t.jsxs("div",{style:{padding:"15px",background:"#f0f7ff",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsx("div",{style:{fontSize:"14px",marginBottom:"12px",fontWeight:"600",color:"#1976d2"},children:" Flexible Pricing Options"}),t.jsxs("div",{style:{display:"grid",gap:"10px",fontSize:"13px",color:"#555"},children:[t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Full Rate:"})," Providers pay standard app usage fees (no ads)"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Reduced Rate:"})," Providers pay discounted fees + see ads in dashboard"]}),t.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px"},children:[t.jsx("strong",{children:" Free with Ads:"})," Providers pay nothing but see ads in dashboard (you make money from ads)"]})]}),t.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"#fff3cd",borderRadius:"6px",fontSize:"12px",color:"#856404"},children:[t.jsx("strong",{children:"Note:"})," Configure each provider's pricing model individually below. Booking page ads are shown to patients regardless of provider's pricing model."]})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"500"},children:" Ad Placement Locations"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.bookingPage||!1,onChange:_=>f({...u,adPlacements:{...u?.adPlacements,bookingPage:_.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Booking Page (Global - All Users)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Shows ads on the appointment booking page for all patients"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.doctorDashboard||!1,onChange:_=>f({...u,adPlacements:{...u?.adPlacements,doctorDashboard:_.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Doctor Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on doctor dashboards (control per-doctor below)"})]}),t.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"8px"},children:[t.jsx("input",{type:"checkbox",checked:u?.adPlacements?.hospitalDashboard||!1,onChange:_=>f({...u,adPlacements:{...u?.adPlacements,hospitalDashboard:_.target.checked}}),style:{width:"18px",height:"18px",marginRight:"10px"}}),t.jsx("span",{style:{fontWeight:"600",fontSize:"15px"},children:" Hospital Dashboards (Individual Control Below)"})]}),t.jsx("div",{style:{fontSize:"13px",color:"#666",paddingLeft:"28px"},children:"Enable this to allow ads on hospital dashboards (control per-hospital below)"})]})]})]}),t.jsx("button",{onClick:C,disabled:r,style:{padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:r?"not-allowed":"pointer",width:"fit-content"},children:r?"Saving...":"Save Global Settings"})]})]}),t.jsxs("div",{style:{background:"white",borderRadius:"10px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{marginTop:0},children:" Configure Pricing & Ads Per Provider"}),t.jsx("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px"},children:"Set individual pricing models and ad settings for each doctor/hospital. Mix and match based on their preferences."}),t.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:D,onChange:_=>A(_.target.value),style:{flex:1,minWidth:"250px",padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px"}}),t.jsxs("select",{value:x,onChange:_=>j(_.target.value),style:{padding:"10px 15px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"14px",cursor:"pointer"},children:[t.jsx("option",{value:"all",children:"All Providers"}),t.jsx("option",{value:"doctors",children:"Doctors Only"}),t.jsx("option",{value:"hospitals",children:"Hospitals Only"})]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Type"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),t.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Email"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Pricing Model"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Ads"}),t.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Actions"})]})}),t.jsx("tbody",{children:pe.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"},children:"No providers found"})}):pe.map(_=>t.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[t.jsx("td",{style:{padding:"12px"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:_.type==="doctor"?"#e3f2fd":"#f3e5f5",color:_.type==="doctor"?"#1976d2":"#7b1fa2"},children:_.type==="doctor"?" Doctor":" Hospital"})}),t.jsx("td",{style:{padding:"12px",fontWeight:"500"},children:_.name||"N/A"}),t.jsx("td",{style:{padding:"12px",color:"#666"},children:_.email||"N/A"}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsxs("select",{value:_.pricingModel||"full",onChange:ce=>{const N=ce.target.value;if(N==="reduced"){const ie=prompt("Enter discount percentage (0-100):",_.discountPercentage||"50");ie!==null&&R(_.id,N,parseInt(ie)||50)}else R(_.id,N)},style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #ddd",fontSize:"13px",fontWeight:"600",cursor:"pointer",background:_.pricingModel==="free"?"#e8f5e9":_.pricingModel==="reduced"?"#fff3e0":"#e3f2fd",color:_.pricingModel==="free"?"#2e7d32":_.pricingModel==="reduced"?"#e65100":"#1976d2"},children:[t.jsx("option",{value:"full",children:" Full Rate"}),t.jsxs("option",{value:"reduced",children:[" Reduced (",_.discountPercentage||0,"% off)"]}),t.jsx("option",{value:"free",children:" Free + Ads"})]})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:_.adsEnabled?"#c8e6c9":"#ffcdd2",color:_.adsEnabled?"#2e7d32":"#c62828"},children:_.adsEnabled?" ON":" OFF"})}),t.jsx("td",{style:{padding:"12px",textAlign:"center"},children:t.jsx("button",{onClick:()=>oe(_.id,_.adsEnabled),style:{padding:"6px 16px",background:_.adsEnabled?"#f44336":"#4caf50",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"600",cursor:"pointer"},children:_.adsEnabled?"Disable Ads":"Enable Ads"})})]},_.id))})]})})]}),t.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e8f5e9",borderRadius:"8px",border:"1px solid #4caf50"},children:[t.jsx("h4",{style:{marginTop:0,color:"#2e7d32"},children:" How Pricing Models Work"}),t.jsxs("div",{style:{display:"grid",gap:"15px",marginBottom:0},children:[t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#1976d2",marginBottom:"5px"},children:" Full Rate (No Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"100% of app usage fees"}),t.jsx("br",{})," No ads shown in their dashboard",t.jsx("br",{})," Premium experience",t.jsx("br",{})," Calculated: appointments  rate + prescriptions  rate"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#e65100",marginBottom:"5px"},children:" Reduced Rate (With Ads)"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"discounted fees"})," (you set %)",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads)",t.jsx("br",{})," Win-win: Lower cost for them, ad revenue for you",t.jsx("br",{})," Calculated: (appointments  rate + prescriptions  rate)  (1 - discount%)"]})]}),t.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[t.jsx("div",{style:{fontWeight:"600",color:"#2e7d32",marginBottom:"5px"},children:" Free + Ads"}),t.jsxs("div",{style:{fontSize:"13px",color:"#555"},children:[" Provider pays ",t.jsx("strong",{children:"$0"})," app usage fees",t.jsx("br",{})," Ads shown in their dashboard (you make money from ads only)",t.jsx("br",{})," Great for small clinics or new sign-ups",t.jsx("br",{})," Calculated: $0 cost to provider, 100% ad revenue to you"]})]})]})]}),t.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[t.jsx("h4",{style:{marginTop:0,color:"#856404"},children:" Configuration Steps"}),t.jsxs("ol",{style:{marginBottom:0,color:"#856404",lineHeight:"1.8",fontSize:"14px"},children:[t.jsxs("li",{children:["Create a Google AdSense account at ",t.jsx("a",{href:"https://www.google.com/adsense",target:"_blank",rel:"noopener noreferrer",children:"google.com/adsense"})]}),t.jsx("li",{children:'Get your Publisher ID (starts with "ca-pub-")'}),t.jsx("li",{children:"Add the AdSense code to your website's HTML head section"}),t.jsx("li",{children:"Enable ads globally and configure placements above"}),t.jsx("li",{children:"For each provider, choose their pricing model:"}),t.jsxs("ul",{style:{marginTop:"5px",marginBottom:"5px"},children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Full Rate:"})," Disable ads, they pay full price"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Reduced Rate:"})," Enable ads, set discount %, they pay less"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Free + Ads:"})," Enable ads, they pay nothing"]})]}),t.jsx("li",{children:"Booking page ads will show to all patients regardless of pricing model"})]})]})]})},Sx=()=>{const[s,r]=b.useState("overview"),[c,u]=b.useState(!1),[f,y]=b.useState(""),[g,x]=b.useState(null),[j,D]=b.useState(!1),[A,M]=b.useState({rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}}}),[C,oe]=b.useState([]),[R,pe]=b.useState([]),[_,ce]=b.useState([]),[N,ie]=b.useState([]),[w,ke]=b.useState(""),[pt,mt]=b.useState([]),[P,Ae]=b.useState([]),[Y,$e]=b.useState(!1),[ue,Qe]=b.useState(null),[ht,at]=b.useState(!1),[q,se]=b.useState(""),[me,Fe]=b.useState(""),[Ze,gt]=b.useState("all"),[ye,_e]=b.useState("all"),[yt,kt]=b.useState(null),[Ke,bn]=b.useState({appointmentCost:"",prescriptionCost:""}),[Ft,pn]=b.useState(!1),[vt,ln]=b.useState(""),[Tt,Et]=b.useState(!1),[k,Te]=b.useState(null);b.useEffect(()=>{const T=window.matchMedia("(max-width: 480px)"),I=F=>D(F.matches);return D(T.matches),T.addEventListener?T.addEventListener("change",I):T.addListener(I),()=>{T.removeEventListener?T.removeEventListener("change",I):T.removeListener(I)}},[]);const[fe,Ve]=b.useState(!1),[qe,kn]=b.useState(null),[re,Kn]=b.useState(!1);b.useEffect(()=>{const T=new Date,I=T.getFullYear(),F=String(T.getMonth()+1).padStart(2,"0");ke(`${I}-${F}`)},[]),b.useEffect(()=>{(async()=>{try{await vi(),await qt()}catch(I){console.error("Error initializing dashboard:",I),y("Failed to initialize dashboard. Please refresh the page.")}})()},[]),b.useEffect(()=>{if(w&&s==="payments")try{Nt()}catch(T){console.error("Error calculating payments:",T)}},[w,s]),b.useEffect(()=>{s==="payment-requests"&&on()},[s]),b.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),3e3);return()=>clearTimeout(T)}},[g]);const An=(T,I="success")=>{x({message:T,type:I})},vi=async()=>{try{const T=Re(V,"config","billing"),I=await Yt(T);I.exists()&&M(I.data())}catch(T){console.error("Error loading config:",T)}},qt=async()=>{u(!0);try{await Promise.all([$t(),rt(),Jn(),At()])}catch(T){console.error("Error loading data:",T),y("Failed to load data. Please refresh.")}finally{u(!1)}},$t=async()=>{try{const T=ve(V,"users"),I=Ce(T,le("role","==","doctor")),F=await Oe(I),te=[];F.forEach(De=>{const He=De.data();He.hospitalId||te.push({id:De.id,uid:De.id,...He})}),console.log(" Individual Doctors loaded:",te.length),oe(te)}catch(T){console.error("Error loading individual doctors:",T)}},rt=async()=>{try{const T=ve(V,"hospitals"),I=await Oe(T),F=[];I.forEach(De=>{F.push({id:De.id,...De.data()})});const te=ve(V,"users");for(const De of F){const He=Ce(te,le("role","==","doctor"),le("hospitalId","==",De.id)),it=await Oe(He);De.doctorCount=it.size}console.log(" Hospitals loaded:",F.length),pe(F)}catch(T){console.error("Error loading hospitals:",T)}},Jn=async()=>{try{const T=ve(V,"appointments"),I=await Oe(T),F=[];I.forEach(te=>{const De={id:te.id,...te.data()};F.push(De)}),console.log("Appointments loaded:",F.length),F.length>0&&console.log("Sample appointment data:",F[0]),ce(F)}catch(T){console.error("Error loading appointments:",T)}},At=async()=>{try{const T=ve(V,"prescriptions"),I=await Oe(T),F=[];I.forEach(te=>{const De={id:te.id,...te.data()};F.push(De)}),console.log(" Prescriptions loaded:",F.length),F.length>0&&console.log(" Sample prescription data:",F[0]),ie(F)}catch(T){console.error("Error loading prescriptions:",T)}},on=async()=>{try{$e(!0),console.log(" Loading payment requests...");const T=ve(V,"payments"),I=await Oe(T);console.log(" Payment requests snapshot size:",I.size);const F=[];I.forEach(te=>{const De={id:te.id,...te.data()};console.log("Payment document:",De),F.push(De)}),F.sort((te,De)=>{const He=te.createdAt?new Date(te.createdAt):new Date(0);return(De.createdAt?new Date(De.createdAt):new Date(0))-He}),console.log(" Payment requests loaded successfully:",F.length),Ae(F),$e(!1)}catch(T){console.error(" Error loading payment requests:",T),console.error("Error code:",T.code),console.error("Error message:",T.message),Ae([]),$e(!1),T.code!=="permission-denied"&&T.code!=="not-found"&&An("Error: "+T.message,"error")}},mn=async()=>{try{u(!0);const T=Re(V,"config","billing");await Wt(T,{...A,updatedAt:new Date().toISOString()}),alert(" Global configuration updated successfully!")}catch{try{const I=Re(V,"config","billing");await Zn(I,{...A,updatedAt:new Date().toISOString()}),alert(" Global configuration created successfully!")}catch(I){console.error("Error saving config:",I),y("Failed to save configuration.")}}finally{u(!1)}},O=(T,I)=>{kt({...T,type:I}),bn({appointmentCost:T.customRates?.appointmentCost||"",prescriptionCost:T.customRates?.prescriptionCost||""})},$=async()=>{if(yt)try{u(!0);const T=yt.type==="doctor"?"users":"hospitals",I=Re(V,T,yt.id),F={};Ke.appointmentCost&&(F.appointmentCost=parseFloat(Ke.appointmentCost)),Ke.prescriptionCost&&(F.prescriptionCost=parseFloat(Ke.prescriptionCost)),await Wt(I,{customRates:Object.keys(F).length>0?F:null}),yt.type==="doctor"?await $t():await rt(),kt(null),alert(" Custom rates updated successfully!")}catch(T){console.error("Error saving custom rates:",T),y("Failed to save custom rates.")}finally{u(!1)}},xe=async T=>{if(confirm(`Verify payment of ${T.currency} ${T.amount?.toFixed(2)} from ${T.hospitalName||T.doctorName}?`))try{u(!0);const I=Re(V,"payments",T.id);await Wt(I,{status:"completed",verifiedAt:new Date().toISOString(),verifiedBy:"admin"}),An(" Payment verified successfully!","success"),await on(),(s==="payments"||s==="billing-overview")&&Nt()}catch(I){console.error("Error verifying payment:",I),An("Failed to verify payment","error")}finally{u(!1)}},he=async T=>{const I=prompt("Enter rejection reason (optional):");if(I!==null)try{u(!0);const F=Re(V,"payments",T.id);await Wt(F,{status:"failed",rejectedAt:new Date().toISOString(),rejectedBy:"admin",rejectionReason:I||"No reason provided"}),An(" Payment rejected","success"),await on()}catch(F){console.error("Error rejecting payment:",F),An("Failed to reject payment","error")}finally{u(!1)}},ge=T=>{Qe(T),at(!0)},Ee=(T,I,F)=>{Te({entity:T,type:I,...F}),Et(!0)},xt=async()=>{if(!k||k.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${A.currency} ${k.pending.toFixed(2)} as paid for ${k.entity.name||k.entity.displayName}?`))try{u(!0);const I=k.type==="doctor"?"users":"hospitals",F=Re(V,I,k.entity.id),De=(k.entity.paidAmount||0)+k.pending;await Wt(F,{paidAmount:De,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:k.pending}),await ua(ve(V,"paymentHistory"),{entityType:k.type,entityId:k.entity.id,amount:k.pending,month:w,paidAt:new Date().toISOString()}),await Dn(k.entity,k.type,w),alert(" Payment marked as paid!"),Et(!1),k.type==="doctor"?await $t():await rt(),await Jn(),await At()}catch(I){console.error(" Error marking payment from modal:",I),console.error("Error details:",I.message,I.code),alert(`Failed to mark payment as paid: ${I.message||"Unknown error"}`),y(`Failed to mark payment as paid: ${I.message||"Unknown error"}`)}finally{u(!1)}},hn=async()=>{if(!vt||!vt.includes("@")){alert("Please enter a valid email address");return}if(window.confirm(`Create new admin account for: ${vt}?

The user must register with this email first, then you can set their role to admin.`))try{u(!0);const I=ve(V,"users"),F=Ce(I,le("email","==",vt)),te=await Oe(F);if(te.empty){alert(" User not found. The user must register first before being made an admin.");return}const De=te.docs[0],He=Re(V,"users",De.id);await Wt(He,{role:"admin"}),alert(` User ${vt} is now an admin!`),pn(!1),ln("")}catch(I){console.error("Error creating admin:",I),y(I.message),y("Failed to save custom rates.")}finally{u(!1)}},En=async(T,I,F)=>{const te=!I,De=te?"enable":"disable";if(console.log(" Toggling provider status:",{providerId:T,currentStatus:I,newStatus:te,providerType:F}),!!window.confirm(`Are you sure you want to ${De} this ${F}?

${te?"They will appear in the booking system.":"They will be hidden from the booking system."}`))try{u(!0);const it=F==="doctor"?"users":"hospitals",be=Re(V,it,T);console.log(" Updating document:",it,T),await Wt(be,{enabled:te,lastStatusChange:new Date().toISOString()}),console.log(" Successfully updated status"),An(` ${F==="doctor"?"Doctor":"Hospital"} ${De}d successfully!`,"success"),F==="doctor"?await $t():await rt()}catch(it){console.error(` Error toggling ${F} status:`,it),console.error("Error details:",it.code,it.message),An(` Failed to ${De} ${F}: ${it.message||"Permission denied"}`,"error")}finally{u(!1)}},Nt=()=>{if(console.log(" Calculating payments for:",w),!w||!C||!R||!_||!N){console.log(" Skipping payment calculation - data not ready");return}const T=[];C.forEach(I=>{const F=Vt(I,"doctor",w);T.push({type:"doctor",entity:I,...F})}),R.forEach(I=>{const F=Vt(I,"hospital",w);T.push({type:"hospital",entity:I,...F})}),console.log(" Payment data calculated:",T.length),mt(T)},Vt=(T,I,F)=>{console.log(" Calculating billing for:",{type:I,entityId:T.id,entityName:T.name||T.displayName,month:F,totalAppointments:_.length,totalPrescriptions:N.length});const te=_.filter(We=>{const Wn=I==="doctor"?We.doctorId===T.uid&&!We.hospitalId:We.hospitalId===T.id;let St=We.date||We.appointmentDate||We.createdAt||We.timestamp;St&&typeof St=="object"&&St.toDate&&(St=St.toDate().toISOString().split("T")[0]),St&&typeof St=="string"&&(St=St.substring(0,7));const $n=St&&St===F,Yn=We.paymentStatus==="paid",ki=!We.paymentStatus||We.paymentStatus==="unpaid"||We.paymentStatus!=="paid";return console.log("  Checking appointment:",{aptId:We.id,doctorId:We.doctorId,hospitalId:We.hospitalId,date:We.date,appointmentDate:We.appointmentDate,createdAt:We.createdAt,extractedDate:St,month:F,paymentStatus:We.paymentStatus,isPaid:Yn,isUnpaid:ki,matchesEntity:Wn,matchesMonth:$n,included:Wn&&$n&&ki}),Wn&&$n&&ki}),De=N.filter(We=>{const Wn=I==="doctor"?We.doctorId===T.uid&&!We.hospitalId:We.hospitalId===T.id;let St=We.createdAt||We.date||We.prescriptionDate||We.timestamp;St&&typeof St=="object"&&St.toDate&&(St=St.toDate().toISOString().split("T")[0]),St&&typeof St=="string"&&(St=St.substring(0,7));const $n=St&&St===F,Yn=!We.paymentStatus||We.paymentStatus==="unpaid"||We.paymentStatus!=="paid";return console.log("  Checking prescription:",{prescId:We.id,doctorId:We.doctorId,hospitalId:We.hospitalId,createdAt:We.createdAt,extractedDate:St,month:F,paymentStatus:We.paymentStatus,matchesEntity:Wn,matchesMonth:$n,isUnpaid:Yn,included:Wn&&$n&&Yn}),Wn&&$n&&Yn});console.log("  Result:",{appointments:te.length,prescriptions:De.length});const He=Ll(T,A);console.log("  Using rates:",He);const it=te.length*(He.appointmentCost||0),be=De.length*(He.prescriptionCost||0),zt=it+be,fn=T.paidAmount||0,ci=zt-fn;return{appointments:te.length,prescriptions:De.length,appointmentRevenue:it,prescriptionRevenue:be,totalRevenue:zt,paid:fn,pending:Math.max(0,ci),currency:He.currency,symbol:He.symbol}},Hn=async T=>{if(T.pending<=0){alert("No pending amount to pay.");return}if(window.confirm(`Mark payment of ${A.currency} ${T.pending.toFixed(2)} as paid for ${T.entity.name||T.entity.displayName}?`))try{u(!0);const F=T.type==="doctor"?"users":"hospitals",te=Re(V,F,T.entity.id),He=(T.entity.paidAmount||0)+T.pending;await Wt(te,{paidAmount:He,lastPaymentDate:new Date().toISOString(),lastPaymentAmount:T.pending}),await ua(ve(V,"paymentHistory"),{entityType:T.type,entityId:T.entity.id,amount:T.pending,month:w,paidAt:new Date().toISOString()}),await Dn(T.entity,T.type,w),alert(" Payment marked as paid!"),T.type==="doctor"?await $t():await rt(),await Jn(),await At()}catch(F){console.error(" Error marking payment:",F),console.error("Error details:",F.message,F.code),alert(`Failed to mark payment as paid: ${F.message||"Unknown error"}`),y(`Failed to mark payment as paid: ${F.message||"Unknown error"}`)}finally{u(!1)}},Dn=async(T,I,F)=>{try{console.log(" Marking items as paid for:",{entity:T.name||T.displayName,type:I,month:F});const te=_.filter(He=>{const it=I==="doctor"?He.doctorId===T.uid&&!He.hospitalId:He.hospitalId===T.id;let be=He.date||He.appointmentDate||He.createdAt||He.timestamp;return be&&typeof be=="object"&&be.toDate&&(be=be.toDate().toISOString().split("T")[0]),be&&typeof be=="string"&&(be=be.substring(0,7)),it&&(be&&be===F)&&He.paymentStatus!=="paid"}),De=N.filter(He=>{const it=I==="doctor"?He.doctorId===T.uid&&!He.hospitalId:He.hospitalId===T.id;let be=He.createdAt||He.date||He.prescriptionDate||He.timestamp;return be&&typeof be=="object"&&be.toDate&&(be=be.toDate().toISOString().split("T")[0]),be&&typeof be=="string"&&(be=be.substring(0,7)),it&&(be&&be===F)&&He.paymentStatus!=="paid"});console.log(` Found ${te.length} appointments and ${De.length} prescriptions to mark as paid`);for(const He of te)try{const it=Re(V,"appointments",He.id);await Wt(it,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:F}),console.log(` Marked appointment ${He.id} as paid`)}catch(it){console.error(` Error marking appointment ${He.id} as paid:`,it)}for(const He of De)try{const it=Re(V,"prescriptions",He.id);await Wt(it,{paymentStatus:"paid",paidAt:new Date().toISOString(),paidMonth:F}),console.log(` Marked prescription ${He.id} as paid`)}catch(it){console.error(` Error marking prescription ${He.id} as paid:`,it)}console.log(` Marked ${te.length} appointments and ${De.length} prescriptions as paid`)}catch(te){throw console.error("Error marking items as paid:",te),te}},Ge=async T=>{try{let I=null,F=null;if(T.doctorId){const te=Re(V,"users",T.doctorId),De=await Yt(te);De.exists()&&(I={id:De.id,...De.data()})}if(T.hospitalId){const te=Re(V,"hospitals",T.hospitalId),De=await Yt(te);De.exists()&&(F={id:De.id,...De.data()})}kn({...T,doctorInfo:I,hospitalInfo:F}),Ve(!0)}catch(I){console.error("Error loading appointment details:",I),An(" Failed to load appointment details","error")}},Nn=()=>{if(!_||!N)return t.jsx("div",{style:m.loading,children:"Loading overview data..."});const T=_.filter(F=>F.paymentStatus!=="paid"),I=N.filter(F=>F.paymentStatus!=="paid");return t.jsxs("div",{style:m.overview,children:[t.jsx("h2",{children:" System Overview"}),t.jsxs("div",{style:m.statsGrid,children:[t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:C?.length||0}),t.jsx("div",{style:m.statLabel,children:"Individual Doctors"})]}),t.jsxs("div",{style:m.statCard,children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:R?.length||0}),t.jsx("div",{style:m.statLabel,children:"Hospitals"})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>r("payments"),children:[t.jsx("div",{style:m.statIcon,children:t.jsx(an,{size:20})}),t.jsx("div",{style:m.statValue,children:_?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Appointments"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[T?.length||0," unpaid"]})]}),t.jsxs("div",{style:{...m.statCard,cursor:"pointer"},onClick:()=>r("payments"),children:[t.jsx("div",{style:m.statIcon,children:""}),t.jsx("div",{style:m.statValue,children:N?.length||0}),t.jsx("div",{style:m.statLabel,children:"Total Prescriptions"}),t.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem"},children:[I?.length||0," unpaid"]})]})]}),t.jsxs("div",{style:m.recentSection,children:[t.jsxs("div",{style:m.recentHeader,children:[t.jsxs("h3",{children:[t.jsx(an,{size:18})," Recent Appointments"]}),t.jsxs("label",{style:m.toggleLabel,children:[t.jsx("input",{type:"checkbox",checked:re,onChange:F=>Kn(F.target.checked)}),t.jsx("span",{style:{marginLeft:"0.5rem"},children:"Show paid items"})]})]}),t.jsxs("div",{style:m.tableContainer,children:[t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Patient"}),t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:(re?_:T).slice(0,10).map(F=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:F.date||"N/A"}),t.jsx("td",{style:m.td,children:F.patientName||"N/A"}),t.jsx("td",{style:m.td,children:F.doctorName||"N/A"}),t.jsx("td",{style:m.td,children:F.hospitalName||"N/A"}),t.jsx("td",{style:m.td,children:F.status||"pending"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:F.paymentStatus==="paid"?"#27ae60":"#e74c3c",color:"white"},children:F.paymentStatus==="paid"?" Paid":" Unpaid"})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>Ge(F),style:m.viewButton,children:" View Details"})})]},F.id))})]}),(re?_:T).length===0&&t.jsx("div",{style:m.emptyState,children:"No appointments found"})]})]}),t.jsxs("div",{style:m.infoBox,children:[t.jsx("h3",{children:" How This System Works"}),t.jsxs("ul",{style:m.infoList,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Individual Doctors:"})," Billed separately per appointment & prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Hospital Doctors:"})," All billing aggregated at hospital level"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Custom Rates:"})," Override global rates per doctor or hospital"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Monthly Tracking:"})," View and manage payments by month"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Payment Status:"})," Once paid, appointments/prescriptions are marked and hidden from billing"]})]})]}),t.jsxs("div",{style:m.adminSection,children:[t.jsx("h3",{children:" Admin Management"}),t.jsx("p",{style:m.subtitle,children:"Create new admin users"}),t.jsx("button",{onClick:()=>pn(!0),style:m.createAdminButton,children:" Create New Admin"})]})]})},jt=()=>t.jsxs("div",{style:m.configSection,children:[t.jsx("h2",{children:" Multi-Currency Configuration"}),t.jsx("p",{style:m.subtitle,children:"Set rates for different currencies. Currency is auto-selected based on doctor/hospital country."}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Currency Logic:"})," India  INR, All others  GBP"]}),A.rates?t.jsxs("div",{style:m.configForm,children:[t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#fff3e0",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#e65100"},children:" INR (India)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:A.rates.INR?.appointmentCost||500,onChange:T=>M({...A,rates:{...A.rates,INR:{...A.rates.INR,appointmentCost:parseFloat(T.target.value)||0}}}),style:m.input,placeholder:"500"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:A.rates.INR?.prescriptionCost||200,onChange:T=>M({...A,rates:{...A.rates,INR:{...A.rates.INR,prescriptionCost:parseFloat(T.target.value)||0}}}),style:m.input,placeholder:"200"})]})]}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#e8f5e9",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginBottom:"1rem",color:"#2e7d32"},children:" GBP (Default)"}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Appointment Cost ()"}),t.jsx("input",{type:"number",value:A.rates.GBP?.appointmentCost||5,onChange:T=>M({...A,rates:{...A.rates,GBP:{...A.rates.GBP,appointmentCost:parseFloat(T.target.value)||0}}}),style:m.input,placeholder:"5"})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:" Prescription Cost ()"}),t.jsx("input",{type:"number",value:A.rates.GBP?.prescriptionCost||2,onChange:T=>M({...A,rates:{...A.rates,GBP:{...A.rates.GBP,prescriptionCost:parseFloat(T.target.value)||0}}}),style:m.input,placeholder:"2"})]})]}),t.jsx("button",{onClick:mn,style:m.saveButton,disabled:c,children:c?"Saving...":" Save Multi-Currency Configuration"})]}):t.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[t.jsx("p",{style:{marginBottom:"1rem",color:"#666"},children:"Multi-currency not configured yet. Click below to set it up."}),t.jsx("button",{onClick:()=>window.location.href="/setup-multi-currency",style:{...m.saveButton,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:" Setup Multi-Currency"})]})]}),sn=()=>{if(!C)return t.jsx("div",{style:m.loading,children:"Loading doctors..."});const T=C.filter(I=>{const F=q.toLowerCase(),te=!q||I.displayName?.toLowerCase().includes(F)||I.email?.toLowerCase().includes(F)||I.specialization?.toLowerCase().includes(F)||I.city?.toLowerCase().includes(F),De=I.enabled!==!1;return te&&(Ze==="all"||Ze==="enabled"&&De||Ze==="disabled"&&!De)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Individual Doctors (",C?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Doctors not affiliated with any hospital"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search doctors by name, email, specialization, location...",value:q,onChange:I=>se(I.target.value),style:m.searchInput}),t.jsxs("select",{value:Ze,onChange:I=>gt(I.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Doctors (",C?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",C?.filter(I=>I.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",C?.filter(I=>I.enabled===!1).length||0,")"]})]})]}),T.length===0?t.jsx("div",{style:m.emptyState,children:q||Ze!=="all"?"No doctors match your search/filter criteria":"No individual doctors found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Name"}),t.jsx("th",{style:m.th,children:"Specialization"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:T.map(I=>{const F=Vt(I,"doctor",w),te=I.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:te?"#27ae60":"#e74c3c",color:"white"},children:te?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:I.displayName||"N/A"}),t.jsx("td",{style:m.td,children:I.specialization||"N/A"}),t.jsx("td",{style:m.td,children:I.city?`${I.city}, ${I.country}`:"N/A"}),t.jsxs("td",{style:m.td,children:[F.symbol,I.customRates?.appointmentCost||F.appointmentRevenue/Math.max(F.appointments,1),I.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[F.symbol,I.customRates?.prescriptionCost||F.prescriptionRevenue/Math.max(F.prescriptions,1),I.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:F.pending>0?"#e74c3c":"#27ae60"},children:[F.symbol,F.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>En(I.id,te,"doctor"),style:{...m.toggleButton,backgroundColor:te?"#e74c3c":"#27ae60"},children:te?" Disable":" Enable"}),t.jsx("button",{onClick:()=>O(I,"doctor"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>Ee(I,"doctor",F),style:m.viewButton,children:" View Payment"})]})})]},I.id)})})]})})]})},Mt=()=>{if(!R)return t.jsx("div",{style:m.loading,children:"Loading hospitals..."});const T=R.filter(I=>{const F=me.toLowerCase(),te=!me||I.name?.toLowerCase().includes(F)||I.email?.toLowerCase().includes(F)||I.city?.toLowerCase().includes(F),De=I.enabled!==!1;return te&&(ye==="all"||ye==="enabled"&&De||ye==="disabled"&&!De)});return t.jsxs("div",{style:m.section,children:[t.jsxs("h2",{children:[" Hospitals (",R?.length||0,")"]}),t.jsx("p",{style:m.subtitle,children:"Hospital billing includes all affiliated doctors"}),t.jsxs("div",{style:m.searchContainer,children:[t.jsx("input",{type:"text",placeholder:" Search hospitals by name, email, location...",value:me,onChange:I=>Fe(I.target.value),style:m.searchInput}),t.jsxs("select",{value:ye,onChange:I=>_e(I.target.value),style:m.filterSelect,children:[t.jsxs("option",{value:"all",children:["All Hospitals (",R?.length||0,")"]}),t.jsxs("option",{value:"enabled",children:["Enabled Only (",R?.filter(I=>I.enabled!==!1).length||0,")"]}),t.jsxs("option",{value:"disabled",children:["Disabled Only (",R?.filter(I=>I.enabled===!1).length||0,")"]})]})]}),T.length===0?t.jsx("div",{style:m.emptyState,children:me||ye!=="all"?"No hospitals match your search/filter criteria":"No hospitals found"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Status"}),t.jsx("th",{style:m.th,children:"Hospital Name"}),t.jsx("th",{style:m.th,children:"Location"}),t.jsx("th",{style:m.th,children:"Doctors Count"}),t.jsx("th",{style:m.th,children:"Appointment Rate"}),t.jsx("th",{style:m.th,children:"Prescription Rate"}),t.jsx("th",{style:m.th,children:"Pending Payment"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:T.map(I=>{const F=Vt(I,"hospital",w),te=I.enabled!==!1;return t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("span",{style:{...m.statusBadge,backgroundColor:te?"#27ae60":"#e74c3c",color:"white"},children:te?" Active":" Disabled"})}),t.jsx("td",{style:m.td,children:I.name||"N/A"}),t.jsx("td",{style:m.td,children:I.city?`${I.city}, ${I.country}`:"N/A"}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:m.doctorCount,children:I.doctorCount||0})}),t.jsxs("td",{style:m.td,children:[F.symbol,I.customRates?.appointmentCost||F.appointmentRevenue/Math.max(F.appointments,1),I.customRates?.appointmentCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsxs("td",{style:m.td,children:[F.symbol,I.customRates?.prescriptionCost||F.prescriptionRevenue/Math.max(F.prescriptions,1),I.customRates?.prescriptionCost&&t.jsx("span",{style:m.customBadge,children:"Custom"})]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:F.pending>0?"#e74c3c":"#27ae60"},children:[F.symbol,F.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>En(I.id,te,"hospital"),style:{...m.toggleButton,backgroundColor:te?"#e74c3c":"#27ae60"},children:te?" Disable":" Enable"}),t.jsx("button",{onClick:()=>O(I,"hospital"),style:m.editButton,children:" Edit Rates"}),t.jsx("button",{onClick:()=>Ee(I,"hospital",F),style:m.viewButton,children:" View Payment"})]})})]},I.id)})})]})})]})},Ye=()=>t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Tracking"}),t.jsxs("div",{style:m.monthSelector,children:[t.jsx("label",{style:m.label,children:"Select Month:"}),t.jsx("input",{type:"month",value:w,onChange:T=>ke(T.target.value),style:m.input})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Individual Doctors"}),pt.filter(T=>T.type==="doctor").length===0?t.jsx("div",{style:m.emptyState,children:"No individual doctor payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Doctor"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:pt.filter(T=>T.type==="doctor").map(T=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:T.entity.displayName}),t.jsx("td",{style:m.td,children:T.appointments}),t.jsx("td",{style:m.td,children:T.prescriptions}),t.jsxs("td",{style:m.td,children:[A.currency," ",T.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[A.currency," ",T.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:T.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",T.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>Hn(T),style:m.payButton,disabled:T.pending<=0,children:" Mark Paid"})})]},T.entity.id))})]})})]}),t.jsxs("div",{style:m.paymentSection,children:[t.jsx("h3",{children:" Hospitals"}),pt.filter(T=>T.type==="hospital").length===0?t.jsx("div",{style:m.emptyState,children:"No hospital payments for this month"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Hospital"}),t.jsx("th",{style:m.th,children:"Appointments"}),t.jsx("th",{style:m.th,children:"Prescriptions"}),t.jsx("th",{style:m.th,children:"Total Revenue"}),t.jsx("th",{style:m.th,children:"Paid"}),t.jsx("th",{style:m.th,children:"Pending"}),t.jsx("th",{style:m.th,children:"Action"})]})}),t.jsx("tbody",{children:pt.filter(T=>T.type==="hospital").map(T=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:T.entity.name}),t.jsx("td",{style:m.td,children:T.appointments}),t.jsx("td",{style:m.td,children:T.prescriptions}),t.jsxs("td",{style:m.td,children:[A.currency," ",T.totalRevenue.toFixed(2)]}),t.jsxs("td",{style:m.td,children:[A.currency," ",T.paid.toFixed(2)]}),t.jsx("td",{style:m.td,children:t.jsxs("span",{style:{...m.pending,color:T.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",T.pending.toFixed(2)]})}),t.jsx("td",{style:m.td,children:t.jsx("button",{onClick:()=>Hn(T),style:m.payButton,disabled:T.pending<=0,children:" Mark Paid"})})]},T.entity.id))})]})})]})]}),di=()=>{const T=P.filter(te=>te.status==="pending"),I=P.filter(te=>te.status==="completed"),F=P.filter(te=>te.status==="failed");return t.jsxs("div",{style:m.section,children:[t.jsx("h2",{children:" Payment Requests"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Review and verify payment submissions from hospitals and individual doctors"}),Y?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("p",{style:{color:"#999"},children:"Loading payment requests..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#ff9800",marginBottom:"1rem"},children:[" Pending Verification (",T.length,")"]}),T.length===0?t.jsx("div",{style:m.emptyState,children:" No pending payment requests"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Date"}),t.jsx("th",{style:m.th,children:"Payment Type"}),t.jsx("th",{style:m.th,children:"Actions"})]})}),t.jsx("tbody",{children:T.map(te=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:t.jsx("strong",{children:te.hospitalName||te.doctorName})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:te.hospitalId?"#e3f2fd":"#f3e5f5",color:te.hospitalId?"#1976d2":"#7b1fa2",fontSize:"0.85rem",fontWeight:"600"},children:te.hospitalId?" Hospital":" Doctor"})}),t.jsx("td",{style:m.td,children:t.jsxs("strong",{style:{color:"#2e7d32",fontSize:"1.1rem"},children:[te.currency," ",te.amount?.toFixed(2)]})}),t.jsx("td",{style:m.td,children:te.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(te.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:te.type==="full"?"#e8f5e9":"#fff3e0",color:te.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:te.type==="full"?"Full Payment":"Partial Payment"})}),t.jsx("td",{style:m.td,children:t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{onClick:()=>ge(te),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#2196f3"},children:" View"}),t.jsx("button",{onClick:()=>xe(te),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#4caf50"},children:" Verify"}),t.jsx("button",{onClick:()=>he(te),style:{...m.button,padding:"0.5rem 1rem",fontSize:"0.85rem",background:"#f44336"},children:" Reject"})]})})]},te.id))})]})})]}),t.jsxs("div",{style:{marginBottom:"3rem"},children:[t.jsxs("h3",{style:{color:"#4caf50",marginBottom:"1rem"},children:[" Verified Payments (",I.length,")"]}),I.length===0?t.jsx("div",{style:m.emptyState,children:"No verified payments yet"}):t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Verified"})]})}),t.jsx("tbody",{children:I.map(te=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:te.hospitalName||te.doctorName}),t.jsx("td",{style:m.td,children:te.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[te.currency," ",te.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:te.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(te.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:te.verifiedAt?new Date(te.verifiedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]},te.id))})]})})]}),F.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{style:{color:"#f44336",marginBottom:"1rem"},children:[" Rejected Payments (",F.length,")"]}),t.jsx("div",{style:m.tableContainer,children:t.jsxs("table",{style:m.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:m.th,children:"Entity"}),t.jsx("th",{style:m.th,children:"Type"}),t.jsx("th",{style:m.th,children:"Amount"}),t.jsx("th",{style:m.th,children:"Method"}),t.jsx("th",{style:m.th,children:"Submitted"}),t.jsx("th",{style:m.th,children:"Rejected"}),t.jsx("th",{style:m.th,children:"Reason"})]})}),t.jsx("tbody",{children:F.map(te=>t.jsxs("tr",{style:m.tr,children:[t.jsx("td",{style:m.td,children:te.hospitalName||te.doctorName}),t.jsx("td",{style:m.td,children:te.hospitalId?" Hospital":" Doctor"}),t.jsxs("td",{style:m.td,children:[te.currency," ",te.amount?.toFixed(2)]}),t.jsx("td",{style:m.td,children:te.paymentMethod}),t.jsx("td",{style:m.td,children:new Date(te.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{style:m.td,children:te.rejectedAt?new Date(te.rejectedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}),t.jsx("td",{style:m.td,children:te.rejectionReason||"N/A"})]},te.id))})]})})]})]})]})};return t.jsxs("div",{style:m.container,children:[g&&t.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"15px 25px",borderRadius:"10px",background:g.type==="error"?"#f44336":"#4caf50",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e4,animation:"slideIn 0.3s ease-out"},children:g.message}),t.jsxs("div",{style:m.header,children:[t.jsx("h1",{style:m.title,children:" Admin Dashboard - Billing System"}),f&&t.jsx("div",{style:m.error,children:f})]}),t.jsx("div",{style:m.tabs,children:j?t.jsx("select",{value:s,onChange:T=>r(T.target.value),style:{padding:"0.5rem",borderRadius:"8px"},"aria-label":"Select admin tab",children:["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(T=>t.jsx("option",{value:T,children:T==="overview"?"Overview":T.charAt(0).toUpperCase()+T.slice(1)},T))}):["overview","config","doctors","hospitals","billing-overview","payment-requests","ads"].map(T=>t.jsxs("button",{onClick:()=>r(T),style:{...m.tab,...s===T?m.activeTab:{}},children:[T==="overview"&&" Overview",T==="config"&&" Config",T==="doctors"&&" Doctors",T==="hospitals"&&" Hospitals",T==="billing-overview"&&" Billing Overview",T==="payment-requests"&&" Payment Requests",T==="ads"&&" Ads & Pricing"]},T))}),t.jsxs("div",{style:m.content,children:[c&&t.jsx("div",{style:m.loading,children:"Loading..."}),s==="overview"&&Nn(),s==="config"&&jt(),s==="doctors"&&sn(),s==="hospitals"&&Mt(),(s==="payments"||s==="billing-overview")&&Ye(),s==="payment-requests"&&di(),s==="ads"&&t.jsx(jx,{showNotification:An})]}),yt&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Edit Custom Rates"}),t.jsx("p",{style:m.modalSubtitle,children:yt.type==="doctor"?`Doctor: ${yt.displayName}`:`Hospital: ${yt.name}`}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Appointment Cost (leave empty for global rate: ",A.currency," ",A.appointmentCost,")"]}),t.jsx("input",{type:"number",value:Ke.appointmentCost,onChange:T=>bn({...Ke,appointmentCost:T.target.value}),style:m.input,placeholder:`Global: ${A.appointmentCost}`})]}),t.jsxs("div",{style:m.formGroup,children:[t.jsxs("label",{style:m.label,children:["Prescription Cost (leave empty for global rate: ",A.currency," ",A.prescriptionCost,")"]}),t.jsx("input",{type:"number",value:Ke.prescriptionCost,onChange:T=>bn({...Ke,prescriptionCost:T.target.value}),style:m.input,placeholder:`Global: ${A.prescriptionCost}`})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:$,style:m.saveButton,children:" Save"}),t.jsx("button",{onClick:()=>kt(null),style:m.cancelButton,children:" Cancel"})]})]})}),Tt&&k&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Details"}),t.jsx("p",{style:m.modalSubtitle,children:k.type==="doctor"?`Doctor: ${k.entity.displayName}`:`Hospital: ${k.entity.name}`}),t.jsxs("p",{style:m.modalSubtitle,children:["Month: ",w]}),t.jsxs("div",{style:m.paymentDetails,children:[t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Appointments:"}),t.jsxs("span",{children:[k.appointments,"  ",A.currency," ",k.appointmentRevenue/(k.appointments||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[A.currency," ",k.appointmentRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Prescriptions:"}),t.jsxs("span",{children:[k.prescriptions,"  ",A.currency," ",k.prescriptionRevenue/(k.prescriptions||1)]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[A.currency," ",k.prescriptionRevenue.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold"},children:"Total Revenue:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.2rem",color:"#667eea"},children:[A.currency," ",k.totalRevenue.toFixed(2)]})]}),t.jsxs("div",{style:m.paymentRow,children:[t.jsx("span",{children:"Already Paid:"}),t.jsx("span",{}),t.jsxs("span",{style:{color:"#27ae60"},children:[A.currency," ",k.paid.toFixed(2)]})]}),t.jsxs("div",{style:{...m.paymentRow,borderTop:"2px solid #ddd",paddingTop:"1rem",marginTop:"1rem"},children:[t.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Pending:"}),t.jsx("span",{}),t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.3rem",color:k.pending>0?"#e74c3c":"#27ae60"},children:[A.currency," ",k.pending.toFixed(2)]})]})]}),t.jsxs("div",{style:m.modalActions,children:[k.pending>0&&t.jsx("button",{onClick:xt,style:m.saveButton,children:" Mark as Paid"}),t.jsx("button",{onClick:()=>Et(!1),style:m.cancelButton,children:" Close"})]})]})}),Ft&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Create New Admin"}),t.jsx("p",{style:m.modalSubtitle,children:"Enter the email of the user you want to make an admin. The user must be registered first."}),t.jsxs("div",{style:m.formGroup,children:[t.jsx("label",{style:m.label,children:"User Email"}),t.jsx("input",{type:"email",value:vt,onChange:T=>ln(T.target.value),style:m.input,placeholder:"user@example.com"})]}),t.jsxs("div",{style:m.modalActions,children:[t.jsx("button",{onClick:hn,style:m.saveButton,children:" Make Admin"}),t.jsx("button",{onClick:()=>{pn(!1),ln("")},style:m.cancelButton,children:" Cancel"})]})]})}),fe&&qe&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Patient Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:qe.patientName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:qe.patientEmail||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Phone:"}),t.jsx("span",{children:qe.patientPhone||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Doctor Information"}),qe.doctorInfo?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:qe.doctorInfo.displayName||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:qe.doctorInfo.email||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Specialization:"}),t.jsx("span",{children:qe.doctorInfo.specialization||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:qe.hospitalId?"#3498db":"#9b59b6"},children:qe.hospitalId?" Hospital Doctor":" Individual Doctor"})]})]}):t.jsx("div",{children:"Doctor information not available"})]}),qe.hospitalInfo&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Hospital Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:qe.hospitalInfo.name||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Location:"}),t.jsx("span",{children:qe.hospitalInfo.city?`${qe.hospitalInfo.city}, ${qe.hospitalInfo.country}`:"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Email:"}),t.jsx("span",{children:qe.hospitalInfo.email||"N/A"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Appointment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Date:"}),t.jsx("span",{children:qe.date||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Time:"}),t.jsx("span",{children:qe.time||"N/A"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsx("span",{children:qe.status||"pending"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Status:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:qe.paymentStatus==="paid"?"#27ae60":"#e74c3c"},children:qe.paymentStatus==="paid"?" Paid":" Unpaid"})]}),qe.paymentStatus==="paid"&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Paid At:"}),t.jsx("span",{children:new Date(qe.paidAt).toLocaleString()})]})]})]}),t.jsx("div",{style:m.modalActions,children:t.jsx("button",{onClick:()=>Ve(!1),style:m.cancelButton,children:" Close"})})]})}),ht&&ue&&t.jsx("div",{style:m.modal,children:t.jsxs("div",{style:m.modalContent,children:[t.jsx("h3",{children:" Payment Request Details"}),t.jsxs("div",{style:m.detailsGrid,children:[t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Entity Information"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Name:"}),t.jsx("span",{children:t.jsx("strong",{children:ue.hospitalName||ue.doctorName})})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Type:"}),t.jsx("span",{style:{...m.statusBadge,backgroundColor:ue.hospitalId?"#3498db":"#9b59b6"},children:ue.hospitalId?" Hospital":" Individual Doctor"})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Payment Details"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Amount:"}),t.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#2e7d32"},children:[ue.currency," ",ue.amount?.toFixed(2)]})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Method:"}),t.jsx("span",{children:ue.paymentMethod})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Payment Type:"}),t.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ue.type==="full"?"#e8f5e9":"#fff3e0",color:ue.type==="full"?"#2e7d32":"#e65100",fontSize:"0.85rem"},children:ue.type==="full"?"Full Payment":"Partial Payment"})]}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Status:"}),t.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",background:ue.status==="completed"?"#4caf50":ue.status==="pending"?"#ff9800":"#f44336",color:"white",fontSize:"0.85rem",fontWeight:"600"},children:[ue.status==="completed"&&" Verified",ue.status==="pending"&&" Pending",ue.status==="failed"&&" Rejected"]})]})]}),t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Timeline"}),t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Submitted:"}),t.jsx("span",{children:new Date(ue.createdAt).toLocaleString()})]}),ue.verifiedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Verified:"}),t.jsx("span",{children:new Date(ue.verifiedAt).toLocaleString()})]}),ue.rejectedAt&&t.jsxs("div",{style:m.detailRow,children:[t.jsx("span",{style:m.detailLabel,children:"Rejected:"}),t.jsx("span",{children:new Date(ue.rejectedAt).toLocaleString()})]})]}),ue.description&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Description"}),t.jsx("p",{style:{margin:0,color:"#666"},children:ue.description})]}),ue.rejectionReason&&t.jsxs("div",{style:m.detailSection,children:[t.jsx("h4",{children:" Rejection Reason"}),t.jsx("p",{style:{margin:0,color:"#e74c3c"},children:ue.rejectionReason})]})]}),t.jsxs("div",{style:m.modalActions,children:[ue.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{at(!1),xe(ue)},style:{...m.saveButton,background:"#4caf50"},children:" Verify Payment"}),t.jsx("button",{onClick:()=>{at(!1),he(ue)},style:{...m.saveButton,background:"#f44336"},children:" Reject Payment"})]}),t.jsx("button",{onClick:()=>{at(!1),Qe(null)},style:m.cancelButton,children:"Close"})]})]})})]})},m={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},header:{marginBottom:"2rem"},title:{fontSize:"2rem",color:"white",textAlign:"center",marginBottom:"1rem"},error:{background:"#e74c3c",color:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},tabs:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},tab:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",background:"rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s"},activeTab:{background:"white",color:"#667eea",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)"},content:{background:"white",borderRadius:"12px",padding:"2rem",minHeight:"500px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},loading:{textAlign:"center",padding:"2rem",fontSize:"1.2rem",color:"#667eea"},overview:{},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},statCard:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",color:"white"},statIcon:{fontSize:"2.5rem",marginBottom:"0.5rem"},statValue:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.25rem"},statLabel:{fontSize:"0.9rem",opacity:.9},infoBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},infoList:{lineHeight:"1.8",marginLeft:"1.5rem"},section:{},subtitle:{color:"#666",marginBottom:"1.5rem"},searchContainer:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},searchInput:{flex:"1 1 300px",padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},filterSelect:{padding:"0.75rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",background:"white",cursor:"pointer",minWidth:"200px"},statusBadge:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600"},toggleButton:{color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"opacity 0.3s"},configSection:{},configForm:{maxWidth:"600px"},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},input:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s"},saveButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},tableContainer:{overflowX:"auto",marginTop:"1rem"},table:{width:"100%",borderCollapse:"collapse"},th:{background:"#667eea",color:"white",padding:"1rem",textAlign:"left",fontWeight:"600"},tr:{borderBottom:"1px solid #e0e0e0"},td:{padding:"1rem"},customBadge:{display:"inline-block",marginLeft:"0.5rem",padding:"0.25rem 0.5rem",background:"#f39c12",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},doctorCount:{display:"inline-block",padding:"0.25rem 0.75rem",background:"#3498db",color:"white",borderRadius:"12px",fontWeight:"600"},editButton:{background:"#3498db",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},emptyState:{textAlign:"center",padding:"3rem",color:"#999",fontSize:"1.1rem"},monthSelector:{marginBottom:"2rem",display:"flex",alignItems:"center",gap:"1rem"},paymentSection:{marginBottom:"3rem"},pending:{fontWeight:"bold",fontSize:"1.1rem"},payButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},modalSubtitle:{color:"#666",marginBottom:"1.5rem"},modalActions:{display:"flex",gap:"1rem",marginTop:"1.5rem"},cancelButton:{background:"#e74c3c",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s"},adminSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"2rem"},createAdminButton:{background:"#667eea",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"background 0.3s",marginTop:"1rem"},viewButton:{background:"#27ae60",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",transition:"background 0.3s"},paymentDetails:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginTop:"1rem"},paymentRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",padding:"0.75rem 0",fontSize:"0.95rem"},recentSection:{marginTop:"2rem"},recentHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},toggleLabel:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.95rem"},detailsGrid:{display:"grid",gridTemplateColumns:"1fr",gap:"1.5rem",marginTop:"1rem"},detailSection:{background:"#f8f9fa",borderRadius:"8px",padding:"1rem"},detailRow:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #e0e0e0"},detailLabel:{fontWeight:"600",color:"#666"}},wx=()=>{const{userProfile:s,currentUser:r,loading:c}=Ia(),u=Il(),[f,y]=b.useState(!1),[g,x]=b.useState({displayName:"",role:"",specialization:"",phone:"",country:"",state:"",city:"",address:""}),[j,D]=b.useState(!1);b.useEffect(()=>{console.log("Dashboard useEffect:",{currentUser:r?.uid,userProfile:s,loading:c,hasRole:s?.role});const R=()=>!s||!s.role||!s.phone?!0:s.role==="doctor"?!s.specialization||!s.country||!s.state||!s.city:s.role==="hospital"?!s.country||!s.state||!s.city||!s.address:!1;if(r){if(!s){console.log("Dashboard: Waiting for userProfile to load...");return}R()?(D(!0),x({displayName:s.displayName||r.displayName||r.email||"",role:s.role||"",specialization:s.specialization||"",phone:s.phone||"",country:s.country||"",state:s.state||"",city:s.city||"",address:s.address||""})):D(!1)}},[s,r,c]);const A=async R=>{R.preventDefault(),y(!0);try{const pe=Re(V,"users",r.uid),_={uid:r.uid,email:r.email,displayName:g.displayName,role:g.role,phone:g.phone,updatedAt:new Date().toISOString(),...g.role==="doctor"&&{specialization:g.specialization,country:g.country,state:g.state,city:g.city,address:g.address},...g.role==="hospital"&&{country:g.country,state:g.state,city:g.city,address:g.address}};if(await Zn(pe,_,{merge:!0}),g.role==="hospital"&&s?.hospitalId){console.log("Updating hospital document with location...");const ce=Re(V,"hospitals",s.hospitalId);await Zn(ce,{name:g.displayName,country:g.country,state:g.state,city:g.city,address:g.address,phone:g.phone,enabled:!0,updatedAt:new Date().toISOString()},{merge:!0}),console.log("Hospital document updated successfully")}window.location.reload()}catch(pe){console.error("Error creating profile:",pe),alert("Failed to create profile: "+pe.message)}y(!1)},M=R=>{x({...g,[R.target.name]:R.target.value})},C=s?.role==="admin";b.useEffect(()=>{console.log("Dashboard render state:",{hasCurrentUser:!!r,hasUserProfile:!!s,userRole:s?.role,isAdmin:C,loading:c})},[r,s,C,c]);const oe=async()=>{await Dy(),u("/login")};return t.jsxs("div",{style:{padding:"2rem"},children:[t.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsx("h1",{children:"Dashboard"}),t.jsx("button",{onClick:oe,style:{padding:"0.5rem 1rem",background:"var(--color-text-muted)",color:"white",border:"none",borderRadius:"var(--radius-md)"},children:"Logout"})]}),s?j?t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto"},children:[t.jsx("h2",{style:{marginTop:0},children:"Complete Your Profile"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:"Please provide additional information to complete your profile setup."}),g.role?t.jsxs("form",{onSubmit:A,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"displayName",type:"text",placeholder:"Full Name *",required:!0,value:g.displayName,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsxs("div",{style:{padding:"0.75rem",background:"#f0f0f0",borderRadius:"var(--radius-md)",border:"1px solid #ddd"},children:[t.jsx("strong",{children:"Account Type:"})," ",g.role?g.role==="doctor"?"Individual Doctor":g.role==="hospital"?"Hospital":g.role==="patient"?"Patient":g.role==="admin"?"Administrator":g.role:"Loading..."]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:g.phone,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),(g.role==="doctor"||g.role==="hospital")&&t.jsxs(t.Fragment,{children:[g.role==="doctor"&&t.jsx("input",{name:"specialization",type:"text",placeholder:"Specialization (e.g. Cardiologist) *",required:!0,value:g.specialization,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"country",type:"text",placeholder:"Country *",required:!0,value:g.country,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"state",type:"text",placeholder:"State/Province *",required:!0,value:g.state,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"city",type:"text",placeholder:"City *",required:!0,value:g.city,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}}),t.jsx("input",{name:"address",type:"text",placeholder:g.role==="doctor"?"Clinic Address":"Hospital Address",value:g.address,onChange:M,style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid #ccc"}})]}),t.jsx("button",{type:"submit",disabled:f,style:{padding:"0.75rem",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:f?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:f?"Creating Profile...":"Complete Profile"})]}):t.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"Loading your account information..."})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"1.5rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[t.jsxs("h2",{style:{marginTop:0},children:["Welcome, ",s?.displayName||r?.email]}),s?.role&&t.jsxs("p",{children:["Role: ",C?"Admin":s.role]}),s?.role==="patient"&&t.jsx(vx,{}),s?.role==="doctor"&&t.jsx(rh,{}),s?.role==="hospital"&&t.jsx(ax,{}),C&&t.jsx(Sx,{})]}):t.jsxs("div",{style:{background:"var(--color-bg-card)",padding:"2rem",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[t.jsx("h2",{style:{marginTop:0},children:"Loading Your Profile..."}),t.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Please wait while we load your account information."}),t.jsx("p",{style:{color:"#999",fontSize:"0.9rem"},children:"If this takes more than a few seconds, please try refreshing the page."}),t.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:"Refresh Page"})]})]})},Cx=async s=>{const r=ve(V,"appointments");if(s.doctorId&&s.date&&s.time){const f=Re(V,"doctors",s.doctorId),y=await Yt(f);if(y.exists()){const x=y.data().availability||{};if(x.unavailableDates&&x.unavailableDates.length>0&&x.unavailableDates.some(D=>D.date===s.date)){const D=x.unavailableDates.find(A=>A.date===s.date);throw new Error(`Doctor is on leave on ${s.date}. Reason: ${D.reason||"Not available"}`)}if(x.blockedTimeSlots&&x.blockedTimeSlots.length>0&&x.blockedTimeSlots.some(D=>D.date!==s.date?!1:D.time===s.time?!0:D.startTime&&D.endTime?s.time>=D.startTime&&s.time<D.endTime:!1)){const D=x.blockedTimeSlots.find(A=>A.date===s.date&&(A.time===s.time||A.startTime&&A.endTime&&s.time>=A.startTime&&s.time<A.endTime));throw new Error(`This time slot is blocked. Reason: ${D.reason||"Not available"}`)}}}const c={...s,status:"pending",createdAt:new Date().toISOString(),timestamp:Ug()};return{id:(await ua(r,c)).id,...c}},Ax=async s=>{const r=ve(V,"appointments"),c=Ce(r,le("patientPhone","==",s));return(await Oe(c)).docs.map(f=>({id:f.id,...f.data()}))},Gs=async(s={})=>{console.log(" getHospitals called with filters:",s);try{const r=ve(V,"hospitals");let c=Ce(r);s.country&&(c=Ce(c,le("country","==",s.country)),console.log("   Filtering by country:",s.country)),s.state&&(c=Ce(c,le("state","==",s.state)),console.log("   Filtering by state:",s.state)),s.city&&(c=Ce(c,le("city","==",s.city)),console.log("   Filtering by city:",s.city)),console.log("   Executing Firestore query...");const u=await Oe(c);console.log(`   Query returned ${u.size} documents`);const f=[];return u.forEach(y=>{const g={id:y.id,...y.data()};g.enabled!==!1?(console.log("   Hospital found (enabled):",g.name||g.id),f.push(g)):console.log("   Hospital skipped (disabled):",g.name||g.id)}),console.log(` getHospitals returning ${f.length} enabled hospitals`),f}catch(r){throw console.error(" Error fetching hospitals:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),r}},Kd=async(s={})=>{try{const r=ve(V,"users");let c=Ce(r,le("role","==","doctor"));s.country&&(c=Ce(c,le("country","==",s.country))),s.state&&(c=Ce(c,le("state","==",s.state))),s.city&&(c=Ce(c,le("city","==",s.city))),s.specialization&&(c=Ce(c,le("specialization","==",s.specialization)));const u=await Oe(c),f=[];return u.forEach(y=>{const g={id:y.id,...y.data()};g.enabled!==!1&&f.push(g)}),console.log(` getDoctors returning ${f.length} enabled doctors`),f}catch(r){throw console.error("Error fetching doctors:",r),r}},Dx=async()=>{try{const s=new Map;(await Oe(ve(V,"hospitals"))).forEach(y=>{const g=y.data();if(g.country&&g.state&&g.city){s.has(g.country)||s.set(g.country,new Map);const x=s.get(g.country);x.has(g.state)||x.set(g.state,new Set),x.get(g.state).add(g.city)}});const c=Ce(ve(V,"users"),le("role","==","doctor"));(await Oe(c)).forEach(y=>{const g=y.data();if(g.country&&g.state&&g.city){s.has(g.country)||s.set(g.country,new Map);const x=s.get(g.country);x.has(g.state)||x.set(g.state,new Set),x.get(g.state).add(g.city)}});const f={};return s.forEach((y,g)=>{f[g]={},y.forEach((x,j)=>{f[g][j]=Array.from(x).sort()})}),{countries:Array.from(s.keys()).sort(),structured:f}}catch(s){throw console.error("Error fetching locations:",s),s}},Tx=async(s,r="all")=>{try{console.log(" searchProvidersByName called:",{searchTerm:s,providerType:r,searchTermLower:s.toLowerCase()});const c=[],u=s.toLowerCase();if(r==="all"||r==="hospital"){console.log(" Searching hospitals collection...");const f=await Oe(ve(V,"hospitals"));console.log(" Total hospitals in database:",f.size),f.forEach(y=>{const g={id:y.id,...y.data()},x=g.name||"";console.log(" Checking hospital:",{id:y.id,name:x,nameLower:x.toLowerCase(),searchLower:u,enabled:g.enabled!==!1,matches:x.toLowerCase().includes(u)}),g.enabled!==!1&&x&&x.toLowerCase().includes(u)&&(console.log(" Hospital matched:",x),c.push({...g,type:"hospital"}))}),console.log(" Hospitals matched:",c.filter(y=>y.type==="hospital").length)}if(r==="all"||r==="doctor"){console.log(" Searching doctors collection...");const f=Ce(ve(V,"users"),le("role","==","doctor")),y=await Oe(f);console.log(" Total doctors in database:",y.size),y.forEach(g=>{const x={id:g.id,...g.data()},j=x.displayName||"";console.log(" Checking doctor:",{id:g.id,name:j,nameLower:j.toLowerCase(),searchLower:u,enabled:x.enabled!==!1,matches:j.toLowerCase().includes(u)}),x.enabled!==!1&&j.toLowerCase().includes(u)&&(console.log(" Doctor matched:",j),c.push({...x,type:"doctor"}))}),console.log(" Doctors matched:",c.filter(g=>g.type==="doctor").length)}return console.log(" searchProvidersByName final results:",{totalResults:c.length,results:c.map(f=>({id:f.id,name:f.name||f.displayName,type:f.type}))}),c}catch(c){throw console.error(" Error searching providers:",c),c}},zx=async s=>{try{const r=ve(V,"users"),c=Ce(r,le("role","==","doctor"),le("hospitalId","==",s)),u=await Oe(c),f=[];return u.forEach(y=>{const g={id:y.id,uid:y.id,...y.data()};g.enabled!==!1&&f.push(g)}),console.log(` getDoctorsByHospital returning ${f.length} enabled doctors for hospital ${s}`),f}catch(r){throw console.error("Error fetching hospital doctors:",r),r}},Bx=async s=>{try{const{patientPhone:r,patientName:c,appointmentDate:u,appointmentTime:f,hospitalName:y,doctorName:g}=s,x=`Hi ${c}, your appointment is confirmed for ${u} at ${f} with Dr. ${g}${y?` at ${y}`:""}. Thank you for choosing us!`,j=ve(V,"notifications");return await ua(j,{type:"sms",to:r,message:x,status:"pending",appointmentData:{patientName:c,appointmentDate:u,appointmentTime:f,hospitalName:y,doctorName:g},createdAt:new Date().toISOString()}),console.log("SMS notification queued successfully"),{success:!0}}catch(r){return console.error("Error queuing SMS notification:",r),{success:!1,error:r.message}}},Rx=async s=>{try{const{patientEmail:r,patientName:c,appointmentDate:u,appointmentTime:f,hospitalName:y,doctorName:g,reason:x}=s;if(!r)return console.log("No email provided, skipping email notification"),{success:!1,error:"No email provided"};const j=ve(V,"notifications");return await ua(j,{type:"email",to:r,subject:"Appointment Confirmation",html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e0e0e0; border-radius: 10px;">
                    <h2 style="color: #667eea;">Appointment Confirmed! </h2>
                    <p>Dear ${c},</p>
                    <p>Your appointment has been successfully booked.</p>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h3 style="margin-top: 0; color: #333;">Appointment Details</h3>
                        <p><strong>Date:</strong> ${u}</p>
                        <p><strong>Time:</strong> ${f}</p>
                        <p><strong>Doctor:</strong> Dr. ${g}</p>
                        ${y?`<p><strong>Hospital:</strong> ${y}</p>`:""}
                        ${x?`<p><strong>Reason:</strong> ${x}</p>`:""}
                    </div>
                    
                    <p>Please arrive 10 minutes before your scheduled time.</p>
                    <p>If you need to reschedule or cancel, please contact us as soon as possible.</p>
                    
                    <p style="margin-top: 30px;">Best regards,<br/>Healthcare Team</p>
                </div>
            `,status:"pending",appointmentData:{patientName:c,patientEmail:r,appointmentDate:u,appointmentTime:f,hospitalName:y,doctorName:g,reason:x},createdAt:new Date().toISOString()}),console.log("Email notification queued successfully"),{success:!0}}catch(r){return console.error("Error queuing email notification:",r),{success:!1,error:r.message}}},tt={container:{minHeight:"100vh",background:"var(--bg-main)",padding:"clamp(0.75rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)",fontFamily:"var(--font-sans)",color:"var(--text-main)"},mainCard:{maxWidth:"1200px",margin:"0 auto",background:"var(--bg-card)",borderRadius:"16px",boxShadow:"var(--shadow-xl)",overflow:"hidden",border:"1px solid var(--border-subtle)"},header:{background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",padding:"clamp(1rem, 3vw, 2rem)",color:"white",textAlign:"center"},content:{padding:"clamp(1rem, 3vw, 2rem)",display:"grid",gap:"clamp(1rem, 2vw, 2rem)",gridTemplateColumns:"1fr"},twoColumn:{gridTemplateColumns:"1fr"},infoBox:{padding:"clamp(1rem, 2vw, 1.25rem)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",marginBottom:"1rem",fontSize:"0.95rem",background:"var(--bg-main)",border:"1px solid var(--border-subtle)",borderLeft:"4px solid var(--primary)"},input:{padding:"0.75rem",border:"1px solid var(--border-subtle)",borderRadius:"8px",fontSize:"1rem",transition:"all 0.2s ease",width:"100%",boxSizing:"border-box",background:"var(--bg-main)",color:"var(--text-main)"},button:{padding:"0.8rem 1.5rem",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",boxSizing:"border-box"},primaryButton:{background:"var(--primary)",color:"white",boxShadow:"var(--shadow-md)"},secondaryButton:{background:"white",color:"var(--text-secondary)",border:"1px solid var(--border-subtle)"},card:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",boxShadow:"var(--shadow-sm)",border:"1px solid var(--border-subtle)"},providerCard:{background:"var(--bg-main)",borderRadius:"12px",padding:"1.25rem",border:"1px solid var(--border-subtle)",position:"relative",transition:"all 0.2s ease"},sectionTitle:{fontSize:"1.2rem",fontWeight:"700",color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},historyCard:{background:"white",borderRadius:"10px",padding:"1rem",border:"1px solid var(--border-subtle)",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"}},kx=()=>{const[s,r]=b.useState({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:"",state:"",city:""}),[c,u]=b.useState(!1),[f,y]=b.useState(null),[g,x]=b.useState(""),[j,D]=b.useState(!1),[A,M]=b.useState({countries:[],structured:{}}),[C,oe]=b.useState([]),[R,pe]=b.useState([]),[_,ce]=b.useState([]),[N,ie]=b.useState([]),[w,ke]=b.useState(!1),[pt,mt]=b.useState(!1),[P,Ae]=b.useState("location"),[Y,$e]=b.useState(""),[ue,Qe]=b.useState(null),[ht,at]=b.useState(null),[q,se]=b.useState(!0),[me,Fe]=b.useState(null),[Ze,gt]=b.useState([]),[ye,_e]=b.useState(!1),[yt,kt]=b.useState(!1),[Ke,bn]=b.useState(window.innerWidth),[Ft,pn]=b.useState([]),[vt,ln]=b.useState(!1),[Tt,Et]=b.useState(""),[k,Te]=b.useState(null),[fe,Ve]=b.useState(null),qe=A&&Array.isArray(A.countries)&&A.countries.length?A.countries:ih,kn=qe.slice(0,6);b.useEffect(()=>{const O=()=>bn(window.innerWidth);return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const re=Ke<768,Kn=Ke>=768&&Ke<1024,An=Ke>=1024,vi=()=>re?"1fr":"repeat(2, 1fr)";b.useEffect(()=>{(async()=>{se(!0);try{if("geolocation"in navigator)navigator.geolocation.getCurrentPosition(async $=>{const{latitude:xe,longitude:he}=$.coords;console.log("User coordinates:",xe,he);try{const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${xe}&lon=${he}&accept-language=en`)).json();console.log("Geocoding response:",Ee);const xt={country:Ee.address?.country||"India",state:Ee.address?.state||"",city:Ee.address?.city||Ee.address?.town||Ee.address?.village||""};Fe(xt),r(hn=>({...hn,country:xt.country,state:xt.state,city:xt.city})),console.log("User location set:",xt)}catch(ge){console.error("Geocoding error:",ge);const Ee=qt();r(xt=>({...xt,country:Ee}))}se(!1)},$=>{console.warn("Geolocation error:",$.message);const xe=qt();r(he=>({...he,country:xe})),se(!1)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0});else{const $=qt();r(xe=>({...xe,country:$})),se(!1)}}catch($){console.error("Error getting location:",$);const xe=qt();r(he=>({...he,country:xe})),se(!1)}})()},[]);const qt=()=>{try{const O=navigator.language||navigator.userLanguage;console.log("Browser language:",O);const $=Intl.DateTimeFormat().resolvedOptions().timeZone;return console.log("Timezone:",$),$.includes("Kolkata")||$.includes("Mumbai")||$.includes("Delhi")?"India":$.includes("New_York")||$.includes("Los_Angeles")||$.includes("Chicago")?"United States":$.includes("London")?"United Kingdom":$.includes("Dubai")?"United Arab Emirates":$.includes("Singapore")?"Singapore":$.includes("Tokyo")?"Japan":$.includes("Shanghai")||$.includes("Hong_Kong")?"China":$.includes("Sydney")||$.includes("Melbourne")?"Australia":O.startsWith("en-IN")?"India":O.startsWith("en-US")?"United States":O.startsWith("en-GB")?"United Kingdom":O.startsWith("ar")?"United Arab Emirates":"India"}catch(O){return console.error("Error detecting country from browser:",O),"India"}};b.useEffect(()=>{(async()=>{try{console.log("BookAppointment: Loading locations...");const $=await Dx();console.log("BookAppointment: Locations loaded:",$),M($),(!$.countries||$.countries.length===0)&&(console.warn("BookAppointment: No locations found in database!"),x("No healthcare providers found in the database. Please register hospitals or doctors first."))}catch($){console.error("BookAppointment: Error loading locations:",$),x("Failed to load locations. Please check your connection and try again.")}})()},[]),b.useEffect(()=>{if(s.country&&A.structured[s.country]){const O=Object.keys(A.structured[s.country]).sort();oe(O),s.state&&!O.includes(s.state)&&r($=>({...$,state:"",city:""}))}else oe([]),pe([])},[s.country,A.structured]),b.useEffect(()=>{if(s.country&&s.state&&A.structured[s.country]?.[s.state]){const O=A.structured[s.country][s.state];pe(O),s.city&&!O.includes(s.city)&&r($=>({...$,city:""}))}else pe([])},[s.country,s.state,A.structured]),b.useEffect(()=>{const $=setTimeout(async()=>{if(s.phone.replace(/\D/g,"").length>=10){_e(!0);try{const he=await Ax(s.phone);if(he.length>0){gt(he),kt(!0);const ge=he.sort((Ee,xt)=>new Date(xt.createdAt)-new Date(Ee.createdAt))[0];ge.patientName&&!s.patientName&&r(Ee=>({...Ee,patientName:ge.patientName,email:ge.patientEmail||Ee.email}))}else gt([]),kt(!1)}catch(he){console.error("Error fetching appointment history:",he)}finally{_e(!1)}}else gt([]),kt(!1)},500);return()=>clearTimeout($)},[s.phone]),b.useEffect(()=>{(async()=>{if(P!=="name"){if(!s.country){ce([]);return}console.log("BookAppointment: Loading providers...",{providerType:s.providerType,country:s.country,state:s.state,city:s.city}),ke(!0),x("");try{const $={country:s.country,...s.state&&{state:s.state},...s.city&&{city:s.city}};console.log("BookAppointment: Applying filters:",$);let xe=[];s.providerType==="hospital"?(xe=await Gs($),console.log("BookAppointment: Hospitals loaded:",xe.length),console.log("BookAppointment: Hospital details:",xe)):(xe=await Kd($),console.log("BookAppointment: Doctors loaded:",xe.length),console.log("BookAppointment: Doctor details:",xe)),ce(xe),xe.length===0&&(console.warn("BookAppointment: No providers found for filters:",$),console.warn("BookAppointment: Please check if your hospital has these exact location fields:",$))}catch($){console.error("BookAppointment: Error loading providers:",$),x("Failed to load providers. Please try again.")}finally{ke(!1)}}})()},[s.country,s.state,s.city,s.providerType,P]),b.useEffect(()=>{const $=setTimeout(async()=>{if(console.log(" BookAppointment Search Effect Triggered:",{searchMode:P,searchName:Y,providerType:s.providerType,searchNameTrimmed:Y.trim(),searchNameLength:Y.length}),P!=="name"||!Y.trim()){P==="name"&&(console.log(" Clearing providers (empty search)"),ce([]));return}if(Y.length<2){console.log(" Search name too short, waiting for more characters...");return}console.log(" BookAppointment: Searching by name:",Y,"Type:",s.providerType),ke(!0),x("");try{const xe=await Tx(Y,s.providerType);console.log(" BookAppointment: Search results:",xe.length,xe),ce(xe),xe.length===0&&console.warn(" BookAppointment: No providers found matching:",Y)}catch(xe){console.error(" BookAppointment: Error searching providers:",xe),x("Failed to search providers. Please try again.")}finally{ke(!1)}},300);return()=>clearTimeout($)},[Y,s.providerType,P]);const $t=O=>{const{name:$,value:xe}=O.target;if(r({...s,[$]:xe}),$==="country")r(he=>({...he,state:"",city:"",providerId:"",hospitalId:"",doctorId:""})),ce([]),ie([]),Qe(null),at(null);else if($==="state")r(he=>({...he,city:"",providerId:"",hospitalId:"",doctorId:""})),ie([]),Qe(null),at(null);else if($==="city"||$==="providerType")r(he=>({...he,providerId:"",hospitalId:"",doctorId:""})),ie([]),Qe(null),at(null);else if($==="providerId"){const he=_.find(ge=>s.providerType==="hospital"?ge.id===xe:ge.uid===xe||ge.id===xe);console.log("Provider selected:",{value:xe,provider:he,providerType:s.providerType}),Qe(he||null),s.providerType==="hospital"&&xe?(r(ge=>({...ge,hospitalId:xe,doctorId:""})),at(he),rt(xe)):(r(ge=>({...ge,hospitalId:"",doctorId:xe})),ie([]),at(null))}else if($==="doctorId"){const he=N.find(ge=>ge.uid===xe||ge.id===xe);he&&Qe({...ht,selectedDoctor:he})}},rt=async O=>{mt(!0);try{console.log("Loading doctors for hospital:",O);const $=await zx(O);console.log("Hospital doctors loaded:",$),ie($)}catch($){console.error("Error loading hospital doctors:",$),x("Failed to load doctors for this hospital.")}finally{mt(!1)}},Jn=O=>{console.log(" Search mode changed to:",O),Ae(O),r($=>({...$,providerId:""})),ce([]),Qe(null),$e("")},At=async O=>{try{const $=!!O.hospitalId;if(r(xe=>({...xe,providerType:$?"hospital":"doctor",providerId:$?O.hospitalId:O.doctorId})),$){const he=(await Gs({})).find(ge=>ge.id===O.hospitalId);he&&(ce([he]),Qe(he),r(ge=>({...ge,country:he.country||ge.country,state:he.state||ge.state,city:he.city||ge.city})))}else{const he=(await Kd({})).find(ge=>ge.uid===O.doctorId);he&&(ce([he]),Qe(he),r(ge=>({...ge,country:he.country||ge.country,state:he.state||ge.state,city:he.city||ge.city})))}kt(!1)}catch($){console.error("Error selecting previous provider:",$),x("Failed to load previous provider details.")}},on=(O,$)=>{if(!O||!$)return[];const{workingHours:xe,slotDuration:he,workingDays:ge,unavailableDates:Ee,blockedTimeSlots:xt}=O,hn=new Date($).getDay();if(!ge.includes(hn))return[];if(Ee&&Ee.includes($))return[];const En=[],[Nt,Vt]=xe.start.split(":").map(Number),[Hn,Dn]=xe.end.split(":").map(Number);let Ge=Nt*60+Vt;const Nn=Hn*60+Dn;for(;Ge<Nn;){const jt=Math.floor(Ge/60),sn=Ge%60,Mt=`${String(jt).padStart(2,"0")}:${String(sn).padStart(2,"0")}`;xt&&xt.some(di=>di.date===$&&di.time===Mt)||En.push(Mt),Ge+=he}return En};b.useEffect(()=>{(async()=>{if(!s.doctorId||!s.appointmentDate){pn([]),Et("");return}ln(!0),Et("");try{console.log("Fetching slots for doctor:",s.doctorId,"date:",s.appointmentDate);const $=await ic(s.doctorId);console.log("Doctor availability:",$),Te($);const xe=on($,s.appointmentDate);console.log("Generated slots:",xe);const he=ve(V,"appointments"),ge=Ce(he,le("doctorId","==",s.doctorId),le("appointmentDate","==",s.appointmentDate),le("status","in",["pending","confirmed"])),xt=(await Oe(ge)).docs.map(En=>En.data().appointmentTime);console.log("Booked times:",xt);const hn=xe.filter(En=>!xt.includes(En));console.log("Available slots:",hn),pn(hn)}catch($){console.error("Error fetching time slots:",$),Et(`Failed to load slots: ${$.message}`),pn([])}finally{ln(!1)}})()},[s.doctorId,s.appointmentDate]);const mn=async O=>{O.preventDefault(),D(!0),x(""),u(!1);try{if(console.log("Booking appointment...",s),!s.patientName||!s.phone||!s.dob)throw new Error("Name, phone number, and date of birth are required");if(s.providerType==="hospital"){if(!s.hospitalId)throw new Error("Please select a hospital");if(!s.doctorId)throw new Error("Please select a doctor from the hospital")}else if(!s.doctorId)throw new Error("Please select a doctor");console.log("Checking slot availability before booking...");const $=ve(V,"appointments"),xe=Ce($,le("doctorId","==",s.doctorId),le("appointmentDate","==",s.appointmentDate),le("appointmentTime","==",s.appointmentTime),le("status","in",["pending","confirmed"]));if(!(await Oe(xe)).empty)throw new Error("This time slot is no longer available. Please select a different time.");const ge={patientName:s.patientName,patientPhone:s.phone,patientDob:s.dob,patientEmail:s.email||null,appointmentDate:s.appointmentDate,appointmentTime:s.appointmentTime,reason:s.reason,status:"pending",country:s.country,state:s.state,city:s.city};if(s.providerType==="hospital"){ge.hospitalId=s.hospitalId,ge.hospitalName=ht?.name||"",ge.doctorId=s.doctorId;const Ee=N.find(xt=>(xt.uid||xt.id)===s.doctorId);Ee&&(ge.doctorName=Ee.displayName||Ee.name,ge.specialization=Ee.specialization)}else{const Ee=_.find(xt=>(xt.uid||xt.id)===s.doctorId);if(!Ee)throw new Error("Selected doctor not found");ge.doctorId=Ee.uid||Ee.id,ge.doctorName=Ee.displayName||Ee.name,ge.specialization=Ee.specialization,Ee.hospitalId&&(ge.hospitalId=Ee.hospitalId,ge.hospitalName=Ee.hospitalName||"")}await Cx(ge),console.log("Appointment booked successfully!"),Promise.all([Bx(ge),Rx(ge)]).then(([Ee,xt])=>{console.log("SMS result:",Ee),console.log("Email result:",xt)}).catch(Ee=>{console.error("Notification error (non-blocking):",Ee)}),y(ge),u(!0),x(""),ge.hospitalId&&localStorage.setItem("lastUsedHospitalId",ge.hospitalId),console.log(" Success state set:",{success:!0,bookedAppointment:ge}),window.scrollTo({top:0,behavior:"smooth"}),r({patientName:"",phone:"",dob:"",email:"",appointmentDate:"",appointmentTime:"",reason:"",providerType:"hospital",providerId:"",hospitalId:"",doctorId:"",country:me?.country||qt(),state:me?.state||"",city:me?.city||""}),ce([]),ie([]),Qe(null),at(null),$e(""),gt([]),kt(!1),window.scrollTo({top:0,behavior:"smooth"})}catch($){console.error("Error booking appointment:",$),x($.message||"Failed to book appointment. Please try again.")}finally{D(!1)}};return t.jsx("div",{style:tt.container,children:t.jsxs("div",{style:tt.mainCard,children:[t.jsxs("div",{style:tt.header,children:[t.jsxs("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:28})}),"Book an Appointment"]}),t.jsx("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,fontSize:"1rem"},children:"No registration required! Just fill in your details to book."})]}),t.jsxs("div",{style:{...tt.content,...ue&&An?tt.twoColumn:{}},children:[t.jsxs("div",{children:[q&&t.jsxs("div",{style:{...tt.infoBox,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",color:"#1565c0"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Detecting your location to show nearby providers..."})]}),me&&!q&&t.jsxs("div",{style:{...tt.infoBox,background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",color:"#155724"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("span",{children:["Location detected: ",me.city&&`${me.city}, `,me.state,", ",me.country]})]}),c&&f&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%)",border:"2px solid #28a745",borderRadius:"15px",padding:"clamp(1.25rem, 3vw, 2rem)",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(40, 167, 69, 0.2)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid #28a745"},children:[t.jsx("span",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},children:""}),t.jsxs("div",{children:[t.jsx("h3",{style:{margin:0,color:"#155724",fontSize:"clamp(1.2rem, 4vw, 1.8rem)",fontWeight:"700"},children:"Appointment Confirmed!"}),t.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"#155724",fontSize:"clamp(0.9rem, 2.5vw, 1rem)",opacity:.8},children:"Your booking has been successfully confirmed"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"1rem"},children:[t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"PATIENT"}),t.jsx("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:f.patientName}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.patientPhone]})]}),t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DATE & TIME"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",new Date(f.appointmentDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.appointmentTime]})]}),f.doctorName&&t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"DOCTOR"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.doctorName]}),f.specialization&&t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:f.specialization})]}),f.hospitalName?t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"HOSPITAL"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.hospitalName]}),t.jsxs("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:[" ",f.city,", ",f.state]})]}):t.jsxs("div",{style:{background:"white",padding:"clamp(0.85rem, 2vw, 1rem)",borderRadius:"10px",border:"1px solid #c3e6cb"},children:[t.jsx("div",{style:{fontSize:"clamp(0.75rem, 2vw, 0.85rem)",color:"#155724",opacity:.7,marginBottom:"0.25rem",fontWeight:"600"},children:"LOCATION"}),t.jsxs("div",{style:{fontSize:"clamp(0.95rem, 2.5vw, 1.1rem)",color:"#155724",fontWeight:"600"},children:[" ",f.city,", ",f.state]}),t.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#155724",opacity:.8,marginTop:"0.25rem"},children:f.country})]})]}),t.jsxs("div",{style:{marginTop:"1.5rem",padding:"clamp(0.85rem, 2vw, 1rem)",background:"rgba(255, 255, 255, 0.5)",borderRadius:"10px",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",color:"#155724",lineHeight:"1.6"},children:[t.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:[" Confirmation sent to: ",f.patientEmail]}),t.jsx("div",{style:{opacity:.8},children:" We'll send you an SMS confirmation shortly. Please arrive 10 minutes before your appointment time."})]}),t.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("button",{type:"button",onClick:()=>{u(!1),y(null)},style:{...tt.button,...tt.primaryButton,flex:"1 1 200px"},children:" Book Another Appointment"}),t.jsx(bi,{to:"/",style:{...tt.button,...tt.secondaryButton,flex:"1 1 200px",textDecoration:"none",background:"white",border:"2px solid #28a745",color:"#155724"},children:" Go to Home"})]})]}),g&&t.jsxs("div",{style:{...tt.infoBox,background:"linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)",color:"#721c24"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:g})]}),!c&&t.jsxs("form",{onSubmit:mn,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[t.jsxs("div",{style:tt.card,children:[t.jsxs("div",{style:tt.sectionTitle,children:[t.jsx("span",{children:""})," Personal Information"]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsx("input",{name:"patientName",type:"text",placeholder:"Full Name *",required:!0,value:s.patientName,onChange:$t,style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{name:"dob",type:"date",placeholder:"Date of Birth *",required:!0,value:s.dob,onChange:$t,max:new Date().toISOString().split("T")[0],style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"}),t.jsx("small",{style:{color:"#666",fontSize:"0.8rem",display:"block",marginTop:"0.25rem"},children:" Date of Birth (Required for patient records)"})]}),t.jsx("input",{name:"phone",type:"tel",placeholder:"Phone Number *",required:!0,value:s.phone,onChange:$t,style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"}),ye&&t.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"-0.5rem"},children:" Checking previous appointments..."}),t.jsx("input",{name:"email",type:"email",placeholder:"Email (optional)",value:s.email,onChange:$t,style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"})]})]}),yt&&Ze.length>0&&t.jsxs("div",{style:tt.card,children:[t.jsxs("div",{style:tt.sectionTitle,children:[t.jsx("span",{children:""})," Previous Appointments",t.jsx("span",{style:{marginLeft:"auto",background:"#667eea",color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:Ze.length})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",maxHeight:"300px",overflowY:"auto"},children:Ze.slice(0,5).map(O=>t.jsx("div",{style:tt.historyCard,onClick:()=>At(O),onMouseEnter:$=>{$.currentTarget.style.borderColor="#667eea",$.currentTarget.style.transform="translateX(5px)",$.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.2)"},onMouseLeave:$=>{$.currentTarget.style.borderColor="#e9ecef",$.currentTarget.style.transform="translateX(0)",$.currentTarget.style.boxShadow="none"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("p",{style:{margin:0,fontWeight:"600",fontSize:"1rem",color:"#333"},children:O.hospitalName||O.doctorName}),O.specialization&&t.jsx("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem",color:"#666"},children:O.specialization}),t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.85rem",color:"#999"},children:[new Date(O.appointmentDate).toLocaleDateString()," ",t.jsx("span",{style:{textTransform:"capitalize",color:O.status==="completed"?"#28a745":"#ffc107",marginLeft:"0.25rem"},children:O.status})]})]}),t.jsx("span",{style:{fontSize:"0.85rem",color:"#667eea",fontWeight:"600",whiteSpace:"nowrap",marginLeft:"1rem"},children:"Book Again "})]})},O.id))}),t.jsx("button",{type:"button",onClick:()=>kt(!1),style:{marginTop:"0.75rem",padding:"0.5rem",background:"transparent",border:"none",color:"#666",fontSize:"0.9rem",cursor:"pointer",textDecoration:"underline"},children:"Hide history"})]}),t.jsxs("div",{style:tt.card,children:[t.jsxs("div",{style:tt.sectionTitle,children:[t.jsx("span",{children:""})," Find Hospital or Doctor"]}),fe&&!s.hospitalId&&s.providerType==="hospital"&&t.jsxs("div",{onClick:()=>{r(O=>({...O,country:fe.country||O.country,state:fe.state||O.state,city:fe.city||O.city})),ce([fe]),Qe(fe),r(O=>({...O,country:fe.country,state:fe.state,city:fe.city,hospitalId:fe.id,providerId:fe.id})),rt(fe.id)},style:{background:"#f0f9ff",border:"1px solid #bae6fd",padding:"1rem",borderRadius:"10px",marginBottom:"1.5rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("div",{style:{fontSize:"1.5rem"},children:""}),t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",color:"#0369a1"},children:["Book again with ",fe.name||fe.displayName]}),t.jsxs("div",{style:{fontSize:"0.9rem",color:"#0c4a6e"},children:[fe.city,", ",fe.state]})]}),t.jsx("div",{style:{marginLeft:"auto",color:"#0284c7",fontWeight:"600"},children:"Select "})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>Jn("location"),style:{...tt.button,flex:1,background:P==="location"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:P==="location"?"white":"#666",boxShadow:P==="location"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Location"}),t.jsx("button",{type:"button",onClick:()=>Jn("name"),style:{...tt.button,flex:1,background:P==="name"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:P==="name"?"white":"#666",boxShadow:P==="name"?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:" By Name"})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{fontSize:"0.95rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Book with:"}),t.jsxs("select",{name:"providerType",value:s.providerType,onChange:$t,style:{...tt.input,cursor:"pointer"},children:[t.jsx("option",{value:"hospital",children:" Hospital"}),t.jsx("option",{value:"doctor",children:" Doctor"})]})]}),P==="name"?t.jsx("input",{type:"text",placeholder:`Search ${s.providerType==="hospital"?"hospital":"doctor"} by name...`,value:Y,onChange:O=>$e(O.target.value),style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("select",{name:"country",value:s.country,onChange:$t,required:!0,style:{...tt.input,cursor:"pointer",backgroundColor:"white"},children:[t.jsx("option",{value:"",children:"Select Country *"}),t.jsx("optgroup",{label:"Popular",children:kn.map(O=>t.jsx("option",{value:O,children:O},`pop-${O}`))}),t.jsx("optgroup",{label:"All Countries",children:qe.map(O=>t.jsx("option",{value:O,children:O},O))})]}),t.jsxs("select",{name:"state",value:s.state,onChange:$t,required:P==="location",disabled:!s.country||C.length===0,style:tt.input,children:[t.jsx("option",{value:"",children:s.country?C.length===0?"No states available":"Select State/Province *":"Select country first"}),C.map(O=>t.jsx("option",{value:O,children:O},O))]}),t.jsxs("select",{name:"city",value:s.city,onChange:$t,disabled:!s.state||R.length===0,style:tt.input,children:[t.jsx("option",{value:"",children:s.state?R.length===0?"No cities available":"Select City (optional)":"Select state first"}),R.map(O=>t.jsx("option",{value:O,children:O},O))]})]}),t.jsxs("div",{style:{marginTop:"1rem"},children:[_.length>0&&t.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem",background:"#e8f5e9",padding:"0.5rem",borderRadius:"5px"},children:[" Found ",_.length," ",s.providerType==="hospital"?"hospital(s)":"doctor(s)"]}),t.jsxs("select",{name:"providerId",value:s.providerId,onChange:$t,required:!0,disabled:w||P==="location"&&!s.country||P==="name"&&Y.length<2,style:tt.input,children:[t.jsx("option",{value:"",children:w?" Loading...":`Select ${s.providerType==="hospital"?"Hospital":"Doctor"} *`}),_.map(O=>{const $=s.providerType==="hospital"?O.id:O.uid||O.id,xe=O.name||O.displayName||"Unnamed Provider";return console.log("Rendering provider option:",{id:$,name:xe,provider:O}),t.jsxs("option",{value:$,children:[xe,O.specialization&&` - ${O.specialization}`,O.city&&` (${O.city})`]},$)})]}),_.length===0&&(P==="location"&&s.state||P==="name"&&Y.length>=2)&&!w&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["No ",s.providerType==="hospital"?"hospitals":"doctors"," found. Try a different ",P==="location"?"location":"search term","."]})]})]}),s.providerType==="hospital"&&s.hospitalId&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsxs("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:["Select Doctor at ",ht?.name," *"]}),t.jsxs("select",{name:"doctorId",value:s.doctorId,onChange:$t,required:!0,disabled:pt,style:tt.input,children:[t.jsx("option",{value:"",children:pt?" Loading doctors...":"Select a doctor *"}),N.map(O=>t.jsxs("option",{value:O.id||O.uid,children:[O.displayName||O.name,O.specialization&&` - ${O.specialization}`]},O.id||O.uid))]}),N.length===0&&!pt&&t.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fff3cd",color:"#856404",borderRadius:"10px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"No doctors available at this hospital yet. The hospital needs to add doctors to their staff."})]})]})]}),t.jsxs("div",{style:tt.card,children:[t.jsxs("div",{style:tt.sectionTitle,children:[t.jsx("span",{children:""})," Appointment Details"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:vi(),gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Date *"}),t.jsx("input",{name:"appointmentDate",type:"date",required:!0,value:s.appointmentDate,onChange:$t,min:new Date().toISOString().split("T")[0],style:tt.input,onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Time Slot *"}),s.doctorId?s.appointmentDate?Tt?t.jsxs("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem",border:"1px solid #fcc"},children:[" ",Tt]}):vt?t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#667eea",fontSize:"0.9rem",textAlign:"center"},children:"Loading available slots..."}):Ft.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fee",borderRadius:"8px",color:"#c33",fontSize:"0.9rem"},children:"No available slots for this date. Please select another date."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"0.75rem",marginTop:"0.5rem"},children:Ft.map(O=>t.jsxs("button",{type:"button",onClick:()=>r($=>({...$,appointmentTime:O})),style:{padding:"0.75rem",borderRadius:"8px",border:s.appointmentTime===O?"2px solid #667eea":"2px solid #e0e0e0",background:s.appointmentTime===O?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"white",color:s.appointmentTime===O?"#667eea":"#333",fontWeight:s.appointmentTime===O?"600":"500",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",boxShadow:s.appointmentTime===O?"0 2px 8px rgba(102, 126, 234, 0.3)":"none"},onMouseEnter:$=>{s.appointmentTime!==O&&($.target.style.borderColor="#667eea",$.target.style.background="#f8f9fa")},onMouseLeave:$=>{s.appointmentTime!==O&&($.target.style.borderColor="#e0e0e0",$.target.style.background="white")},children:[" ",O]},O))}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a date to view available time slots"}):t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",color:"#666",fontSize:"0.9rem"},children:"Please select a doctor first to view available time slots"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#555",marginBottom:"0.5rem",display:"block"},children:"Reason for visit (optional)"}),t.jsx("textarea",{name:"reason",placeholder:"Describe your symptoms or reason for visit...",value:s.reason,onChange:$t,rows:"4",style:{...tt.input,resize:"vertical",fontFamily:"inherit"},onFocus:O=>O.target.style.borderColor="#667eea",onBlur:O=>O.target.style.borderColor="#e0e0e0"})]})]}),t.jsx("button",{type:"submit",disabled:j,style:{...tt.button,...tt.primaryButton,opacity:j?.7:1,cursor:j?"not-allowed":"pointer",fontSize:"1.1rem",padding:"1rem"},onMouseEnter:O=>{j||(O.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0)"},children:j?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Booking..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""})," Book Appointment"]})}),t.jsxs("div",{style:{textAlign:"center",padding:"1.5rem",background:"#f8f9fa",borderRadius:"12px",marginTop:"1rem"},children:[t.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.95rem"},children:"Are you a doctor or hospital?"}),t.jsx(bi,{to:"/register",style:{color:"#667eea",fontWeight:"600",fontSize:"1rem",textDecoration:"none"},children:"Register here "})]})]})]}),ue&&t.jsxs("div",{style:tt.providerCard,children:[t.jsxs("div",{style:tt.sectionTitle,children:[t.jsx("span",{children:""})," Selected Provider"]}),t.jsxs("div",{style:{marginTop:"1.5rem"},children:[t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontWeight:"700",fontSize:"1.3rem",marginBottom:"0.75rem",color:"#667eea",lineHeight:"1.3"},children:ue.name||ue.displayName}),ue.specialization&&t.jsx("div",{style:{display:"inline-block",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0.4rem 0.9rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:ue.specialization})]}),(ue.email||ue.phone)&&t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px",marginBottom:"1rem"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Contact"}),ue.email&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{style:{wordBreak:"break-word"},children:ue.email})]}),ue.phone&&t.jsxs("p",{style:{margin:"0.5rem 0",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:ue.phone})]})]}),t.jsxs("div",{style:{padding:"1rem",background:"white",borderRadius:"12px"},children:[t.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",color:"#666",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:" Address"}),t.jsxs("p",{style:{margin:0,fontSize:"0.95rem",lineHeight:"1.6",color:"#555"},children:[ue.address&&t.jsxs(t.Fragment,{children:[ue.address,t.jsx("br",{})]}),ue.city&&t.jsxs(t.Fragment,{children:[ue.city,", "]}),ue.state&&t.jsxs(t.Fragment,{children:[ue.state,t.jsx("br",{})]}),ue.country||"N/A"]})]})]})]})]})]})})},Ex=()=>{const[s,r]=b.useState({email:"",password:"",name:"Admin",setupKey:""}),[c,u]=b.useState(""),[f,y]=b.useState(!1),[g,x]=b.useState(!1),j=Il(),{currentUser:D,userProfile:A}=Ia();b.useEffect(()=>{D?A?.role!=="admin"&&j("/dashboard"):j("/")},[D,A,j]);const M=async C=>{C.preventDefault(),x(!0),u("");try{const oe=eh(),pe=await ec(oe,"createSecureAdmin")({email:s.email,password:s.password,name:s.name,setupKey:s.setupKey});y(!0),r({email:"",password:"",name:"Admin",setupKey:""}),setTimeout(()=>{j(D?"/dashboard":"/login")},2e3)}catch(oe){console.error("Error creating admin:",oe),u(oe.message||"Failed to create admin user. Check your setup key and try again."),x(!1)}};return t.jsx("div",{style:It.container,children:t.jsxs("div",{style:It.card,children:[t.jsxs("div",{style:It.header,children:[t.jsx("div",{style:It.icon,children:""}),t.jsx("h2",{style:It.title,children:"Setup Admin User"})]}),t.jsxs("div",{style:It.warningBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"SECURITY NOTICE"}),t.jsxs("p",{style:{margin:0,fontSize:"0.9rem",lineHeight:"1.5"},children:["This is a protected operation. You need the admin setup key from your Firebase Functions config.",D&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("strong",{children:"Note:"})," As an admin, you can create additional admin accounts."]})]})]}),f&&t.jsxs("div",{style:It.successBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),"Admin user created successfully! Redirecting..."]}),c&&t.jsxs("div",{style:It.errorBox,children:[t.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:""}),c]}),t.jsxs("form",{onSubmit:M,style:It.form,children:[t.jsxs("div",{style:It.inputGroup,children:[t.jsx("label",{style:It.label,children:"Admin Name"}),t.jsx("input",{name:"name",type:"text",placeholder:"Enter admin name",required:!0,value:s.name,onChange:C=>r({...s,name:C.target.value}),style:It.input})]}),t.jsxs("div",{style:It.inputGroup,children:[t.jsx("label",{style:It.label,children:"Admin Email"}),t.jsx("input",{name:"email",type:"email",placeholder:"admin@example.com",required:!0,value:s.email,onChange:C=>r({...s,email:C.target.value}),style:It.input})]}),t.jsxs("div",{style:It.inputGroup,children:[t.jsx("label",{style:It.label,children:"Password"}),t.jsx("input",{name:"password",type:"password",placeholder:"Minimum 8 characters",required:!0,minLength:"8",value:s.password,onChange:C=>r({...s,password:C.target.value}),style:It.input})]}),t.jsxs("div",{style:It.inputGroup,children:[t.jsx("label",{style:It.label,children:"Admin Setup Key "}),t.jsx("input",{name:"setupKey",type:"password",placeholder:"Enter setup key from Firebase config",required:!0,value:s.setupKey,onChange:C=>r({...s,setupKey:C.target.value}),style:It.input}),t.jsx("small",{style:It.hint,children:"Get this from: firebase functions:config:get admin.setup_key"})]}),t.jsx("button",{type:"submit",disabled:g,style:{...It.button,opacity:g?.7:1,cursor:g?"not-allowed":"pointer"},children:g?" Creating Admin...":" Create Admin User"})]}),t.jsxs("div",{style:It.infoBox,children:[t.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:"#333"},children:" Setup Instructions"}),t.jsxs("ol",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",lineHeight:"1.8",fontSize:"0.9rem"},children:[t.jsxs("li",{children:["Set the setup key: ",t.jsx("code",{style:It.code,children:'firebase functions:config:set admin.setup_key="YOUR_SECRET_KEY"'})]}),t.jsxs("li",{children:["Deploy functions: ",t.jsx("code",{style:It.code,children:"firebase deploy --only functions"})]}),t.jsx("li",{children:"Enter admin details and setup key above"}),t.jsxs("li",{children:[t.jsx("strong",{children:"After creating first admin:"})," Set ",t.jsx("code",{style:It.code,children:"VITE_ENABLE_ADMIN_SETUP=false"})]}),t.jsx("li",{children:"Existing admins can create more admins without this page"})]})]})]})})},It={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{maxWidth:"550px",width:"100%",background:"white",borderRadius:"20px",padding:"2.5rem",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},header:{textAlign:"center",marginBottom:"2rem"},icon:{fontSize:"3rem",marginBottom:"0.5rem"},title:{margin:0,color:"#333",fontSize:"1.8rem"},warningBox:{padding:"1.5rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"12px",marginBottom:"1.5rem",textAlign:"center",color:"#856404"},successBox:{padding:"1rem",background:"#d4edda",color:"#155724",borderRadius:"12px",marginBottom:"1rem",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"500"},errorBox:{padding:"1rem",background:"#f8d7da",color:"#721c24",borderRadius:"12px",marginBottom:"1rem",display:"flex",alignItems:"center",fontSize:"0.95rem"},form:{display:"flex",flexDirection:"column",gap:"1.25rem",marginBottom:"1.5rem"},inputGroup:{display:"flex",flexDirection:"column",gap:"0.5rem"},label:{fontSize:"0.9rem",fontWeight:"600",color:"#555"},input:{padding:"0.875rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"10px",outline:"none",transition:"border-color 0.2s",fontFamily:"inherit"},hint:{fontSize:"0.8rem",color:"#888",fontStyle:"italic"},button:{padding:"1rem",fontSize:"1rem",fontWeight:"600",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",marginTop:"0.5rem",transition:"transform 0.2s, box-shadow 0.2s"},infoBox:{padding:"1.25rem",background:"#f8f9fa",borderRadius:"12px",fontSize:"0.9rem",color:"#666",border:"1px solid #dee2e6"},code:{background:"#e9ecef",padding:"0.2rem 0.4rem",borderRadius:"4px",fontSize:"0.85rem",fontFamily:"monospace",color:"#495057"}},Nx=()=>{const[s,r]=b.useState(!1),[c,u]=b.useState(!1),[f,y]=b.useState(""),g=async()=>{try{r(!0),y(""),console.log(" Creating billing configuration...");const x=Re(V,"config","billing");await Zn(x,{currency:"USD",appointmentCost:50,prescriptionCost:20,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log(" Billing configuration created!"),u(!0)}catch(x){console.error(" Error:",x),y(x.message)}finally{r(!1)}};return t.jsx("div",{style:qn.container,children:t.jsxs("div",{style:qn.card,children:[t.jsx("h1",{style:qn.title,children:" Setup Billing Configuration"}),c?t.jsxs("div",{style:qn.successBox,children:[t.jsx("div",{style:qn.successIcon,children:""}),t.jsx("h2",{style:qn.successTitle,children:"Configuration Created!"}),t.jsx("p",{style:qn.successText,children:"The billing configuration has been successfully created."}),t.jsx("p",{style:qn.successText,children:"You can now access the Admin Dashboard to manage billing."}),t.jsx("button",{onClick:()=>window.location.href="/dashboard",style:qn.button,children:"Go to Dashboard"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:qn.description,children:"This will create the global billing configuration with default values:"}),t.jsxs("div",{style:qn.configBox,children:[t.jsxs("div",{style:qn.configItem,children:[t.jsx("strong",{children:"Currency:"})," USD"]}),t.jsxs("div",{style:qn.configItem,children:[t.jsx("strong",{children:"Appointment Cost:"})," $50"]}),t.jsxs("div",{style:qn.configItem,children:[t.jsx("strong",{children:"Prescription Cost:"})," $20"]})]}),t.jsx("p",{style:qn.note,children:" You can modify these values later from the Admin Dashboard > Config tab"}),f&&t.jsxs("div",{style:qn.error,children:[" Error: ",f]}),t.jsx("button",{onClick:g,disabled:s,style:qn.button,children:s?"Creating...":" Create Billing Config"})]})]})})},qn={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"3rem",maxWidth:"600px",width:"100%",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"},title:{fontSize:"2rem",color:"#333",marginBottom:"1.5rem",textAlign:"center"},description:{fontSize:"1.1rem",color:"#666",marginBottom:"1.5rem",lineHeight:"1.6"},configBox:{background:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem"},configItem:{padding:"0.5rem 0",fontSize:"1.1rem",color:"#333"},note:{background:"#e3f2fd",borderLeft:"4px solid #2196f3",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#1976d2"},error:{background:"#ffebee",borderLeft:"4px solid #f44336",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem",color:"#c62828"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"transform 0.3s"},successBox:{textAlign:"center"},successIcon:{fontSize:"4rem",marginBottom:"1rem"},successTitle:{fontSize:"1.8rem",color:"#27ae60",marginBottom:"1rem"},successText:{fontSize:"1.1rem",color:"#666",marginBottom:"1rem",lineHeight:"1.6"}},Mx=()=>{const[s,r]=b.useState(!1),[c,u]=b.useState(""),f=Il(),y=async()=>{try{r(!0),u("Setting up multi-currency configuration...");const g=Re(V,"config","billing"),x=await Yt(g),D={...x.exists()?x.data():{},rates:{INR:{currency:"INR",symbol:"",appointmentCost:500,prescriptionCost:200},GBP:{currency:"GBP",symbol:"",appointmentCost:5,prescriptionCost:2}},updatedAt:new Date().toISOString()};await Zn(g,D,{merge:!0}),u(" Multi-currency configuration updated successfully!"),setTimeout(()=>{f("/dashboard")},2e3)}catch(g){console.error("Error setting up multi-currency:",g),u(" Error: "+g.message)}finally{r(!1)}};return t.jsx("div",{style:da.container,children:t.jsxs("div",{style:da.card,children:[t.jsx("h1",{style:da.title,children:" Multi-Currency Setup"}),t.jsxs("div",{style:da.info,children:[t.jsx("h3",{children:"This will configure your billing system with:"}),t.jsxs("ul",{style:da.list,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"INR ()"})," - For India: 500/appointment, 200/prescription"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"GBP ()"})," - For all other countries: 5/appointment, 2/prescription"]})]}),t.jsxs("div",{style:da.note,children:[t.jsx("strong",{children:" Note:"})," Currency is automatically selected based on the doctor/hospital's country field. Payment gateways will handle currency conversion if needed."]})]}),c&&t.jsx("div",{style:{...da.message,backgroundColor:c.includes("")?"#d4edda":"#f8d7da",color:c.includes("")?"#155724":"#721c24"},children:c}),t.jsx("button",{onClick:y,disabled:s,style:{...da.button,opacity:s?.6:1,cursor:s?"not-allowed":"pointer"},children:s?"Setting up...":" Setup Multi-Currency"}),t.jsx("button",{onClick:()=>f("/dashboard"),style:da.backButton,children:" Back to Dashboard"})]})})},da={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},card:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"600px",width:"100%",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},title:{color:"#667eea",marginBottom:"1.5rem",textAlign:"center"},info:{marginBottom:"2rem"},list:{marginLeft:"1.5rem",marginTop:"1rem",lineHeight:"2"},note:{marginTop:"1.5rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},message:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",textAlign:"center",fontWeight:"500"},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},backButton:{width:"100%",padding:"0.75rem",background:"#f5f5f5",color:"#666",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"}},Hx=()=>{const[s,r]=b.useState(null),[c,u]=b.useState([]),[f,y]=b.useState([]),[g,x]=b.useState(!0);b.useEffect(()=>{j()},[]);const j=async()=>{try{const D=Re(V,"config","billing"),A=await Yt(D),M=A.exists()?A.data():null;r(M);const C=Ce(ve(V,"users"),le("role","==","doctor")),R=(await Oe(C)).docs.map(ce=>({id:ce.id,...ce.data()}));u(R.slice(0,5));const _=(await Oe(ve(V,"hospitals"))).docs.map(ce=>({id:ce.id,...ce.data()}));y(_.slice(0,5)),x(!1)}catch(D){console.error("Error loading data:",D),x(!1)}};return g?t.jsx("div",{style:_t.container,children:"Loading..."}):t.jsxs("div",{style:_t.container,children:[t.jsx("h1",{style:_t.title,children:" Currency Debug Tool"}),t.jsxs("div",{style:_t.section,children:[t.jsx("h2",{children:" Global Config"}),t.jsx("pre",{style:_t.code,children:JSON.stringify(s,null,2)}),!s?.rates&&t.jsxs("div",{style:_t.warning,children:[" ",t.jsx("strong",{children:"No multi-currency rates found!"}),t.jsx("br",{}),"Go to ",t.jsx("a",{href:"/setup-multi-currency",children:"/setup-multi-currency"})," to set it up."]})]}),t.jsxs("div",{style:_t.section,children:[t.jsx("h2",{children:" Sample Doctors (First 5)"}),c.map(D=>{const A=Ll(D,s);return t.jsxs("div",{style:_t.card,children:[t.jsxs("div",{style:_t.cardHeader,children:[t.jsx("strong",{children:D.displayName||"No Name"}),t.jsx("span",{style:_t.badge,children:D.country||" No Country"})]}),t.jsxs("div",{style:_t.cardBody,children:[t.jsxs("div",{children:["Email: ",D.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:D.country||" NOT SET"})]}),t.jsxs("div",{style:_t.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",A.currency," ",A.symbol,t.jsx("br",{}),"Appointment: ",A.symbol,A.appointmentCost,t.jsx("br",{}),"Prescription: ",A.symbol,A.prescriptionCost]}),D.customRates&&t.jsx("div",{style:_t.customBadge,children:"Has Custom Rates"})]})]},D.id)})]}),t.jsxs("div",{style:_t.section,children:[t.jsx("h2",{children:" Sample Hospitals (First 5)"}),f.map(D=>{const A=Ll(D,s);return t.jsxs("div",{style:_t.card,children:[t.jsxs("div",{style:_t.cardHeader,children:[t.jsx("strong",{children:D.name||"No Name"}),t.jsx("span",{style:_t.badge,children:D.country||" No Country"})]}),t.jsxs("div",{style:_t.cardBody,children:[t.jsxs("div",{children:["Email: ",D.email]}),t.jsxs("div",{children:["Country: ",t.jsx("strong",{children:D.country||" NOT SET"})]}),t.jsxs("div",{style:_t.ratesBox,children:[t.jsx("strong",{children:"Detected Currency:"})," ",A.currency," ",A.symbol,t.jsx("br",{}),"Appointment: ",A.symbol,A.appointmentCost,t.jsx("br",{}),"Prescription: ",A.symbol,A.prescriptionCost]}),D.customRates&&t.jsx("div",{style:_t.customBadge,children:"Has Custom Rates"})]})]},D.id)})]}),t.jsxs("div",{style:_t.section,children:[t.jsx("h2",{children:" Test Cases"}),t.jsxs("div",{style:_t.testCase,children:[t.jsx("strong",{children:"Test: India"}),t.jsx("pre",{style:_t.code,children:JSON.stringify(ko("India",s),null,2)})]}),t.jsxs("div",{style:_t.testCase,children:[t.jsx("strong",{children:"Test: United Kingdom"}),t.jsx("pre",{style:_t.code,children:JSON.stringify(ko("United Kingdom",s),null,2)})]}),t.jsxs("div",{style:_t.testCase,children:[t.jsx("strong",{children:"Test: USA"}),t.jsx("pre",{style:_t.code,children:JSON.stringify(ko("USA",s),null,2)})]})]})]})},_t={container:{padding:"2rem",maxWidth:"1200px",margin:"0 auto",fontFamily:"system-ui, -apple-system, sans-serif"},title:{color:"#667eea",marginBottom:"2rem"},section:{marginBottom:"3rem",background:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},code:{background:"#f5f5f5",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"0.9rem"},warning:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",color:"#856404"},card:{marginBottom:"1rem",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden"},cardHeader:{padding:"1rem",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},cardBody:{padding:"1rem"},badge:{padding:"0.25rem 0.75rem",background:"#667eea",color:"white",borderRadius:"12px",fontSize:"0.85rem"},ratesBox:{marginTop:"1rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px",borderLeft:"4px solid #2196f3"},customBadge:{marginTop:"0.5rem",padding:"0.5rem",background:"#fff3e0",borderRadius:"4px",fontSize:"0.85rem",color:"#e65100"},testCase:{marginBottom:"1rem"}},Ux=()=>{const{currentUser:s,userProfile:r}=Ia(),c=Il(),[u,f]=b.useState(!1),[y,g]=b.useState(null),x=(A,M="success")=>{g({message:A,type:M}),setTimeout(()=>g(null),3e3)},j=()=>{s?.uid&&(navigator.clipboard.writeText(s.uid),f(!0),x("UID copied to clipboard!"),setTimeout(()=>f(!1),2e3))},D=()=>{s?.email&&(navigator.clipboard.writeText(s.email),x("Email copied to clipboard!"))};return s?t.jsxs("div",{style:nt.container,children:[y&&t.jsx("div",{style:{...nt.notification,background:y.type==="success"?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"linear-gradient(135deg, #f5576c 0%, #fa709a 100%)"},children:y.message}),t.jsxs("div",{style:nt.header,children:[t.jsx("button",{onClick:()=>c("/dashboard"),style:nt.backButton,children:" Back to Dashboard"}),t.jsx("h1",{style:{margin:0,fontSize:"clamp(1.5rem, 4vw, 2.5rem)"},children:" My Profile Information"})]}),t.jsxs("div",{style:nt.card,children:[t.jsxs("div",{style:nt.cardHeader,children:[t.jsx("h2",{style:{margin:0,color:"#333"},children:" User Details"}),t.jsx("span",{style:nt.roleBadge,children:r?.role?.toUpperCase()||"USER"})]}),t.jsxs("div",{style:nt.infoGrid,children:[t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"User ID (UID)"})]}),t.jsx("div",{style:nt.infoValue,children:t.jsx("code",{style:nt.code,children:s.uid})}),t.jsx("button",{onClick:j,style:{...nt.button,...nt.copyButton,background:u?"#38ef7d":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u?" Copied!":" Copy UID"})]}),t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Address"})]}),t.jsx("div",{style:nt.infoValue,children:s.email||"No email provided"}),s.email&&t.jsx("button",{onClick:D,style:{...nt.button,...nt.copyButton},children:" Copy Email"})]}),t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Display Name"})]}),t.jsx("div",{style:nt.infoValue,children:r?.displayName||"Not set"})]}),r?.phone&&t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Phone Number"})]}),t.jsx("div",{style:nt.infoValue,children:r.phone})]}),r?.hospitalId&&t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Hospital ID"})]}),t.jsx("div",{style:nt.infoValue,children:t.jsx("code",{style:nt.code,children:r.hospitalId})})]}),s.metadata?.creationTime&&t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem",display:"inline-flex",lineHeight:0},children:t.jsx(an,{size:20})}),t.jsx("span",{children:"Account Created"})]}),t.jsx("div",{style:nt.infoValue,children:new Date(s.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{style:nt.infoCard,children:[t.jsxs("div",{style:nt.infoLabel,children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:""}),t.jsx("span",{children:"Email Verification"})]}),t.jsx("div",{style:nt.infoValue,children:t.jsx("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",background:s.emailVerified?"#38ef7d":"#ffa502",color:"white",fontSize:"0.9rem",fontWeight:"600"},children:s.emailVerified?" Verified":" Not Verified"})})]})]}),t.jsxs("div",{style:nt.infoBox,children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#333"},children:"What is UID?"}),t.jsx("p",{style:{margin:0,color:"#666",lineHeight:"1.6"},children:"Your User ID (UID) is a unique identifier assigned to your account. It's used internally by the system to manage your data securely. You might need this when contacting support or for administrative purposes."})]})]}),t.jsx("style",{children:`
                @keyframes slideDown {
                    from {
                        transform: translateY(-100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                button:active {
                    transform: translateY(0);
                }
            `})]}):t.jsx("div",{style:nt.container,children:t.jsx("div",{style:nt.card,children:t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),t.jsx("h2",{style:{color:"#333",marginBottom:"1rem"},children:"Authentication Required"}),t.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Please log in to view your user information"}),t.jsx("button",{onClick:()=>c("/login"),style:{...nt.button,...nt.primaryButton},children:"Go to Login"})]})})})},nt={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"clamp(1rem, 3vw, 2rem)",position:"relative"},notification:{position:"fixed",top:"2rem",right:"2rem",padding:"1rem 2rem",borderRadius:"10px",color:"white",fontWeight:"600",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,animation:"slideDown 0.3s ease"},header:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1rem, 3vw, 2rem)",marginBottom:"2rem",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"1rem"},backButton:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",alignSelf:"flex-start",transition:"all 0.3s ease"},card:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"clamp(1.5rem, 3vw, 2.5rem)",boxShadow:"0 10px 40px rgba(0,0,0,0.1)",maxWidth:"1200px",margin:"0 auto"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e0e0e0",flexWrap:"wrap",gap:"1rem"},roleBadge:{padding:"0.5rem 1.5rem",borderRadius:"20px",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",fontSize:"0.9rem",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},infoCard:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"15px",padding:"1.5rem",border:"2px solid #e0e0e0",transition:"all 0.3s ease"},infoLabel:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",color:"#666",fontSize:"0.9rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"1.1rem",color:"#333",fontWeight:"500",marginBottom:"1rem",wordBreak:"break-all"},code:{background:"#f5f5f5",padding:"0.5rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.9rem",display:"block"},button:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.3s ease",width:"100%"},primaryButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},copyButton:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},infoBox:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"15px",padding:"2rem",textAlign:"center",border:"2px solid #667eea"}};async function Ox(){console.log(" Starting hospital role migration...");try{const s=await Oe(ve(V,"hospitals"));console.log(` Found ${s.size} hospitals`);let r=0,c=0,u=0;for(const f of s.docs){const y=f.data(),g=y.ownerId;if(!g){console.log(`  Hospital ${f.id} has no ownerId, skipping`),u++;continue}console.log(`
 Processing hospital: ${y.name} (${f.id})`),console.log(`   Owner UID: ${g}`);const x=Re(V,"users",g),j=await Yt(x);if(!j.exists()){console.log(` User document not found for UID: ${g}`),u++;continue}const D=j.data();console.log(`   Current role: ${D.role||"MISSING"}`),D.role==="hospital"?(console.log(" Already has correct role"),c++):(console.log(" Updating role to 'hospital'..."),await Wt(x,{role:"hospital",hospitalId:f.id}),console.log(" Role updated successfully!"),r++)}return console.log(`
`+"=".repeat(50)),console.log(" MIGRATION SUMMARY:"),console.log("=".repeat(50)),console.log(` Fixed: ${r}`),console.log(`  Already correct: ${c}`),console.log(` Errors: ${u}`),console.log(` Total processed: ${s.size}`),console.log("=".repeat(50)),{success:!0,fixed:r,alreadyCorrect:c,errors:u,total:s.size}}catch(s){return console.error(" Migration failed:",s),{success:!1,error:s.message}}}const Lx=()=>{const[s,r]=b.useState([]),[c,u]=b.useState([]),[f,y]=b.useState([]),[g,x]=b.useState(!0),[j,D]=b.useState(null),[A,M]=b.useState(!1);b.useEffect(()=>{C()},[]);const C=async()=>{try{const R=await Oe(ve(V,"hospitals")),pe=[];R.forEach(w=>{pe.push({id:w.id,...w.data()})}),r(pe),console.log(" Hospitals collection:",pe);const _=await Oe(Ce(ve(V,"users"),le("role","==","hospital"))),ce=[];_.forEach(w=>{ce.push({id:w.id,...w.data()})}),y(ce),console.log(" Hospital users:",ce);const N=await Kd({});u(N),console.log(" Doctors:",N);const ie=await Gs({});console.log(" getHospitals() result:",ie)}catch(R){console.error("Error loading data:",R)}finally{x(!1)}},oe=async()=>{if(confirm('This will update all hospital users to have role="hospital". Continue?')){M(!0),D(null);try{const R=await Ox();D(R),await C()}catch(R){console.error("Migration error:",R),D({success:!1,error:R.message})}finally{M(!1)}}};return g?t.jsx("div",{style:{padding:"2rem"},children:"Loading database data..."}):t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace"},children:[t.jsx("h1",{children:" Database Debug Page"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("h3",{style:{marginTop:0},children:" Fix Hospital Roles"}),t.jsx("p",{children:"If hospitals are not showing up when booking, click this button to fix their roles:"}),t.jsx("button",{onClick:oe,disabled:A,style:{padding:"0.75rem 1.5rem",background:A?"#ccc":"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:A?"not-allowed":"pointer"},children:A?" Fixing...":" Fix Hospital Roles Now"}),j&&t.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:j.success?"#d4edda":"#f8d7da",borderRadius:"8px"},children:j.success?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Complete!"})}),t.jsxs("div",{children:["Fixed: ",j.fixed]}),t.jsxs("div",{children:["Already correct: ",j.alreadyCorrect]}),t.jsxs("div",{children:["Errors: ",j.errors]}),t.jsxs("div",{children:["Total: ",j.total]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx("strong",{children:" Migration Failed"})}),t.jsx("div",{children:j.error})]})})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospitals Collection (",s.length,")"]}),s.length===0?t.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[" No hospitals found in 'hospitals' collection",t.jsx("br",{}),t.jsx("strong",{children:"Problem:"})," Hospitals are not being saved during registration!"]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:s.map(R=>t.jsxs("div",{style:{padding:"1rem",background:"#e8f5e9",borderRadius:"8px",border:"2px solid #4caf50"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",R.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",R.name||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",R.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",R.country||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",R.state||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",R.city||" MISSING"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",R.address||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",R.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Owner ID:"})," ",R.ownerId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",R.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",R.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",R.city||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",R.address||"N/A"]})]},R.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Hospital Users (role='hospital') (",f.length,")"]}),f.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No users with role='hospital' found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:f.map(R=>t.jsxs("div",{style:{padding:"1rem",background:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196f3"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",R.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",R.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",R.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Role:"})," ",R.role]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",R.hospitalId||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",R.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",R.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",R.city||"N/A"]})]},R.id))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("h2",{children:[" Doctors (",c.length,")"]}),c.length===0?t.jsx("div",{style:{padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:" No doctors found"}):t.jsx("div",{style:{display:"grid",gap:"1rem"},children:c.map(R=>t.jsxs("div",{style:{padding:"1rem",background:"#f3e5f5",borderRadius:"8px",border:"2px solid #9c27b0"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"UID:"})," ",R.uid]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",R.displayName||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",R.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Specialization:"})," ",R.specialization||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Hospital ID:"})," ",R.hospitalId||"Independent"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",R.country||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",R.state||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",R.city||"N/A"]})]},R.id))})]}),t.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f5f5f5",borderRadius:"8px"},children:[t.jsx("h3",{children:" Summary"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Hospitals in 'hospitals' collection: ",t.jsx("strong",{children:s.length})]}),t.jsxs("li",{children:["Users with role='hospital': ",t.jsx("strong",{children:f.length})]}),t.jsxs("li",{children:["Doctors: ",t.jsx("strong",{children:c.length})]})]}),t.jsx("h3",{children:" What to Check"}),t.jsxs("ol",{style:{lineHeight:"1.8"},children:[t.jsx("li",{children:"If hospitals collection is empty, registration is not creating hospital documents"}),t.jsx("li",{children:"If hospitalUsers is empty, users aren't getting role='hospital' during registration"}),t.jsx("li",{children:"Check if hospital documents have location fields (country, state, city)"}),t.jsx("li",{children:"The BookAppointment page filters by location, so missing location = won't show up"})]}),t.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px"},children:[t.jsx("strong",{children:" Solution:"})," If hospitals have no location data:",t.jsx("br",{}),"1. Go to Firebase Console  Firestore  hospitals collection",t.jsx("br",{}),"2. Edit each hospital document and add: country, state, city",t.jsx("br",{}),"3. OR re-register the hospital with complete profile"]})]}),t.jsx("button",{onClick:C,style:{marginTop:"2rem",padding:"1rem 2rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:" Refresh Data"})]})},Px=()=>{const[s,r]=b.useState(null),[c,u]=b.useState(!1),f=async()=>{u(!0),r(`Starting test...
`);const y=`test_hospital_${Date.now()}@test.com`,g="TestPass123!",x=`Test Hospital ${Date.now()}`;try{r(N=>N+`
 Test 1: Registering hospital...`),r(N=>N+`
   Email: ${y}`),r(N=>N+`
   Name: ${x}`);const j=await nh(y,g,x,"hospital",{country:"Test Country",state:"Test State",city:"Test City",address:"Test Address"});r(N=>N+`
 Registration successful!`),r(N=>N+`
   User UID: ${j.uid}`),r(N=>N+`
   Hospital ID: ${j.hospitalId||"NOT SET"}`),await new Promise(N=>setTimeout(N,2e3)),r(N=>N+`

 Test 2: Checking hospitals collection...`);const D=await Oe(ve(V,"hospitals"));r(N=>N+`
   Found ${D.size} hospitals`);let A=!1;D.forEach(N=>{const ie=N.data();r(w=>w+`
   - ${ie.name} (${N.id})`),ie.email===y&&(A=!0,r(w=>w+"  OUR TEST HOSPITAL "))}),A||r(N=>N+`
 Our test hospital NOT found in hospitals collection!`),r(N=>N+`

 Test 3: Checking users collection...`),r(N=>N+`
   Looking for user: ${j.uid}`);const{doc:M,getDoc:C}=await _s(async()=>{const{doc:N,getDoc:ie}=await import("./firebase-p-DgfaJy.js").then(w=>w.K);return{doc:N,getDoc:ie}},[]),oe=M(V,"users",j.uid),R=await C(oe);let pe=!1;if(R.exists()){pe=!0;const N=R.data();r(ie=>ie+`
    Found user: ${N.displayName} (${R.id})`),r(ie=>ie+`
     Email: ${N.email}`),r(ie=>ie+`
     Role: ${N.role||"NOT SET"} ${N.role==="hospital"?"":""}`),r(ie=>ie+`
     HospitalID: ${N.hospitalId||"NOT SET"}`)}else r(N=>N+`
 User document not found!`);pe||r(N=>N+`
 Our test user NOT found in users collection!`),r(N=>N+`

 Test 4: Testing getHospitals() function...`);const _=await Gs({});r(N=>N+`
   getHospitals() returned ${_.length} hospitals`);const ce=_.find(N=>N.email===y);r(ce?N=>N+`
 Our test hospital found via getHospitals()!`:N=>N+`
 Our test hospital NOT found via getHospitals()!`),r(N=>N+`

`+"=".repeat(50)),A&&pe&&ce?r(N=>N+`
 ALL TESTS PASSED - Hospital registration is working!`):(r(N=>N+`
 SOME TESTS FAILED - There is an issue with registration`),A||r(N=>N+`
   - Hospital not in hospitals collection`),pe||r(N=>N+`
   - User not in users collection`),ce||r(N=>N+`
   - getHospitals() not returning hospital`)),r(N=>N+`
`+"=".repeat(50))}catch(j){r(D=>D+`

 ERROR: ${j.message}`),r(D=>D+`
   Code: ${j.code||"N/A"}`),r(D=>D+`
   Stack: ${j.stack}`),console.error("Test error:",j)}finally{u(!1)}};return t.jsxs("div",{style:{padding:"2rem",fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[t.jsx("h1",{children:" Hospital Registration Test"}),t.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"8px"},children:[t.jsx("p",{children:t.jsx("strong",{children:"This test will:"})}),t.jsxs("ol",{children:[t.jsx("li",{children:"Register a new test hospital"}),t.jsx("li",{children:"Check if it appears in hospitals collection"}),t.jsx("li",{children:"Check if user has correct role in users collection"}),t.jsx("li",{children:"Test if getHospitals() returns it"})]}),t.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#666"},children:[t.jsx("strong",{children:"Note:"})," This will create a real test hospital in your database. You can delete it later from Firebase Console if needed."]})]}),t.jsx("button",{onClick:f,disabled:c,style:{padding:"1rem 2rem",background:c?"#ccc":"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:c?"not-allowed":"pointer",marginBottom:"2rem"},children:c?" Running Tests...":" Run Test"}),s&&t.jsx("div",{style:{padding:"1.5rem",background:"#1e1e1e",color:"#00ff00",borderRadius:"8px",fontSize:"0.9rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"Consolas, Monaco, monospace",maxHeight:"600px",overflow:"auto"},children:s})]})},Ix=()=>{const[s,r]=b.useState([]),[c,u]=b.useState(!1),[f,y]=b.useState(""),g=async()=>{u(!0);try{const j=await Oe(ve(V,"hospitals")),D=[];j.forEach(A=>{D.push({id:A.id,...A.data()})}),r(D),y(`Loaded ${D.length} hospitals`)}catch(j){y(`Error: ${j.message}`)}finally{u(!1)}},x=async(j,D)=>{try{await Wt(Re(V,"hospitals",j),{country:D.country,state:D.state,city:D.city,address:D.address||""}),y(A=>A+`
 Updated ${j}`),await g()}catch(A){y(M=>M+`
 Failed ${j}: ${A.message}`)}};return t.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[t.jsx("h1",{children:" Fix Hospital Locations"}),t.jsx("button",{onClick:g,disabled:c,style:{padding:"1rem 2rem",background:"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:c?"not-allowed":"pointer",marginBottom:"2rem"},children:c?"Loading...":" Load Hospitals"}),f&&t.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"2rem",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:f}),t.jsx("div",{style:{display:"grid",gap:"1rem"},children:s.map(j=>{const D=j.country&&j.state&&j.city;return t.jsxs("div",{style:{padding:"1.5rem",background:D?"#e8f5e9":"#fff3cd",border:`2px solid ${D?"#4caf50":"#ffc107"}`,borderRadius:"12px"},children:[t.jsxs("h3",{style:{marginTop:0},children:[D?"":""," ",j.name]}),t.jsxs("div",{style:{marginBottom:"1rem",fontSize:"0.9rem"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"ID:"})," ",j.id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Email:"})," ",j.email||"N/A"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Country:"})," ",j.country||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"State:"})," ",j.state||t.jsx("span",{style:{color:"red"},children:" MISSING"})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"City:"})," ",j.city||t.jsx("span",{style:{color:"red"},children:" MISSING"})]})]}),!D&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsx("h4",{children:"Add Location:"}),t.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[t.jsx("input",{type:"text",placeholder:"Country",id:`country-${j.id}`,defaultValue:j.country||"",style:Ro.input}),t.jsx("input",{type:"text",placeholder:"State",id:`state-${j.id}`,defaultValue:j.state||"",style:Ro.input}),t.jsx("input",{type:"text",placeholder:"City",id:`city-${j.id}`,defaultValue:j.city||"",style:Ro.input}),t.jsx("input",{type:"text",placeholder:"Address (optional)",id:`address-${j.id}`,defaultValue:j.address||"",style:Ro.input}),t.jsx("button",{onClick:()=>{const A=document.getElementById(`country-${j.id}`).value,M=document.getElementById(`state-${j.id}`).value,C=document.getElementById(`city-${j.id}`).value,oe=document.getElementById(`address-${j.id}`).value;if(!A||!M||!C){alert("Country, State, and City are required!");return}x(j.id,{country:A,state:M,city:C,address:oe})},style:Ro.button,children:" Save Location"})]})]})]},j.id)})})]})},Ro={input:{padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem"},button:{padding:"0.75rem 1.5rem",background:"#4caf50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"}},_x=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Privacy Policy"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'This Privacy Policy describes how Souldoc ("we", "us", or "our") collects, uses, and shares personal information when you use our services. We are committed to protecting your privacy and will handle your personal information in accordance with applicable laws.'}),t.jsx("h2",{children:"Information We Collect"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Account information (name, email, phone) when you register or book appointments."}),t.jsx("li",{children:"Appointment and payment history."}),t.jsx("li",{children:"Device and usage information (IP address, browser, logs) to improve service quality."})]}),t.jsx("h2",{children:"How We Use Information"}),t.jsx("p",{children:"We use the information to provide, maintain, and improve our services, process transactions, communicate with you, and for fraud prevention."}),t.jsx("h2",{children:"Sharing and Disclosure"}),t.jsx("p",{children:"We may share information with service providers, payment processors, and when required by law. We do not sell personal information."}),t.jsx("h2",{children:"Data Security"}),t.jsx("p",{children:"We maintain reasonable administrative and technical safeguards to protect personal information. However, no method of transmission over the Internet is completely secure."}),t.jsx("h2",{children:"Your Rights"}),t.jsxs("p",{children:["You may access, correct, or request deletion of your personal information. To do so, contact us at ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]}),t.jsx("h2",{children:"Changes"}),t.jsx("p",{children:"We may update this policy from time to time. We will post any changes on this page with a revised date."})]}),qx=()=>t.jsxs("div",{style:{padding:"2rem",maxWidth:"900px",margin:"0 auto"},children:[t.jsx("h1",{children:"Terms of Service"}),t.jsx("p",{children:"Last updated: December 10, 2025"}),t.jsx("p",{children:'These Terms of Service ("Terms") govern your access to and use of Souldoc (the "Service"). By using the Service you agree to these Terms.'}),t.jsx("h2",{children:"Use of the Service"}),t.jsx("p",{children:"You may use the Service only in compliance with these Terms and all applicable laws. You must provide accurate information during registration and booking."}),t.jsx("h2",{children:"Payments"}),t.jsx("p",{children:"Payments processed through the Service are subject to our billing policies. We may use third-party payment processors; their terms will also apply."}),t.jsx("h2",{children:"Intellectual Property"}),t.jsx("p",{children:"All content, trademarks, and software provided on the Service are the property of Souldoc or its licensors."}),t.jsx("h2",{children:"Limitation of Liability"}),t.jsx("p",{children:"To the maximum extent permitted by law, Souldoc will not be liable for any indirect, incidental, or consequential damages arising from your use of the Service."}),t.jsx("h2",{children:"Governing Law"}),t.jsx("p",{children:"These Terms are governed by the laws of the jurisdiction in which the company operates. Any disputes will be resolved under those laws."}),t.jsx("h2",{children:"Contact"}),t.jsxs("p",{children:["Questions about these Terms should be sent to ",t.jsx("a",{href:"mailto:pauljos@gmail.com",children:"pauljos@gmail.com"}),"."]})]}),Gx=({children:s})=>{const{isAuthenticated:r,loading:c}=Ia();return c?t.jsx("div",{children:"Loading..."}):r?s:t.jsx(xg,{to:"/login"})};function Wx(){return t.jsx(gg,{children:t.jsxs(yg,{children:[t.jsx(Xn,{path:"/",element:t.jsx(Wg,{})}),t.jsx(Xn,{path:"/book",element:t.jsx(kx,{})}),t.jsx(Xn,{path:"/login",element:t.jsx(zy,{})}),t.jsx(Xn,{path:"/register",element:t.jsx(Uy,{})}),t.jsx(Xn,{path:"/setup-admin",element:t.jsx(Ex,{})}),t.jsx(Xn,{path:"/setup-billing",element:t.jsx(Nx,{})}),t.jsx(Xn,{path:"/setup-multi-currency",element:t.jsx(Mx,{})}),t.jsx(Xn,{path:"/debug-currency",element:t.jsx(Hx,{})}),t.jsx(Xn,{path:"/privacy",element:t.jsx(_x,{})}),t.jsx(Xn,{path:"/terms",element:t.jsx(qx,{})}),t.jsx(Xn,{path:"/get-my-uid",element:t.jsx(Ux,{})}),t.jsx(Xn,{path:"/debug-database",element:t.jsx(Lx,{})}),t.jsx(Xn,{path:"/test-hospital",element:t.jsx(Px,{})}),t.jsx(Xn,{path:"/fix-hospitals",element:t.jsx(Ix,{})}),t.jsx(Xn,{path:"/dashboard",element:t.jsx(Gx,{children:t.jsx(wx,{})})})]})})}Gg.createRoot(document.getElementById("root")).render(t.jsx(b.StrictMode,{children:t.jsx(Hy,{children:t.jsx(Wx,{})})}));
